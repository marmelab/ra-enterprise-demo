{"version":3,"sources":["dataProvider/localStorageProvider.js","tours/data.js","dataProvider/rest.js"],"names":["VALID_UNTIL","Date","mergeById","a","b","notInB","filter","aItem","find","bItem","id","inBoth","notInA","map","playedOn","sort","c","d","tours","image","title","tour","comment","href","restProvider","simpleRestProvider","delayedDataProvider","Proxy","get","target","name","self","resource","params","provider","defaultState","collection","JSON","parse","localStorage","getItem","set","item","setItem","stringify","update","data","newItem","otherItem","remove","getList","pagination","Object","keys","reduce","acc","key","value","o","total","length","field","order","page","perPage","slice","getOne","validUntil","getMany","ids","include","getManyReference","updateMany","res","create","push","delete","deleteMany","localStorageProvider","Promise","resolve","setTimeout"],"mappings":"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","file":"static/js/7.7c1a728e.chunk.js","sourcesContent":["const VALID_UNTIL = new Date() + 3600 * 24 * 365;\n\nconst mergeById = (a, b) => {\n  const notInB = a.filter((aItem) => !b.find((bItem) => aItem.id === bItem.id));\n  const inBoth = a.filter((aItem) => b.find((bItem) => aItem.id === bItem.id));\n  const notInA = b.filter((bItem) => !a.find((aItem) => bItem.id === aItem.id));\n  return [\n    ...notInB,\n    ...inBoth.map((aItem) => {\n      const bItem = b.find((bItem) => aItem.id === bItem.id);\n      return { ...aItem, playedOn: bItem.playedOn };\n    }),\n    ...notInA,\n  ].sort((c, d) => c.id - d.id);\n};\nexport default (defaultState = {}) => {\n  const get = (name) => {\n    const collection = JSON.parse(localStorage.getItem(name)) || [];\n    return mergeById(defaultState[name], collection);\n  };\n\n  const set = (name, item) => {\n    return localStorage.setItem(name, JSON.stringify(item));\n  };\n\n  const update = (resource, { id, data }) => {\n    let collection = get(resource);\n\n    let item = collection.find((item) => item.id === id);\n\n    if (!item) {\n      return { data: null };\n    }\n\n    const newItem = { ...item, ...data, id };\n\n    set(resource, [\n      ...collection.filter((otherItem) => otherItem.id !== id),\n      newItem,\n    ]);\n\n    return { data: newItem };\n  };\n\n  const remove = (resource, { id }) => {\n    let collection = get(resource);\n\n    const item = collection.find((item) => item.id === id);\n\n    if (!item) {\n      return { data: null };\n    }\n\n    collection = collection.filter((item) => item.id !== id);\n\n    set(resource, collection);\n\n    return { data: item };\n  };\n\n  return {\n    getList: (resource, { filter, sort, pagination }) => {\n      let collection = get(resource);\n\n      if (filter) {\n        collection = Object.keys(filter).reduce(\n          (acc, key) => {\n            const value = filter[key];\n            return acc.filter((o) => o[key] === value);\n          },\n          [...collection]\n        );\n      }\n      const total = collection.length;\n      if (sort) {\n        const { field, order } = sort;\n        collection = collection.sort((a, b) =>\n          order === \"ASC\" ? a[field] - b[field] : b[field] - a[field]\n        );\n      }\n      if (pagination) {\n        const { page, perPage } = pagination;\n        collection = collection.slice((page - 1) * perPage, page * perPage - 1);\n      }\n\n      return {\n        data: collection,\n        total,\n      };\n    },\n\n    getOne: (resource, { id }) => {\n      let collection = get(resource);\n\n      let item = collection.find((item) => item.id === id);\n\n      return {\n        data: item,\n        validUntil: VALID_UNTIL,\n      };\n    },\n\n    getMany: (resource, { ids }) => {\n      let collection = get(resource);\n\n      let items = collection.filter((item) => ids.include(item.id));\n\n      return {\n        data: items,\n        validUntil: VALID_UNTIL,\n      };\n    },\n\n    getManyReference: (resource, { filter, sort, pagination }) => {\n      let collection = get(resource);\n\n      if (filter) {\n        collection = Object.keys(filter).reduce(\n          (acc, key) => {\n            const value = filter[key];\n            return acc.filter((o) => o[key] === value);\n          },\n          [...collection]\n        );\n      }\n      const total = collection.length;\n      if (sort) {\n        const { field, order } = sort;\n        collection = collection.sort((a, b) =>\n          order === \"ASC\" ? a[field] - b[field] : b[field] - a[field]\n        );\n      }\n      if (pagination) {\n        const { page, perPage } = pagination;\n        collection = collection.slice((page - 1) * perPage, page * perPage - 1);\n      }\n\n      return {\n        data: collection,\n        total,\n      };\n    },\n\n    update,\n    updateMany: (resource, { ids, data }) => {\n      const updateResults = ids.map((id) => update(resource, { id, data }));\n\n      return {\n        data: updateResults\n          .filter((res) => res.data && res.data.id)\n          .map((res) => res.data.id),\n      };\n    },\n\n    create: (resource, { data }) => {\n      let collection = get(resource);\n\n      const id = collection.length + 1;\n      const item = collection.find((item) => item.id === id);\n\n      if (item) {\n        return;\n      }\n\n      const newItem = { ...data, id: id };\n      collection.push(newItem);\n\n      set(resource, collection);\n\n      return newItem;\n    },\n\n    delete: remove,\n\n    deleteMany: (resource, { ids }) => {\n      const deleteResults = ids.map((id) => remove(resource, { id }));\n\n      return {\n        data: deleteResults\n          .filter((res) => res.data && res.data.id)\n          .map((res) => res.data.id),\n      };\n    },\n  };\n};\n","export default {\n  tours: [\n    {\n      id: 1,\n      image: \"images/tours/ra-markdown.jpg\",\n      title: \"ra-markdown\",\n      tour: \"ra-markdown\",\n      comment: `\nFor applications that need to display and edit Markdown content.\n      `,\n      href: \"http://marmelab.com/react-admin\",\n      playedOn: null\n    },\n    {\n      id: 2,\n      image: \"images/tours/ra-preferences.jpg\",\n      title: \"ra-preferences\",\n      tour: \"ra-preferences\",\n      comment: `\nThis module provides a way to store and persist user preferences in local storage. These preferences are device dependent, so this module is particularly fitted for UI preferences.\n      `,\n      href: \"http://marmelab.com/react-admin\",\n      playedOn: null\n    },\n  ],\n};\n","import simpleRestProvider from \"ra-data-simple-rest\";\nimport localStorageProvider from \"./localStorageProvider\";\n\nimport defaultState from '../tours/data';\n\nconst restProvider = simpleRestProvider(\"http://localhost:4000\");\n\nconst delayedDataProvider = new Proxy(restProvider, {\n  get: (target, name, self) =>\n    name === \"then\" // as we await for the dataProvider, JS calls then on it. We must trap that call or else the dataProvider will be called with the then method\n      ? self\n      : (resource, params) => {\n          let provider = restProvider;\n          if (resource === \"tours\") {\n            provider = localStorageProvider(defaultState);\n          }\n          return new Promise((resolve) =>\n            setTimeout(() => resolve(provider[name](resource, params)), 500)\n          );\n        },\n});\n\nexport default delayedDataProvider;\n"],"sourceRoot":""}