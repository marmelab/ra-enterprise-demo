var at=Object.defineProperty;var c=(n,a)=>at(n,"name",{value:a,configurable:!0});import{ah as ne,ai as Nn,aj as it,ak as ut,u as ye,K as Ae,al as Ie,L as Pn,m as An,a9 as ot,am as dn,n as A,an as dt,ao as cn,k as ct,ap as st,z as Pe,aq as Dn,J as ge,C as kn,ar as ft,as as lt,at as Ce,au as Se,av as je,aw as sn,ax as Rn,ay as ht,az as Te,a3 as de,aA as fn,aB as vt,aC as yt,aD as gt,aE as Mn,aF as mt,aG as we,aH as Tn,j as N,ad as We,T as bt,aI as wt,ag as pt,I as _t,f as Ot,aJ as $n,aK as xt,x as Ct,ac as St,aL as jt,aM as Et,aN as Nt,r as Pt,i as At,aO as qn,aP as Bn,aQ as Ln,aR as Kn,aS as Dt,l as In,aT as Wn,aU as Qn,aV as kt,aW as Rt,M as Mt,O as Tt,aX as Qe,d as $t,aY as qt,aZ as ke,a5 as Bt,a_ as Lt,a$ as Kt}from"./index-BhMi_fzc.js";import{b2 as va,b0 as ya,b1 as ga,b5 as ma,b8 as ba,b7 as wa,b6 as pa,b9 as _a,bb as Oa,ba as xa,b3 as Ca,b4 as Sa}from"./index-BhMi_fzc.js";var ze=function(){return ze=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},ze.apply(this,arguments)},It=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Wt=c(function(n){n===void 0&&(n={});var a=n.disableAuthentication,e=a===void 0?!1:a,t=n.id,r=n.queryOptions,i=r===void 0?{}:r,d=ne(n);if(!d)throw new Error("useShowController requires a non-empty resource prop or context");var f=Nn({enabled:!e}).isPending,s=it({action:"show",resource:d,enabled:!f}).isPending,u=ut(d),o=ye(),l=Ae(),b=Ie(),w=Pn(),x=An().id;if(!x&&!t)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var S=t??x,_=i.meta,m=It(i,["meta"]),v=ot(d,{id:S,meta:_},ze({enabled:!f&&!s||e,onError:c(function(){l("ra.notification.item_doesnt_exist",{type:"error"}),b("list",d),w()},"onError"),retry:!1},m)),h=v.data,y=v.error,g=v.isLoading,O=v.isFetching,C=v.isPending,j=v.refetch;if(h&&h.id&&h.id!=S)throw new Error("useShowController: Fetched record's id attribute (".concat(h.id,") must match the requested 'id' (").concat(S,")"));var p=dn(),E=u(h),P=o("ra.page.show",{name:p(d,1),id:S,record:h,recordRepresentation:typeof E=="string"?E:""});return{defaultTitle:P,error:y,isLoading:g,isFetching:O,isPending:C,record:h,refetch:j,resource:d}},"useShowController"),ln=A.createContext(null);ln.displayName="ShowContext";var Qt=c(function(n){var a=n.children,e=n.value;return A.createElement(ln.Provider,{value:e},A.createElement(dt,{value:e&&e.record},a))},"ShowContextProvider"),Ut=c(function(){var n=A.useContext(ln);if(!n)throw new Error("useShowContext must be used inside a ShowContextProvider");return n},"useShowContext"),Ve=function(){return Ve=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Ve.apply(this,arguments)},Gt=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},zt=c(function(n){var a=cn(n).hasEdit;return A.createElement(ct,Ve({},Vt(n)),a&&A.createElement(st,null))},"ShowActions"),Vt=c(function(n){n.hasCreate,n.hasEdit,n.hasShow,n.hasList,n.resource;var a=Gt(n,["hasCreate","hasEdit","hasShow","hasList","resource"]);return a},"sanitizeRestProps$1"),Xe=function(){return Xe=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Xe.apply(this,arguments)},Xt=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Ee,Ht=A.createElement(zt,null),Jt=c(function(n){var a,e=n.actions,t=n.aside,r=n.children,i=n.className,d=n.component,f=d===void 0?kn:d,s=n.emptyWhileLoading,u=s===void 0?!1:s,o=n.title,l=Xt(n,["actions","aside","children","className","component","emptyWhileLoading","title"]),b=Ut(),w=b.resource,x=b.defaultTitle,S=b.record,_=cn().hasEdit,m=typeof e>"u"&&_?Ht:e;return!r||!S&&u?null:A.createElement(Yt,Xe({className:Pe("show-page",i)},l),o!==!1&&A.createElement(Dn,{title:o,defaultTitle:x,preferenceKey:"".concat(w,".show.title")}),m!==!1&&m,A.createElement("div",{className:Pe(Oe.main,(a={},a[Oe.noActions]=!m,a))},A.createElement(f,{className:Oe.card},r),t))},"ShowView"),Re="RaShow",Oe={main:"".concat(Re,"-main"),noActions:"".concat(Re,"-noActions"),card:"".concat(Re,"-card")},Yt=ge("div",{name:Re,overridesResolver:c(function(n,a){return a.root},"overridesResolver")})((Ee={},Ee["& .".concat(Oe.main)]={display:"flex"},Ee["& .".concat(Oe.noActions)]={marginTop:"1em"},Ee["& .".concat(Oe.card)]={flex:"1 1 auto"},Ee)),U=function(){return U=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},U.apply(this,arguments)},ae=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},ie=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},aa=c(function(n,a,e,t){a===void 0&&(a="parent_id"),e===void 0&&(e="position"),t===void 0&&(t=!1);var r=t?ft:lt,i=U(U({},n),{getTree:c(function(d,f){return ae(void 0,void 0,void 0,function(){var s,u;return ie(this,function(o){switch(o.label){case 0:return[4,n.getList(d,{filter:f==null?void 0:f.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f==null?void 0:f.meta})];case 1:return s=o.sent().data,u=s.map(function(l){return U(U({},l),{children:s.filter(function(b){return b[a]==l.id}).sort(function(b,w){return b[e]-w[e]}).map(function(b){return b.id})})}),[2,{data:u}]}})})},"getTree"),getRootNodes:c(function(d,f){return ae(void 0,void 0,void 0,function(){var s,u,o;return ie(this,function(l){switch(l.label){case 0:return[4,n.getList(d,{filter:U(U({},f==null?void 0:f.filter),(o={},o[a]=null,o)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f==null?void 0:f.meta})];case 1:return s=l.sent().data,[4,Promise.all(s.map(function(b){var w;return n.getList(d,{filter:(w={},w[a]=b.id,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f==null?void 0:f.meta}).then(function(x){var S=x.data;return U(U({},b),{children:S.map(function(_){var m=_.id;return m})})})}))];case 2:return u=l.sent(),[2,{data:u}]}})})},"getRootNodes"),getParentNode:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w=u.childId,x=u.meta;return ie(this,function(S){switch(S.label){case 0:return[4,i.getTree(s,{meta:x})];case 1:return o=S.sent().data,l=o.find(function(_){return _.id===w}),l?(b=o.find(function(_){return _.id===l[a]}),[2,{data:b}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w=u.parentId,x=u.meta;return ie(this,function(S){switch(S.label){case 0:return[4,n.getList(s,{filter:(b={},b[a]=w,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x})];case 1:return o=S.sent().data,[4,Promise.all(o.map(function(_){var m;return n.getList(s,{filter:(m={},m[a]=_.id,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x}).then(function(v){var h=v.data;return U(U({},_),{children:h.map(function(y){var g=y.id;return g})})})}))];case 2:return l=S.sent(),[2,{data:l}]}})})},"getChildNodes"),moveAsNthChildOf:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w,x,S=u.source,_=u.destination,m=u.position,v=u.meta;return ie(this,function(h){switch(h.label){case 0:return[4,n.getList(s,{filter:(b={},b[a]=_.id,b["".concat(e,"_gte")]=m,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return o=h.sent().data,o.length>0?[4,Promise.all(o.map(function(y){var g;return n.update(s,{id:y.id,data:(g={},g[e]=y[e]+1,g),previousData:y,meta:v})}))]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,n.getList(s,{filter:(w={},w[a]=S[a],w["".concat(e,"_gt")]=S[e],w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return l=h.sent().data,l.length>0?[4,Promise.all(l.map(function(y){var g;return n.update(s,{id:y.id,data:(g={},g[e]=y[e]-1,g),previousData:y,meta:v})}))]:[3,6];case 5:h.sent(),h.label=6;case 6:return[4,n.update(s,{id:S.id,data:(x={},x[a]=_.id,x[e]=m,x),previousData:S,meta:v})];case 7:return h.sent(),[2,{data:void 0}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w,x,S,_,m,v,h,y,g=u.source,O=u.destination,C=u.position,j=u.meta;return ie(this,function(p){switch(p.label){case 0:return C===0&&(o=(x={},x[a]=O[a],x)),g[e]>O[e]&&g[a]===O[a]&&(o=(S={},S[a]=O[a],S["".concat(e,"_gt")]=O[e],S)),g[a]!==O[a]&&C>0&&(o=(_={},_[a]=O[a],_["".concat(e,"_gt")]=O[e],_)),o?[4,n.getList(s,{filter:o,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})]:[3,3];case 1:return l=p.sent().data,l.length>0?[4,Promise.all(l.map(function(E){var P;return E.id===g.id?Promise.resolve(void 0):n.update(s,{id:E.id,data:(P={},P[e]=E[e]+1,P),previousData:E,meta:j})}))]:[3,3];case 2:p.sent(),p.label=3;case 3:return g[a]===O[a]?g[e]>O[e]?b=(m={},m[a]=g[a],m["".concat(e,"_gt")]=g[e],m):b=(v={},v[a]=g[a],v["".concat(e,"_gt")]=g[e],v["".concat(e,"_lte")]=O[e],v):b=(h={},h[a]=g[a],h["".concat(e,"_gt")]=g[e],h),[4,n.getList(s,{filter:b,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 4:return w=p.sent().data,w.length>0?[4,Promise.all(w.map(function(E){var P;return E.id===g.id?Promise.resolve(void 0):n.update(s,{id:E.id,data:(P={},P[e]=E[e]-1,P),previousData:E,meta:j})}))]:[3,6];case 5:p.sent(),p.label=6;case 6:return[4,n.update(s,{id:g.id,data:(y={},y[a]=O[a],y[e]=g[a]===O[a]?g[e]>O[e]?O[e]+1:O[e]:C,y),previousData:g,meta:j})];case 7:return p.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w,x,S=u.data,_=u.meta;return ie(this,function(m){switch(m.label){case 0:return[4,n.getList(s,{filter:(w={},w[a]=null,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:_})];case 1:return o=m.sent().data,l=o.length>0?o.reduce(function(v,h){return h[e]>v?h[e]:v},-1/0)+1:0,[4,n.create(s,{data:U(U({},S),(x={},x[a]=null,x[e]=l,x)),meta:_})];case 2:return b=m.sent().data,[2,{data:U(U({},b),{children:[]})}]}})})},"addRootNode"),addChildNode:c(function(d,f){return ae(void 0,[d,f],void 0,function(s,u){var o,l,b,w,x,S,_=u.parentId,m=u.data,v=u.meta,h=u.position;return ie(this,function(y){switch(y.label){case 0:return[4,n.getList(s,{filter:(x={},x[a]=_,x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return o=y.sent().data,l=o.length>0?o.reduce(function(g,O){return O[e]>g?O[e]:g},-1/0)+1:0,b=h!==void 0&&h>=0&&h<=l?h:l,[4,n.create(s,{data:U(U({},m),(S={},S[a]=_,S[e]=b,S)),meta:v})];case 2:return w=y.sent().data,h!==void 0&&h>=0&&h<=l&&o.forEach(function(g){var O;g[e]>=h&&n.update(s,{id:g.id,data:U(U({},g),(O={},O[e]=g[e]+1,O)),previousData:g,meta:v})}),[2,{data:U(U({},w),{children:[]})}]}})})},"addChildNode"),deleteBranch:c(function(d,f){return ae(void 0,void 0,void 0,function(){var s,u,o,l;return ie(this,function(b){switch(b.label){case 0:return s=f.id,u=f.previousData,o=f.meta,[4,r(i,d,f)];case 1:return b.sent(),[4,i.getChildNodes(d,{parentId:u[a],meta:o})];case 2:return l=b.sent().data,[4,Promise.all(l.filter(function(w){return w[e]>u[e]&&w.id!==s}).map(function(w){var x;return n.update(d,{id:w.id,data:U(U({},w),(x={},x[e]=w[e]-1,x)),previousData:w,meta:o})}))];case 3:return b.sent(),[2,{data:u}]}})})},"deleteBranch")});return i},"addTreeMethodsBasedOnParentAndPosition"),pe=function(){return pe=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},pe.apply(this,arguments)},Zt=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},Ft=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},er=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},nr=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},tr=c(function(n,a,e){a===void 0&&(a={}),e===void 0&&(e={});var t=Ce(),r=Se(),i=A.useRef(a),d=je(pe(pe({mutationFn:c(function(s){var u=s===void 0?{}:s,o=u.resource,l=o===void 0?n:o,b=u.data,w=b===void 0?i.current.data:b,x=u.meta,S=x===void 0?i.current.meta:x;if(!l)throw new Error("useAddRootNode mutation requires a non-empty resource");if(w==null)throw new Error("useAddRootNode mutation requires non-empty data");return t.addRootNode(l,{data:w,meta:S}).then(function(_){var m=_.data;return m})},"mutationFn")},e),{onSuccess:c(function(s,u,o){u===void 0&&(u={});var l=u.resource,b=l===void 0?n:l;r.setQueryData([b,"getOne",{id:String(s.id)}],s),e.onSuccess&&e.onSuccess(s,u,o)},"onSuccess")})),f=c(function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return Zt(void 0,nr([],s,!0),void 0,function(o,l,b){var w,x;return o===void 0&&(o=n),l===void 0&&(l={}),b===void 0&&(b={}),Ft(this,function(S){return w=b.returnPromise,x=er(b,["returnPromise"]),w?[2,d.mutateAsync(pe({resource:o},l),b)]:(d.mutate(pe({resource:o},l),x),[2])})})},"addRootNode");return[f,d]},"useAddRootNode"),Z=function(){return Z=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Z.apply(this,arguments)},vn=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},yn=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Ue=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},Un=c(function(n,a,e){a===void 0&&(a={}),e===void 0&&(e={});var t=Ce(),r=Se(),i=a.id,d=a.previousData,f=e.mutationMode,s=f===void 0?"pessimistic":f,u=rr(e,["mutationMode"]),o=A.useRef(s),l=A.useRef(a),b=A.useRef([]),w=c(function(_){var m=_.resource,v=_.id,h=Date.now(),y=o.current==="undoable"?h+5*1e3:h,g=c(function(C,j){var p=C.findIndex(function(q){return q.id==j});if(p===-1)return C;for(var E=C[p],P=Ue(Ue([],C.slice(0,p),!0),C.slice(p+1),!0),B=E.children||[],$=0,R=B;$<R.length;$++){var D=R[$];P=g(P,D)}return P},"removeRecord"),O=c(function(C){var j=g(C,v);return j.map(function(p){return Z(Z({},p),{children:p.children?p.children.filter(function(E){return E!==v}):p.children})})},"updateCollection");r.setQueriesData({queryKey:[m,"getTree"]},function(C){if(!C)return C;var j=O(C),p=j.length<C.length;return p?j:C},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getRootNodes"]},function(C){return C&&C.length>0?O(C):C},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getChildNodes"]},function(C){if(!C)return C;var j=O(C),p=j.length<C.length;return p?j:C},{updatedAt:y})},"updateCache"),x=je(Z(Z({mutationFn:c(function(_){var m=_===void 0?{}:_,v=m.resource,h=v===void 0?n:v,y=m.id,g=y===void 0?l.current.id:y,O=m.previousData,C=O===void 0?l.current.previousData:O,j=m.meta,p=j===void 0?l.current.meta:j;if(!h)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(g==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(C==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return t.deleteBranch(h,{id:g,previousData:C,meta:p}).then(function(E){var P=E.data;return P})},"mutationFn")},u),{onMutate:c(function(_){return vn(void 0,void 0,void 0,function(){var m;return yn(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(_)]:[3,2];case 1:return m=v.sent()||{},[2,Z({snapshot:b.current},m)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:c(function(_,m,v){if((o.current==="optimistic"||o.current==="undoable")&&v.snapshot.forEach(function(h){var y=h[0],g=h[1];r.setQueryData(y,g)}),u.onError)return u.onError(_,m,v)},"onError"),onSuccess:c(function(_,m,v){if(m===void 0&&(m={}),o.current==="pessimistic"){var h=m.resource,y=h===void 0?n:h,g=m.id,O=g===void 0?i:g;w({resource:y,id:O}),u.onSuccess&&u.onSuccess(_,m,v)}},"onSuccess"),onSettled:c(function(_,m,v,h){if(v===void 0&&(v={}),(o.current==="optimistic"||o.current==="undoable")&&h.snapshot.forEach(function(y){var g=y[0];r.invalidateQueries({queryKey:g})}),u.onSettled)return u.onSettled(_,m,v,h)},"onSettled")})),S=c(function(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];return vn(void 0,Ue([],_,!0),void 0,function(v,h,y){var g,O,C,j,p,E,P,B,$;return v===void 0&&(v=n),h===void 0&&(h={}),y===void 0&&(y={}),yn(this,function(R){switch(R.label){case 0:return g=y.mutationMode,O=y.onSuccess,C=y.onSettled,j=y.onError,l.current=a,g&&(o.current=g),o.current==="pessimistic"?[2,x.mutate(Z({resource:v},h),{onSuccess:O,onSettled:C,onError:j})]:(p=h.id,E=p===void 0?i:p,P=h.previousData,B=P===void 0?d:P,$=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=$.reduce(function(D,q){return D.concat(r.getQueriesData({queryKey:q}))},[]),[4,Promise.all(b.current.map(function(D){var q=D[0];return r.cancelQueries({queryKey:q})}))]);case 1:return R.sent(),w({resource:v,id:E}),O&&setTimeout(function(){return O(B,Z({resource:v},h),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(B,Z({resource:v},h),{snapshot:b.current})},0),o.current==="optimistic"?[2,x.mutate(Z({resource:v},h),{onSettled:C,onError:j})]:(sn.once("end",function(D){var q=D.isUndo;q?b.current.forEach(function(T){var M=T[0],k=T[1];r.setQueryData(M,k)}):x.mutate(Z({resource:v},h),{onSettled:C,onError:j})}),[2])}})})},"mutate");return[S,x]},"useDeleteBranch"),le=function(){return le=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},le.apply(this,arguments)},ar=c(function(n,a,e){var t=Ce(),r=je(le({mutationKey:[n,"getChildNodes",a],mutationFn:c(function(d){return t.getChildNodes(n,le(le({},a),d)).then(function(f){var s=f.data;return s})},"mutationFn")},e)),i=Rn(function(d){return r.mutateAsync(le(le({},a),{parentId:d}))});return i},"useGetChildNodesCallback"),$e=function(){return $e=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},$e.apply(this,arguments)},ia=c(function(n){return $e($e({},n),{children:n.children.map(function(a){return a.id})})},"removeChildren"),He=function(){return He=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},He.apply(this,arguments)},ir=c(function(n,a,e){a===void 0&&(a={}),e===void 0&&(e={});var t=Ce(),r=Se(),i=je(He({mutationKey:[n,"getTree",a],mutationFn:c(function(){return t.getTree(n,a).then(function(f){var s=f.data;return s})},"mutationFn"),onSuccess:c(function(f){ht(r,n,f,a)},"onSuccess")},e)),d=A.useCallback(function(){return i.mutateAsync(a)},[i,a]);return d},"useGetTreeCallback"),te=function(){return te=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},te.apply(this,arguments)},gn=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},mn=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ur=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},ce=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},or=c(function(n,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var t=Ce(),r=Se(),i=a.source,d=a.destination,f=a.position,s=e.mutationMode,u=s===void 0?"undoable":s,o=ur(e,["mutationMode"]),l=A.useRef(u),b=A.useRef(a),w=A.useRef([]),x=c(function(m){var v=m.resource,h=m.position,y=m.source,g=m.destination,O=Date.now(),C=l.current==="undoable"?O+5*1e3:O,j=c(function(p){var E,P,B,$,R,D=Te(p),q=D.find(function(M){var k;return(k=M.children)===null||k===void 0?void 0:k.includes(y.id)});q?q.children=(E=q.children)===null||E===void 0?void 0:E.filter(function(M){return M!==y.id}):D=D.filter(function(M){return M.id!==y.id});var T=D.find(function(M){return M.id===g.id});return T?T.children=ce(ce(ce([],(B=(P=T.children)===null||P===void 0?void 0:P.slice(0,h))!==null&&B!==void 0?B:[],!0),[y.id],!1),(R=($=T.children)===null||$===void 0?void 0:$.slice(h))!==null&&R!==void 0?R:[],!0):(D=D.filter(function(M){return M.id!==y.id}),D=ce(ce(ce([],D.slice(0,h),!0),[y],!1),D.slice(h),!0)),D},"updateCollection");r.setQueriesData({queryKey:[v,"getTree"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[v,"getRootNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[v,"getChildNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C})},"updateCache"),S=je(te(te({mutationFn:c(function(m){var v=m===void 0?{}:m,h=v.resource,y=h===void 0?n:h,g=v.position,O=g===void 0?b.current.position:g,C=v.source,j=C===void 0?b.current.source:C,p=v.destination,E=p===void 0?b.current.destination:p,P=v.meta,B=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(E==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return t.moveAsNthChildOf(y,{position:O,source:j,destination:E,meta:B}).then(function($){var R=$.data;return R})},"mutationFn")},o),{onMutate:c(function(m){return gn(void 0,void 0,void 0,function(){var v;return mn(this,function(h){switch(h.label){case 0:return o.onMutate?[4,o.onMutate(m)]:[3,2];case 1:return v=h.sent()||{},[2,te({snapshot:w.current},v)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:c(function(m,v,h){if((l.current==="optimistic"||l.current==="undoable")&&h.snapshot.forEach(function(y){var g=y[0],O=y[1];r.setQueryData(g,O)}),o.onError)return o.onError(m,v,h)},"onError"),onSuccess:c(function(m,v,h){if(v===void 0&&(v={}),l.current==="pessimistic"){var y=v.resource,g=y===void 0?n:y,O=v.position,C=O===void 0?f:O,j=v.source,p=j===void 0?i:j,E=v.destination,P=E===void 0?d:E;x({resource:g,position:C,source:p,destination:P}),o.onSuccess&&o.onSuccess(m,v,h)}},"onSuccess"),onSettled:c(function(m,v,h,y){if(h===void 0&&(h={}),(l.current==="optimistic"||l.current==="undoable")&&y.snapshot.forEach(function(g){var O=g[0];r.invalidateQueries({queryKey:O})}),o.onSettled)return o.onSettled(m,v,h,y)},"onSettled")})),_=c(function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];return gn(void 0,ce([],m,!0),void 0,function(h,y,g){var O,C,j,p,E,P,B,$,R,D,q;return h===void 0&&(h=n),y===void 0&&(y={}),g===void 0&&(g={}),mn(this,function(T){switch(T.label){case 0:if(O=g.mutationMode,C=g.onSuccess,j=g.onSettled,p=g.onError,b.current=a,O&&(l.current=O),l.current==="pessimistic")return[2,S.mutate(te({resource:h},y),{onSuccess:C,onSettled:j,onError:p})];if(E=y.position,P=E===void 0?f:E,B=y.source,$=B===void 0?i:B,R=y.destination,D=R===void 0?d:R,h==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if($==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return q=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],w.current=q.reduce(function(M,k){return M.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function(M){var k=M[0];return r.cancelQueries({queryKey:k})}))];case 1:return T.sent(),x({resource:h,position:P,source:$,destination:D}),C&&setTimeout(function(){return C(void 0,te({resource:h},y),{snapshot:w.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(void 0,te({resource:h},y),{snapshot:w.current})},0),l.current==="optimistic"?[2,S.mutate(te({resource:h},y),{onSettled:j,onError:p})]:(sn.once("end",function(M){var k=M.isUndo;k?w.current.forEach(function(z){var F=z[0],ee=z[1];r.setQueryData(F,ee)}):S.mutate(te({resource:h},y),{onSettled:j,onError:p})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthChildOf"),re=function(){return re=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},re.apply(this,arguments)},bn=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},wn=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},dr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},se=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},cr=c(function(n,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var t=Ce(),r=Se(),i=a.source,d=a.destination,f=a.position,s=e.mutationMode,u=s===void 0?"undoable":s,o=dr(e,["mutationMode"]),l=A.useRef(u),b=A.useRef(a),w=A.useRef([]),x=c(function(m){var v=m.resource,h=m.position,y=m.source,g=m.destination,O=Date.now(),C=l.current==="undoable"?O+5*1e3:O,j=c(function(p){var E,P,B,$,R,D=Te(p),q=D.find(function(k){var z;return(z=k.children)===null||z===void 0?void 0:z.includes(y.id)}),T=D.find(function(k){var z;return(z=k.children)===null||z===void 0?void 0:z.includes(g.id)}),M=h;return q&&T&&q.id===T.id&&q.children&&q.children.findIndex(function(k){return k===y.id})<q.children.findIndex(function(k){return k===g.id})&&(M=h-1),q?q.children=(E=q.children)===null||E===void 0?void 0:E.filter(function(k){return k!==y.id}):D=D.filter(function(k){return k.id!==y.id}),T?T.children=se(se(se([],(B=(P=T.children)===null||P===void 0?void 0:P.slice(0,M))!==null&&B!==void 0?B:[],!0),[y.id],!1),(R=($=T.children)===null||$===void 0?void 0:$.slice(M))!==null&&R!==void 0?R:[],!0):(D=D.filter(function(k){return k.id!==y.id}),D=se(se(se([],D.slice(0,h),!0),[y],!1),D.slice(h),!0)),D},"updateCollection");r.setQueriesData({queryKey:[v,"getTree"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[v,"getRootNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[v,"getChildNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C})},"updateCache"),S=je(re(re({mutationFn:c(function(m){var v=m===void 0?{}:m,h=v.resource,y=h===void 0?n:h,g=v.position,O=g===void 0?b.current.position:g,C=v.source,j=C===void 0?b.current.source:C,p=v.destination,E=p===void 0?b.current.destination:p,P=v.meta,B=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(E==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return t.moveAsNthSiblingOf(y,{position:O,source:j,destination:E,meta:B}).then(function($){var R=$.data;return R})},"mutationFn")},o),{onMutate:c(function(m){return bn(void 0,void 0,void 0,function(){var v;return wn(this,function(h){switch(h.label){case 0:return o.onMutate?[4,o.onMutate(m)]:[3,2];case 1:return v=h.sent()||{},[2,re({snapshot:w.current},v)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:c(function(m,v,h){if((l.current==="optimistic"||l.current==="undoable")&&h.snapshot.forEach(function(y){var g=y[0],O=y[1];r.setQueryData(g,O)}),o.onError)return o.onError(m,v,h)},"onError"),onSuccess:c(function(m,v,h){if(v===void 0&&(v={}),l.current==="pessimistic"){var y=v.resource,g=y===void 0?n:y,O=v.position,C=O===void 0?f:O,j=v.source,p=j===void 0?i:j,E=v.destination,P=E===void 0?d:E;x({resource:g,position:C,source:p,destination:P}),o.onSuccess&&o.onSuccess(m,v,h)}},"onSuccess"),onSettled:c(function(m,v,h,y){if(h===void 0&&(h={}),(l.current==="optimistic"||l.current==="undoable")&&y.snapshot.forEach(function(g){var O=g[0];r.invalidateQueries({queryKey:O})}),o.onSettled)return o.onSettled(m,v,h,y)},"onSettled")})),_=c(function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];return bn(void 0,se([],m,!0),void 0,function(h,y,g){var O,C,j,p,E,P,B,$,R,D,q;return h===void 0&&(h=n),y===void 0&&(y={}),g===void 0&&(g={}),wn(this,function(T){switch(T.label){case 0:if(O=g.mutationMode,C=g.onSuccess,j=g.onSettled,p=g.onError,b.current=a,O&&(l.current=O),l.current==="pessimistic")return[2,S.mutate(re({resource:h},y),{onSuccess:C,onSettled:j,onError:p})];if(E=y.position,P=E===void 0?f:E,B=y.source,$=B===void 0?i:B,R=y.destination,D=R===void 0?d:R,h==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if($==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return q=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],w.current=q.reduce(function(M,k){return M.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function(M){var k=M[0];return r.cancelQueries({queryKey:k})}))];case 1:return T.sent(),x({resource:h,position:P,source:$,destination:D}),C&&setTimeout(function(){return C(void 0,re({resource:h},y),{snapshot:w.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(void 0,re({resource:h},y),{snapshot:w.current})},0),l.current==="optimistic"?[2,S.mutate(re({resource:h},y),{onSettled:j,onError:p})]:(sn.once("end",function(M){var k=M.isUndo;k?w.current.forEach(function(z){var F=z[0],ee=z[1];r.setQueryData(F,ee)}):S.mutate(re({resource:h},y),{onSettled:j,onError:p})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthSiblingOf"),oe=function(){return oe=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},oe.apply(this,arguments)},pn=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},_n=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ua=c(function(n){return oe(oe({},n),{getRootNodes:c(function(a,e){return pn(void 0,void 0,void 0,function(){var t,r;return _n(this,function(i){switch(i.label){case 0:return[4,n.getRootNodes(a,e)];case 1:return t=i.sent().data,r=t.filter(function(d){return d.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:c(function(a,e){return pn(void 0,[a,e],void 0,function(t,r){var i,d,f,s,u=r.data,o=r.meta;return _n(this,function(l){switch(l.label){case 0:return[4,n.getList(t,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:o})];case 1:return i=l.sent().data,d=i.filter(function(b){return typeof b.parent_id>"u"}),f=d.length>0?d.reduce(function(b,w){return w.position>b?w.position:b},-1/0)+1:0,[4,n.create(t,{data:oe(oe({},u),{parent_id:null,position:f}),meta:o})];case 2:return s=l.sent().data,[2,{data:oe(oe({},s),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),On=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},Gn=c(function(n,a){var e,t=n.filter(function(d){return d.id!==a.id}),r=t.find(function(d){var f;return(f=d.children)===null||f===void 0?void 0:f.includes(a.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(d){return d!==a.id})),!a.children||a.children.length===0)return t;var i=zn(t,a);return t=t.filter(function(d){return!i.includes(d)}),t},"removeNode"),zn=c(function(n,a){return a?!a.children||a.children.length===0?[]:On(On([],a.children,!0),a.children.flatMap(function(e){var t=n.find(function(r){return r.id===e});return t?zn(n,t):[]}),!0):[]},"getNodeChildrenRecursive"),Je=function(){return Je=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Je.apply(this,arguments)},Vn=c(function(n){var a=n.mutationMode,e=n.mutationOptions,t=n.redirect,r=t===void 0?"list":t,i=Ae(),d=Ie(),f=Pn(),s=ne(n);if(s==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var u=de(n);if(u==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var o=Un(),l=o[0],b=o[1].isPending,w=A.useState(!1),x=w[0],S=w[1],_=fn().setFinalData,m=A.useCallback(function(y){y.stopPropagation(),l(s,{id:u.id,previousData:u},Je({mutationMode:a,onSuccess:c(function(){i("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),d(r,s),a==="pessimistic"?f():_&&_(function(g){return Gn(g,u)})},"onSuccess"),onError:c(function(g){i(typeof g=="string"?g:g.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[l,a,e,i,u,d,r,f,s,_]),v=c(function(y){y.stopPropagation(),S(!0)},"handleDialogOpen"),h=c(function(y){y.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:m,handleDialogOpen:v,handleDialogClose:h,isPending:b,open:x}},"useDeleteBranchWithConfirmController"),Ye=function(){return Ye=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Ye.apply(this,arguments)},Xn=c(function(n){var a=n.mutationOptions,e=n.redirect,t=e===void 0?"list":e,r=Ae(),i=Ie(),d=fn().setFinalData,f=ne(n);if(f==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var s=de(n);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var u=Un(),o=u[0],l=u[1].isPending,b=A.useCallback(function(w){w.stopPropagation(),o(f,{id:s.id,previousData:s},Ye({onSuccess:c(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),d&&d(function(x){return Gn(x,s)}),i(t,f)},"onSuccess"),onError:c(function(x){return r(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},a))},[o,a,r,s,i,t,f,d]);return{handleDelete:b,isPending:l}},"useDeleteBranchWithUndoController"),_e=function(){return _e=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},_e.apply(this,arguments)},sr=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},fr=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},lr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},hr=c(function(n){var a=n.disableAuthentication,e=n.record,t=e===void 0?{}:e,r=n.redirect,i=n.mutationOptions,d=i===void 0?{}:i,f=n.transform;Nn({enabled:!a});var s=ne(n);if(s==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var u=dn(),o=Se(),l=vt(),b=fn().handleAddNode,w=l.state&&l.state.parentId,x=l.state&&l.state.insertAsFirstChild,S=typeof w<"u"&&w!==null,_=l.state&&l.state.record||t,m=d.onSuccess,v=d.onError,h=lr(d,["onSuccess","onError"]),y=cn(n),g=y.hasEdit,O=y.hasShow,C=r||vr(O,g),j=tr(s,void 0,h),p=j[0],E=j[1],P=yt(s,void 0,h),B=P[0],$=P[1],R=Rn(b??yr);A.useEffect(function(){return R({record:{},parentId:w,insertAsFirstChild:x}),function(){R(void 0)}},[R,w,x]);var D=ye(),q=Ae(),T=Ie(),M=A.useCallback(function(F,ee){var L=ee===void 0?{}:ee,I=L.onSuccess,W=L.onError,K=L.transform,V=c(function(G){q("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),T(C,s,G.id,G),o.refetchQueries({queryKey:[s,"getTree"],type:"active"}),o.refetchQueries({queryKey:[s,"getRootNodes"],type:"active"})},"defaultOnSuccess"),X=c(function(G){q(typeof G=="string"?G:G.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(K?K(F):f?f(F):F).then(function(G){return sr(void 0,void 0,void 0,function(){var J,Q,H;return fr(this,function(Y){switch(Y.label){case 0:J={onSuccess:c(function(ue,De,me){R(void 0),I?I(ue,De,me):m?m(ue,De,me):V(ue)},"onSuccess"),onError:W||v||X},Y.label=1;case 1:return Y.trys.push([1,6,,7]),S?[4,B(s,{data:G,parentId:w,meta:h.meta,position:x?0:void 0},_e(_e({},J),{returnPromise:!0}))]:[3,3];case 2:return Y.sent(),[3,5];case 3:return[4,p(s,{data:G,meta:h.meta},_e(_e({},J),{returnPromise:!0}))];case 4:Y.sent(),Y.label=5;case 5:return[3,7];case 6:return Q=Y.sent(),(Q instanceof gt||typeof Q=="object"&&Q!==null&&Q.hasOwnProperty("body"))&&((H=Q.body)===null||H===void 0?void 0:H.errors)!=null?[2,Q.body.errors]:[3,7];case 7:return[2]}})})})},[B,p,R,S,q,v,m,w,o,T,s,f,h.meta,C,x]),k=u(s,1),z=D("ra.page.create",{name:"".concat(k)});return{isLoading:!1,isFetching:!1,defaultTitle:z,save:M,saving:E.isPending||$.isPending,isPending:E.isPending||$.isPending,resource:s,record:_,redirect:C}},"useCreateNodeController"),vr=c(function(n,a){return a?"edit":n?"show":"list"},"getDefaultRedirectRoute"),yr=c(function(){},"noop"),gr=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},Hn=c(function(n,a){var e=a.find(function(t){return t.id==n});return e?gr([e.id.toString()],(e.children||[]).flatMap(function(t){return Hn(t,a)}),!0):[]},"getNodeKeysRecursively"),he=function(){return he=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},he.apply(this,arguments)},xn=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},Cn=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Sn=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},fe=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},mr=c(function(n){var a=ye(),e=ne(n);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var t=dn(),r=n.lazy,i=r===void 0?!1:r,d=n.filter,f=d===void 0?{}:d,s=n.mutationMode,u=s===void 0?"undoable":s,o=n.meta,l=Mn(e,{filter:f,meta:o},{enabled:!i}),b=mt(e,{filter:f,meta:o},{enabled:i,gcTime:0}),w=ar(e,{meta:o}),x=A.useMemo(function(){var L;return(L=b.data)===null||L===void 0?void 0:L.map(function(I){var W=I.children,K=Sn(I,["children"]);return W!=null&&W.length?K:I})},[b.data,b.isFetching]),S=i?he(he({},b),{data:x}):l,_=S.data,m=S.error,v=S.isLoading,h=S.isPending,y=S.isFetching,g=A.useState(_),O=g[0],C=g[1],j=A.useCallback(function(L){return xn(void 0,void 0,void 0,function(){var I;return Cn(this,function(W){switch(W.label){case 0:return[4,w(L)];case 1:return I=W.sent(),C(function(K){var V,X=I.map(function(Q){var H=Q.children,Y=Sn(Q,["children"]),ue=K==null?void 0:K.some(function(De){var me;return(me=Q.children)===null||me===void 0?void 0:me.includes(De.id)});return H!=null&&H.length&&!ue?Y:Q}),G=fe(fe([],(V=K==null?void 0:K.map(function(Q){return Q.id===L?he(he({},Q),{children:X.map(function(H){return H.id})}):Q}))!==null&&V!==void 0?V:[],!0),X,!0),J=G.reduce(function(Q,H){return Q[H.id]=H,Q},{});return Object.values(J)}),[2]}})})},[w]);A.useEffect(function(){C(_)},[_]);var p=A.useState(),E=p[0],P=p[1],B=A.useCallback(function(L){var I,W=Te(O);if(L){if(P(L),L.parentId!=null){var K=W==null?void 0:W.find(function(X){return X.id===L.parentId});K&&(K.children=K.children||[],K.children=L.insertAsFirstChild?fe([we],K.children,!0):fe(fe([],K.children,!0),[we],!1))}C(fe(fe([],W??[],!0),[he({id:we,children:[]},L.record)],!1))}else{if(!E)return;var V=Te(O);if(E.parentId!=null){var K=V==null?void 0:V.find(function(G){return G.id===E.parentId});K&&(K.children=(I=K.children)===null||I===void 0?void 0:I.filter(function(G){return G!=we}))}P(void 0),C(V==null?void 0:V.filter(function(X){return X.id!==we}))}},[O,E]),$=Tn(void 0,n.expandedKeys),R=$[0],D=$[1],q=A.useCallback(function(L){D(function(I){var W,K,V=typeof L=="function"?L(I??[]):L,X=(W=I==null?void 0:I.filter(function(J){return!V.includes(J)}))!==null&&W!==void 0?W:[],G=(K=X==null?void 0:X.flatMap(function(J){return Hn(J,O??[])},[]))!==null&&K!==void 0?K:[];return V.filter(function(J){return!G.includes(J)})})},[O,D]),T=or(e,{meta:o})[0],M=cr(e,{meta:o})[0],k=ir(e),z=Ae(),F=A.useCallback(function(L){var I,W=L.node.key,K=L.dragNode.key,V=L.node.pos.split("-"),X=L.dropPosition-Number(V[V.length-1]),G=(I=_==null?void 0:_.reduce(function(Y,ue){return Y[ue.id]=ue,Y},{}))!==null&&I!==void 0?I:{},J=G[K],Q=G[W],H=c(function(){return xn(void 0,void 0,void 0,function(){return Cn(this,function(Y){switch(Y.label){case 0:return[4,k()];case 1:return Y.sent(),z("ra-tree.item_moved",{undoable:u==="undoable"}),[2]}})})},"successSideEffect");L.dropToGap?(L.node.children||[]).length>0&&L.node.expanded&&X===1?T(e,{source:J,destination:Q,position:Q.children.length},{onSuccess:H,mutationMode:u}):M(e,{source:J,destination:Q,position:L.dropPosition},{onSuccess:H,mutationMode:u}):T(e,{source:J,destination:Q,position:0},{onSuccess:H,mutationMode:u})},[_,T,M,u,z,k,e]),ee=a("ra.page.list",{name:t(e,2)});return{data:O,defaultTitle:ee,error:m,expandedKeys:R,handleAddNode:B,handleDrop:F,handleExpand:q,isLoading:v,isFetching:y,isPending:h,loadChildNodes:j,newNode:E,lazy:i,setFinalData:C}},"useTreeController"),Jn=A.createContext(void 0),qe=function(){return qe=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},qe.apply(this,arguments)},Yn=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},br=c(function(n){var a=n.label,e=n.multiple,t=n.sx,r=n.className,i=n.helperText,d=n.fullWidth,f=Yn(n,["label","multiple","sx","className","helperText","fullWidth"]),s=Sr(n),u=s.data,o=s.resource,l=s.source,b=s.fetchError,w=s.isLoading,x=s.isRequired,S=s.field,_=s.fieldState,m=s.formState,v=s.defaultValue,h=_.isTouched,y=_.invalid,g=_.error,O=m.isSubmitted,C=ye();return b?N.jsx(Ge,{className:r,sx:t,"data-testid":"error",children:N.jsx(We,{label:a,source:l,resource:o,fullWidth:d,children:N.jsx(bt,{color:"error.main",children:C("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):w||!u?N.jsx(Ge,{className:r,sx:t,"data-testid":"loading",children:N.jsx(We,{label:a,source:l,resource:o,fullWidth:d,children:N.jsx(wt,{})})}):N.jsxs(Ge,{className:r,sx:t,children:[N.jsx(We,{htmlFor:l,className:jn.label,color:(h||O)&&y?"error":void 0,label:a,source:l,resource:o,isRequired:x,fullWidth:d,children:N.jsx(wr,qe({source:l,multiple:e,className:jn.tree,field:S,defaultValue:v,fullWidth:d},f,{data:u}))}),(h||O)&&g||i?N.jsx(pt,{error:(h||O)&&!!g,children:N.jsx(_t,{error:g==null?void 0:g.message,helperText:i})}):null]})},"TreeInput"),Ze="RaTreeInput",jn={label:"".concat(Ze,"-label"),tree:"".concat(Ze,"-tree")},Ge=ge(Ot,{name:Ze,overridesResolver:c(function(n,a){return a.root},"overridesResolver")})(function(){return{}}),wr=c(function(n){var a=n.data,e=n.multiple,t=n.field,r=n.checkStrictly,i=r===void 0?!0:r,d=n.expandAction,f=d===void 0?!1:d,s=n.defaultValue,u=Yn(n,["data","multiple","field","checkStrictly","expandAction","defaultValue"]),o=(t==null?void 0:t.value)||(e?[]:""),l=s||(e?[]:""),b=c(function(x,S){var _=S.checkedNodes.filter(function(v){return i?x.checked.includes(v.key):x.includes(v.key)}),m=_.map(function(v){return v.id});t==null||t.onChange(m)},"handleCheck"),w=c(function(x,S){var _=x&&x.length>0?S.node.id:"";t==null||t.onChange(_)},"handleSelect");return N.jsx($n,qe({},u,{checkStrictly:i,expandAction:f,checkable:e,selectable:!e,checkedKeys:e?o:[],selectedKeys:e?[]:[o],defaultCheckedKeys:e?l:void 0,defaultSelectedKeys:e?void 0:[l],defaultExpandedKeys:e?l:[l],onCheck:b,onSelect:w,data:a,onBlur:t==null?void 0:t.onBlur}))},"TreeInputTree"),pr=c(function(n){var a=n.reference,e=n.source,t=n.meta,r=Mn(a,{meta:t}),i=r.data,d=r.error,f=r.isLoading,s=r.isFetching;return{source:e,resource:a,data:i,error:d??void 0,isLoading:f,isFetching:s}},"useReferenceNodeInputController"),_r=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},oa=c(function(n){var a=n.children,e=a===void 0?N.jsx(br,{}):a,t=pr(n),r=t.resource,i=_r(t,["resource"]);return N.jsx(xt,{value:r,children:N.jsx(Or,{value:i,children:e})})},"ReferenceNodeInput"),Or=c(function(n){var a=n.children,e=n.value;return N.jsx(Jn.Provider,{value:e,children:a})},"TreeChoicesContextProvider"),xr=c(function(){return A.useContext(Jn)||{}},"useTreeChoicesContext"),Be=function(){return Be=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Be.apply(this,arguments)},Cr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Sr=c(function(n){var a=n.source,e=n.data;n.hideRootNodes;var t=Cr(n,["source","data","hideRootNodes"]),r=ne(n);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=de(n),d=xr(),f=d.source,s=d.data,u=d.isLoading,o=d.isFetching,l=d.error,b=e??s,w=a??f;if(w==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var x=Ct(Be(Be({},t),{resource:r,source:w,type:"text"})),S=x.isRequired,_=x.field,m=x.fieldState,v=x.formState,h=St(i,w,n.defaultValue);return{resource:r,source:w,data:b??[],fetchError:l,isLoading:u,isFetching:o,isRequired:S,field:_,fieldState:m,formState:v,defaultValue:h}},"useTreeInputController"),jr=c(function(n){var a=n.children,e=n.value;return N.jsx(jt.Provider,{value:e,children:a})},"TreeContextProvider"),Fe=function(){return Fe=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Fe.apply(this,arguments)},da=c(function(n){var a=hr(n);return N.jsx(Et,{value:a,children:N.jsx(Nt,Fe({},n,a))})},"CreateNode"),en=function(){return en=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},en.apply(this,arguments)},En=function(n,a,e){if(e||arguments.length===2)for(var t=0,r=a.length,i;t<r;t++)(i||!(t in a))&&(i||(i=Array.prototype.slice.call(a,0,t)),i[t]=a[t]);return n.concat(i||Array.prototype.slice.call(a))},ca=c(function(n){var a=n.id,e=An().id;if(!e&&!a)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var t=a||decodeURIComponent(e),r=Tn(),i=r[1];A.useEffect(function(){i(function(f){var s=t.toString();return Array.isArray(f)?f.includes(s)?f:En(En([],f,!0),[s],!1):[s]})},[n.resource,t,i]);var d=Wt(n);return N.jsx(Qt,{value:d,children:N.jsx(Jt,en({},n))})},"ShowNode"),hn={},Er=At;Object.defineProperty(hn,"__esModule",{value:!0});var Zn=hn.default=void 0,Nr=Er(Pt()),Pr=N;Zn=hn.default=(0,Nr.default)((0,Pr.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var nn=function(){return nn=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},nn.apply(this,arguments)},Ar=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Dr=c(function(n){var a=n.className,e=n.confirmTitle,t=e===void 0?"ra.message.delete_title":e,r=n.confirmContent,i=r===void 0?"ra.message.delete_content":r,d=n.label,f=d===void 0?"ra.action.delete":d,s=n.mutationMode,u=n.onClick;n.record,n.resource;var o=n.ref,l=n.redirect,b=l===void 0?"list":l,w=Ar(n,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),x=ne(n);if(!x)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var S=de(n);if(!S)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var _=Vn({mutationMode:s,record:S,resource:x,redirect:b}),m=_.handleDelete,v=_.handleDialogClose,h=_.handleDialogOpen,y=_.isPending,g=_.open,O=ye(),C=c(function(j){j.stopPropagation(),u&&u(j),j.isDefaultPrevented()||h(j)},"handleClick");return N.jsxs(N.Fragment,{children:[N.jsx(qn,nn({className:a,onClick:C,ref:o},w,{children:O(f,{_:f})})),N.jsx(Bn,{isOpen:g,loading:y,title:t,content:i,translateOptions:{name:Ln(O("resources.".concat(x,".name"),{smart_count:1,_:Kn(x)}),!0),id:S.id},onConfirm:m,onClose:v})]})},"DeleteMenuItemWithConfirmation"),tn=function(){return tn=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},tn.apply(this,arguments)},kr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Rr=c(function(n){var a=n.className,e=n.label,t=e===void 0?"ra.action.delete":e;n.mutationMode;var r=n.onClick;n.record;var i=n.ref;n.resource;var d=n.redirect,f=d===void 0?"list":d,s=kr(n,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),u=ne(n);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var o=de(n);if(!o)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var l=Xn({record:o,resource:u,redirect:f}),b=l.handleDelete,w=l.isPending,x=ye(),S=c(function(_){_.stopPropagation(),r&&r(_),_.isDefaultPrevented()||b(_)},"handleClick");return N.jsx(qn,tn({className:a,disabled:w,onClick:S,ref:i},s,{children:x(t,{_:t})}))},"DeleteMenuItemWithUndo"),Le=function(){return Le=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Le.apply(this,arguments)},Mr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Fn=c(function(n){var a=n.mutationMode,e=a===void 0?"undoable":a,t=Mr(n,["mutationMode"]);return e==="undoable"?N.jsx(Rr,Le({},t,{mutationMode:e})):N.jsx(Dr,Le({},t,{mutationMode:e}))},"DeleteMenuItem");Fn.displayName="DeleteMenuItem";var Tr=A.createContext(null),$r=Tr.Provider,qr=c(function(n){var a=n.children,e=a===void 0?N.jsx(Fn,{}):a,t=n.className,r=A.useState(null),i=r[0],d=r[1],f=c(function(o){o.stopPropagation(),d(o.currentTarget)},"handleClick"),s=A.useCallback(function(o){o.stopPropagation(),d(null)},[]),u=A.useMemo(function(){return{close:s}},[s]);return N.jsxs(Lr,{className:t,children:[N.jsx("button",{className:Br.menuButton,onClick:f,children:N.jsx(Zn,{})}),N.jsx(Dt,{anchorEl:i,open:!!i,onClose:s,children:N.jsx($r,{value:u,children:e})})]})},"NodeActions"),et="RaNodeActions",Br={menuButton:"".concat(et,"-menuButton")},Lr=ge("div",{name:et,overridesResolver:c(function(n,a){return a.root},"overridesResolver")})(function(){return{}}),rn=function(){return rn=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},rn.apply(this,arguments)},Kr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Ir=c(function(n){var a=n.label,e=a===void 0?"ra.action.delete":a,t=n.className,r=n.icon,i=r===void 0?Qr:r,d=n.onClick;n.resource,n.record;var f=n.redirect,s=f===void 0?"list":f,u=Kr(n,["label","className","icon","onClick","resource","record","redirect"]),o=ne(n);if(!o)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var l=de(n);if(!l)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var b=Xn({resource:o,record:l,redirect:s}),w=b.handleDelete,x=b.isPending,S=c(function(_){d&&d(_),_.isDefaultPrevented()||w(_)},"handleClick");return N.jsx(Wr,rn({onClick:S,disabled:x,label:e,className:Pe("ra-delete-button",t)},u,{children:i}),"button")},"DeleteBranchWithUndoButton"),Wr=ge(In,{name:"RaDeleteBranchWithUndoButton",overridesResolver:c(function(n,a){return a.root},"overridesResolver")})(function(n){var a=n.theme;return{color:a.palette.error.main,"&:hover":{backgroundColor:Wn(a.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Qr=N.jsx(Qn,{}),an=function(){return an=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},an.apply(this,arguments)},Ur=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Gr=c(function(n){var a=n.className,e=n.confirmTitle,t=e===void 0?"ra.message.delete_title":e,r=n.confirmContent,i=r===void 0?"ra.message.delete_content":r,d=n.icon,f=d===void 0?zr:d,s=n.label,u=s===void 0?"ra.action.delete":s,o=n.mutationMode,l=n.onClick;n.record,n.resource;var b=n.redirect,w=b===void 0?"list":b,x=Ur(n,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),S=ye(),_=ne(n);if(!_)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var m=de(n);if(!m)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var v=Vn({mutationMode:o,resource:_,record:m,redirect:w}),h=v.handleDelete,y=v.handleDialogClose,g=v.handleDialogOpen,O=v.isPending,C=v.open,j=c(function(p){l&&l(p),p.isDefaultPrevented()||g(p)},"handleClick");return N.jsxs(Vr,{className:a,children:[N.jsx(In,an({onClick:j,label:u,className:Pe("ra-delete-button",tt.deleteButton)},x,{children:f}),"button"),N.jsx(Bn,{isOpen:C,loading:O,title:t,content:i,translateOptions:{name:S("resources.".concat(_,".forcedCaseName"),{smart_count:1,_:Ln(S("resources.".concat(_,".name"),{smart_count:1,_:Kn(_)}),!0)}),id:m.id},onConfirm:h,onClose:y})]})},"DeleteBranchWithConfirmButton"),zr=N.jsx(Qn,{}),nt="RaDeleteBranchWithConfirmButton",tt={deleteButton:"".concat(nt,"-deleteButton")},Vr=ge("div",{name:nt})(function(n){var a,e=n.theme;return a={},a["& .".concat(tt.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Wn(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},a}),Ke=function(){return Ke=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},Ke.apply(this,arguments)},Xr=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Hr=c(function(n){var a=n.mutationMode,e=a===void 0?"undoable":a;n.record;var t=Xr(n,["mutationMode","record"]),r=de(n),i=kt();if(!r||r.id==null)return null;var d=e||(i!=null&&i.mutationMode?i.mutationMode:"undoable");return d==="undoable"?N.jsx(Ir,Ke({record:r},t)):N.jsx(Gr,Ke({mutationMode:d,record:r},t))},"DeleteBranchButton"),un=function(){return un=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},un.apply(this,arguments)},Jr=function(n,a,e,t){function r(i){return i instanceof e?i:new e(function(d){d(i)})}return c(r,"adopt"),new(e||(e=Promise))(function(i,d){function f(o){try{u(t.next(o))}catch(l){d(l)}}c(f,"fulfilled");function s(o){try{u(t.throw(o))}catch(l){d(l)}}c(s,"rejected");function u(o){o.done?i(o.value):r(o.value).then(f,s)}c(u,"step"),u((t=t.apply(n,a||[])).next())})},Yr=function(n,a){var e={label:0,sent:c(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},t,r,i,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(u){return function(o){return s([u,o])}}function s(u){if(t)throw new TypeError("Generator is already executing.");for(;d&&(d=0,u[0]&&(e=0)),e;)try{if(t=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,r=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(u[0]===6&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=a.call(n,e)}catch(o){u=[6,o],r=0}finally{t=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rt=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},be,sa=c(function(n){var a=n.allowMultipleRoots,e=a===void 0?!1:a,t=n.className,r=n.create,i=n.defaultExpandedKeys,d=n.edit,f=n.filter,s=n.hideRootNodes,u=n.lazy,o=u===void 0?!1:u,l=n.linkTo,b=l===void 0?"edit":l,w=n.nodeActions,x=w===void 0?N.jsx(qr,{}):w,S=n.show,_=n.showLine,m=n.sx,v=n.title,h=n.titleField,y=h===void 0?"title":h,g=n.addRootButton,O=g===void 0?N.jsx(Rt,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):g,C=n.meta,j=n.expandedKeys,p=rt(n,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","expandedKeys"]),E=ne(p);if(E==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var P=Mt(),B=Tt(),$=Qe("/".concat(E,"/create")),R=Qe("/".concat(E,"/:id")),D=Qe("/".concat(E,"/:id/show")),q=A.useMemo(function(){if($)return[we];if(R)return[R.params.id];if(D)return[D.params.id]},[$,R,D]),T=mr({lazy:o,resource:E,filter:f,meta:C,expandedKeys:j??i}),M=T.data,k=T.defaultTitle,z=T.handleExpand,F=T.isPending,ee=T.loadChildNodes,L=T.handleDrop,I=T.expandedKeys,W=A.useCallback(function(X,G){P(B({resource:E,id:G.id,type:b}))},[B,b,P,E]),K=A.useCallback(function(X){return Jr(void 0,void 0,void 0,function(){return Yr(this,function(G){return o?[2,ee(X.record.id)]:[2,Promise.resolve()]})})},[o,ee]);if(F||M==null)return null;var V=!M||M.length===0||e;return N.jsx(jr,{value:T,children:N.jsxs(Fr,{className:t,sx:m,children:[N.jsx("div",{className:ve.cardTree,children:N.jsx(kn,{children:N.jsxs($t,{className:ve.cardContentTree,children:[N.jsx($n,un({data:M,hideRootNodes:s,titleField:y,onDrop:L,onExpand:z,onClick:W,selectedKeys:q,showLine:_,nodeActions:x,loadData:o?K:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:I},Zr(p))),V?O:null]})})}),N.jsx("div",{className:ve.actionCard,children:N.jsxs(qt,{children:[r?N.jsx(ke,{path:"create/*",element:A.isValidElement(r)?r:N.jsx(r,{})}):null,S?N.jsx(ke,{path:":id/show/*",element:A.isValidElement(S)?S:N.jsx(S,{})}):null,d?N.jsx(ke,{path:":id/*",element:A.isValidElement(d)?d:N.jsx(d,{})}):null,v!==!1?N.jsx(ke,{path:"*",element:N.jsx(Dn,{title:v,defaultTitle:k})}):null]})})]})})},"TreeWithDetails"),Zr=c(function(n){n.basePath,n.history,n.location,n.match,n.options,n.hasList,n.hasEdit,n.hasShow,n.hasCreate,n.syncWithLocation;var a=rt(n,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return a},"sanitizeRestProps"),Ne="RaTreeWithDetails",ve={container:"".concat(Ne,"-container"),cardTree:"".concat(Ne,"-cardTree"),cardContentTree:"".concat(Ne,"-cardContentTree"),actionCard:"".concat(Ne,"-actionCard")},Fr=ge("div",{name:Ne,overridesResolver:c(function(n,a){return a.root},"overridesResolver")})((be={display:"flex"},be["& .".concat(ve.actionCard)]={width:"100%"},be["& .".concat(ve.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},be["& .".concat(ve.cardContentTree)]={},be["& .".concat(ve.container)]={display:"flex"},be)),on=function(){return on=Object.assign||function(n){for(var a,e=1,t=arguments.length;e<t;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])}return n},on.apply(this,arguments)},ea=function(n,a){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&a.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},fa=c(function(n){var a,e=n.children,t=n.className,r=n.resource,i=ea(n,["children","className","resource"]),d=Bt(function(f){return f.breakpoints.down("sm")});return N.jsx(na,on({className:Pe((a={},a[xe.mobileToolbar]=d,a[xe.desktopToolbar]=!d,a),t),role:"toolbar"},i,{children:A.Children.count(e)===0?N.jsxs("div",{className:xe.defaultToolbar,children:[N.jsx(Lt,{}),N.jsx(Hr,{resource:r})]}):e}))},"EditNodeToolbar"),Me="RaEditNodeToolbar",xe={desktopToolbar:"".concat(Me,"-desktopToolbar"),mobileToolbar:"".concat(Me,"-mobileToolbar"),defaultToolbar:"".concat(Me,"-defaultToolbar")},na=ge(Kt,{name:Me,overridesResolver:c(function(n,a){return a.root},"overridesResolver")})(function(n){var a,e=n.theme;return a={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},a["&.".concat(xe.desktopToolbar)]={},a["&.".concat(xe.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},a["& .".concat(xe.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},a});export{va as AddChildButton,da as CreateNode,Hr as DeleteBranchButton,Gr as DeleteBranchWithConfirmButton,Ir as DeleteBranchWithUndoButton,Fn as DeleteMenuItem,Dr as DeleteMenuItemWithConfirmation,Rr as DeleteMenuItemWithUndo,tt as DeleteWithConfirmButtonClasses,ya as EditNode,fa as EditNodeToolbar,xe as EditNodeToolbarClasses,qr as NodeActions,ga as NodeEditActions,oa as ReferenceNodeInput,ca as ShowNode,$n as Tree,Jn as TreeChoicesContext,Or as TreeChoicesContextProvider,jt as TreeContext,jr as TreeContextProvider,br as TreeInput,jn as TreeInputClasses,wr as TreeInputTree,sa as TreeWithDetails,ve as TreeWithDetailsClasses,we as UNSAVED_NEW_NODE,ma as addTreeMethodsBasedOnChildren,aa as addTreeMethodsBasedOnParentAndPosition,lt as deleteBranchByDeletingAllChildren,ft as deleteBranchByDeletingNode,ua as fixFakeRestDataProvider,ba as getRCTree,wa as getRCTreeDatum,pa as getRecordTree,_a as getRootAndChildNodes,Oa as raTreeLanguageEnglish,xa as raTreeLanguageFrench,ia as removeChildren,Ca as renderSwitcherIcon,ht as updateQueryCacheFromGetTree,yt as useAddChildNode,tr as useAddRootNode,hr as useCreateNodeController,Un as useDeleteBranch,Vn as useDeleteBranchWithConfirmController,Xn as useDeleteBranchWithUndoController,Sa as useEditNodeController,Tn as useExpandedKeys,ar as useGetChildNodesCallback,mt as useGetRootNodes,Mn as useGetTree,ir as useGetTreeCallback,or as useMoveAsNthChildOf,cr as useMoveAsNthSiblingOf,pr as useReferenceNodeInputController,xr as useTreeChoicesContext,fn as useTreeContext,mr as useTreeController,Sr as useTreeInputController};
//# sourceMappingURL=index-Cu-7tVqZ.js.map
