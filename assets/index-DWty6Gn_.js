var rn=Object.defineProperty;var s=(t,a)=>rn(t,"name",{value:a,configurable:!0});import{ah as Et,ai as te,aj as an,u as ve,K as Ae,ak as Ke,L as Nt,m as Pt,a9 as on,al as it,n as N,am as un,an as ut,k as cn,ao as dn,z as De,ap as Dt,J as he,C as At,aq as sn,ar as ln,as as Ce,at as Se,au as je,av as ct,aw as fn,ax as Te,a3 as ce,ay as dt,az as vn,aA as hn,aB as yn,aC as gn,aD as kt,aE as mn,aF as we,aG as Rt,j as E,ad as We,T as bn,aH as wn,ag as pn,I as _n,f as On,aI as Mt,aJ as xn,x as Cn,ac as Sn,aK as jn,aL as En,aM as Nn,r as Pn,i as Dn,aN as Tt,aO as $t,aP as qt,aQ as Bt,aR as An,l as Lt,aS as It,aT as Kt,aU as kn,aV as Rn,M as Mn,O as Tn,aW as Qe,d as $n,aX as qn,aY as ke,a5 as Bn,aZ as Ln,a_ as In}from"./index-CfvpBPiM.js";import{b1 as va,a$ as ha,b0 as ya,b4 as ga,b7 as ma,b6 as ba,b5 as wa,b8 as pa,ba as _a,b9 as Oa,b2 as xa,b3 as Ca}from"./index-CfvpBPiM.js";var Ge=function(){return Ge=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ge.apply(this,arguments)},Kn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Wn=s(function(t){t===void 0&&(t={});var a=t.disableAuthentication,e=t.id,n=t.queryOptions,r=n===void 0?{}:n;Et({enabled:!a});var o=te(t);if(!o)throw new Error("useShowController requires a non-empty resource prop or context");var c=an(o),l=ve(),d=Ae(),i=Ke(),u=Nt(),f=Pt().id;if(!f&&!e)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var g=e??decodeURIComponent(f),b=r.meta,p=Kn(r,["meta"]),S=on(o,{id:g,meta:b},Ge({onError:s(function(){d("ra.notification.item_doesnt_exist",{type:"error"}),i("list",o),u()},"onError"),retry:!1},p)),w=S.data,v=S.error,h=S.isLoading,y=S.isFetching,m=S.isPending,x=S.refetch;if(w&&w.id&&w.id!=g)throw new Error("useShowController: Fetched record's id attribute (".concat(w.id,") must match the requested 'id' (").concat(g,")"));var j=it(),_=c(w),C=l("ra.page.show",{name:j(o,1),id:g,record:w,recordRepresentation:typeof _=="string"?_:""});return{defaultTitle:C,error:v,isLoading:h,isFetching:y,isPending:m,record:w,refetch:x,resource:o}},"useShowController"),st=N.createContext(null);st.displayName="ShowContext";var Qn=s(function(t){var a=t.children,e=t.value;return N.createElement(st.Provider,{value:e},N.createElement(un,{value:e&&e.record},a))},"ShowContextProvider"),Un=s(function(){var t=N.useContext(st);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),ze=function(){return ze=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ze.apply(this,arguments)},Gn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},zn=s(function(t){var a=ut(t).hasEdit;return N.createElement(cn,ze({},Vn(t)),a&&N.createElement(dn,null))},"ShowActions"),Vn=s(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var a=Gn(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return a},"sanitizeRestProps$1"),Ve=function(){return Ve=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ve.apply(this,arguments)},Xn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ne,Hn=N.createElement(zn,null),Jn=s(function(t){var a,e=t.actions,n=t.aside,r=t.children,o=t.className,c=t.component,l=c===void 0?At:c,d=t.emptyWhileLoading,i=d===void 0?!1:d,u=t.title,f=Xn(t,["actions","aside","children","className","component","emptyWhileLoading","title"]),g=Un(),b=g.resource,p=g.defaultTitle,S=g.record,w=ut().hasEdit,v=typeof e>"u"&&w?Hn:e;return!r||!S&&i?null:N.createElement(Yn,Ve({className:De("show-page",o)},f),u!==!1&&N.createElement(Dt,{title:u,defaultTitle:p,preferenceKey:"".concat(b,".show.title")}),v!==!1&&v,N.createElement("div",{className:De(Oe.main,(a={},a[Oe.noActions]=!v,a))},N.createElement(l,{className:Oe.card},r),n))},"ShowView"),Re="RaShow",Oe={main:"".concat(Re,"-main"),noActions:"".concat(Re,"-noActions"),card:"".concat(Re,"-card")},Yn=he("div",{name:Re,overridesResolver:s(function(t,a){return a.root},"overridesResolver")})((Ne={},Ne["& .".concat(Oe.main)]={display:"flex"},Ne["& .".concat(Oe.noActions)]={marginTop:"1em"},Ne["& .".concat(Oe.card)]={flex:"1 1 auto"},Ne)),G=function(){return G=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},G.apply(this,arguments)},ae=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},oe=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ra=s(function(t,a,e,n){a===void 0&&(a="parent_id"),e===void 0&&(e="position"),n===void 0&&(n=!1);var r=n?sn:ln,o=G(G({},t),{getTree:s(function(c,l){return ae(void 0,void 0,void 0,function(){var d,i;return oe(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:{},sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return d=u.sent().data,i=d.map(function(f){return G(G({},f),{children:d.filter(function(g){return g[a]==f.id}).sort(function(g,b){return g[e]-b[e]}).map(function(g){return g.id})})}),[2,{data:i}]}})})},"getTree"),getRootNodes:s(function(c,l){return ae(void 0,void 0,void 0,function(){var d,i,u;return oe(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:(u={},u[a]=null,u),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return d=f.sent().data,[4,Promise.all(d.map(function(g){var b;return t.getList(c,{filter:(b={},b[a]=g.id,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta}).then(function(p){var S=p.data;return G(G({},g),{children:S.map(function(w){var v=w.id;return v})})})}))];case 2:return i=f.sent(),[2,{data:i}]}})})},"getRootNodes"),getParentNode:s(function(c,l){var d=l.childId,i=l.meta;return ae(void 0,void 0,void 0,function(){var u,f,g;return oe(this,function(b){switch(b.label){case 0:return[4,o.getTree(c,{meta:i})];case 1:return u=b.sent().data,f=u.find(function(p){return p.id===d}),f?(g=u.find(function(p){return p.id===f[a]}),[2,{data:g}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:s(function(c,l){var d=l.parentId,i=l.meta;return ae(void 0,void 0,void 0,function(){var u,f,g;return oe(this,function(b){switch(b.label){case 0:return[4,t.getList(c,{filter:(g={},g[a]=d,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i})];case 1:return u=b.sent().data,[4,Promise.all(u.map(function(p){var S;return t.getList(c,{filter:(S={},S[a]=p.id,S),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i}).then(function(w){var v=w.data;return G(G({},p),{children:v.map(function(h){var y=h.id;return y})})})}))];case 2:return f=b.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:s(function(c,l){var d=l.source,i=l.destination,u=l.position,f=l.meta;return ae(void 0,void 0,void 0,function(){var g,b,p,S,w;return oe(this,function(v){switch(v.label){case 0:return[4,t.getList(c,{filter:(p={},p[a]=i.id,p["".concat(e,"_gte")]=u,p),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f})];case 1:return g=v.sent().data,g.length>0?[4,Promise.all(g.map(function(h){var y;return t.update(c,{id:h.id,data:(y={},y[e]=h[e]+1,y),previousData:h,meta:f})}))]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,t.getList(c,{filter:(S={},S[a]=d[a],S["".concat(e,"_gt")]=d[e],S),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f})];case 4:return b=v.sent().data,b.length>0?[4,Promise.all(b.map(function(h){var y;return t.update(c,{id:h.id,data:(y={},y[e]=h[e]-1,y),previousData:h,meta:f})}))]:[3,6];case 5:v.sent(),v.label=6;case 6:return[4,t.update(c,{id:d.id,data:(w={},w[a]=i.id,w[e]=u,w),previousData:d,meta:f})];case 7:return v.sent(),[2,{data:void 0}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:s(function(c,l){var d=l.source,i=l.destination,u=l.position,f=l.meta;return ae(void 0,void 0,void 0,function(){var g,b,p,S,w,v,h,y,m,x,j;return oe(this,function(_){switch(_.label){case 0:return u===0&&(g=(w={},w[a]=i[a],w)),d[e]>i[e]&&d[a]===i[a]&&(g=(v={},v[a]=i[a],v["".concat(e,"_gt")]=i[e],v)),d[a]!==i[a]&&u>0&&(g=(h={},h[a]=i[a],h["".concat(e,"_gt")]=i[e],h)),g?[4,t.getList(c,{filter:g,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f})]:[3,3];case 1:return b=_.sent().data,b.length>0?[4,Promise.all(b.map(function(C){var O;return C.id===d.id?Promise.resolve(void 0):t.update(c,{id:C.id,data:(O={},O[e]=C[e]+1,O),previousData:C,meta:f})}))]:[3,3];case 2:_.sent(),_.label=3;case 3:return d[a]===i[a]?d[e]>i[e]?p=(y={},y[a]=d[a],y["".concat(e,"_gt")]=d[e],y):p=(m={},m[a]=d[a],m["".concat(e,"_gt")]=d[e],m["".concat(e,"_lte")]=i[e],m):p=(x={},x[a]=d[a],x["".concat(e,"_gt")]=d[e],x),[4,t.getList(c,{filter:p,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:f})];case 4:return S=_.sent().data,S.length>0?[4,Promise.all(S.map(function(C){var O;return C.id===d.id?Promise.resolve(void 0):t.update(c,{id:C.id,data:(O={},O[e]=C[e]-1,O),previousData:C,meta:f})}))]:[3,6];case 5:_.sent(),_.label=6;case 6:return[4,t.update(c,{id:d.id,data:(j={},j[a]=i[a],j[e]=d[a]===i[a]?d[e]>i[e]?i[e]+1:i[e]:u,j),previousData:d,meta:f})];case 7:return _.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:s(function(c,l){var d=l.data,i=l.meta;return ae(void 0,void 0,void 0,function(){var u,f,g,b,p;return oe(this,function(S){switch(S.label){case 0:return[4,t.getList(c,{filter:(b={},b[a]=null,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i})];case 1:return u=S.sent().data,f=u.length>0?u.reduce(function(w,v){return v[e]>w?v[e]:w},-1/0)+1:0,[4,t.create(c,{data:G(G({},d),(p={},p[a]=null,p[e]=f,p)),meta:i})];case 2:return g=S.sent().data,[2,{data:G(G({},g),{children:[]})}]}})})},"addRootNode"),addChildNode:s(function(c,l){var d=l.parentId,i=l.data,u=l.meta,f=l.position;return ae(void 0,void 0,void 0,function(){var g,b,p,S,w,v;return oe(this,function(h){switch(h.label){case 0:return[4,t.getList(c,{filter:(w={},w[a]=d,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return g=h.sent().data,b=g.length>0?g.reduce(function(y,m){return m[e]>y?m[e]:y},-1/0)+1:0,p=f!==void 0&&f>=0&&f<=b?f:b,[4,t.create(c,{data:G(G({},i),(v={},v[a]=d,v[e]=p,v)),meta:u})];case 2:return S=h.sent().data,f!==void 0&&f>=0&&f<=b&&g.forEach(function(y){var m;y[e]>=f&&t.update(c,{id:y.id,data:G(G({},y),(m={},m[e]=y[e]+1,m)),previousData:y,meta:u})}),[2,{data:G(G({},S),{children:[]})}]}})})},"addChildNode"),deleteBranch:s(function(c,l){return ae(void 0,void 0,void 0,function(){var d,i,u,f;return oe(this,function(g){switch(g.label){case 0:return d=l.id,i=l.previousData,u=l.meta,[4,r(o,c,l)];case 1:return g.sent(),[4,o.getChildNodes(c,{parentId:i[a],meta:u})];case 2:return f=g.sent().data,[4,Promise.all(f.filter(function(b){return b[e]>i[e]&&b.id!==d}).map(function(b){var p;return t.update(c,{id:b.id,data:G(G({},b),(p={},p[e]=b[e]-1,p)),previousData:b,meta:u})}))];case 3:return g.sent(),[2,{data:i}]}})})},"deleteBranch")});return o},"addTreeMethodsBasedOnParentAndPosition"),pe=function(){return pe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pe.apply(this,arguments)},Zn=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},Fn=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},er=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},tr=s(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=N.useRef(a),c=je(pe(pe({mutationFn:s(function(d){var i=d===void 0?{}:d,u=i.resource,f=u===void 0?t:u,g=i.data,b=g===void 0?o.current.data:g,p=i.meta,S=p===void 0?o.current.meta:p;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(b==null)throw new Error("useAddRootNode mutation requires non-empty data");return n.addRootNode(f,{data:b,meta:S}).then(function(w){var v=w.data;return v})},"mutationFn")},e),{onSuccess:s(function(d,i,u){i===void 0&&(i={});var f=i.resource,g=f===void 0?t:f;r.setQueryData([g,"getOne",{id:String(d.id)}],d),e.onSuccess&&e.onSuccess(d,i,u)},"onSuccess")})),l=s(function(d,i,u){return d===void 0&&(d=t),i===void 0&&(i={}),u===void 0&&(u={}),Zn(void 0,void 0,void 0,function(){var f,g;return Fn(this,function(b){return f=u.returnPromise,g=er(u,["returnPromise"]),f?[2,c.mutateAsync(pe({resource:d},i),u)]:(c.mutate(pe({resource:d},i),g),[2])})})},"addRootNode");return[l,c]},"useAddRootNode"),ee=function(){return ee=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ee.apply(this,arguments)},ft=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},vt=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},nr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ht=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Wt=s(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.id,c=a.previousData,l=e.mutationMode,d=l===void 0?"pessimistic":l,i=nr(e,["mutationMode"]),u=N.useRef(d),f=N.useRef(a),g=N.useRef([]),b=s(function(w){var v=w.resource,h=w.id,y=Date.now(),m=u.current==="undoable"?y+5*1e3:y,x=s(function(_,C){var O=_.findIndex(function(M){return M.id==C});if(O===-1)return _;for(var P=_[O],D=ht(ht([],_.slice(0,O),!0),_.slice(O+1),!0),T=P.children||[],R=0,A=T;R<A.length;R++){var k=A[R];D=x(D,k)}return D},"removeRecord"),j=s(function(_){var C=x(_,h);return C.map(function(O){return ee(ee({},O),{children:O.children?O.children.filter(function(P){return P!==h}):O.children})})},"updateCollection");r.setQueriesData({queryKey:[v,"getTree"]},function(_){if(!_)return _;var C=j(_),O=C.length<_.length;return O?C:_},{updatedAt:m}),r.setQueriesData({queryKey:[v,"getRootNodes"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:m}),r.setQueriesData({queryKey:[v,"getChildNodes"]},function(_){if(!_)return _;var C=j(_),O=C.length<_.length;return O?C:_},{updatedAt:m})},"updateCache"),p=je(ee(ee({mutationFn:s(function(w){var v=w===void 0?{}:w,h=v.resource,y=h===void 0?t:h,m=v.id,x=m===void 0?f.current.id:m,j=v.previousData,_=j===void 0?f.current.previousData:j,C=v.meta,O=C===void 0?f.current.meta:C;if(!y)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(x==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(_==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return n.deleteBranch(y,{id:x,previousData:_,meta:O}).then(function(P){var D=P.data;return D})},"mutationFn")},i),{onMutate:s(function(w){return ft(void 0,void 0,void 0,function(){var v;return vt(this,function(h){switch(h.label){case 0:return i.onMutate?[4,i.onMutate(w)]:[3,2];case 1:return v=h.sent()||{},[2,ee({snapshot:g.current},v)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:s(function(w,v,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(y){var m=y[0],x=y[1];r.setQueryData(m,x)}),i.onError)return i.onError(w,v,h)},"onError"),onSuccess:s(function(w,v,h){if(v===void 0&&(v={}),u.current==="pessimistic"){var y=v.resource,m=y===void 0?t:y,x=v.id,j=x===void 0?o:x;b({resource:m,id:j}),i.onSuccess&&i.onSuccess(w,v,h)}},"onSuccess"),onSettled:s(function(w,v,h,y){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&y.snapshot.forEach(function(m){var x=m[0];r.invalidateQueries({queryKey:x})}),i.onSettled)return i.onSettled(w,v,h,y)},"onSettled")})),S=s(function(w,v,h){return w===void 0&&(w=t),v===void 0&&(v={}),h===void 0&&(h={}),ft(void 0,void 0,void 0,function(){var y,m,x,j,_,C,O,P,D;return vt(this,function(T){switch(T.label){case 0:return y=h.mutationMode,m=h.onSuccess,x=h.onSettled,j=h.onError,f.current=a,y&&(u.current=y),u.current==="pessimistic"?[2,p.mutate(ee({resource:w},v),{onSuccess:m,onSettled:x,onError:j})]:(_=v.id,C=_===void 0?o:_,O=v.previousData,P=O===void 0?c:O,D=[[w,"getTree"],[w,"getRootNodes"],[w,"getChildNodes"]],g.current=D.reduce(function(R,A){return R.concat(r.getQueriesData({queryKey:A}))},[]),[4,Promise.all(g.current.map(function(R){var A=R[0];return r.cancelQueries({queryKey:A})}))]);case 1:return T.sent(),b({resource:w,id:C}),m&&setTimeout(function(){return m(P,ee({resource:w},v),{snapshot:g.current})},0),i.onSuccess&&setTimeout(function(){i.onSuccess&&i.onSuccess(P,ee({resource:w},v),{snapshot:g.current})},0),u.current==="optimistic"?[2,p.mutate(ee({resource:w},v),{onSettled:x,onError:j})]:(ct.once("end",function(R){var A=R.isUndo;A?g.current.forEach(function(k){var M=k[0],$=k[1];r.setQueryData(M,$)}):p.mutate(ee({resource:w},v),{onSettled:x,onError:j})}),[2])}})})},"mutate");return[S,p]},"useDeleteBranch"),se=function(){return se=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},se.apply(this,arguments)},rr=s(function(t,a,e){var n=Ce(),r=je(se({mutationKey:[t,"getChildNodes",a],mutationFn:s(function(c){return n.getChildNodes(t,se(se({},a),c)).then(function(l){var d=l.data;return d})},"mutationFn")},e)),o=N.useCallback(function(c){return r.mutateAsync(se(se({},a),{parentId:c}))},[r,a]);return o},"useGetChildNodesCallback"),$e=function(){return $e=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$e.apply(this,arguments)},aa=s(function(t){return $e($e({},t),{children:t.children.map(function(a){return a.id})})},"removeChildren"),Xe=function(){return Xe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Xe.apply(this,arguments)},ar=s(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=je(Xe({mutationKey:[t,"getTree",a],mutationFn:s(function(){return n.getTree(t,a).then(function(l){var d=l.data;return d})},"mutationFn"),onSuccess:s(function(l){fn(r,t,l,a)},"onSuccess")},e)),c=N.useCallback(function(){return o.mutateAsync(a)},[o,a]);return c},"useGetTreeCallback"),ne=function(){return ne=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ne.apply(this,arguments)},yt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},gt=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},or=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ge=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ir=s(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.source,c=a.destination,l=a.position,d=e.mutationMode,i=d===void 0?"undoable":d,u=or(e,["mutationMode"]),f=N.useRef(i),g=N.useRef(a),b=N.useRef([]),p=s(function(v){var h=v.resource,y=v.position,m=v.source,x=v.destination,j=Date.now(),_=f.current==="undoable"?j+5*1e3:j,C=s(function(O){var P,D,T,R,A,k=Te(O),M=k.find(function(I){var L;return(L=I.children)===null||L===void 0?void 0:L.includes(m.id)});M?M.children=(P=M.children)===null||P===void 0?void 0:P.filter(function(I){return I!==m.id}):k=k.filter(function(I){return I.id!==m.id});var $=k.find(function(I){return I.id===x.id});return $?$.children=ge(ge(ge([],(T=(D=$.children)===null||D===void 0?void 0:D.slice(0,y))!==null&&T!==void 0?T:[],!0),[m.id],!1),(A=(R=$.children)===null||R===void 0?void 0:R.slice(y))!==null&&A!==void 0?A:[],!0):(k=k.filter(function(I){return I.id!==m.id}),k=ge(ge(ge([],k.slice(0,y),!0),[m],!1),k.slice(y),!0)),k},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_})},"updateCache"),S=je(ne(ne({mutationFn:s(function(v){var h=v===void 0?{}:v,y=h.resource,m=y===void 0?t:y,x=h.position,j=x===void 0?g.current.position:x,_=h.source,C=_===void 0?g.current.source:_,O=h.destination,P=O===void 0?g.current.destination:O,D=h.meta,T=D===void 0?g.current.meta:D;if(m==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(C==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return n.moveAsNthChildOf(m,{position:j,source:C,destination:P,meta:T}).then(function(R){var A=R.data;return A})},"mutationFn")},u),{onMutate:s(function(v){return yt(void 0,void 0,void 0,function(){var h;return gt(this,function(y){switch(y.label){case 0:return u.onMutate?[4,u.onMutate(v)]:[3,2];case 1:return h=y.sent()||{},[2,ne({snapshot:b.current},h)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:s(function(v,h,y){if((f.current==="optimistic"||f.current==="undoable")&&y.snapshot.forEach(function(m){var x=m[0],j=m[1];r.setQueryData(x,j)}),u.onError)return u.onError(v,h,y)},"onError"),onSuccess:s(function(v,h,y){if(h===void 0&&(h={}),f.current==="pessimistic"){var m=h.resource,x=m===void 0?t:m,j=h.position,_=j===void 0?l:j,C=h.source,O=C===void 0?o:C,P=h.destination,D=P===void 0?c:P;p({resource:x,position:_,source:O,destination:D}),u.onSuccess&&u.onSuccess(v,h,y)}},"onSuccess"),onSettled:s(function(v,h,y,m){if(y===void 0&&(y={}),(f.current==="optimistic"||f.current==="undoable")&&m.snapshot.forEach(function(x){var j=x[0];r.invalidateQueries({queryKey:j})}),u.onSettled)return u.onSettled(v,h,y,m)},"onSettled")})),w=s(function(v,h,y){return v===void 0&&(v=t),h===void 0&&(h={}),y===void 0&&(y={}),yt(void 0,void 0,void 0,function(){var m,x,j,_,C,O,P,D,T,R,A;return gt(this,function(k){switch(k.label){case 0:if(m=y.mutationMode,x=y.onSuccess,j=y.onSettled,_=y.onError,g.current=a,m&&(f.current=m),f.current==="pessimistic")return[2,S.mutate(ne({resource:v},h),{onSuccess:x,onSettled:j,onError:_})];if(C=h.position,O=C===void 0?l:C,P=h.source,D=P===void 0?o:P,T=h.destination,R=T===void 0?c:T,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return A=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=A.reduce(function(M,$){return M.concat(r.getQueriesData({queryKey:$}))},[]),[4,Promise.all(b.current.map(function(M){var $=M[0];return r.cancelQueries({queryKey:$})}))];case 1:return k.sent(),p({resource:v,position:O,source:D,destination:R}),x&&setTimeout(function(){return x(void 0,ne({resource:v},h),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ne({resource:v},h),{snapshot:b.current})},0),f.current==="optimistic"?[2,S.mutate(ne({resource:v},h),{onSettled:j,onError:_})]:(ct.once("end",function(M){var $=M.isUndo;$?b.current.forEach(function(I){var L=I[0],X=I[1];r.setQueryData(L,X)}):S.mutate(ne({resource:v},h),{onSettled:j,onError:_})}),[2])}})})},"mutate");return[w,S]},"useMoveAsNthChildOf"),re=function(){return re=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},re.apply(this,arguments)},mt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},bt=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ur=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},me=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},cr=s(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.source,c=a.destination,l=a.position,d=e.mutationMode,i=d===void 0?"undoable":d,u=ur(e,["mutationMode"]),f=N.useRef(i),g=N.useRef(a),b=N.useRef([]),p=s(function(v){var h=v.resource,y=v.position,m=v.source,x=v.destination,j=Date.now(),_=f.current==="undoable"?j+5*1e3:j,C=s(function(O){var P,D,T,R,A,k=Te(O),M=k.find(function(L){var X;return(X=L.children)===null||X===void 0?void 0:X.includes(m.id)}),$=k.find(function(L){var X;return(X=L.children)===null||X===void 0?void 0:X.includes(x.id)}),I=y;return M&&$&&M.id===$.id&&M.children&&M.children.findIndex(function(L){return L===m.id})<M.children.findIndex(function(L){return L===x.id})&&(I=y-1),M?M.children=(P=M.children)===null||P===void 0?void 0:P.filter(function(L){return L!==m.id}):k=k.filter(function(L){return L.id!==m.id}),$?$.children=me(me(me([],(T=(D=$.children)===null||D===void 0?void 0:D.slice(0,I))!==null&&T!==void 0?T:[],!0),[m.id],!1),(A=(R=$.children)===null||R===void 0?void 0:R.slice(I))!==null&&A!==void 0?A:[],!0):(k=k.filter(function(L){return L.id!==m.id}),k=me(me(me([],k.slice(0,y),!0),[m],!1),k.slice(y),!0)),k},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(O){return O&&O.length>0?C(O):O},{updatedAt:_})},"updateCache"),S=je(re(re({mutationFn:s(function(v){var h=v===void 0?{}:v,y=h.resource,m=y===void 0?t:y,x=h.position,j=x===void 0?g.current.position:x,_=h.source,C=_===void 0?g.current.source:_,O=h.destination,P=O===void 0?g.current.destination:O,D=h.meta,T=D===void 0?g.current.meta:D;if(m==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(C==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return n.moveAsNthSiblingOf(m,{position:j,source:C,destination:P,meta:T}).then(function(R){var A=R.data;return A})},"mutationFn")},u),{onMutate:s(function(v){return mt(void 0,void 0,void 0,function(){var h;return bt(this,function(y){switch(y.label){case 0:return u.onMutate?[4,u.onMutate(v)]:[3,2];case 1:return h=y.sent()||{},[2,re({snapshot:b.current},h)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:s(function(v,h,y){if((f.current==="optimistic"||f.current==="undoable")&&y.snapshot.forEach(function(m){var x=m[0],j=m[1];r.setQueryData(x,j)}),u.onError)return u.onError(v,h,y)},"onError"),onSuccess:s(function(v,h,y){if(h===void 0&&(h={}),f.current==="pessimistic"){var m=h.resource,x=m===void 0?t:m,j=h.position,_=j===void 0?l:j,C=h.source,O=C===void 0?o:C,P=h.destination,D=P===void 0?c:P;p({resource:x,position:_,source:O,destination:D}),u.onSuccess&&u.onSuccess(v,h,y)}},"onSuccess"),onSettled:s(function(v,h,y,m){if(y===void 0&&(y={}),(f.current==="optimistic"||f.current==="undoable")&&m.snapshot.forEach(function(x){var j=x[0];r.invalidateQueries({queryKey:j})}),u.onSettled)return u.onSettled(v,h,y,m)},"onSettled")})),w=s(function(v,h,y){return v===void 0&&(v=t),h===void 0&&(h={}),y===void 0&&(y={}),mt(void 0,void 0,void 0,function(){var m,x,j,_,C,O,P,D,T,R,A;return bt(this,function(k){switch(k.label){case 0:if(m=y.mutationMode,x=y.onSuccess,j=y.onSettled,_=y.onError,g.current=a,m&&(f.current=m),f.current==="pessimistic")return[2,S.mutate(re({resource:v},h),{onSuccess:x,onSettled:j,onError:_})];if(C=h.position,O=C===void 0?l:C,P=h.source,D=P===void 0?o:P,T=h.destination,R=T===void 0?c:T,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return A=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=A.reduce(function(M,$){return M.concat(r.getQueriesData({queryKey:$}))},[]),[4,Promise.all(b.current.map(function(M){var $=M[0];return r.cancelQueries({queryKey:$})}))];case 1:return k.sent(),p({resource:v,position:O,source:D,destination:R}),x&&setTimeout(function(){return x(void 0,re({resource:v},h),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,re({resource:v},h),{snapshot:b.current})},0),f.current==="optimistic"?[2,S.mutate(re({resource:v},h),{onSettled:j,onError:_})]:(ct.once("end",function(M){var $=M.isUndo;$?b.current.forEach(function(I){var L=I[0],X=I[1];r.setQueryData(L,X)}):S.mutate(re({resource:v},h),{onSettled:j,onError:_})}),[2])}})})},"mutate");return[w,S]},"useMoveAsNthSiblingOf"),ue=function(){return ue=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ue.apply(this,arguments)},wt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},pt=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},oa=s(function(t){return ue(ue({},t),{getRootNodes:s(function(a,e){return wt(void 0,void 0,void 0,function(){var n,r;return pt(this,function(o){switch(o.label){case 0:return[4,t.getRootNodes(a,e)];case 1:return n=o.sent().data,r=n.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:s(function(a,e){var n=e.data,r=e.meta;return wt(void 0,void 0,void 0,function(){var o,c,l,d;return pt(this,function(i){switch(i.label){case 0:return[4,t.getList(a,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:r})];case 1:return o=i.sent().data,c=o.filter(function(u){return typeof u.parent_id>"u"}),l=c.length>0?c.reduce(function(u,f){return f.position>u?f.position:u},-1/0)+1:0,[4,t.create(a,{data:ue(ue({},n),{parent_id:null,position:l}),meta:r})];case 2:return d=i.sent().data,[2,{data:ue(ue({},d),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),_t=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Qt=s(function(t,a){var e,n=t.filter(function(c){return c.id!==a.id}),r=n.find(function(c){var l;return(l=c.children)===null||l===void 0?void 0:l.includes(a.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==a.id})),!a.children||a.children.length===0)return n;var o=Ut(n,a);return n=n.filter(function(c){return!o.includes(c)}),n},"removeNode"),Ut=s(function(t,a){return a?!a.children||a.children.length===0?[]:_t(_t([],a.children,!0),a.children.flatMap(function(e){var n=t.find(function(r){return r.id===e});return n?Ut(t,n):[]}),!0):[]},"getNodeChildrenRecursive"),He=function(){return He=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},He.apply(this,arguments)},Gt=s(function(t){var a=t.mutationMode,e=t.mutationOptions,n=t.redirect,r=n===void 0?"list":n,o=Ae(),c=Ke(),l=Nt(),d=te(t);if(d==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=ce(t);if(i==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Wt(),f=u[0],g=u[1].isPending,b=N.useState(!1),p=b[0],S=b[1],w=dt().setFinalData,v=N.useCallback(function(m){m.stopPropagation(),f(d,{id:i.id,previousData:i},He({mutationMode:a,onSuccess:s(function(){o("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,d),a==="pessimistic"?l():w&&w(function(x){return Qt(x,i)})},"onSuccess"),onError:s(function(x){o(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,a,e,o,i,c,r,l,d,w]),h=s(function(m){m.stopPropagation(),S(!0)},"handleDialogOpen"),y=s(function(m){m.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:v,handleDialogOpen:h,handleDialogClose:y,isPending:g,open:p}},"useDeleteBranchWithConfirmController"),Je=function(){return Je=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Je.apply(this,arguments)},zt=s(function(t){var a=t.mutationOptions,e=t.redirect,n=e===void 0?"list":e,r=Ae(),o=Ke(),c=dt().setFinalData,l=te(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var d=ce(t);if(d==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var i=Wt(),u=i[0],f=i[1].isPending,g=N.useCallback(function(b){b.stopPropagation(),u(l,{id:d.id,previousData:d},Je({onSuccess:s(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(p){return Qt(p,d)}),o(n,l)},"onSuccess"),onError:s(function(p){return r(typeof p=="string"?p:p.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},a))},[u,a,r,d,o,n,l,c]);return{handleDelete:g,isPending:f}},"useDeleteBranchWithUndoController"),_e=function(){return _e=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_e.apply(this,arguments)},dr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},sr=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},lr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},fr=s(function(t){var a=t.disableAuthentication,e=t.record,n=e===void 0?{}:e,r=t.redirect,o=t.mutationOptions,c=o===void 0?{}:o,l=t.transform;Et({enabled:!a});var d=te(t);if(d==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=it(),u=Se(),f=vn(),g=dt().handleAddNode,b=f.state&&f.state.parentId,p=f.state&&f.state.insertAsFirstChild,S=typeof b<"u"&&b!==null,w=f.state&&f.state.record||n,v=c.onSuccess,h=c.onError,y=lr(c,["onSuccess","onError"]),m=ut(t),x=m.hasEdit,j=m.hasShow,_=r||vr(j,x),C=tr(d,void 0,y),O=C[0],P=C[1],D=hn(d,void 0,y),T=D[0],R=D[1],A=yn(g??hr);N.useEffect(function(){return A({record:{},parentId:b,insertAsFirstChild:p}),function(){A(void 0)}},[A,b,p]);var k=ve(),M=Ae(),$=Ke(),I=N.useCallback(function(q,K){var W=K===void 0?{}:K,B=W.onSuccess,U=W.onError,z=W.transform,F=s(function(Q){M("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),$(_,d,Q.id,Q),u.refetchQueries({queryKey:[d,"getTree"],type:"active"}),u.refetchQueries({queryKey:[d,"getRootNodes"],type:"active"})},"defaultOnSuccess"),J=s(function(Q){M(typeof Q=="string"?Q:Q.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(z?z(q):l?l(q):q).then(function(Q){return dr(void 0,void 0,void 0,function(){var H,Y,ie;return sr(this,function(V){switch(V.label){case 0:H={onSuccess:s(function(Z,Ee,ye){A(void 0),B?B(Z,Ee,ye):v?v(Z,Ee,ye):F(Z)},"onSuccess"),onError:U||h||J},V.label=1;case 1:return V.trys.push([1,6,,7]),S?[4,T(d,{data:Q,parentId:b,meta:y.meta,position:p?0:void 0},_e(_e({},H),{returnPromise:!0}))]:[3,3];case 2:return V.sent(),[3,5];case 3:return[4,O(d,{data:Q,meta:y.meta},_e(_e({},H),{returnPromise:!0}))];case 4:V.sent(),V.label=5;case 5:return[3,7];case 6:return Y=V.sent(),(Y instanceof gn||typeof Y=="object"&&Y!==null&&Y.hasOwnProperty("body"))&&((ie=Y.body)===null||ie===void 0?void 0:ie.errors)!=null?[2,Y.body.errors]:[3,7];case 7:return[2]}})})})},[T,O,A,S,M,h,v,b,u,$,d,l,y.meta,_,p]),L=i(d,1),X=k("ra.page.create",{name:"".concat(L)});return{isLoading:!1,isFetching:!1,defaultTitle:X,save:I,saving:P.isPending||R.isPending,isPending:P.isPending||R.isPending,resource:d,record:w,redirect:_}},"useCreateNodeController"),vr=s(function(t,a){return a?"edit":t?"show":"list"},"getDefaultRedirectRoute"),hr=s(function(){},"noop"),yr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Vt=s(function(t,a){var e=a.find(function(n){return n.id==t});return e?yr([e.id.toString()],(e.children||[]).flatMap(function(n){return Vt(n,a)}),!0):[]},"getNodeKeysRecursively"),le=function(){return le=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},le.apply(this,arguments)},Ot=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},xt=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ct=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},de=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},gr=s(function(t){var a=ve(),e=te(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var n=it(),r=t.lazy,o=r===void 0?!1:r,c=t.mutationMode,l=c===void 0?"undoable":c,d=t.meta,i=kt(e,{meta:d},{enabled:!o}),u=mn(e,{meta:d},{enabled:o,gcTime:0}),f=rr(e,{meta:d}),g=N.useMemo(function(){var q;return(q=u.data)===null||q===void 0?void 0:q.map(function(K){var W=K.children,B=Ct(K,["children"]);return W!=null&&W.length?B:K})},[u.data,u.isFetching]),b=o?le(le({},u),{data:g}):i,p=b.data,S=b.error,w=b.isLoading,v=b.isPending,h=b.isFetching,y=N.useState(p),m=y[0],x=y[1],j=N.useCallback(function(q){return Ot(void 0,void 0,void 0,function(){var K;return xt(this,function(W){switch(W.label){case 0:return[4,f(q)];case 1:return K=W.sent(),x(function(B){var U,z=K.map(function(Q){var H=Q.children,Y=Ct(Q,["children"]),ie=B==null?void 0:B.some(function(V){var Z;return(Z=Q.children)===null||Z===void 0?void 0:Z.includes(V.id)});return H!=null&&H.length&&!ie?Y:Q}),F=de(de([],(U=B==null?void 0:B.map(function(Q){return Q.id===q?le(le({},Q),{children:z.map(function(H){return H.id})}):Q}))!==null&&U!==void 0?U:[],!0),z,!0),J=F.reduce(function(Q,H){return Q[H.id]=H,Q},{});return Object.values(J)}),[2]}})})},[f]);N.useEffect(function(){x(p)},[p]);var _=N.useState(),C=_[0],O=_[1],P=N.useCallback(function(q){var K,W=Te(m);if(q){if(O(q),q.parentId!=null){var B=W==null?void 0:W.find(function(z){return z.id===q.parentId});B&&(B.children=B.children||[],B.children=q.insertAsFirstChild?de([we],B.children,!0):de(de([],B.children,!0),[we],!1))}x(de(de([],W??[],!0),[le({id:we,children:[]},q.record)],!1))}else{if(!C)return;var U=Te(m);if(C.parentId!=null){var B=U==null?void 0:U.find(function(F){return F.id===C.parentId});B&&(B.children=(K=B.children)===null||K===void 0?void 0:K.filter(function(F){return F!=we}))}O(void 0),x(U==null?void 0:U.filter(function(z){return z.id!==we}))}},[m,C]),D=Rt(),T=D[0],R=D[1],A=N.useCallback(function(q){R(function(K){var W,B,U=typeof q=="function"?q(K??[]):q,z=(W=K==null?void 0:K.filter(function(J){return!U.includes(J)}))!==null&&W!==void 0?W:[],F=(B=z==null?void 0:z.flatMap(function(J){return Vt(J,m??[])},[]))!==null&&B!==void 0?B:[];return U.filter(function(J){return!F.includes(J)})})},[m,R]),k=ir(e,{meta:d})[0],M=cr(e,{meta:d})[0],$=ar(e),I=Ae(),L=N.useCallback(function(q){var K,W=q.node.key,B=q.dragNode.key,U=q.node.pos.split("-"),z=q.dropPosition-Number(U[U.length-1]),F=(K=p==null?void 0:p.reduce(function(V,Z){return V[Z.id]=Z,V},{}))!==null&&K!==void 0?K:{},J=F[B],Q=F[W],H=s(function(){return Ot(void 0,void 0,void 0,function(){return xt(this,function(V){switch(V.label){case 0:return[4,$()];case 1:return V.sent(),I("ra-tree.item_moved",{undoable:l==="undoable"}),[2]}})})},"successSideEffect");if(!q.dropToGap)k(e,{source:J,destination:Q,position:0},{onSuccess:H,mutationMode:l});else if((q.node.children||[]).length>0&&q.node.expanded&&z===1)k(e,{source:J,destination:Q,position:Q.children.length},{onSuccess:H,mutationMode:l});else{var Y,ie=s(function(V,Z,Ee){V.forEach(function(ye,nn){if(ye.key===Z){Ee(nn);return}ye.children&&ie(ye.children,Z,Ee)})},"loop_1");ie(p,W,function(V){Y=V}),M(e,{source:J,destination:Q,position:z===-1?Y:Y+1},{onSuccess:H,mutationMode:l})}},[p,k,M,l,I,$,e]),X=a("ra.page.list",{name:n(e,2)});return{data:m,defaultTitle:X,error:S,expandedKeys:T,handleAddNode:P,handleDrop:L,handleExpand:A,isLoading:w,isFetching:h,isPending:v,loadChildNodes:j,newNode:C,lazy:o,setFinalData:x}},"useTreeController"),Xt=N.createContext(void 0),qe=function(){return qe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qe.apply(this,arguments)},Ht=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},mr=s(function(t){var a=t.label,e=t.multiple,n=t.sx,r=t.className,o=t.helperText,c=t.fullWidth,l=Ht(t,["label","multiple","sx","className","helperText","fullWidth"]),d=Cr(t),i=d.data,u=d.resource,f=d.source,g=d.fetchError,b=d.isLoading,p=d.isRequired,S=d.field,w=d.fieldState,v=d.formState,h=d.defaultValue,y=w.isTouched,m=w.invalid,x=w.error,j=v.isSubmitted,_=ve();return g?E.jsx(Ue,{className:r,sx:n,"data-testid":"error",children:E.jsx(We,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(bn,{color:"error.main",children:_("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):b||!i?E.jsx(Ue,{className:r,sx:n,"data-testid":"loading",children:E.jsx(We,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(wn,{})})}):E.jsxs(Ue,{className:r,sx:n,children:[E.jsx(We,{htmlFor:f,className:St.label,color:(y||j)&&m?"error":void 0,label:a,source:f,resource:u,isRequired:p,fullWidth:c,children:E.jsx(br,qe({source:f,multiple:e,className:St.tree,field:S,defaultValue:h,fullWidth:c},l,{data:i}))}),(y||j)&&x||o?E.jsx(pn,{error:(y||j)&&!!x,children:E.jsx(_n,{error:x==null?void 0:x.message,helperText:o})}):null]})},"TreeInput"),Ye="RaTreeInput",St={label:"".concat(Ye,"-label"),tree:"".concat(Ye,"-tree")},Ue=he(On,{name:Ye,overridesResolver:s(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),br=s(function(t){var a=t.data,e=t.multiple,n=t.field,r=t.checkStrictly,o=r===void 0?!0:r,c=t.expandAction,l=c===void 0?!1:c,d=t.defaultValue,i=Ht(t,["data","multiple","field","checkStrictly","expandAction","defaultValue"]),u=(n==null?void 0:n.value)||(e?[]:""),f=d||(e?[]:""),g=s(function(p,S){var w=S.checkedNodes.filter(function(h){return o?p.checked.includes(h.key):p.includes(h.key)}),v=w.map(function(h){return h.id});n==null||n.onChange(v)},"handleCheck"),b=s(function(p,S){var w=p&&p.length>0?S.node.id:"";n==null||n.onChange(w)},"handleSelect");return E.jsx(Mt,qe({},i,{checkStrictly:o,expandAction:l,checkable:e,selectable:!e,checkedKeys:e?u.map(String):[],selectedKeys:e?[]:[String(u)],defaultCheckedKeys:e?f.map(String):void 0,defaultSelectedKeys:e?void 0:[String(f)],defaultExpandedKeys:e?f.map(String):[String(f)],onCheck:g,onSelect:b,data:a,onBlur:n==null?void 0:n.onBlur}))},"TreeInputTree"),wr=s(function(t){var a=t.reference,e=t.source,n=t.meta,r=kt(a,{meta:n}),o=r.data,c=r.error,l=r.isLoading,d=r.isFetching;return{source:e,resource:a,data:o,error:c??void 0,isLoading:l,isFetching:d}},"useReferenceNodeInputController"),pr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ia=s(function(t){var a=t.children,e=a===void 0?E.jsx(mr,{}):a,n=wr(t),r=n.resource,o=pr(n,["resource"]);return E.jsx(xn,{value:r,children:E.jsx(_r,{value:o,children:e})})},"ReferenceNodeInput"),_r=s(function(t){var a=t.children,e=t.value;return E.jsx(Xt.Provider,{value:e,children:a})},"TreeChoicesContextProvider"),Or=s(function(){return N.useContext(Xt)||{}},"useTreeChoicesContext"),Be=function(){return Be=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Be.apply(this,arguments)},xr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Cr=s(function(t){var a=t.source,e=t.data;t.hideRootNodes;var n=xr(t,["source","data","hideRootNodes"]),r=te(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=ce(t),c=Or(),l=c.source,d=c.data,i=c.isLoading,u=c.isFetching,f=c.error,g=e??d,b=a??l;if(b==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var p=Cn(Be(Be({},n),{resource:r,source:b,type:"text"})),S=p.isRequired,w=p.field,v=p.fieldState,h=p.formState,y=Sn(o,b,t.defaultValue);return{resource:r,source:b,data:g??[],fetchError:f,isLoading:i,isFetching:u,isRequired:S,field:w,fieldState:v,formState:h,defaultValue:y}},"useTreeInputController"),Sr=s(function(t){var a=t.children,e=t.value;return E.jsx(jn.Provider,{value:e,children:a})},"TreeContextProvider"),Ze=function(){return Ze=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ze.apply(this,arguments)},ua=s(function(t){var a=fr(t);return E.jsx(En,{value:a,children:E.jsx(Nn,Ze({},t,a))})},"CreateNode"),Fe=function(){return Fe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Fe.apply(this,arguments)},jt=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ca=s(function(t){var a=t.id,e=Pt().id;if(!e&&!a)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var n=a||decodeURIComponent(e),r=Rt(),o=r[1];N.useEffect(function(){o(function(l){var d=n.toString();return Array.isArray(l)?l.includes(d)?l:jt(jt([],l,!0),[d],!1):[d]})},[t.resource,n,o]);var c=Wn(t);return E.jsx(Qn,{value:c,children:E.jsx(Jn,Fe({},t))})},"ShowNode"),lt={},jr=Dn;Object.defineProperty(lt,"__esModule",{value:!0});var Jt=lt.default=void 0,Er=jr(Pn()),Nr=E;Jt=lt.default=(0,Er.default)((0,Nr.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var et=function(){return et=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},et.apply(this,arguments)},Pr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Dr=s(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.label,l=c===void 0?"ra.action.delete":c,d=t.mutationMode,i=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,g=f===void 0?"list":f,b=Pr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),p=te(t);if(!p)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var S=ce(t);if(!S)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var w=Gt({mutationMode:d,record:S,resource:p,redirect:g}),v=w.handleDelete,h=w.handleDialogClose,y=w.handleDialogOpen,m=w.isPending,x=w.open,j=ve(),_=s(function(C){C.stopPropagation(),i&&i(C),C.isDefaultPrevented()||y(C)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Tt,et({className:a,onClick:_,ref:u},b,{children:j(l,{_:l})})),E.jsx($t,{isOpen:x,loading:m,title:n,content:o,translateOptions:{name:qt(j("resources.".concat(p,".name"),{smart_count:1,_:Bt(p)}),!0),id:S.id},onConfirm:v,onClose:h})]})},"DeleteMenuItemWithConfirmation"),tt=function(){return tt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tt.apply(this,arguments)},Ar=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},kr=s(function(t){var a=t.className,e=t.label,n=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var o=t.ref;t.resource;var c=t.redirect,l=c===void 0?"list":c,d=Ar(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=te(t);if(!i)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=ce(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=zt({record:u,resource:i,redirect:l}),g=f.handleDelete,b=f.isPending,p=ve(),S=s(function(w){w.stopPropagation(),r&&r(w),w.isDefaultPrevented()||g(w)},"handleClick");return E.jsx(Tt,tt({className:a,disabled:b,onClick:S,ref:o},d,{children:p(n,{_:n})}))},"DeleteMenuItemWithUndo"),Le=function(){return Le=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Le.apply(this,arguments)},Rr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Yt=s(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a,n=Rr(t,["mutationMode"]);return e==="undoable"?E.jsx(kr,Le({},n,{mutationMode:e})):E.jsx(Dr,Le({},n,{mutationMode:e}))},"DeleteMenuItem");Yt.displayName="DeleteMenuItem";var Mr=N.createContext(null),Tr=Mr.Provider,$r=s(function(t){var a=t.children,e=a===void 0?E.jsx(Yt,{}):a,n=t.className,r=N.useState(null),o=r[0],c=r[1],l=s(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),d=N.useCallback(function(u){u.stopPropagation(),c(null)},[]),i=N.useMemo(function(){return{close:d}},[d]);return E.jsxs(Br,{className:n,children:[E.jsx("button",{className:qr.menuButton,onClick:l,children:E.jsx(Jt,{})}),E.jsx(An,{anchorEl:o,open:!!o,onClose:d,children:E.jsx(Tr,{value:i,children:e})})]})},"NodeActions"),Zt="RaNodeActions",qr={menuButton:"".concat(Zt,"-menuButton")},Br=he("div",{name:Zt,overridesResolver:s(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),nt=function(){return nt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},nt.apply(this,arguments)},Lr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ir=s(function(t){var a=t.label,e=a===void 0?"ra.action.delete":a,n=t.className,r=t.icon,o=r===void 0?Wr:r,c=t.onClick;t.resource,t.record;var l=t.redirect,d=l===void 0?"list":l,i=Lr(t,["label","className","icon","onClick","resource","record","redirect"]),u=te(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=ce(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var g=zt({resource:u,record:f,redirect:d}),b=g.handleDelete,p=g.isPending,S=s(function(w){c&&c(w),w.isDefaultPrevented()||b(w)},"handleClick");return E.jsx(Kr,nt({onClick:S,disabled:p,label:e,className:De("ra-delete-button",n)},i,{children:o}),"button")},"DeleteBranchWithUndoButton"),Kr=he(Lt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:s(function(t,a){return a.root},"overridesResolver")})(function(t){var a=t.theme;return{color:a.palette.error.main,"&:hover":{backgroundColor:It(a.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Wr=E.jsx(Kt,{}),rt=function(){return rt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},rt.apply(this,arguments)},Qr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ur=s(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.icon,l=c===void 0?Gr:c,d=t.label,i=d===void 0?"ra.action.delete":d,u=t.mutationMode,f=t.onClick;t.record,t.resource;var g=t.redirect,b=g===void 0?"list":g,p=Qr(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),S=ve(),w=te(t);if(!w)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var v=ce(t);if(!v)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=Gt({mutationMode:u,resource:w,record:v,redirect:b}),y=h.handleDelete,m=h.handleDialogClose,x=h.handleDialogOpen,j=h.isPending,_=h.open,C=s(function(O){f&&f(O),O.isDefaultPrevented()||x(O)},"handleClick");return E.jsxs(zr,{className:a,children:[E.jsx(Lt,rt({onClick:C,label:i,className:De("ra-delete-button",en.deleteButton)},p,{children:l}),"button"),E.jsx($t,{isOpen:_,loading:j,title:n,content:o,translateOptions:{name:S("resources.".concat(w,".forcedCaseName"),{smart_count:1,_:qt(S("resources.".concat(w,".name"),{smart_count:1,_:Bt(w)}),!0)}),id:v.id},onConfirm:y,onClose:m})]})},"DeleteBranchWithConfirmButton"),Gr=E.jsx(Kt,{}),Ft="RaDeleteBranchWithConfirmButton",en={deleteButton:"".concat(Ft,"-deleteButton")},zr=he("div",{name:Ft})(function(t){var a,e=t.theme;return a={},a["& .".concat(en.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:It(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},a}),Ie=function(){return Ie=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ie.apply(this,arguments)},Vr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Xr=s(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a;t.record;var n=Vr(t,["mutationMode","record"]),r=ce(t),o=kn();if(!r||r.id==null)return null;var c=e||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return c==="undoable"?E.jsx(Ir,Ie({record:r},n)):E.jsx(Ur,Ie({mutationMode:c,record:r},n))},"DeleteBranchButton"),at=function(){return at=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)},Hr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return s(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}s(l,"fulfilled");function d(u){try{i(n.throw(u))}catch(f){c(f)}}s(d,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,d)}s(i,"step"),i((n=n.apply(t,a||[])).next())})},Jr=function(t,a){var e={label:0,sent:s(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return d([i,u])}}function d(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},tn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},be,da=s(function(t){var a=t.allowMultipleRoots,e=a===void 0?!1:a,n=t.className,r=t.create,o=t.edit,c=t.hideRootNodes,l=t.lazy,d=l===void 0?!1:l,i=t.linkTo,u=i===void 0?"edit":i,f=t.nodeActions,g=f===void 0?E.jsx($r,{}):f,b=t.show,p=t.showLine,S=t.sx,w=t.title,v=t.titleField,h=v===void 0?"title":v,y=t.addRootButton,m=y===void 0?E.jsx(Rn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):y,x=t.meta;t.expandedKeys;var j=tn(t,["allowMultipleRoots","className","create","edit","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","expandedKeys"]),_=te(j);if(_==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var C=Mn(),O=Tn(),P=Qe("/".concat(_,"/create")),D=Qe("/".concat(_,"/:id")),T=Qe("/".concat(_,"/:id/show")),R=N.useMemo(function(){if(P)return[we];if(D)return[D.params.id];if(T)return[T.params.id]},[P,D,T]),A=gr({lazy:d,resource:_,meta:x}),k=A.data,M=A.defaultTitle,$=A.handleExpand,I=A.isPending,L=A.loadChildNodes,X=A.handleDrop,q=A.expandedKeys,K=N.useCallback(function(U,z){C(O({resource:_,id:z.id,type:u}))},[O,u,C,_]),W=N.useCallback(function(U){return Hr(void 0,void 0,void 0,function(){return Jr(this,function(z){return d?[2,L(U.record.id)]:[2,Promise.resolve()]})})},[d,L]);if(I)return null;var B=!k||k.length===0||e;return E.jsx(Sr,{value:A,children:E.jsxs(Zr,{className:n,sx:S,children:[E.jsx("div",{className:fe.cardTree,children:E.jsx(At,{children:E.jsxs($n,{className:fe.cardContentTree,children:[E.jsx(Mt,at({data:k,hideRootNodes:c,titleField:h,onDrop:X,onExpand:$,onClick:K,selectedKeys:R,showLine:p,nodeActions:g,loadData:d?W:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:q},Yr(j))),B?m:null]})})}),E.jsx("div",{className:fe.actionCard,children:E.jsxs(qn,{children:[r?E.jsx(ke,{path:"create/*",element:N.isValidElement(r)?r:E.jsx(r,{})}):null,b?E.jsx(ke,{path:":id/show/*",element:N.isValidElement(b)?b:E.jsx(b,{})}):null,o?E.jsx(ke,{path:":id/*",element:N.isValidElement(o)?o:E.jsx(o,{})}):null,w!==!1?E.jsx(ke,{path:"*",element:E.jsx(Dt,{title:w,defaultTitle:M})}):null]})})]})})},"TreeWithDetails"),Yr=s(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var a=tn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return a},"sanitizeRestProps"),Pe="RaTreeWithDetails",fe={container:"".concat(Pe,"-container"),cardTree:"".concat(Pe,"-cardTree"),cardContentTree:"".concat(Pe,"-cardContentTree"),actionCard:"".concat(Pe,"-actionCard")},Zr=he("div",{name:Pe,overridesResolver:s(function(t,a){return a.root},"overridesResolver")})((be={display:"flex"},be["& .".concat(fe.actionCard)]={width:"100%"},be["& .".concat(fe.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},be["& .".concat(fe.cardContentTree)]={},be["& .".concat(fe.container)]={display:"flex"},be)),ot=function(){return ot=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ot.apply(this,arguments)},Fr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},sa=s(function(t){var a,e=t.children,n=t.className,r=t.resource,o=Fr(t,["children","className","resource"]),c=Bn(function(l){return l.breakpoints.down("sm")});return E.jsx(ea,ot({className:De((a={},a[xe.mobileToolbar]=c,a[xe.desktopToolbar]=!c,a),n),role:"toolbar"},o,{children:N.Children.count(e)===0?E.jsxs("div",{className:xe.defaultToolbar,children:[E.jsx(Ln,{}),E.jsx(Xr,{resource:r})]}):e}))},"EditNodeToolbar"),Me="RaEditNodeToolbar",xe={desktopToolbar:"".concat(Me,"-desktopToolbar"),mobileToolbar:"".concat(Me,"-mobileToolbar"),defaultToolbar:"".concat(Me,"-defaultToolbar")},ea=he(In,{name:Me,overridesResolver:s(function(t,a){return a.root},"overridesResolver")})(function(t){var a,e=t.theme;return a={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},a["&.".concat(xe.desktopToolbar)]={},a["&.".concat(xe.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},a["& .".concat(xe.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},a});export{va as AddChildButton,ua as CreateNode,Xr as DeleteBranchButton,Ur as DeleteBranchWithConfirmButton,Ir as DeleteBranchWithUndoButton,Yt as DeleteMenuItem,Dr as DeleteMenuItemWithConfirmation,kr as DeleteMenuItemWithUndo,en as DeleteWithConfirmButtonClasses,ha as EditNode,sa as EditNodeToolbar,xe as EditNodeToolbarClasses,$r as NodeActions,ya as NodeEditActions,ia as ReferenceNodeInput,ca as ShowNode,Mt as Tree,Xt as TreeChoicesContext,_r as TreeChoicesContextProvider,jn as TreeContext,Sr as TreeContextProvider,mr as TreeInput,St as TreeInputClasses,br as TreeInputTree,da as TreeWithDetails,fe as TreeWithDetailsClasses,we as UNSAVED_NEW_NODE,ga as addTreeMethodsBasedOnChildren,ra as addTreeMethodsBasedOnParentAndPosition,ln as deleteBranchByDeletingAllChildren,sn as deleteBranchByDeletingNode,oa as fixFakeRestDataProvider,ma as getRCTree,ba as getRCTreeDatum,wa as getRecordTree,pa as getRootAndChildNodes,_a as raTreeLanguageEnglish,Oa as raTreeLanguageFrench,aa as removeChildren,xa as renderSwitcherIcon,fn as updateQueryCacheFromGetTree,hn as useAddChildNode,tr as useAddRootNode,fr as useCreateNodeController,Wt as useDeleteBranch,Gt as useDeleteBranchWithConfirmController,zt as useDeleteBranchWithUndoController,Ca as useEditNodeController,Rt as useExpandedKeys,rr as useGetChildNodesCallback,mn as useGetRootNodes,kt as useGetTree,ar as useGetTreeCallback,ir as useMoveAsNthChildOf,cr as useMoveAsNthSiblingOf,wr as useReferenceNodeInputController,Or as useTreeChoicesContext,dt as useTreeContext,gr as useTreeController,Cr as useTreeInputController};
//# sourceMappingURL=index-DWty6Gn_.js.map
