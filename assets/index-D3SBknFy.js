var on=Object.defineProperty;var d=(t,a)=>on(t,"name",{value:a,configurable:!0});import{ah as re,ai as Dt,aj as un,ak as cn,u as we,L as ke,al as Ue,M as At,o as Rt,ab as dn,am as st,p as A,an as ln,ao as ft,m as sn,ap as fn,aq as vn,V as _e,E as Me,ar as Mt,C as kt,as as hn,at as yn,au as je,av as Ee,aw as Pe,ax as vt,ay as ce,az as gn,aA as qe,a6 as se,aB as ht,aC as mn,aD as bn,aE as wn,aF as Tt,aG as _n,aH as ye,aI as $t,j as E,ad as ze,T as pn,aJ as On,ag as xn,I as Cn,aK as qt,i as Sn,aL as jn,z as En,ac as Pn,aM as Nn,aN as Dn,aO as An,r as Rn,a as Mn,b as kn,g as Tn,aP as Bt,aQ as Lt,aR as Be,aS as $n,n as Kt,aT as It,aU as Wt,aV as qn,aW as Bn,O as Ln,P as Kn,aX as Ge,f as In,aY as Wn,aZ as Te,a7 as Qn,a_ as Un,a$ as zn}from"./index-Bb-QvlKB.js";import{b2 as _a,b0 as pa,b1 as Oa,b5 as xa,b8 as Ca,b7 as Sa,b6 as ja,b9 as Ea,bb as Pa,ba as Na,b3 as Da,b4 as Aa}from"./index-Bb-QvlKB.js";var Je=function(){return Je=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Je.apply(this,arguments)},Gn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Vn=d(function(t){t===void 0&&(t={});var a=t.disableAuthentication,e=a===void 0?!1:a,n=t.id,r=t.queryOptions,o=r===void 0?{}:r,c=re(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var s=Dt({enabled:!e}).isPending,l=un({action:"show",resource:c,enabled:!e&&!s}).isPending,i=cn(c),u=we(),f=ke(),m=Ue(),w=At(),x=Rt().id;if(!x&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var C=n??x,p=o.meta,b=Gn(o,["meta"]),h=dn(c,{id:C,meta:p},Je({enabled:!s&&!l||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),m("list",c),w()},"onError"),retry:!1},b)),v=h.data,y=h.error,g=h.isLoading,_=h.isFetching,S=h.isPending,j=h.refetch;if(v&&v.id&&v.id!=C)throw new Error("useShowController: Fetched record's id attribute (".concat(v.id,") must match the requested 'id' (").concat(C,")"));var O=st(),N=i(v),P=u("ra.page.show",{name:O(c,1),id:C,record:v,recordRepresentation:typeof N=="string"?N:""});return{defaultTitle:P,error:y,isLoading:g,isFetching:_,isPending:S,record:v,refetch:j,resource:c}},"useShowController"),yt=A.createContext(null);yt.displayName="ShowContext";var Xn=d(function(t){var a=t.children,e=t.value;return A.createElement(yt.Provider,{value:e},A.createElement(ln,{value:e&&e.record},a))},"ShowContextProvider"),Hn=d(function(){var t=A.useContext(yt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),Ye=function(){return Ye=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ye.apply(this,arguments)},Jn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Yn=d(function(t){var a=ft(t).hasEdit;return A.createElement(sn,Ye({},Zn(t)),a&&A.createElement(fn,null))},"ShowActions"),Zn=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var a=Jn(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return a},"sanitizeRestProps$1"),Ze=function(){return Ze=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ze.apply(this,arguments)},Fn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ne,er=A.createElement(Yn,null),tr=d(function(t){var a,e=vn({props:t,name:Re}),n=e.actions,r=e.aside,o=e.children,c=e.className,s=e.component,l=s===void 0?kt:s,i=e.emptyWhileLoading,u=i===void 0?!1:i,f=e.title,m=Fn(e,["actions","aside","children","className","component","emptyWhileLoading","title"]),w=Hn(),x=w.resource,C=w.defaultTitle,p=w.record,b=ft().hasEdit,h=typeof n>"u"&&b?er:n;return!o||!p&&u?null:A.createElement(nr,Ze({className:Me("show-page",c)},m),f!==!1&&A.createElement(Mt,{title:f,defaultTitle:C,preferenceKey:"".concat(x,".show.title")}),h!==!1&&h,A.createElement("div",{className:Me(Ce.main,(a={},a[Ce.noActions]=!h,a))},A.createElement(l,{className:Ce.card},o),r))},"ShowView"),Re="RaShow",Ce={main:"".concat(Re,"-main"),noActions:"".concat(Re,"-noActions"),card:"".concat(Re,"-card")},nr=_e("div",{name:Re,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((Ne={},Ne["& .".concat(Ce.main)]={display:"flex"},Ne["& .".concat(Ce.noActions)]={marginTop:"1em"},Ne["& .".concat(Ce.card)]={flex:"1 1 auto"},Ne)),Q=function(){return Q=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Q.apply(this,arguments)},ie=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},ue=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},la=d(function(t,a,e,n){a===void 0&&(a="parent_id"),e===void 0&&(e="position"),n===void 0&&(n=!1);var r=n?hn:yn,o=Q(Q({},t),{getTree:d(function(c,s){return ie(void 0,void 0,void 0,function(){var l,i;return ue(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:s==null?void 0:s.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=u.sent().data,i=l.map(function(f){return Q(Q({},f),{children:l.filter(function(m){return m[a]==f.id}).sort(function(m,w){return m[e]-w[e]}).map(function(m){return m.id})})}),[2,{data:i}]}})})},"getTree"),getRootNodes:d(function(c,s){return ie(void 0,void 0,void 0,function(){var l,i,u;return ue(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:Q(Q({},s==null?void 0:s.filter),(u={},u[a]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=f.sent().data,[4,Promise.all(l.map(function(m){var w;return t.getList(c,{filter:(w={},w[a]=m.id,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta}).then(function(x){var C=x.data;return Q(Q({},m),{children:C.map(function(p){var b=p.id;return b})})})}))];case 2:return i=f.sent(),[2,{data:i}]}})})},"getRootNodes"),getParentNode:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w=i.childId,x=i.meta;return ue(this,function(C){switch(C.label){case 0:return[4,o.getTree(l,{meta:x})];case 1:return u=C.sent().data,f=u.find(function(p){return p.id===w}),f?(m=u.find(function(p){return p.id===f[a]}),[2,{data:m}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w=i.parentId,x=i.meta;return ue(this,function(C){switch(C.label){case 0:return[4,t.getList(l,{filter:(m={},m[a]=w,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x})];case 1:return u=C.sent().data,[4,Promise.all(u.map(function(p){var b;return t.getList(l,{filter:(b={},b[a]=p.id,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x}).then(function(h){var v=h.data;return Q(Q({},p),{children:v.map(function(y){var g=y.id;return g})})})}))];case 2:return f=C.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w,x,C,p=i.source,b=i.destination,h=i.position,v=i.meta;return ue(this,function(y){switch(y.label){case 0:return[4,t.getList(l,{filter:(w={},w[a]=b.id,w["".concat(e,"_gte")]=h,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=y.sent().data,u.length>0?[4,Promise.all(u.map(function(g){var _;return t.update(l,{id:g.id,data:(_={},_[e]=g[e]+1,_),previousData:g,meta:v})}))]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,t.getList(l,{filter:(x={},x[a]=p[a],x["".concat(e,"_gt")]=p[e],x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=y.sent().data,f.length>0?[4,Promise.all(f.map(function(g){var _;return t.update(l,{id:g.id,data:(_={},_[e]=g[e]-1,_),previousData:g,meta:v})}))]:[3,6];case 5:y.sent(),y.label=6;case 6:return[4,t.update(l,{id:p.id,data:(C={},C[a]=b.id,C[e]=h,C),previousData:p,meta:v})];case 7:return m=y.sent().data,[2,{data:m}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w,x,C,p,b,h,v,y,g=i.source,_=i.destination,S=i.position,j=i.meta;return ue(this,function(O){switch(O.label){case 0:return S===0&&(u=(x={},x[a]=_[a],x)),g[e]>_[e]&&g[a]===_[a]&&(u=(C={},C[a]=_[a],C["".concat(e,"_gt")]=_[e],C)),g[a]!==_[a]&&S>0&&(u=(p={},p[a]=_[a],p["".concat(e,"_gt")]=_[e],p)),u?[4,t.getList(l,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})]:[3,3];case 1:return f=O.sent().data,f.length>0?[4,Promise.all(f.map(function(N){var P;return N.id===g.id?Promise.resolve(void 0):t.update(l,{id:N.id,data:(P={},P[e]=N[e]+1,P),previousData:N,meta:j})}))]:[3,3];case 2:O.sent(),O.label=3;case 3:return g[a]===_[a]?g[e]>_[e]?m=(b={},b[a]=g[a],b["".concat(e,"_gt")]=g[e],b):m=(h={},h[a]=g[a],h["".concat(e,"_gt")]=g[e],h["".concat(e,"_lte")]=_[e],h):m=(v={},v[a]=g[a],v["".concat(e,"_gt")]=g[e],v),[4,t.getList(l,{filter:m,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 4:return w=O.sent().data,w.length>0?[4,Promise.all(w.map(function(N){var P;return N.id===g.id?Promise.resolve(void 0):t.update(l,{id:N.id,data:(P={},P[e]=N[e]-1,P),previousData:N,meta:j})}))]:[3,6];case 5:O.sent(),O.label=6;case 6:return[4,t.update(l,{id:g.id,data:(y={},y[a]=_[a],y[e]=g[a]===_[a]?g[e]>_[e]?_[e]+1:_[e]:S,y),previousData:g,meta:j})];case 7:return O.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w,x,C=i.data,p=i.meta;return ue(this,function(b){switch(b.label){case 0:return[4,t.getList(l,{filter:(w={},w[a]=null,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:p})];case 1:return u=b.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(l,{data:Q(Q({},C),(x={},x[a]=null,x[e]=f,x)),meta:p})];case 2:return m=b.sent().data,[2,{data:Q(Q({},m),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,s){return ie(void 0,[c,s],void 0,function(l,i){var u,f,m,w,x,C,p=i.parentId,b=i.data,h=i.meta,v=i.position;return ue(this,function(y){switch(y.label){case 0:return[4,t.getList(l,{filter:(x={},x[a]=p,x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(g,_){return _[e]>g?_[e]:g},-1/0)+1:0,m=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(l,{data:Q(Q({},b),(C={},C[a]=p,C[e]=m,C)),meta:h})];case 2:return w=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(g){var _;g[e]>=v&&t.update(l,{id:g.id,data:Q(Q({},g),(_={},_[e]=g[e]+1,_)),previousData:g,meta:h})}),[2,{data:Q(Q({},w),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,s){return ie(void 0,void 0,void 0,function(){var l,i,u,f;return ue(this,function(m){switch(m.label){case 0:return l=s.id,i=s.previousData,u=s.meta,[4,r(o,c,s)];case 1:return m.sent(),[4,o.getChildNodes(c,{parentId:i[a],meta:u})];case 2:return f=m.sent().data,[4,Promise.all(f.filter(function(w){return w[e]>i[e]&&w.id!==l}).map(function(w){var x;return t.update(c,{id:w.id,data:Q(Q({},w),(x={},x[e]=w[e]-1,x)),previousData:w,meta:u})}))];case 3:return m.sent(),[2,{data:i}]}})})},"deleteBranch")});return o},"addTreeMethodsBasedOnParentAndPosition"),Oe=function(){return Oe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Oe.apply(this,arguments)},rr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},ar=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},or=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ir=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ur=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=je(),r=Ee(),o=A.useRef(a),c=Pe(Oe(Oe({mutationFn:d(function(l){var i=l===void 0?{}:l,u=i.resource,f=u===void 0?t:u,m=i.data,w=m===void 0?o.current.data:m,x=i.meta,C=x===void 0?o.current.meta:x;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(w==null)throw new Error("useAddRootNode mutation requires non-empty data");return n.addRootNode(f,{data:w,meta:C}).then(function(p){var b=p.data;return b})},"mutationFn")},e),{onSuccess:d(function(l,i,u){i===void 0&&(i={});var f=i.resource,m=f===void 0?t:f;r.setQueryData([m,"getOne",{id:String(l.id)}],l),e.onSuccess&&e.onSuccess(l,i,u)},"onSuccess")})),s=d(function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];return rr(void 0,ir([],l,!0),void 0,function(u,f,m){var w,x;return u===void 0&&(u=t),f===void 0&&(f={}),m===void 0&&(m={}),ar(this,function(C){return w=m.returnPromise,x=or(m,["returnPromise"]),w?[2,c.mutateAsync(Oe({resource:u},f),m)]:(c.mutate(Oe({resource:u},f),x),[2])})})},"addRootNode");return[s,c]},"useAddRootNode"),te=function(){return te=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},te.apply(this,arguments)},gt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},mt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},cr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ve=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Qt=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=je(),r=Ee(),o=a.id,c=a.previousData,s=e.mutationMode,l=s===void 0?"pessimistic":s,i=cr(e,["mutationMode"]),u=A.useRef(l),f=A.useRef(a),m=A.useRef([]),w=d(function(p){var b=p.resource,h=p.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,g=d(function(S,j){var O=S.findIndex(function(R){return R.id==j});if(O===-1)return S;for(var N=S[O],P=Ve(Ve([],S.slice(0,O),!0),S.slice(O+1),!0),q=N.children||[],T=0,M=q;T<M.length;T++){var D=M[T];P=g(P,D)}return P},"removeRecord"),_=d(function(S){var j=g(S,h);return j.map(function(O){return te(te({},O),{children:O.children?O.children.filter(function(N){return N!==h}):O.children})})},"updateCollection");r.setQueriesData({queryKey:[b,"getTree"]},function(S){if(!S)return S;var j=_(S),O=j.length<S.length;return O?j:S},{updatedAt:y}),r.setQueriesData({queryKey:[b,"getRootNodes"]},function(S){return S&&S.length>0?_(S):S},{updatedAt:y}),r.setQueriesData({queryKey:[b,"getChildNodes"]},function(S){if(!S)return S;var j=_(S),O=j.length<S.length;return O?j:S},{updatedAt:y})},"updateCache"),x=Pe(te(te({mutationFn:d(function(p){var b=p===void 0?{}:p,h=b.resource,v=h===void 0?t:h,y=b.id,g=y===void 0?f.current.id:y,_=b.previousData,S=_===void 0?f.current.previousData:_,j=b.meta,O=j===void 0?f.current.meta:j;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(g==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(S==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return n.deleteBranch(v,{id:g,previousData:S,meta:O}).then(function(N){var P=N.data;return P})},"mutationFn")},i),{onMutate:d(function(p){return gt(void 0,void 0,void 0,function(){var b;return mt(this,function(h){switch(h.label){case 0:return i.onMutate?[4,i.onMutate(p)]:[3,2];case 1:return b=h.sent()||{},[2,te({snapshot:m.current},b)];case 2:return[2,{snapshot:m.current}]}})})},"onMutate"),onError:d(function(p,b,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],g=v[1];r.setQueryData(y,g)}),i.onError)return i.onError(p,b,h)},"onError"),onSuccess:d(function(p,b,h){if(b===void 0&&(b={}),u.current==="pessimistic"){var v=b.resource,y=v===void 0?t:v,g=b.id,_=g===void 0?o:g;w({resource:y,id:_}),i.onSuccess&&i.onSuccess(p,b,h)}},"onSuccess"),onSettled:d(function(p,b,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var g=y[0];r.invalidateQueries({queryKey:g})}),i.onSettled)return i.onSettled(p,b,h,v)},"onSettled")})),C=d(function(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];return gt(void 0,Ve([],p,!0),void 0,function(h,v,y){var g,_,S,j,O,N,P,q,T;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),mt(this,function(M){switch(M.label){case 0:return g=y.mutationMode,_=y.onSuccess,S=y.onSettled,j=y.onError,f.current=a,g&&(u.current=g),u.current==="pessimistic"?[2,x.mutate(te({resource:h},v),{onSuccess:_,onSettled:S,onError:j})]:(O=v.id,N=O===void 0?o:O,P=v.previousData,q=P===void 0?c:P,T=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],m.current=T.reduce(function(D,R){return D.concat(r.getQueriesData({queryKey:R}))},[]),[4,Promise.all(m.current.map(function(D){var R=D[0];return r.cancelQueries({queryKey:R})}))]);case 1:return M.sent(),w({resource:h,id:N}),_&&setTimeout(function(){return _(q,te({resource:h},v),{snapshot:m.current})},0),i.onSuccess&&setTimeout(function(){i.onSuccess&&i.onSuccess(q,te({resource:h},v),{snapshot:m.current})},0),u.current==="optimistic"?[2,x.mutate(te({resource:h},v),{onSettled:S,onError:j})]:(vt.once("end",function(D){var R=D.isUndo;R?m.current.forEach(function(L){var $=L[0],k=L[1];r.setQueryData($,k)}):x.mutate(te({resource:h},v),{onSettled:S,onError:j})}),[2])}})})},"mutate");return[C,x]},"useDeleteBranch"),ge=function(){return ge=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ge.apply(this,arguments)},dr=d(function(t,a,e){var n=je(),r=Pe(ge({mutationKey:[t,"getChildNodes",a],mutationFn:d(function(c){return n.getChildNodes(t,ge(ge({},a),c)).then(function(s){var l=s.data;return l})},"mutationFn")},e)),o=ce(function(c){return r.mutateAsync(ge(ge({},a),{parentId:c}))});return o},"useGetChildNodesCallback"),Le=function(){return Le=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Le.apply(this,arguments)},sa=d(function(t){return Le(Le({},t),{children:t.children.map(function(a){return a.id})})},"removeChildren"),Fe=function(){return Fe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Fe.apply(this,arguments)},lr=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=je(),r=Ee(),o=Pe(Fe({mutationKey:[t,"getTree",a],mutationFn:d(function(){return n.getTree(t,a).then(function(s){var l=s.data;return l})},"mutationFn"),onSuccess:d(function(s){gn(r,t,s,a)},"onSuccess")},e)),c=A.useCallback(function(){return o.mutateAsync(a)},[o,a]);return c},"useGetTreeCallback"),ae=function(){return ae=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ae.apply(this,arguments)},bt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},wt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},sr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},fe=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},fr=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=je(),r=Ee(),o=a.source,c=a.destination,s=a.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=sr(e,["mutationMode"]),f=A.useRef(i),m=A.useRef(a),w=A.useRef([]),x=d(function(b){var h=b.resource,v=b.position,y=b.source,g=b.destination,_=Date.now(),S=f.current==="undoable"?_+5*1e3:_,j=d(function(O){var N,P,q,T,M,D=qe(O),R=D.find(function($){var k;return(k=$.children)===null||k===void 0?void 0:k.includes(y.id)});R?R.children=(N=R.children)===null||N===void 0?void 0:N.filter(function($){return $!==y.id}):D=D.filter(function($){return $.id!==y.id});var L=D.find(function($){return $.id===g.id});return L?L.children=fe(fe(fe([],(q=(P=L.children)===null||P===void 0?void 0:P.slice(0,v))!==null&&q!==void 0?q:[],!0),[y.id],!1),(M=(T=L.children)===null||T===void 0?void 0:T.slice(v))!==null&&M!==void 0?M:[],!0):(D=D.filter(function($){return $.id!==y.id}),D=fe(fe(fe([],D.slice(0,v),!0),[y],!1),D.slice(v),!0)),D},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S})},"updateCache"),C=Pe(ae(ae({mutationFn:d(function(b){var h=b===void 0?{}:b,v=h.resource,y=v===void 0?t:v,g=h.position,_=g===void 0?m.current.position:g,S=h.source,j=S===void 0?m.current.source:S,O=h.destination,N=O===void 0?m.current.destination:O,P=h.meta,q=P===void 0?m.current.meta:P;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(_==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return n.moveAsNthChildOf(y,{position:_,source:j,destination:N,meta:q}).then(function(T){var M=T.data;return M})},"mutationFn")},u),{onMutate:d(function(b){return bt(void 0,void 0,void 0,function(){var h;return wt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(b)]:[3,2];case 1:return h=v.sent()||{},[2,ae({snapshot:w.current},h)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:d(function(b,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var g=y[0],_=y[1];r.setQueryData(g,_)}),u.onError)return u.onError(b,h,v)},"onError"),onSettled:d(function(b,h,v,y){v===void 0&&(v={});var g=v.resource,_=g===void 0?t:g;if(r.invalidateQueries({queryKey:[_,"getTree"]}),r.invalidateQueries({queryKey:[_,"getRootNodes"]}),r.invalidateQueries({queryKey:[_,"getChildNodes"]}),u.onSettled)return u.onSettled(b,h,v,y)},"onSettled")})),p=d(function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];return bt(void 0,fe([],b,!0),void 0,function(v,y,g){var _,S,j,O,N,P,q,T,M,D,R;return v===void 0&&(v=t),y===void 0&&(y={}),g===void 0&&(g={}),wt(this,function(L){switch(L.label){case 0:if(_=g.mutationMode,S=g.onSuccess,j=g.onSettled,O=g.onError,m.current=a,_&&(f.current=_),f.current==="pessimistic")return[2,C.mutate(ae({resource:v},y),{onSuccess:S,onSettled:j,onError:O})];if(N=y.position,P=N===void 0?s:N,q=y.source,T=q===void 0?o:q,M=y.destination,D=M===void 0?c:M,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(T==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return R=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],w.current=R.reduce(function($,k){return $.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function($){var k=$[0];return r.cancelQueries({queryKey:k})}))];case 1:return L.sent(),x({resource:v,position:P,source:T,destination:D}),S&&setTimeout(function(){return S(void 0,ae({resource:v},y),{snapshot:w.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ae({resource:v},y),{snapshot:w.current})},0),f.current==="optimistic"?[2,C.mutate(ae({resource:v},y),{onSettled:j,onError:O})]:(vt.once("end",function($){var k=$.isUndo;k?w.current.forEach(function(U){var X=U[0],F=U[1];r.setQueryData(X,F)}):C.mutate(ae({resource:v},y),{onSettled:j,onError:O})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},oe.apply(this,arguments)},_t=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},pt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},vr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ve=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},hr=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=je(),r=Ee(),o=a.source,c=a.destination,s=a.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=vr(e,["mutationMode"]),f=A.useRef(i),m=A.useRef(a),w=A.useRef([]),x=d(function(b){var h=b.resource,v=b.position,y=b.source,g=b.destination,_=Date.now(),S=f.current==="undoable"?_+5*1e3:_,j=d(function(O){var N,P,q,T,M,D=qe(O),R=D.find(function(k){var U;return(U=k.children)===null||U===void 0?void 0:U.includes(y.id)}),L=D.find(function(k){var U;return(U=k.children)===null||U===void 0?void 0:U.includes(g.id)}),$=v;return R&&L&&R.id===L.id&&R.children&&R.children.findIndex(function(k){return k===y.id})<R.children.findIndex(function(k){return k===g.id})&&($=v-1),R?R.children=(N=R.children)===null||N===void 0?void 0:N.filter(function(k){return k!==y.id}):D=D.filter(function(k){return k.id!==y.id}),L?L.children=ve(ve(ve([],(q=(P=L.children)===null||P===void 0?void 0:P.slice(0,$))!==null&&q!==void 0?q:[],!0),[y.id],!1),(M=(T=L.children)===null||T===void 0?void 0:T.slice($))!==null&&M!==void 0?M:[],!0):(D=D.filter(function(k){return k.id!==y.id}),D=ve(ve(ve([],D.slice(0,v),!0),[y],!1),D.slice(v),!0)),D},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(O){return O&&O.length>0?j(O):O},{updatedAt:S})},"updateCache"),C=Pe(oe(oe({mutationFn:d(function(b){var h=b===void 0?{}:b,v=h.resource,y=v===void 0?t:v,g=h.position,_=g===void 0?m.current.position:g,S=h.source,j=S===void 0?m.current.source:S,O=h.destination,N=O===void 0?m.current.destination:O,P=h.meta,q=P===void 0?m.current.meta:P;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(_==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return n.moveAsNthSiblingOf(y,{position:_,source:j,destination:N,meta:q}).then(function(T){var M=T.data;return M})},"mutationFn")},u),{onMutate:d(function(b){return _t(void 0,void 0,void 0,function(){var h;return pt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(b)]:[3,2];case 1:return h=v.sent()||{},[2,oe({snapshot:w.current},h)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:d(function(b,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var g=y[0],_=y[1];r.setQueryData(g,_)}),u.onError)return u.onError(b,h,v)},"onError"),onSettled:d(function(b,h,v,y){v===void 0&&(v={});var g=v.resource,_=g===void 0?t:g;if(r.invalidateQueries({queryKey:[_,"getTree"]}),r.invalidateQueries({queryKey:[_,"getRootNodes"]}),r.invalidateQueries({queryKey:[_,"getChildNodes"]}),u.onSettled)return u.onSettled(b,h,v,y)},"onSettled")})),p=d(function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];return _t(void 0,ve([],b,!0),void 0,function(v,y,g){var _,S,j,O,N,P,q,T,M,D,R;return v===void 0&&(v=t),y===void 0&&(y={}),g===void 0&&(g={}),pt(this,function(L){switch(L.label){case 0:if(_=g.mutationMode,S=g.onSuccess,j=g.onSettled,O=g.onError,m.current=a,_&&(f.current=_),f.current==="pessimistic")return[2,C.mutate(oe({resource:v},y),{onSuccess:S,onSettled:j,onError:O})];if(N=y.position,P=N===void 0?s:N,q=y.source,T=q===void 0?o:q,M=y.destination,D=M===void 0?c:M,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(T==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return R=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],w.current=R.reduce(function($,k){return $.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function($){var k=$[0];return r.cancelQueries({queryKey:k})}))];case 1:return L.sent(),x({resource:v,position:P,source:T,destination:D}),S&&setTimeout(function(){return S(void 0,oe({resource:v},y),{snapshot:w.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},y),{snapshot:w.current})},0),f.current==="optimistic"?[2,C.mutate(oe({resource:v},y),{onSettled:j,onError:O})]:(vt.once("end",function($){var k=$.isUndo;k?w.current.forEach(function(U){var X=U[0],F=U[1];r.setQueryData(X,F)}):C.mutate(oe({resource:v},y),{onSettled:j,onError:O})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthSiblingOf"),le=function(){return le=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},le.apply(this,arguments)},Ot=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},xt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},fa=d(function(t){return le(le({},t),{getRootNodes:d(function(a,e){return Ot(void 0,void 0,void 0,function(){var n,r;return xt(this,function(o){switch(o.label){case 0:return[4,t.getRootNodes(a,e)];case 1:return n=o.sent().data,r=n.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(a,e){return Ot(void 0,[a,e],void 0,function(n,r){var o,c,s,l,i=r.data,u=r.meta;return xt(this,function(f){switch(f.label){case 0:return[4,t.getList(n,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return o=f.sent().data,c=o.filter(function(m){return typeof m.parent_id>"u"}),s=c.length>0?c.reduce(function(m,w){return w.position>m?w.position:m},-1/0)+1:0,[4,t.create(n,{data:le(le({},i),{parent_id:null,position:s}),meta:u})];case 2:return l=f.sent().data,[2,{data:le(le({},l),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),Ct=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Ut=d(function(t,a){var e,n=t.filter(function(c){return c.id!==a.id}),r=n.find(function(c){var s;return(s=c.children)===null||s===void 0?void 0:s.includes(a.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==a.id})),!a.children||a.children.length===0)return n;var o=zt(n,a);return n=n.filter(function(c){return!o.includes(c)}),n},"removeNode"),zt=d(function(t,a){return a?!a.children||a.children.length===0?[]:Ct(Ct([],a.children,!0),a.children.flatMap(function(e){var n=t.find(function(r){return r.id===e});return n?zt(t,n):[]}),!0):[]},"getNodeChildrenRecursive"),et=function(){return et=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},et.apply(this,arguments)},Gt=d(function(t){var a=t.mutationMode,e=t.mutationOptions,n=t.redirect,r=n===void 0?"list":n,o=ke(),c=Ue(),s=At(),l=re(t);if(l==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=se(t);if(i==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Qt(),f=u[0],m=u[1].isPending,w=A.useState(!1),x=w[0],C=w[1],p=ht().setFinalData,b=A.useCallback(function(y){y.stopPropagation(),f(l,{id:i.id,previousData:i},et({mutationMode:a,onSuccess:d(function(){o("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,l),a==="pessimistic"?s():p&&p(function(g){return Ut(g,i)})},"onSuccess"),onError:d(function(g){o(typeof g=="string"?g:g.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,a,e,o,i,c,r,s,l,p]),h=d(function(y){y.stopPropagation(),C(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),C(!1)},"handleDialogClose");return{handleDelete:b,handleDialogOpen:h,handleDialogClose:v,isPending:m,open:x}},"useDeleteBranchWithConfirmController"),tt=function(){return tt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tt.apply(this,arguments)},Vt=d(function(t){var a=t.mutationOptions,e=t.redirect,n=e===void 0?"list":e,r=ke(),o=Ue(),c=ht().setFinalData,s=re(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var l=se(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var i=Qt(),u=i[0],f=i[1].isPending,m=A.useCallback(function(w){w.stopPropagation(),u(s,{id:l.id,previousData:l},tt({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(x){return Ut(x,l)}),o(n,s)},"onSuccess"),onError:d(function(x){return r(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},a))},[u,a,r,l,o,n,s,c]);return{handleDelete:m,isPending:f}},"useDeleteBranchWithUndoController"),xe=function(){return xe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xe.apply(this,arguments)},yr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},gr=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},mr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},br=d(function(t){var a=t.disableAuthentication,e=t.record,n=e===void 0?{}:e,r=t.redirect,o=t.mutationOptions,c=o===void 0?{}:o,s=t.transform;Dt({enabled:!a});var l=re(t);if(l==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=st(),u=Ee(),f=mn(),m=ht().handleAddNode,w=f.state&&f.state.parentId,x=f.state&&f.state.insertAsFirstChild,C=typeof w<"u"&&w!==null,p=f.state&&f.state.record||n,b=c.onSuccess,h=c.onError,v=mr(c,["onSuccess","onError"]),y=ft(t),g=y.hasEdit,_=y.hasShow,S=r||wr(_,g),j=ur(l,void 0,v),O=j[0],N=j[1],P=bn(l,void 0,v),q=P[0],T=P[1],M=ce(m??_r);A.useEffect(function(){return M({record:{},parentId:w,insertAsFirstChild:x}),function(){M(void 0)}},[M,w,x]);var D=we(),R=ke(),L=Ue(),$=A.useCallback(function(X,F){var K=F===void 0?{}:F,W=K.onSuccess,I=K.onError,B=K.transform,G=d(function(V){R("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),L(S,l,V.id,V),u.refetchQueries({queryKey:[l,"getTree"],type:"active"}),u.refetchQueries({queryKey:[l,"getRootNodes"],type:"active"})},"defaultOnSuccess"),J=d(function(V){R(typeof V=="string"?V:V.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(B?B(X):s?s(X):X).then(function(V){return yr(void 0,void 0,void 0,function(){var ee,z,Y;return gr(this,function(ne){switch(ne.label){case 0:ee={onSuccess:d(function(H,Z,de){M(void 0),W?W(H,Z,de):b?b(H,Z,de):G(H)},"onSuccess"),onError:I||h||J},ne.label=1;case 1:return ne.trys.push([1,6,,7]),C?[4,q(l,{data:V,parentId:w,meta:v.meta,position:x?0:void 0},xe(xe({},ee),{returnPromise:!0}))]:[3,3];case 2:return ne.sent(),[3,5];case 3:return[4,O(l,{data:V,meta:v.meta},xe(xe({},ee),{returnPromise:!0}))];case 4:ne.sent(),ne.label=5;case 5:return[3,7];case 6:return z=ne.sent(),(z instanceof wn||typeof z=="object"&&z!==null&&z.hasOwnProperty("body"))&&((Y=z.body)===null||Y===void 0?void 0:Y.errors)!=null?[2,z.body.errors]:[3,7];case 7:return[2]}})})})},[q,O,M,C,R,h,b,w,u,L,l,s,v.meta,S,x]),k=i(l,1),U=D("ra.page.create",{name:"".concat(k)});return{isLoading:!1,isFetching:!1,defaultTitle:U,save:$,saving:N.isPending||T.isPending,isPending:N.isPending||T.isPending,resource:l,record:p,redirect:S}},"useCreateNodeController"),wr=d(function(t,a){return a?"edit":t?"show":"list"},"getDefaultRedirectRoute"),_r=d(function(){},"noop"),pr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Xt=d(function(t,a){var e=a.find(function(n){return n.id==t});return e?pr([e.id.toString()],(e.children||[]).flatMap(function(n){return Xt(n,a)}),!0):[]},"getNodeKeysRecursively"),me=function(){return me=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},me.apply(this,arguments)},St=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},jt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Xe=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},he=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Or=d(function(t){var a=we(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var n=st(),r=t.lazy,o=r===void 0?!1:r,c=t.filter,s=c===void 0?{}:c,l=t.mutationMode,i=l===void 0?"undoable":l,u=t.meta,f=Tt(e,{filter:s,meta:u},{enabled:!o}),m=_n(e,{filter:s,meta:u},{enabled:o,gcTime:0}),w=dr(e,{meta:u}),x=A.useMemo(function(){var K;return(K=m.data)===null||K===void 0?void 0:K.map(function(W){var I=W.children,B=Xe(W,["children"]);return I!=null&&I.length?B:W})},[m.data,m.isFetching]),C=o?me(me({},m),{data:x}):f,p=C.data,b=C.error,h=C.isLoading,v=C.isPending,y=C.isFetching,g=A.useState(p),_=g[0],S=g[1],j=ce(function(K){return St(void 0,void 0,void 0,function(){var W;return jt(this,function(I){switch(I.label){case 0:return[4,w(K)];case 1:return W=I.sent(),S(function(B){var G,J=W.map(function(z){var Y=z.children,ne=Xe(z,["children"]),H=B==null?void 0:B.some(function(Z){var de;return(de=z.children)===null||de===void 0?void 0:de.includes(Z.id)});return Y!=null&&Y.length&&!H?ne:z}),V=he(he([],(G=B==null?void 0:B.map(function(z){return z.id===K?me(me({},z),{children:J.map(function(Y){return Y.id})}):z}))!==null&&G!==void 0?G:[],!0),J,!0),ee=V.reduce(function(z,Y){return z[Y.id]=Y,z},{});return Object.values(ee)}),[2]}})})});A.useEffect(function(){S(p)},[p]);var O=A.useState(),N=O[0],P=O[1],q=ce(function(K){var W,I=qe(_);if(K){if(P(K),K.parentId!=null){var B=I==null?void 0:I.find(function(J){return J.id===K.parentId});B&&(B.children=B.children||[],B.children=K.insertAsFirstChild?he([ye],B.children,!0):he(he([],B.children,!0),[ye],!1))}S(he(he([],I??[],!0),[me({id:ye,children:[]},K.record)],!1))}else{if(!N)return;var G=qe(_);if(N.parentId!=null){var B=G==null?void 0:G.find(function(V){return V.id===N.parentId});B&&(B.children=(W=B.children)===null||W===void 0?void 0:W.filter(function(V){return V!=ye}))}P(void 0),S(G==null?void 0:G.filter(function(J){return J.id!==ye}))}}),T=$t(void 0,t.expandedKeys),M=T[0],D=T[1],R=ce(function(K){D(function(W){var I,B,G=typeof K=="function"?K(W??[]):K,J=(I=W==null?void 0:W.filter(function(ee){return!G.includes(ee)}))!==null&&I!==void 0?I:[],V=(B=J==null?void 0:J.flatMap(function(ee){return Xt(ee,_??[])},[]))!==null&&B!==void 0?B:[];return G.filter(function(ee){return!V.includes(ee)})})}),L=fr(e,{meta:u})[0],$=hr(e,{meta:u})[0],k=lr(e),U=ke(),X=ce(function(K){var W=K.type,I=Xe(K,["type"]),B=d(function(){return St(void 0,void 0,void 0,function(){return jt(this,function(G){switch(G.label){case 0:return[4,k()];case 1:return G.sent(),U("ra-tree.item_moved",{undoable:i==="undoable"}),[2]}})})},"successSideEffect");W==="child"?L(e,I,{onSuccess:B,mutationMode:i}):$(e,I,{onSuccess:B,mutationMode:i})}),F=a("ra.page.list",{name:n(e,2)});return{data:_,defaultTitle:F,error:b,expandedKeys:M,handleAddNode:q,handleDrop:X,handleExpand:R,isLoading:h,isFetching:y,isPending:v,loadChildNodes:j,newNode:N,lazy:o,setFinalData:S}},"useTreeController"),Ht=A.createContext(void 0),Ke=function(){return Ke=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ke.apply(this,arguments)},Jt=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},xr=d(function(t){var a=t.label,e=t.multiple,n=t.sx,r=t.className,o=t.helperText,c=t.fullWidth,s=Jt(t,["label","multiple","sx","className","helperText","fullWidth"]),l=Dr(t),i=l.data,u=l.resource,f=l.source,m=l.fetchError,w=l.isLoading,x=l.isRequired,C=l.field,p=l.fieldState,b=l.formState,h=l.defaultValue,v=p.isTouched,y=p.invalid,g=p.error,_=b.isSubmitted,S=we();return m?E.jsx(He,{className:r,sx:n,"data-testid":"error",children:E.jsx(ze,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(pn,{color:"error.main",children:S("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):w||!i?E.jsx(He,{className:r,sx:n,"data-testid":"loading",children:E.jsx(ze,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(On,{})})}):E.jsxs(He,{className:r,sx:n,children:[E.jsx(ze,{htmlFor:f,className:Et.label,color:(v||_)&&y?"error":void 0,label:a,source:f,resource:u,isRequired:x,fullWidth:c,children:E.jsx(Cr,Ke({source:f,multiple:e,className:Et.tree,field:C,defaultValue:h,fullWidth:c},s,{data:i}))}),(v||_)&&g||o?E.jsx(xn,{error:(v||_)&&!!g,children:E.jsx(Cn,{error:g==null?void 0:g.message,helperText:o})}):null]})},"TreeInput"),nt="RaTreeInput",Et={label:"".concat(nt,"-label"),tree:"".concat(nt,"-tree")},He=_e(Sn,{name:nt,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),Cr=d(function(t){var a=t.data,e=t.multiple,n=t.field,r=t.checkStrictly,o=r===void 0?!0:r,c=t.expandAction,s=c===void 0?!1:c,l=t.defaultValue,i=Jt(t,["data","multiple","field","checkStrictly","expandAction","defaultValue"]),u=(n==null?void 0:n.value)||(e?[]:""),f=l||(e?[]:""),m=d(function(x,C){n==null||n.onChange(C.map(function(p){return p.id}))},"handleCheck"),w=d(function(x,C){var p;n==null||n.onChange((p=C==null?void 0:C.id)!==null&&p!==void 0?p:null)},"handleSelect");return E.jsx(qt,Ke({},i,{checkStrictly:o,expandAction:s,checkable:e,selectable:!e,checkedKeys:e?u:[],selectedKeys:e?[]:[u],defaultCheckedKeys:e?f:void 0,defaultSelectedKeys:e?void 0:[f],defaultExpandedKeys:e?f:[f],onCheck:m,onSelect:w,data:a,onBlur:n==null?void 0:n.onBlur}))},"TreeInputTree"),Sr=d(function(t){var a=t.reference,e=t.source,n=t.meta,r=Tt(a,{meta:n}),o=r.data,c=r.error,s=r.isLoading,l=r.isFetching;return{source:e,resource:a,data:o,error:c??void 0,isLoading:s,isFetching:l}},"useReferenceNodeInputController"),jr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},va=d(function(t){var a=t.children,e=a===void 0?E.jsx(xr,{}):a,n=Sr(t),r=n.resource,o=jr(n,["resource"]);return E.jsx(jn,{value:r,children:E.jsx(Er,{value:o,children:e})})},"ReferenceNodeInput"),Er=d(function(t){var a=t.children,e=t.value;return E.jsx(Ht.Provider,{value:e,children:a})},"TreeChoicesContextProvider"),Pr=d(function(){return A.useContext(Ht)||{}},"useTreeChoicesContext"),Ie=function(){return Ie=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ie.apply(this,arguments)},Nr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Dr=d(function(t){var a=t.source,e=t.data;t.hideRootNodes;var n=Nr(t,["source","data","hideRootNodes"]),r=re(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=se(t),c=Pr(),s=c.source,l=c.data,i=c.isLoading,u=c.isFetching,f=c.error,m=e??l,w=a??s;if(w==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var x=En(Ie(Ie({},n),{resource:r,source:w,type:"text"})),C=x.isRequired,p=x.field,b=x.fieldState,h=x.formState,v=Pn(o,w,t.defaultValue);return{resource:r,source:w,data:m??[],fetchError:f,isLoading:i,isFetching:u,isRequired:C,field:p,fieldState:b,formState:h,defaultValue:v}},"useTreeInputController"),Ar=d(function(t){var a=t.children,e=t.value;return E.jsx(Nn.Provider,{value:e,children:a})},"TreeContextProvider"),rt=function(){return rt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},rt.apply(this,arguments)},ha=d(function(t){var a=br(t);return E.jsx(Dn,{value:a,children:E.jsx(An,rt({},t,a))})},"CreateNode"),at=function(){return at=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)},Pt=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ya=d(function(t){var a=t.id,e=Rt().id;if(!e&&!a)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var n=a??e,r=$t(),o=r[1];A.useEffect(function(){o(function(s){var l=n.toString();return Array.isArray(s)?s.includes(l)?s:Pt(Pt([],s,!0),[l],!1):[l]})},[t.resource,n,o]);var c=Vn(t);return E.jsx(Xn,{value:c,children:E.jsx(tr,at({},t))})},"ShowNode"),De={},Nt;function Rr(){if(Nt)return De;Nt=1;var t=Rn();Object.defineProperty(De,"__esModule",{value:!0}),De.default=void 0;var a=t(Mn()),e=kn();return De.default=(0,a.default)((0,e.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),De}d(Rr,"requireMoreVert");var Mr=Rr();const kr=Tn(Mr);var ot=function(){return ot=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ot.apply(this,arguments)},Tr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},$r=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.label,s=c===void 0?"ra.action.delete":c,l=t.mutationMode,i=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,m=f===void 0?"list":f,w=Tr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),x=re(t);if(!x)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var C=se(t);if(!C)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var p=Gt({mutationMode:l,record:C,resource:x,redirect:m}),b=p.handleDelete,h=p.handleDialogClose,v=p.handleDialogOpen,y=p.isPending,g=p.open,_=we(),S=d(function(j){j.stopPropagation(),i&&i(j),j.isDefaultPrevented()||v(j)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Bt,ot({className:a,onClick:S,ref:u},w,{children:_(s,{_:s})})),E.jsx(Lt,{isOpen:g,loading:y,title:n,content:o,translateOptions:{name:Be.humanize(_("resources.".concat(x,".name"),{smart_count:1,_:Be.singularize(x)}),!0),id:C.id},onConfirm:b,onClose:h})]})},"DeleteMenuItemWithConfirmation"),it=function(){return it=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},it.apply(this,arguments)},qr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Br=d(function(t){var a=t.className,e=t.label,n=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var o=t.ref;t.resource;var c=t.redirect,s=c===void 0?"list":c,l=qr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=re(t);if(!i)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=se(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=Vt({record:u,resource:i,redirect:s}),m=f.handleDelete,w=f.isPending,x=we(),C=d(function(p){p.stopPropagation(),r&&r(p),p.isDefaultPrevented()||m(p)},"handleClick");return E.jsx(Bt,it({className:a,disabled:w,onClick:C,ref:o},l,{children:x(n,{_:n})}))},"DeleteMenuItemWithUndo"),We=function(){return We=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},We.apply(this,arguments)},Lr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Yt=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a,n=Lr(t,["mutationMode"]);return e==="undoable"?E.jsx(Br,We({},n,{mutationMode:e})):E.jsx($r,We({},n,{mutationMode:e}))},"DeleteMenuItem");Yt.displayName="DeleteMenuItem";var Kr=A.createContext(null),Ir=Kr.Provider,Wr=d(function(t){var a=t.children,e=a===void 0?E.jsx(Yt,{}):a,n=t.className,r=A.useState(null),o=r[0],c=r[1],s=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),l=A.useCallback(function(u){u.stopPropagation(),c(null)},[]),i=A.useMemo(function(){return{close:l}},[l]);return E.jsxs(Ur,{className:n,children:[E.jsx("button",{className:Qr.menuButton,onClick:s,children:E.jsx(kr,{})}),E.jsx($n,{anchorEl:o,open:!!o,onClose:l,children:E.jsx(Ir,{value:i,children:e})})]})},"NodeActions"),Zt="RaNodeActions",Qr={menuButton:"".concat(Zt,"-menuButton")},Ur=_e("div",{name:Zt,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),ut=function(){return ut=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ut.apply(this,arguments)},zr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Gr=d(function(t){var a=t.label,e=a===void 0?"ra.action.delete":a,n=t.className,r=t.icon,o=r===void 0?Xr:r,c=t.onClick;t.resource,t.record;var s=t.redirect,l=s===void 0?"list":s,i=zr(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=se(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var m=Vt({resource:u,record:f,redirect:l}),w=m.handleDelete,x=m.isPending,C=d(function(p){c&&c(p),p.isDefaultPrevented()||w(p)},"handleClick");return E.jsx(Vr,ut({onClick:C,disabled:x,label:e,className:Me("ra-delete-button",n)},i,{children:o}),"button")},"DeleteBranchWithUndoButton"),Vr=_e(Kt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a=t.theme;return{color:a.palette.error.main,"&:hover":{backgroundColor:It(a.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Xr=E.jsx(Wt,{}),ct=function(){return ct=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ct.apply(this,arguments)},Hr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Jr=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.icon,s=c===void 0?Yr:c,l=t.label,i=l===void 0?"ra.action.delete":l,u=t.mutationMode,f=t.onClick;t.record,t.resource;var m=t.redirect,w=m===void 0?"list":m,x=Hr(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),C=we(),p=re(t);if(!p)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var b=se(t);if(!b)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=Gt({mutationMode:u,resource:p,record:b,redirect:w}),v=h.handleDelete,y=h.handleDialogClose,g=h.handleDialogOpen,_=h.isPending,S=h.open,j=d(function(O){f&&f(O),O.isDefaultPrevented()||g(O)},"handleClick");return E.jsxs(Zr,{className:a,children:[E.jsx(Kt,ct({onClick:j,label:i,className:Me("ra-delete-button",en.deleteButton)},x,{children:s}),"button"),E.jsx(Lt,{isOpen:S,loading:_,title:n,content:o,translateOptions:{name:C("resources.".concat(p,".forcedCaseName"),{smart_count:1,_:Be.humanize(C("resources.".concat(p,".name"),{smart_count:1,_:Be.singularize(p)}),!0)}),id:b.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),Yr=E.jsx(Wt,{}),Ft="RaDeleteBranchWithConfirmButton",en={deleteButton:"".concat(Ft,"-deleteButton")},Zr=_e("div",{name:Ft})(function(t){var a,e=t.theme;return a={},a["& .".concat(en.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:It(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},a}),Qe=function(){return Qe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qe.apply(this,arguments)},Fr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ea=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a;t.record;var n=Fr(t,["mutationMode","record"]),r=se(t),o=qn();if(!r||r.id==null)return null;var c=e||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return c==="undoable"?E.jsx(Gr,Qe({record:r},n)):E.jsx(Jr,Qe({mutationMode:c,record:r},n))},"DeleteBranchButton"),dt=function(){return dt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dt.apply(this,arguments)},ta=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},na=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},tn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},pe,ga=d(function(t){var a=t.allowMultipleRoots,e=a===void 0?!1:a,n=t.className,r=t.create,o=t.defaultExpandedKeys,c=t.edit,s=t.filter,l=t.hideRootNodes,i=t.lazy,u=i===void 0?!1:i;t.linkTo;var f=t.nodeActions,m=f===void 0?E.jsx(Wr,{}):f,w=t.show,x=t.showLine,C=t.sx,p=t.title,b=t.titleField,h=t.addRootButton,v=h===void 0?E.jsx(Bn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,y=t.meta,g=t.mutationMode,_=t.expandedKeys,S=t.onExpand,j=t.onClick,O=t.onDrop,N=tn(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),P=re(t);if(P==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var q=Ln(),T=Kn(),M=Ge("/".concat(P,"/create/*")),D=Ge("/".concat(P,"/:id/*")),R=Ge("/".concat(P,"/:id/show/*")),L=oa(t),$=A.useState(function(){if(M)return[ye];if(D)return[D.params.id];if(R)return[R.params.id]}),k=$[0],U=$[1];A.useEffect(function(){if(M){U([ye]);return}if(D){U([D.params.id]);return}if(R){U([R.params.id]);return}},[M,D,R]);var X=Or({lazy:u,resource:P,filter:s,meta:y,mutationMode:g,expandedKeys:_??o}),F=X.data,K=X.defaultTitle,W=X.handleExpand,I=X.isPending,B=X.loadChildNodes,G=X.handleDrop,J=X.expandedKeys,V=ce(function(H,Z){if(j&&j(H,Z),!H.defaultPrevented&&L)return q(T({resource:P,id:Z.id,type:L}))}),ee=ce(function(H,Z,de,nn){S&&S(H,Z,de,nn),H.defaultPrevented||W(Z.map(function(rn){var an=rn.id;return an}))}),z=ce(function(H,Z){O&&O(H,Z),G(Z)}),Y=A.useCallback(function(H){return ta(void 0,void 0,void 0,function(){return na(this,function(Z){return u?[2,B(H.record.id)]:[2,Promise.resolve()]})})},[u,B]);if(I||F==null)return null;var ne=!F||F.length===0||e;return E.jsx(Ar,{value:X,children:E.jsxs(aa,{className:n,sx:C,children:[E.jsx("div",{className:be.cardTree,children:E.jsx(kt,{children:E.jsxs(In,{className:be.cardContentTree,children:[E.jsx(qt,dt({data:F,hideRootNodes:l,titleField:b,onDrop:z,onExpand:ee,onClick:V,selectedKeys:k,showLine:x,nodeActions:m,loadData:u?Y:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:J},ra(N))),ne?v:null]})})}),E.jsx("div",{className:be.actionCard,children:E.jsxs(Wn,{children:[r?E.jsx(Te,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,w?E.jsx(Te,{path:":id/show/*",element:typeof w=="function"?E.jsx(w,{}):w}):null,c?E.jsx(Te,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,p!==!1?E.jsx(Te,{path:"*",element:E.jsx(Mt,{title:p,defaultTitle:K})}):null]})})]})})},"TreeWithDetails"),ra=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var a=tn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return a},"sanitizeRestProps"),Ae="RaTreeWithDetails",be={container:"".concat(Ae,"-container"),cardTree:"".concat(Ae,"-cardTree"),cardContentTree:"".concat(Ae,"-cardContentTree"),actionCard:"".concat(Ae,"-actionCard")},aa=_e("div",{name:Ae,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((pe={display:"flex"},pe["& .".concat(be.actionCard)]={width:"100%"},pe["& .".concat(be.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},pe["& .".concat(be.cardContentTree)]={},pe["& .".concat(be.container)]={display:"flex"},pe)),oa=d(function(t){var a=t.linkTo,e=t.show,n=t.edit;return a||(e?"show":n?"edit":!1)},"getLinkTo"),lt=function(){return lt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},lt.apply(this,arguments)},ia=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ma=d(function(t){var a,e=t.children,n=t.className,r=t.resource,o=ia(t,["children","className","resource"]),c=Qn(function(s){return s.breakpoints.down("sm")});return E.jsx(ua,lt({className:Me((a={},a[Se.mobileToolbar]=c,a[Se.desktopToolbar]=!c,a),n),role:"toolbar"},o,{children:A.Children.count(e)===0?E.jsxs("div",{className:Se.defaultToolbar,children:[E.jsx(Un,{}),E.jsx(ea,{resource:r})]}):e}))},"EditNodeToolbar"),$e="RaEditNodeToolbar",Se={desktopToolbar:"".concat($e,"-desktopToolbar"),mobileToolbar:"".concat($e,"-mobileToolbar"),defaultToolbar:"".concat($e,"-defaultToolbar")},ua=_e(zn,{name:$e,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a,e=t.theme;return a={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},a["&.".concat(Se.desktopToolbar)]={},a["&.".concat(Se.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},a["& .".concat(Se.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},a});export{_a as AddChildButton,ha as CreateNode,ea as DeleteBranchButton,Jr as DeleteBranchWithConfirmButton,Gr as DeleteBranchWithUndoButton,Yt as DeleteMenuItem,$r as DeleteMenuItemWithConfirmation,Br as DeleteMenuItemWithUndo,en as DeleteWithConfirmButtonClasses,pa as EditNode,ma as EditNodeToolbar,Se as EditNodeToolbarClasses,Wr as NodeActions,Oa as NodeEditActions,va as ReferenceNodeInput,ya as ShowNode,qt as Tree,Ht as TreeChoicesContext,Er as TreeChoicesContextProvider,Nn as TreeContext,Ar as TreeContextProvider,xr as TreeInput,Et as TreeInputClasses,Cr as TreeInputTree,ga as TreeWithDetails,be as TreeWithDetailsClasses,ye as UNSAVED_NEW_NODE,xa as addTreeMethodsBasedOnChildren,la as addTreeMethodsBasedOnParentAndPosition,yn as deleteBranchByDeletingAllChildren,hn as deleteBranchByDeletingNode,fa as fixFakeRestDataProvider,Ca as getRCTree,Sa as getRCTreeDatum,ja as getRecordTree,Ea as getRootAndChildNodes,Pa as raTreeLanguageEnglish,Na as raTreeLanguageFrench,sa as removeChildren,Da as renderSwitcherIcon,gn as updateQueryCacheFromGetTree,bn as useAddChildNode,ur as useAddRootNode,br as useCreateNodeController,Qt as useDeleteBranch,Gt as useDeleteBranchWithConfirmController,Vt as useDeleteBranchWithUndoController,Aa as useEditNodeController,$t as useExpandedKeys,dr as useGetChildNodesCallback,_n as useGetRootNodes,Tt as useGetTree,lr as useGetTreeCallback,fr as useMoveAsNthChildOf,hr as useMoveAsNthSiblingOf,Sr as useReferenceNodeInputController,Pr as useTreeChoicesContext,ht as useTreeContext,Or as useTreeController,Dr as useTreeInputController};
//# sourceMappingURL=index-D3SBknFy.js.map
