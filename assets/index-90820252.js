var lr=Object.defineProperty;var b=(e,r)=>lr(e,"name",{value:r,configurable:!0});import{ag as Nt,ah as ne,ai as cr,u as de,H as De,aj as Ke,J as jt,m as Dt,a8 as sr,ak as lt,n as g,al as dr,am as fr,an as vr,ao as Pt,y as je,ap as kt,P as x,E as fe,C as At,aq as hr,ar as gr,as as _e,at as Oe,au as we,av as ct,aw as br,ax as Me,ay as mr,az as yr,aA as pr,aB as _r,aC as be,aD as Rt,aE as Or,aF as Mt,aG as Lt,ac as Ve,T as wr,aH as Tr,af as Cr,I as Sr,f as Er,aI as $t,R as ze,aJ as xr,a2 as Te,w as Nr,ab as jr,aK as Dr,aL as Pr,aM as kr,r as Ar,i as Rr,j as Mr,aN as Bt,aO as It,aP as Le,aQ as Lr,l as Qt,aR as Wt,aS as Kt,aT as $r,aU as Br,K as Ir,L as Qr,aV as Ge,d as Wr,aW as Kr,aX as Pe,aY as vt,a4 as qr,aZ as Vr,a_ as zr}from"./index-d76731f4.js";import{a$ as la,b0 as ca,b3 as sa,b5 as da,b4 as fa,b6 as va,b8 as ha,b7 as ga,b1 as ba,b2 as ma}from"./index-d76731f4.js";var Xe=globalThis&&globalThis.__assign||function(){return Xe=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xe.apply(this,arguments)},Gr=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},Ur=b(function(e){e===void 0&&(e={});var r=e.disableAuthentication,t=e.id,n=e.queryOptions,a=n===void 0?{}:n;Nt({enabled:!r});var o=ne(e),l=cr(o),d=de(),c=De(),i=Ke(),u=jt(),v=Dt().id,y=t??decodeURIComponent(v),_=a.meta,S=Gr(a,["meta"]),E=sr(o,{id:y,meta:_},Xe({onError:function(){c("ra.notification.item_doesnt_exist",{type:"error"}),i("list",o),u()},retry:!1},S)),m=E.data,f=E.error,s=E.isLoading,h=E.isFetching,w=E.refetch;if(m&&m.id&&m.id!=y)throw new Error("useShowController: Fetched record's id attribute (".concat(m.id,") must match the requested 'id' (").concat(y,")"));var C=lt(),T=l(m),p=d("ra.page.show",{name:C(o,1),id:y,record:m,recordRepresentation:typeof T=="string"?T:""});return{defaultTitle:p,error:f,isLoading:s,isFetching:h,record:m,refetch:w,resource:o}},"useShowController"),st=g.createContext({record:null,defaultTitle:null,isFetching:null,isLoading:null,refetch:null,resource:null});st.displayName="ShowContext";var Xr=b(function(e){var r=e.children,t=e.value;return g.createElement(st.Provider,{value:t},g.createElement(dr,{value:t&&t.record},r))},"ShowContextProvider"),Hr=b(function(e){var r=g.useContext(st);return g.useMemo(function(){return fr({},e!=null?Jr(e):{},r)},[r,e])},"useShowContext"),Jr=b(function(e){var r=e.record,t=e.data,n=e.defaultTitle,a=e.isFetching,o=e.isLoading,l=e.resource;return{record:r||t,data:r||t,defaultTitle:n,isFetching:a,isLoading:o,resource:l}},"extractShowContextProps"),He=globalThis&&globalThis.__assign||function(){return He=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},He.apply(this,arguments)},qt=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},xe,Yr=g.createElement(vr,null),Vt=b(function(e){var r,t=e.actions,n=e.aside,a=e.children,o=e.className,l=e.component,d=l===void 0?At:l,c=e.emptyWhileLoading,i=c===void 0?!1:c,u=e.title,v=qt(e,["actions","aside","children","className","component","emptyWhileLoading","title"]),y=Hr(e),_=y.resource,S=y.defaultTitle,E=y.record,m=Pt(e).hasEdit,f=typeof t>"u"&&m?Yr:t;return!a||!E&&i?null:g.createElement(Fr,He({className:je("show-page",o)},Zr(v)),g.createElement(kt,{title:u,defaultTitle:S,preferenceKey:"".concat(_,".show.title")}),f!==!1&&f,g.createElement("div",{className:je(ye.main,(r={},r[ye.noActions]=!f,r))},g.createElement(d,{className:ye.card},a),n))},"ShowView");Vt.propTypes={actions:x.oneOfType([x.element,x.bool]),children:x.node,className:x.string,emptyWhileLoading:x.bool,title:x.any};var Zr=b(function(e){e.defaultTitle,e.hasCreate,e.hasEdit,e.hasList,e.hasShow,e.history,e.id,e.isLoading,e.isFetching,e.location,e.match,e.options,e.refetch,e.permissions;var r=qt(e,["defaultTitle","hasCreate","hasEdit","hasList","hasShow","history","id","isLoading","isFetching","location","match","options","refetch","permissions"]);return r},"sanitizeRestProps$1"),Ae="RaShow",ye={main:"".concat(Ae,"-main"),noActions:"".concat(Ae,"-noActions"),card:"".concat(Ae,"-card")},Fr=fe("div",{name:Ae,overridesResolver:function(e,r){return r.root}})((xe={},xe["& .".concat(ye.main)]={display:"flex"},xe["& .".concat(ye.noActions)]={marginTop:"1em"},xe["& .".concat(ye.card)]={flex:"1 1 auto"},xe)),B=globalThis&&globalThis.__assign||function(){return B=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B.apply(this,arguments)},te=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},re=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ea=b(function(e,r,t,n){r===void 0&&(r="parent_id"),t===void 0&&(t="position"),n===void 0&&(n=!1);var a=n?hr:gr,o=B(B({},e),{getTree:function(l,d){return te(void 0,void 0,void 0,function(){var c,i;return re(this,function(u){switch(u.label){case 0:return[4,e.getList(l,{filter:{},sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:d==null?void 0:d.meta})];case 1:return c=u.sent().data,i=c.map(function(v){return B(B({},v),{children:c.filter(function(y){return y[r]==v.id}).sort(function(y,_){return y[t]-_[t]}).map(function(y){return y.id})})}),[2,{data:i}]}})})},getRootNodes:function(l,d){return te(void 0,void 0,void 0,function(){var c,i,u;return re(this,function(v){switch(v.label){case 0:return[4,e.getList(l,{filter:(u={},u[r]=null,u),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:d==null?void 0:d.meta})];case 1:return c=v.sent().data,[4,Promise.all(c.map(function(y){var _;return e.getList(l,{filter:(_={},_[r]=y.id,_),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:d==null?void 0:d.meta}).then(function(S){var E=S.data;return B(B({},y),{children:E.map(function(m){var f=m.id;return f})})})}))];case 2:return i=v.sent(),[2,{data:i}]}})})},getParentNode:function(l,d){var c=d.childId,i=d.meta;return te(void 0,void 0,void 0,function(){var u,v,y;return re(this,function(_){switch(_.label){case 0:return[4,o.getTree(l,{meta:i})];case 1:return u=_.sent().data,v=u.find(function(S){return S.id===c}),v?(y=u.find(function(S){return S.id===v[r]}),[2,{data:y}]):[2,{data:void 0}]}})})},getChildNodes:function(l,d){var c=d.parentId,i=d.meta;return te(void 0,void 0,void 0,function(){var u,v,y;return re(this,function(_){switch(_.label){case 0:return[4,e.getList(l,{filter:(y={},y[r]=c,y),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i})];case 1:return u=_.sent().data,[4,Promise.all(u.map(function(S){var E;return e.getList(l,{filter:(E={},E[r]=S.id,E),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i}).then(function(m){var f=m.data;return B(B({},S),{children:f.map(function(s){var h=s.id;return h})})})}))];case 2:return v=_.sent(),[2,{data:v}]}})})},moveAsNthChildOf:function(l,d){var c=d.source,i=d.destination,u=d.position,v=d.meta;return te(void 0,void 0,void 0,function(){var y,_,S,E,m;return re(this,function(f){switch(f.label){case 0:return[4,e.getList(l,{filter:(S={},S[r]=i.id,S["".concat(t,"_gte")]=u,S),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return y=f.sent().data,y.length>0?[4,Promise.all(y.map(function(s){var h;return e.update(l,{id:s.id,data:(h={},h[t]=s[t]+1,h),previousData:s,meta:v})}))]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,e.getList(l,{filter:(E={},E[r]=c[r],E["".concat(t,"_gt")]=c[t],E),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return _=f.sent().data,_.length>0?[4,Promise.all(_.map(function(s){var h;return e.update(l,{id:s.id,data:(h={},h[t]=s[t]-1,h),previousData:s,meta:v})}))]:[3,6];case 5:f.sent(),f.label=6;case 6:return[4,e.update(l,{id:c.id,data:(m={},m[r]=i.id,m[t]=u,m),previousData:c,meta:v})];case 7:return f.sent(),[2,{data:null}]}})})},moveAsNthSiblingOf:function(l,d){var c=d.source,i=d.destination,u=d.position,v=d.meta;return te(void 0,void 0,void 0,function(){var y,_,S,E,m,f,s,h,w,C,T;return re(this,function(p){switch(p.label){case 0:return u===0&&(y=(m={},m[r]=i[r],m)),c[t]>i[t]&&c[r]===i[r]&&(y=(f={},f[r]=i[r],f["".concat(t,"_gt")]=i[t],f)),c[r]!==i[r]&&u>0&&(y=(s={},s[r]=i[r],s["".concat(t,"_gt")]=i[t],s)),y?[4,e.getList(l,{filter:y,sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})]:[3,3];case 1:return _=p.sent().data,_.length>0?[4,Promise.all(_.map(function(N){var O;return N.id===c.id?Promise.resolve(void 0):e.update(l,{id:N.id,data:(O={},O[t]=N[t]+1,O),previousData:N,meta:v})}))]:[3,3];case 2:p.sent(),p.label=3;case 3:return c[r]===i[r]?c[t]>i[t]?S=(h={},h[r]=c[r],h["".concat(t,"_gt")]=c[t],h):S=(w={},w[r]=c[r],w["".concat(t,"_gt")]=c[t],w["".concat(t,"_lte")]=i[t],w):S=(C={},C[r]=c[r],C["".concat(t,"_gt")]=c[t],C),[4,e.getList(l,{filter:S,sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return E=p.sent().data,E.length>0?[4,Promise.all(E.map(function(N){var O;return N.id===c.id?Promise.resolve(void 0):e.update(l,{id:N.id,data:(O={},O[t]=N[t]-1,O),previousData:N,meta:v})}))]:[3,6];case 5:p.sent(),p.label=6;case 6:return[4,e.update(l,{id:c.id,data:(T={},T[r]=i[r],T[t]=c[r]===i[r]?c[t]>i[t]?i[t]+1:i[t]:u,T),previousData:c,meta:v})];case 7:return p.sent(),[2,{data:null}]}})})},addRootNode:function(l,d){var c=d.data,i=d.meta;return te(void 0,void 0,void 0,function(){var u,v,y,_,S;return re(this,function(E){switch(E.label){case 0:return[4,e.getList(l,{filter:(_={},_[r]=null,_),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:i})];case 1:return u=E.sent().data,v=u.length>0?u.reduce(function(m,f){return f[t]>m?f[t]:m},-1/0)+1:0,[4,e.create(l,{data:B(B({},c),(S={},S[r]=null,S[t]=v,S)),meta:i})];case 2:return y=E.sent().data,[2,{data:B(B({},y),{children:[]})}]}})})},addChildNode:function(l,d){var c=d.parentId,i=d.data,u=d.meta;return te(void 0,void 0,void 0,function(){var v,y,_,S,E;return re(this,function(m){switch(m.label){case 0:return[4,e.getList(l,{filter:(S={},S[r]=c,S),sort:{field:t,order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return v=m.sent().data,y=v.length>0?v.reduce(function(f,s){return s[t]>f?s[t]:f},-1/0)+1:0,[4,e.create(l,{data:B(B({},i),(E={},E[r]=c,E[t]=y,E)),meta:u})];case 2:return _=m.sent().data,[2,{data:B(B({},_),{children:[]})}]}})})},deleteBranch:function(l,d){return te(void 0,void 0,void 0,function(){var c,i,u,v;return re(this,function(y){switch(y.label){case 0:return c=d.id,i=d.previousData,u=d.meta,[4,a(o,l,d)];case 1:return y.sent(),[4,o.getChildNodes(l,{parentId:i[r],meta:u})];case 2:return v=y.sent().data,[4,Promise.all(v.filter(function(_){return _[t]>i[t]&&_.id!==c}).map(function(_){var S;return e.update(l,{id:_.id,data:B(B({},_),(S={},S[t]=_[t]-1,S)),previousData:_,meta:u})}))];case 3:return y.sent(),[2,{data:i}]}})})}});return o},"addTreeMethodsBasedOnParentAndPosition"),me=globalThis&&globalThis.__assign||function(){return me=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},me.apply(this,arguments)},en=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},tn=b(function(e,r,t){r===void 0&&(r={}),t===void 0&&(t={});var n=_e(),a=Oe(),o=g.useRef(r),l=we(function(c){var i=c===void 0?{}:c,u=i.resource,v=u===void 0?e:u,y=i.data,_=y===void 0?o.current.data:y,S=i.meta,E=S===void 0?o.current.meta:S;return n.addRootNode(v,{data:_,meta:E}).then(function(m){var f=m.data;return f})},me(me({},t),{onSuccess:function(c,i,u){i===void 0&&(i={});var v=i.resource,y=v===void 0?e:v;a.setQueryData([y,"getOne",{id:String(c.id)}],c),t.onSuccess&&t.onSuccess(c,i,u)}})),d=b(function(c,i,u){c===void 0&&(c=e),i===void 0&&(i={}),u===void 0&&(u={});var v=u.returnPromise,y=en(u,["returnPromise"]);if(v)return l.mutateAsync(me({resource:c},i),u);l.mutate(me({resource:c},i),y)},"addRootNode");return[d,l]},"useAddRootNode"),J=globalThis&&globalThis.__assign||function(){return J=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J.apply(this,arguments)},ht=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},gt=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},rn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},bt=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},zt=b(function(e,r,t){r===void 0&&(r={id:void 0}),t===void 0&&(t={});var n=_e(),a=Oe(),o=r.id,l=r.previousData,d=t.mutationMode,c=d===void 0?"pessimistic":d,i=rn(t,["mutationMode"]),u=g.useRef(c),v=g.useRef(r),y=g.useRef([]),_=b(function(m){var f=m.resource,s=m.id,h=Date.now(),w=u.current==="undoable"?h+5*1e3:h,C=b(function(p,N){var O=p.findIndex(function(M){return M.id==N});if(O===-1)return p;for(var j=p[O],D=bt(bt([],p.slice(0,O),!0),p.slice(O+1),!0),A=j.children||[],k=0,P=A;k<P.length;k++){var W=P[k];D=C(D,W)}return D},"removeRecord"),T=b(function(p){var N=C(p,s);return N.map(function(O){return J(J({},O),{children:O.children?O.children.filter(function(j){return j!==s}):O.children})})},"updateCollection");a.setQueriesData([f,"getTree"],function(p){if(!p)return p;var N=T(p),O=N.length<p.length;return O?N:p},{updatedAt:w}),a.setQueriesData([f,"getRootNodes"],function(p){return p&&p.length>0?T(p):p},{updatedAt:w}),a.setQueriesData([f,"getChildNodes"],function(p){if(!p)return p;var N=T(p),O=N.length<p.length;return O?N:p},{updatedAt:w})},"updateCache"),S=we(function(m){var f=m===void 0?{}:m,s=f.resource,h=s===void 0?e:s,w=f.id,C=w===void 0?v.current.id:w,T=f.previousData,p=T===void 0?v.current.previousData:T,N=f.meta,O=N===void 0?v.current.meta:N;return n.deleteBranch(h,{id:C,previousData:p,meta:O}).then(function(j){var D=j.data;return D})},J(J({},i),{onMutate:function(m){return ht(void 0,void 0,void 0,function(){var f;return gt(this,function(s){switch(s.label){case 0:return i.onMutate?[4,i.onMutate(m)]:[3,2];case 1:return f=s.sent()||{},[2,J({snapshot:y.current},f)];case 2:return[2,{snapshot:y.current}]}})})},onError:function(m,f,s){if((u.current==="optimistic"||u.current==="undoable")&&s.snapshot.forEach(function(h){var w=h[0],C=h[1];a.setQueryData(w,C)}),i.onError)return i.onError(m,f,s)},onSuccess:function(m,f,s){if(f===void 0&&(f={}),u.current==="pessimistic"){var h=f.resource,w=h===void 0?e:h,C=f.id,T=C===void 0?o:C;_({resource:w,id:T}),i.onSuccess&&i.onSuccess(m,f,s)}},onSettled:function(m,f,s,h){if(s===void 0&&(s={}),(u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(w){var C=w[0];a.invalidateQueries(C)}),i.onSettled)return i.onSettled(m,f,s,h)}})),E=b(function(m,f,s){return m===void 0&&(m=e),f===void 0&&(f={}),s===void 0&&(s={}),ht(void 0,void 0,void 0,function(){var h,w,C,T,p,N,O,j,D;return gt(this,function(A){switch(A.label){case 0:return h=s.mutationMode,w=s.onSuccess,C=s.onSettled,T=s.onError,v.current=r,h&&(u.current=h),u.current==="pessimistic"?[2,S.mutate(J({resource:m},f),{onSuccess:w,onSettled:C,onError:T})]:(p=f.id,N=p===void 0?o:p,O=f.previousData,j=O===void 0?l:O,D=[[m,"getTree"],[m,"getRootNodes"],[m,"getChildNodes"]],y.current=D.reduce(function(k,P){return k.concat(a.getQueriesData(P))},[]),[4,Promise.all(y.current.map(function(k){var P=k[0];return a.cancelQueries(P)}))]);case 1:return A.sent(),_({resource:m,id:N}),w&&setTimeout(function(){return w(j,J({resource:m},f),{snapshot:y.current})},0),i.onSuccess&&setTimeout(function(){return i.onSuccess(j,J({resource:m},f),{snapshot:y.current})},0),u.current==="optimistic"?[2,S.mutate(J({resource:m},f),{onSettled:C,onError:T})]:(ct.once("end",function(k){var P=k.isUndo;P?y.current.forEach(function(W){var M=W[0],I=W[1];a.setQueryData(M,I)}):S.mutate(J({resource:m},f),{onSettled:C,onError:T})}),[2])}})})},"mutate");return[E,S]},"useDeleteBranch"),le=globalThis&&globalThis.__assign||function(){return le=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},le.apply(this,arguments)},nn=b(function(e,r,t){var n=_e(),a=we([e,"getChildNodes",r],function(l){return n.getChildNodes(e,le(le({},r),l)).then(function(d){var c=d.data;return c})},le({},t)),o=g.useCallback(function(l){return a.mutateAsync(le(le({},r),{parentId:l}))},[a,r]);return o},"useGetChildNodesCallback"),$e=globalThis&&globalThis.__assign||function(){return $e=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$e.apply(this,arguments)},an=b(function(e){return $e($e({},e),{children:e.children.map(function(r){return r.id})})},"removeChildren");const ta=an;var Je=globalThis&&globalThis.__assign||function(){return Je=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Je.apply(this,arguments)},on=b(function(e,r,t){var n=_e(),a=Oe(),o=we([e,"getTree",r],function(){return n.getTree(e,r).then(function(d){var c=d.data;return c})},Je({onSuccess:function(d){br(a,e,d,r)}},t)),l=g.useCallback(function(){return o.mutateAsync(r)},[o,r]);return l},"useGetTreeCallback"),F=globalThis&&globalThis.__assign||function(){return F=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F.apply(this,arguments)},mt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},yt=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},un=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},ve=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},ln=b(function(e,r,t){r===void 0&&(r={source:void 0,destination:void 0,position:void 0,meta:void 0}),t===void 0&&(t={});var n=_e(),a=Oe(),o=r.source,l=r.destination,d=r.position,c=t.mutationMode,i=c===void 0?"undoable":c,u=un(t,["mutationMode"]),v=g.useRef(i),y=g.useRef(r),_=g.useRef([]),S=b(function(f){var s=f.resource,h=f.position,w=f.source,C=f.destination,T=Date.now(),p=v.current==="undoable"?T+5*1e3:T,N=b(function(O){var j=Me(O),D=j.find(function(k){return k.children.includes(w.id)});D?D.children=D.children.filter(function(k){return k!==w.id}):j=j.filter(function(k){return k.id!==w.id});var A=j.find(function(k){return k.id===C.id});return A?A.children=ve(ve(ve([],A.children.slice(0,h),!0),[w.id],!1),A.children.slice(h),!0):(j=j.filter(function(k){return k.id!==w.id}),j=ve(ve(ve([],j.slice(0,h),!0),[w],!1),j.slice(h),!0)),j},"updateCollection");a.setQueriesData([s,"getTree"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p}),a.setQueriesData([s,"getRootNodes"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p}),a.setQueriesData([s,"getChildNodes"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p})},"updateCache"),E=we(function(f){var s=f===void 0?{}:f,h=s.resource,w=h===void 0?e:h,C=s.position,T=C===void 0?y.current.position:C,p=s.source,N=p===void 0?y.current.source:p,O=s.destination,j=O===void 0?y.current.destination:O,D=s.meta,A=D===void 0?y.current.meta:D;return n.moveAsNthChildOf(w,{position:T,source:N,destination:j,meta:A}).then(function(k){var P=k.data;return P})},F(F({},u),{onMutate:function(f){return mt(void 0,void 0,void 0,function(){var s;return yt(this,function(h){switch(h.label){case 0:return u.onMutate?[4,u.onMutate(f)]:[3,2];case 1:return s=h.sent()||{},[2,F({snapshot:_.current},s)];case 2:return[2,{snapshot:_.current}]}})})},onError:function(f,s,h){if((v.current==="optimistic"||v.current==="undoable")&&h.snapshot.forEach(function(w){var C=w[0],T=w[1];a.setQueryData(C,T)}),u.onError)return u.onError(f,s,h)},onSuccess:function(f,s,h){if(s===void 0&&(s={}),v.current==="pessimistic"){var w=s.resource,C=w===void 0?e:w,T=s.position,p=T===void 0?d:T,N=s.source,O=N===void 0?o:N,j=s.destination,D=j===void 0?l:j;S({resource:C,position:p,source:O,destination:D}),u.onSuccess&&u.onSuccess(f,s,h)}},onSettled:function(f,s,h,w){if(h===void 0&&(h={}),(v.current==="optimistic"||v.current==="undoable")&&w.snapshot.forEach(function(C){var T=C[0];a.invalidateQueries(T)}),u.onSettled)return u.onSettled(f,s,h,w)}})),m=b(function(f,s,h){return f===void 0&&(f=e),s===void 0&&(s={}),h===void 0&&(h={}),mt(void 0,void 0,void 0,function(){var w,C,T,p,N,O,j,D,A,k,P;return yt(this,function(W){switch(W.label){case 0:return w=h.mutationMode,C=h.onSuccess,T=h.onSettled,p=h.onError,y.current=r,w&&(v.current=w),v.current==="pessimistic"?[2,E.mutate(F({resource:f},s),{onSuccess:C,onSettled:T,onError:p})]:(N=s.position,O=N===void 0?d:N,j=s.source,D=j===void 0?o:j,A=s.destination,k=A===void 0?l:A,P=[[f,"getTree"],[f,"getRootNodes"],[f,"getChildNodes"]],_.current=P.reduce(function(M,I){return M.concat(a.getQueriesData(I))},[]),[4,Promise.all(_.current.map(function(M){var I=M[0];return a.cancelQueries(I)}))]);case 1:return W.sent(),S({resource:f,position:O,source:D,destination:k}),C&&setTimeout(function(){return C(void 0,F({resource:f},s),{snapshot:_.current})},0),u.onSuccess&&setTimeout(function(){return u.onSuccess(void 0,F({resource:f},s),{snapshot:_.current})},0),v.current==="optimistic"?[2,E.mutate(F({resource:f},s),{onSettled:T,onError:p})]:(ct.once("end",function(M){var I=M.isUndo;I?_.current.forEach(function(K){var Y=K[0],G=K[1];a.setQueryData(Y,G)}):E.mutate(F({resource:f},s),{onSettled:T,onError:p})}),[2])}})})},"mutate");return[m,E]},"useMoveAsNthChildOf"),ee=globalThis&&globalThis.__assign||function(){return ee=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ee.apply(this,arguments)},pt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},_t=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},cn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},he=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},sn=b(function(e,r,t){r===void 0&&(r={source:void 0,destination:void 0,position:void 0,meta:void 0}),t===void 0&&(t={});var n=_e(),a=Oe(),o=r.source,l=r.destination,d=r.position,c=t.mutationMode,i=c===void 0?"undoable":c,u=cn(t,["mutationMode"]),v=g.useRef(i),y=g.useRef(r),_=g.useRef([]),S=b(function(f){var s=f.resource,h=f.position,w=f.source,C=f.destination,T=Date.now(),p=v.current==="undoable"?T+5*1e3:T,N=b(function(O){var j=Me(O),D=j.find(function(P){return P.children.includes(w.id)}),A=j.find(function(P){return P.children.includes(C.id)}),k=h;return D&&A&&D.id===A.id&&D.children.findIndex(function(P){return P===w.id})<D.children.findIndex(function(P){return P===C.id})&&(k=h-1),D?D.children=D.children.filter(function(P){return P!==w.id}):j=j.filter(function(P){return P.id!==w.id}),A?A.children=he(he(he([],A.children.slice(0,k),!0),[w.id],!1),A.children.slice(k),!0):(j=j.filter(function(P){return P.id!==w.id}),j=he(he(he([],j.slice(0,h),!0),[w],!1),j.slice(h),!0)),j},"updateCollection");a.setQueriesData([s,"getTree"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p}),a.setQueriesData([s,"getRootNodes"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p}),a.setQueriesData([s,"getChildNodes"],function(O){return O&&O.length>0?N(O):O},{updatedAt:p})},"updateCache"),E=we(function(f){var s=f===void 0?{}:f,h=s.resource,w=h===void 0?e:h,C=s.position,T=C===void 0?y.current.position:C,p=s.source,N=p===void 0?y.current.source:p,O=s.destination,j=O===void 0?y.current.destination:O,D=s.meta,A=D===void 0?y.current.meta:D;return n.moveAsNthSiblingOf(w,{position:T,source:N,destination:j,meta:A}).then(function(k){var P=k.data;return P})},ee(ee({},u),{onMutate:function(f){return pt(void 0,void 0,void 0,function(){var s;return _t(this,function(h){switch(h.label){case 0:return u.onMutate?[4,u.onMutate(f)]:[3,2];case 1:return s=h.sent()||{},[2,ee({snapshot:_.current},s)];case 2:return[2,{snapshot:_.current}]}})})},onError:function(f,s,h){if((v.current==="optimistic"||v.current==="undoable")&&h.snapshot.forEach(function(w){var C=w[0],T=w[1];a.setQueryData(C,T)}),u.onError)return u.onError(f,s,h)},onSuccess:function(f,s,h){if(s===void 0&&(s={}),v.current==="pessimistic"){var w=s.resource,C=w===void 0?e:w,T=s.position,p=T===void 0?d:T,N=s.source,O=N===void 0?o:N,j=s.destination,D=j===void 0?l:j;S({resource:C,position:p,source:O,destination:D}),u.onSuccess&&u.onSuccess(f,s,h)}},onSettled:function(f,s,h,w){if(h===void 0&&(h={}),(v.current==="optimistic"||v.current==="undoable")&&w.snapshot.forEach(function(C){var T=C[0];a.invalidateQueries(T)}),u.onSettled)return u.onSettled(f,s,h,w)}})),m=b(function(f,s,h){return f===void 0&&(f=e),s===void 0&&(s={}),h===void 0&&(h={}),pt(void 0,void 0,void 0,function(){var w,C,T,p,N,O,j,D,A,k,P;return _t(this,function(W){switch(W.label){case 0:return w=h.mutationMode,C=h.onSuccess,T=h.onSettled,p=h.onError,y.current=r,w&&(v.current=w),v.current==="pessimistic"?[2,E.mutate(ee({resource:f},s),{onSuccess:C,onSettled:T,onError:p})]:(N=s.position,O=N===void 0?d:N,j=s.source,D=j===void 0?o:j,A=s.destination,k=A===void 0?l:A,P=[[f,"getTree"],[f,"getRootNodes"],[f,"getChildNodes"]],_.current=P.reduce(function(M,I){return M.concat(a.getQueriesData(I))},[]),[4,Promise.all(_.current.map(function(M){var I=M[0];return a.cancelQueries(I)}))]);case 1:return W.sent(),S({resource:f,position:O,source:D,destination:k}),C&&setTimeout(function(){return C(void 0,ee({resource:f},s),{snapshot:_.current})},0),u.onSuccess&&setTimeout(function(){return u.onSuccess(void 0,ee({resource:f},s),{snapshot:_.current})},0),v.current==="optimistic"?[2,E.mutate(ee({resource:f},s),{onSettled:T,onError:p})]:(ct.once("end",function(M){var I=M.isUndo;I?_.current.forEach(function(K){var Y=K[0],G=K[1];a.setQueryData(Y,G)}):E.mutate(ee({resource:f},s),{onSettled:T,onError:p})}),[2])}})})},"mutate");return[m,E]},"useMoveAsNthSiblingOf"),ie=globalThis&&globalThis.__assign||function(){return ie=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ie.apply(this,arguments)},Ot=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},wt=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ra=b(function(e){return ie(ie({},e),{getRootNodes:function(r,t){return Ot(void 0,void 0,void 0,function(){var n,a,o,l;return wt(this,function(d){switch(d.label){case 0:return[4,e.getRootNodes(r,t)];case 1:return n=d.sent(),a=n.data,o=n.total,l=a.filter(function(c){return c.parent_id==null}),[2,{data:l,total:o}]}})})},addRootNode:function(r,t){var n=t.data,a=t.meta;return Ot(void 0,void 0,void 0,function(){var o,l,d,c;return wt(this,function(i){switch(i.label){case 0:return[4,e.getList(r,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:a})];case 1:return o=i.sent().data,l=o.filter(function(u){return typeof u.parent_id>"u"}),d=l.length>0?l.reduce(function(u,v){return v.position>u?v.position:u},-1/0)+1:0,[4,e.create(r,{data:ie(ie({},n),{parent_id:null,position:d}),meta:a})];case 2:return c=i.sent().data,[2,{data:ie(ie({},c),{children:[]})}]}})})}})},"fixFakeRestDataProvider"),Ye=globalThis&&globalThis.__assign||function(){return Ye=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ye.apply(this,arguments)},Gt=b(function(e){var r=e.mutationMode,t=e.mutationOptions,n=e.record,a=e.redirect,o=e.resource,l=De(),d=Ke(),c=jt(),i=zt(),u=i[0],v=i[1].isLoading,y=g.useState(!1),_=y[0],S=y[1],E=g.useCallback(function(s){s.stopPropagation(),u(o,{id:n.id,previousData:n},Ye({mutationMode:r,onSuccess:function(){l("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),d(a,o),c()},onError:function(h){l(typeof h=="string"?h:h.message||"ra.notification.http_error",{type:"warning"})}},t))},[u,r,t,l,n,d,a,c,o]),m=b(function(s){s.stopPropagation(),S(!0)},"handleDialogOpen"),f=b(function(s){s.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:E,handleDialogOpen:m,handleDialogClose:f,isLoading:v,open:_}},"useDeleteBranchWithConfirmController"),Ze=globalThis&&globalThis.__assign||function(){return Ze=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ze.apply(this,arguments)},Ut=b(function(e){var r=e.mutationOptions,t=e.record,n=e.redirect,a=n===void 0?"list":n,o=e.resource,l=De(),d=Ke(),c=zt(),i=c[0],u=c[1].isLoading,v=g.useCallback(function(y){y.stopPropagation(),i(o,{id:t.id,previousData:t},Ze({onSuccess:function(){l("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),d(a,o)},onError:function(_){return l(typeof _=="string"?_:_.message||"ra.notification.http_error",{type:"warning"})},mutationMode:"undoable"},r))},[i,r,l,t,d,a,o]);return{handleDelete:v,isLoading:u}},"useDeleteBranchWithUndoController"),dn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},fn=b(function(e){var r=e.disableAuthentication,t=e.record,n=t===void 0?{}:t,a=e.redirect,o=e.mutationOptions,l=o===void 0?{}:o,d=e.transform;Nt({enabled:!r});var c=ne(e),i=lt(),u=Oe(),v=mr(),y=yr(),_=y.lazy,S=y.setFinalData,E=y.handleAddNode,m=y.expandedKeys,f=y.handleExpand,s=v.state&&v.state.parentId,h=typeof s<"u"&&s!==null,w=v.state&&v.state.record||n,C=l.onSuccess,T=l.onError,p=dn(l,["onSuccess","onError"]),N=Pt(e),O=N.hasEdit,j=N.hasShow,D=a||vn(j,O),A=tn(c,void 0,p),k=A[0],P=A[1],W=pr(c,void 0,p),M=W[0],I=W[1],K=_r(E);g.useEffect(function(){return K({record:{},parentId:s}),function(){K(void 0)}},[K,s]);var Y=de(),G=De(),ue=Ke(),Ce=g.useCallback(function($,L){var z=L===void 0?{}:L,X=z.onSuccess,q=z.onError,ae=z.transform,Q=b(function(U){G("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),ue(D,c,U.id,U),u.refetchQueries([c,"getTree"],{active:!0}),u.refetchQueries([c,"getRootNodes"],{active:!0}),_&&S&&f&&(S(function(Z){return Z.filter(function(V){return V.id!==be})}),f(m.filter(function(Z){return Z!==String(s)})))},"defaultOnSuccess"),H=b(function(U){G(typeof U=="string"?U:U.message||"ra.notification.http_error",{type:"warning"})},"defaultOnError");return Promise.resolve(ae?ae($):d?d($):$).then(function(U){var Z={onSuccess:function(V,oe,Ee){K(void 0),X?X(V,oe,Ee):C?C(V,oe,Ee):Q(V)},onError:q||T||H};return h?M(c,{data:U,parentId:s,meta:p.meta},Z):k(c,{data:U,meta:p.meta},Z)})},[M,k,K,h,G,T,C,s,u,ue,c,d,p.meta,D,_,S,m,f]),Se=i(c,1),R=Y("ra.page.create",{name:"".concat(Se)});return{isLoading:!1,isFetching:!1,defaultTitle:R,save:Ce,saving:P.isLoading||I.isLoading,resource:c,record:w,redirect:D}},"useCreateNodeController"),vn=b(function(e,r){return r?"edit":e?"show":"list"},"getDefaultRedirectRoute"),hn=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},Xt=b(function(e,r){var t=r.find(function(n){return n.id==e});return t?hn([t.id.toString()],(t.children||[]).flatMap(function(n){return Xt(n,r)}),!0):[]},"getNodeKeysRecursively"),ce=globalThis&&globalThis.__assign||function(){return ce=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ce.apply(this,arguments)},Tt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},Ct=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},St=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},ke=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},gn=b(function(e){var r=de(),t=ne(e),n=lt(),a=e.hideRootNodes,o=e.lazy,l=o===void 0?!1:o,d=e.titleField,c=d===void 0?"title":d,i=e.mutationMode,u=i===void 0?"undoable":i,v=e.meta,y=Rt(t,{meta:v},{enabled:!l}),_=Or(t,{meta:v},{enabled:l,cacheTime:0}),S=nn(t,{meta:v}),E=g.useMemo(function(){var R;return(R=_.data)===null||R===void 0?void 0:R.map(function($){var L=$.children,z=St($,["children"]);return L.length?z:$})},[_.data]),m=l?ce(ce({},_),{data:E}):y,f=m.data,s=m.error,h=m.isLoading,w=m.isFetching,C=g.useState(f),T=C[0],p=C[1],N=g.useCallback(function(R){return Tt(void 0,void 0,void 0,function(){var $;return Ct(this,function(L){switch(L.label){case 0:return[4,S(R)];case 1:return $=L.sent(),p(function(z){var X=$.map(function(Q){var H=Q.children,U=St(Q,["children"]),Z=z.some(function(V){return Q.children.includes(V.id)});return H.length&&!Z?U:Q}),q=ke(ke([],z.map(function(Q){return Q.id===R?ce(ce({},Q),{children:X.map(function(H){return H.id})}):Q}),!0),X,!0),ae=q.reduce(function(Q,H){return Q[H.id]=H,Q},{});return Object.values(ae)}),[2]}})})},[S]);g.useEffect(function(){p(f)},[f]);var O=g.useState(),j=O[0],D=O[1],A=g.useCallback(function(R){var $=Me(T);if(R){if(D(R),R.parentId!=null){var L=$.find(function(X){return X.id===R.parentId});L&&(L.children=L.children||[],L.children.push(be))}p(ke(ke([],$,!0),[ce({id:be,children:[]},R.record)],!1))}else{if(!j)return;var z=Me(T);if(j.parentId!=null){var L=z.find(function(q){return q.id===j.parentId});L&&(L.children=L.children.filter(function(q){return q!=be}))}D(void 0),p(z.filter(function(X){return X.id!==be}))}},[T,j]),k=g.useMemo(function(){return T?Mt(T,c,r("ra-tree.new_node"),a):null},[T,a,c,r]),P=Lt(),W=P[0],M=P[1],I=g.useCallback(function(R){M(function($){var L=typeof R=="function"?R($):R,z=$.filter(function(q){return!L.includes(q)}),X=z.flatMap(function(q){return Xt(q,T)},[]);return L.filter(function(q){return!X.includes(q)})})},[T,M]),K=ln(t,{meta:v})[0],Y=sn(t,{meta:v})[0],G=on(t),ue=De(),Ce=g.useCallback(function(R){var $=R.node.key,L=R.dragNode.key,z=R.node.pos.split("-"),X=R.dropPosition-Number(z[z.length-1]),q=f.reduce(function(V,oe){return V[oe.id]=oe,V},{}),ae=q[L],Q=q[$],H=b(function(){return Tt(void 0,void 0,void 0,function(){return Ct(this,function(V){switch(V.label){case 0:return[4,G()];case 1:return V.sent(),ue("ra-tree.item_moved",{undoable:u==="undoable"}),[2]}})})},"successSideEffect");if(!R.dropToGap)K(t,{source:ae,destination:Q,position:0},{onSuccess:H,mutationMode:u});else if((R.node.children||[]).length>0&&R.node.expanded&&X===1)K(t,{source:ae,destination:Q,position:Q.children.length},{onSuccess:H,mutationMode:u});else{var U,Z=b(function(V,oe,Ee){V.forEach(function(qe,ur){if(qe.key===oe){Ee(ur);return}qe.children&&Z(qe.children,oe,Ee)})},"loop_1");Z(k,$,function(V){U=V}),Y(t,{source:ae,destination:Q,position:X===-1?U:U+1},{onSuccess:H,mutationMode:u})}},[f,K,Y,u,ue,G,t,k]),Se=r("ra.page.list",{name:n(t,2)});return{data:T,defaultTitle:Se,error:s,expandedKeys:W,handleAddNode:A,handleDrop:Ce,handleExpand:I,isLoading:h,isFetching:w,loadChildNodes:N,newNode:j,tree:k,lazy:l,setFinalData:p}},"useTreeController"),Ht=g.createContext(void 0),Be=globalThis&&globalThis.__assign||function(){return Be=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Be.apply(this,arguments)},Jt=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},bn=b(function(e){var r=e.label,t=e.multiple,n=e.sx,a=e.className,o=e.helperText,l=e.fullWidth,d=Jt(e,["label","multiple","sx","className","helperText","fullWidth"]),c=Tn(e),i=c.resource,u=c.source,v=c.tree,y=c.fetchError,_=c.isLoading,S=c.isRequired,E=c.field,m=c.fieldState,f=c.formState,s=c.defaultValue,h=m.isTouched,w=m.invalid,C=m.error,T=f.isSubmitted,p=de();return y?g.createElement(Ue,{className:a,sx:n,"data-testid":"error"},g.createElement(Ve,{label:r,source:u,resource:i,fullWidth:l},g.createElement(wr,{color:"error.main"},p("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})))):_||!v?g.createElement(Ue,{className:a,sx:n,"data-testid":"loading"},g.createElement(Ve,{label:r,source:u,resource:i,fullWidth:l},g.createElement(Tr,null))):g.createElement(Ue,{className:a,sx:n},g.createElement(Ve,{htmlFor:u,className:Et.label,color:(h||T)&&w?"error":void 0,label:r,source:u,resource:i,isRequired:S,fullWidth:l},g.createElement(mn,Be({source:u,multiple:t,className:Et.tree,field:E,defaultValue:s,fullWidth:l},d,{treeData:v}))),(h||T)&&C||o?g.createElement(Cr,{error:(h||T)&&!!C},g.createElement(Sr,{touched:h||T,error:C==null?void 0:C.message,helperText:o})):null)},"TreeInput"),Fe="RaTreeInput",Et={label:"".concat(Fe,"-label"),tree:"".concat(Fe,"-tree")},Ue=fe(Er,{name:Fe,overridesResolver:function(e,r){return r.root}})(function(){return{}}),mn=b(function(e){var r=e.multiple,t=e.treeData,n=e.field,a=e.checkStrictly,o=a===void 0?!0:a,l=e.expandAction,d=l===void 0?!1:l,c=e.defaultValue,i=Jt(e,["multiple","treeData","field","checkStrictly","expandAction","defaultValue"]),u=n.onBlur,v=n.onChange,y=n.value,_=y||(r?[]:""),S=c||(r?[]:""),E=b(function(f,s){var h=s.checkedNodes.filter(function(C){return o?f.checked.includes(C.key):f.includes(C.key)}),w=h.map(function(C){return C.id});v(w)},"handleCheck"),m=b(function(f,s){var h=f&&f.length>0?s.node.id:"";v(h)},"handleSelect");return g.createElement($t,Be({},i,{checkStrictly:o,expandAction:d,checkable:r,selectable:!r,checkedKeys:r?_.map(String):[],selectedKeys:r?[]:[String(_)],defaultCheckedKeys:r?S.map(String):void 0,defaultSelectedKeys:r?void 0:[String(S)],defaultExpandedKeys:r?S.map(String):[String(S)],onCheck:E,onSelect:m,treeData:t,onBlur:u}))},"TreeInputTree"),yn=b(function(e){var r=e.reference,t=e.source,n=e.meta,a=Rt(r,{meta:n}),o=a.data,l=a.error,d=a.isLoading,c=a.isFetching;return{source:t,resource:r,treeData:o,error:l,isLoading:d,isFetching:c}},"useReferenceNodeInputController"),pn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},na=b(function(e){var r=e.children,t=r===void 0?ze.createElement(bn,null):r,n=yn(e),a=n.resource,o=pn(n,["resource"]);return ze.createElement(xr,{value:a},ze.createElement(_n,{value:o},t))},"ReferenceNodeInput"),_n=b(function(e){var r=e.children,t=e.value;return g.createElement(Ht.Provider,{value:t},r)},"TreeChoicesContextProvider"),On=b(function(){return g.useContext(Ht)||{}},"useTreeChoicesContext"),Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ie.apply(this,arguments)},wn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},Tn=b(function(e){var r=e.source,t=e.treeData,n=e.hideRootNodes,a=e.titleField,o=a===void 0?"title":a,l=wn(e,["source","treeData","hideRootNodes","titleField"]),d=ne(e),c=Te(e),i=On(),u=i.source,v=i.treeData,y=i.isLoading,_=i.isFetching,S=i.error,E=t??v,m=r??u,f=g.useMemo(function(){return E?Mt(E,o,void 0,n):null},[E,n,o]),s=Nr(Ie(Ie({},l),{resource:d,source:m,type:"text"})),h=s.isRequired,w=s.field,C=s.fieldState,T=s.formState,p=jr(c,m,e.defaultValue);return{resource:d,source:m,tree:f,fetchError:S,isLoading:y,isFetching:_,isRequired:h,field:w,fieldState:C,formState:T,defaultValue:p}},"useTreeInputController"),Cn=b(function(e){var r=e.children,t=e.value;return g.createElement(Dr.Provider,{value:t},r)},"TreeContextProvider"),et=globalThis&&globalThis.__assign||function(){return et=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},et.apply(this,arguments)},Sn=b(function(e){var r=fn(e);return g.createElement(Pr,{value:r},g.createElement(kr,et({},e,r)))},"CreateNode");const aa=Sn;var tt=globalThis&&globalThis.__assign||function(){return tt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tt.apply(this,arguments)},xt=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},En=b(function(e){var r=e.id,t=Dt().id,n=r||decodeURIComponent(t),a=Lt(),o=a[1];g.useEffect(function(){o(function(d){var c=n.toString();return Array.isArray(d)?d.includes(c)?d:xt(xt([],d,!0),[c],!1):[c]})},[e.resource,n,o]);var l=Ur(e);return g.createElement(Xr,{value:l},g.createElement(Vt,tt({},e)))},"ShowNode");const oa=En;var dt={},xn=Rr;Object.defineProperty(dt,"__esModule",{value:!0});var Yt=dt.default=void 0,Nn=xn(Ar()),jn=Mr;Yt=dt.default=(0,Nn.default)((0,jn.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var rt=globalThis&&globalThis.__assign||function(){return rt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},rt.apply(this,arguments)},Dn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},Zt=b(function(e){var r=e.className,t=e.confirmTitle,n=t===void 0?"ra.message.delete_title":t,a=e.confirmContent,o=a===void 0?"ra.message.delete_content":a,l=e.label,d=l===void 0?"ra.action.delete":l,c=e.mutationMode,i=e.onClick;e.record,e.resource;var u=e.ref,v=e.redirect,y=v===void 0?"list":v,_=Dn(e,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),S=ne(e),E=Te(e),m=Gt({mutationMode:c,record:E,resource:S,redirect:y}),f=m.handleDelete,s=m.handleDialogClose,h=m.handleDialogOpen,w=m.isLoading,C=m.open,T=de(),p=b(function(N){N.stopPropagation(),i&&i(N),N.isDefaultPrevented()||h(N)},"handleClick");return g.createElement(g.Fragment,null,g.createElement(Bt,rt({className:r,onClick:p,ref:u},_),T(d,{_:d})),g.createElement(It,{isOpen:C,loading:w,title:n,content:o,translateOptions:{name:Le.humanize(T("resources.".concat(S,".name"),{smart_count:1,_:Le.singularize(S)}),!0),id:E.id},onConfirm:f,onClose:s}))},"DeleteMenuItemWithConfirmation");Zt.propTypes={className:x.string,confirmTitle:x.string,confirmContent:x.string,label:x.string,mutationMode:x.oneOf(["pessimistic","optimistic","undoable"]),record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string};var nt=globalThis&&globalThis.__assign||function(){return nt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nt.apply(this,arguments)},Pn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},Ft=b(function(e){var r=e.className,t=e.label,n=t===void 0?"ra.action.delete":t;e.mutationMode;var a=e.onClick;e.record;var o=e.ref;e.resource;var l=e.redirect,d=l===void 0?"list":l,c=Pn(e,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=ne(e),u=Te(e),v=Ut({record:u,resource:i,redirect:d}),y=v.handleDelete,_=v.isLoading,S=de(),E=b(function(m){m.stopPropagation(),a&&a(m),m.isDefaultPrevented()||y(m)},"handleClick");return g.createElement(Bt,nt({className:r,disabled:_,onClick:E,ref:o},c),S(n,{_:n}))},"DeleteMenuItemWithUndo");Ft.propTypes={className:x.string,label:x.string,record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string};var Qe=globalThis&&globalThis.__assign||function(){return Qe=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qe.apply(this,arguments)},kn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},ft=b(function(e){var r=e.mutationMode,t=r===void 0?"undoable":r,n=kn(e,["mutationMode"]);return t==="undoable"?g.createElement(Ft,Qe({},n,{mutationMode:t})):g.createElement(Zt,Qe({},n,{mutationMode:t}))},"DeleteMenuItem");ft.displayName="DeleteMenuItem";ft.propTypes={className:x.string,confirmTitle:x.string,confirmContent:x.string,label:x.string,mutationMode:x.oneOf(["pessimistic","optimistic","undoable"]),record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string};var An=b(function(e){var r=e.children,t=r===void 0?g.createElement(ft,null):r,n=e.className,a=g.useState(null),o=a[0],l=a[1],d=b(function(i){i.stopPropagation(),l(i.currentTarget)},"handleClick"),c=b(function(i){i.stopPropagation(),l(null)},"handleClose");return g.createElement(Ln,{className:n},g.createElement("button",{className:Mn.menuButton,onClick:d},g.createElement(Yt,null)),g.createElement(Lr,{anchorEl:o,open:!!o,onClose:c},g.Children.map(t,function(i){return g.isValidElement(i)?g.cloneElement(i,{onClose:c}):i})))},"NodeActions");const Rn=An;var er="RaNodeActions",Mn={menuButton:"".concat(er,"-menuButton")},Ln=fe("div",{name:er,overridesResolver:function(e,r){return r.root}})(function(){return{}}),at=globalThis&&globalThis.__assign||function(){return at=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},at.apply(this,arguments)},$n=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},tr=b(function(e){var r=e.label,t=r===void 0?"ra.action.delete":r,n=e.className,a=e.icon,o=a===void 0?In:a,l=e.onClick;e.resource,e.record;var d=e.redirect,c=d===void 0?"list":d,i=$n(e,["label","className","icon","onClick","resource","record","redirect"]),u=ne(e),v=Te(e),y=Ut({resource:u,record:v,redirect:c}),_=y.handleDelete,S=y.isLoading,E=b(function(m){l&&l(m),m.isDefaultPrevented()||_(m)},"handleClick");return g.createElement(Bn,at({onClick:E,disabled:S,label:t,className:je("ra-delete-button",n),key:"button"},i),o)},"DeleteBranchWithUndoButton"),Bn=fe(Qt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:function(e,r){return r.root}})(function(e){var r=e.theme;return{color:r.palette.error.main,"&:hover":{backgroundColor:Wt(r.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),In=g.createElement(Kt,null);tr.propTypes={className:x.string,label:x.string,record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string,icon:x.element};var ot=globalThis&&globalThis.__assign||function(){return ot=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ot.apply(this,arguments)},Qn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},rr=b(function(e){var r=e.className,t=e.confirmTitle,n=t===void 0?"ra.message.delete_title":t,a=e.confirmContent,o=a===void 0?"ra.message.delete_content":a,l=e.icon,d=l===void 0?Wn:l,c=e.label,i=c===void 0?"ra.action.delete":c,u=e.mutationMode,v=e.onClick;e.record,e.resource;var y=e.redirect,_=y===void 0?"list":y,S=Qn(e,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),E=de(),m=ne(e),f=Te(e),s=Gt({mutationMode:u,resource:m,record:f,redirect:_}),h=s.handleDelete,w=s.handleDialogClose,C=s.handleDialogOpen,T=s.isLoading,p=s.open,N=b(function(O){v&&v(O),O.isDefaultPrevented()||C(O)},"handleClick");return g.createElement(Kn,{className:r},g.createElement(Qt,ot({onClick:N,label:i,className:je("ra-delete-button",ar.deleteButton),key:"button"},S),d),g.createElement(It,{isOpen:p,loading:T,title:n,content:o,translateOptions:{name:E("resources.".concat(m,".forcedCaseName"),{smart_count:1,_:Le.humanize(E("resources.".concat(m,".name"),{smart_count:1,_:Le.singularize(m)}),!0)}),id:f.id},onConfirm:h,onClose:w}))},"DeleteBranchWithConfirmButton"),Wn=g.createElement(Kt,null),nr="RaDeleteBranchWithConfirmButton",ar={deleteButton:"".concat(nr,"-deleteButton")},Kn=fe("div",{name:nr})(function(e){var r,t=e.theme;return r={},r["& .".concat(ar.deleteButton)]={color:t.palette.error.main,"&:hover":{backgroundColor:Wt(t.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},r});rr.propTypes={className:x.string,confirmTitle:x.string,confirmContent:x.string,label:x.string,record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string,icon:x.element};var We=globalThis&&globalThis.__assign||function(){return We=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},We.apply(this,arguments)},qn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},or=b(function(e){var r=e.mutationMode,t=r===void 0?"undoable":r;e.record;var n=qn(e,["mutationMode","record"]),a=Te(e),o=$r();if(!a||a.id==null)return null;var l=t||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return l==="undoable"?g.createElement(tr,We({record:a},n)):g.createElement(rr,We({mutationMode:l,record:a},n))},"DeleteBranchButton");or.propTypes={basePath:x.string,label:x.string,mutationMode:x.oneOf(["pessimistic","optimistic","undoable"]),record:x.any,redirect:x.oneOfType([x.string,x.bool,x.func]),resource:x.string,icon:x.element};var it=globalThis&&globalThis.__assign||function(){return it=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},it.apply(this,arguments)},Vn=globalThis&&globalThis.__awaiter||function(e,r,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return b(a,"adopt"),new(t||(t=Promise))(function(o,l){function d(u){try{i(n.next(u))}catch(v){l(v)}}b(d,"fulfilled");function c(u){try{i(n.throw(u))}catch(v){l(v)}}b(c,"rejected");function i(u){u.done?o(u.value):a(u.value).then(d,c)}b(i,"step"),i((n=n.apply(e,r||[])).next())})},zn=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(i){return function(u){return c([i,u])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(t=0)),t;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,a=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){t=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){t.label=i[1];break}if(i[0]===6&&t.label<o[1]){t.label=o[1],o=i;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(i);break}o[2]&&t.ops.pop(),t.trys.pop();continue}i=r.call(e,t)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ir=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},ge,Gn=b(function(e){var r=e.allowMultipleRoots,t=r===void 0?!1:r,n=e.className,a=e.create,o=e.edit,l=e.hideRootNodes,d=e.lazy,c=d===void 0?!1:d,i=e.linkTo,u=i===void 0?"edit":i,v=e.nodeActions,y=v===void 0?g.createElement(Rn,null):v,_=e.show,S=e.showLine,E=e.sx,m=e.title,f=e.titleField,s=f===void 0?"title":f,h=e.addRootButton,w=h===void 0?g.createElement(Br,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,C=e.meta,T=ir(e,["allowMultipleRoots","className","create","edit","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta"]),p=ne(),N=Ir(),O=Qr(),j=Ge("/".concat(p,"/create")),D=Ge("/".concat(p,"/:id")),A=Ge("/".concat(p,"/:id/show")),k=g.useMemo(function(){if(j)return[be];if(D)return[D.params.id];if(A)return[A.params.id]},[j,D,A]),P=gn({hideRootNodes:l,lazy:c,resource:p,titleField:s,meta:C}),W=P.defaultTitle,M=P.expandedKeys,I=P.handleExpand,K=P.isLoading,Y=P.loadChildNodes,G=P.tree,ue=P.handleDrop,Ce=g.useCallback(function($,L){N(O({resource:p,id:L.id,type:u}))},[O,u,N,p]),Se=g.useCallback(function($){return Vn(void 0,void 0,void 0,function(){return zn(this,function(L){return c?[2,Y($.id)]:[2,Promise.resolve()]})})},[c,Y]);if(K)return null;var R=!G||G.length===0||t;return g.createElement(Cn,{value:P},g.createElement(Xn,{className:n,sx:E},g.createElement("div",{className:se.cardTree},g.createElement(At,null,g.createElement(Wr,{className:se.cardContentTree},g.createElement($t,it({treeData:G,onDrop:ue,onExpand:I,onClick:Ce,expandedKeys:G&&Array.isArray(M)?M:[],selectedKeys:k,showLine:S,nodeActions:y,loadData:c?Se:void 0,loadedKeys:void 0,expandAction:!1},Un(T))),R&&w))),g.createElement("div",{className:se.actionCard},g.createElement(Kr,null,a?g.createElement(Pe,{path:"create/*",element:g.isValidElement(a)?a:g.createElement(a,null)}):null,_?g.createElement(Pe,{path:":id/show/*",element:g.isValidElement(_)?_:g.createElement(_,null)}):null,o?g.createElement(Pe,{path:":id/*",element:g.isValidElement(o)?o:g.createElement(o,null)}):null,m!==!1?g.createElement(Pe,{path:"*",element:g.createElement(kt,{title:m,defaultTitle:W})}):null))))},"TreeWithDetails"),Un=b(function(e){e.basePath,e.history,e.location,e.match,e.options,e.hasList,e.hasEdit,e.hasShow,e.hasCreate,e.syncWithLocation;var r=ir(e,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return r},"sanitizeRestProps");Gn.propTypes={edit:vt,create:vt,resource:x.string};var Ne="RaTreeWithDetails",se={container:"".concat(Ne,"-container"),cardTree:"".concat(Ne,"-cardTree"),cardContentTree:"".concat(Ne,"-cardContentTree"),actionCard:"".concat(Ne,"-actionCard")},Xn=fe("div",{name:Ne,overridesResolver:function(e,r){return r.root}})((ge={display:"flex"},ge["& .".concat(se.actionCard)]={width:"100%"},ge["& .".concat(se.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},ge["& .".concat(se.cardContentTree)]={},ge["& .".concat(se.container)]={display:"flex"},ge)),ut=globalThis&&globalThis.__assign||function(){return ut=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ut.apply(this,arguments)},Hn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t},Jn=b(function(e){var r,t=e.children,n=e.className,a=e.resource,o=Hn(e,["children","className","resource"]),l=qr(function(d){return d.breakpoints.down("sm")});return g.createElement(Yn,ut({className:je((r={},r[pe.mobileToolbar]=l,r[pe.desktopToolbar]=!l,r),n),role:"toolbar"},o),g.Children.count(t)===0?g.createElement("div",{className:pe.defaultToolbar},g.createElement(Vr,null),g.createElement(or,{resource:a})):t)},"EditNodeToolbar");Jn.propTypes={children:x.node,className:x.string,resource:x.string};var Re="RaEditNodeToolbar",pe={desktopToolbar:"".concat(Re,"-desktopToolbar"),mobileToolbar:"".concat(Re,"-mobileToolbar"),defaultToolbar:"".concat(Re,"-defaultToolbar")},Yn=fe(zr,{name:Re,overridesResolver:function(e,r){return r.root}})(function(e){var r,t=e.theme;return r={backgroundColor:t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900]},r["&.".concat(pe.desktopToolbar)]={},r["&.".concat(pe.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},r["& .".concat(pe.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},r});export{aa as CreateNode,or as DeleteBranchButton,rr as DeleteBranchWithConfirmButton,tr as DeleteBranchWithUndoButton,ft as DeleteMenuItem,Zt as DeleteMenuItemWithConfirmation,Ft as DeleteMenuItemWithUndo,ar as DeleteWithConfirmButtonClasses,la as EditNode,Jn as EditNodeToolbar,Rn as NodeActions,ca as NodeEditActions,na as ReferenceNodeInput,oa as ShowNode,pe as ToolbarClasses,$t as Tree,Ht as TreeChoicesContext,_n as TreeChoicesContextProvider,Dr as TreeContext,Cn as TreeContextProvider,bn as TreeInput,Et as TreeInputClasses,mn as TreeInputTree,Gn as TreeWithDetails,se as TreeWithDetailsClasses,be as UNSAVED_NEW_NODE,sa as addTreeMethodsBasedOnChildren,ea as addTreeMethodsBasedOnParentAndPosition,gr as deleteBranchByDeletingAllChildren,hr as deleteBranchByDeletingNode,ra as fixFakeRestDataProvider,Mt as getRCTree,da as getRCTreeDatum,fa as getRecordTree,va as getRootAndChildNodes,ha as raTreeLanguageEnglish,ga as raTreeLanguageFrench,ta as removeChildren,ba as renderSwitcherIcon,br as updateQueryCacheFromGetTree,pr as useAddChildNode,tn as useAddRootNode,fn as useCreateNodeController,zt as useDeleteBranch,Gt as useDeleteBranchWithConfirmController,Ut as useDeleteBranchWithUndoController,ma as useEditNodeController,Lt as useExpandedKeys,nn as useGetChildNodesCallback,Or as useGetRootNodes,Rt as useGetTree,on as useGetTreeCallback,ln as useMoveAsNthChildOf,sn as useMoveAsNthSiblingOf,yn as useReferenceNodeInputController,On as useTreeChoicesContext,yr as useTreeContext,gn as useTreeController,Tn as useTreeInputController};
//# sourceMappingURL=index-90820252.js.map
