var hn=Object.defineProperty;var d=(t,n)=>hn(t,"name",{value:n,configurable:!0});import{aj as re,ak as qt,al as yn,am as Bt,u as _e,M as qe,an as Je,m as Kt,ac as gn,ao as mt,r as N,ap as mn,aq as bt,i as bn,ar as wn,A as pe,D as be,C as It,as as Lt,at as _n,au as pn,av as On,aw as De,ax as Ae,ay as Re,az as wt,aA as te,aB as xn,aC as We,O as Cn,a7 as Oe,aD as _t,aE as jn,aF as Sn,aG as En,aH as Wt,aI as Pn,aJ as ye,aK as Qt,j as E,aL as Ve,F as Ke,aM as zt,aN as Ut,aO as Gt,ai as xt,I as Ct,aP as Nn,a4 as Dn,aQ as An,aR as Rn,aS as kn,aT as Xt,aU as Mn,f as Tn,aV as $n,ae as qn,aW as Bn,y as Kn,aX as In,aY as Ln,aZ as Wn,a_ as Ht,a$ as Jt,b0 as Qe,b1 as Qn,b2 as zn,k as Vt,b3 as Yt,b4 as Zt,b5 as Un,b6 as Gn,b7 as Xn,b8 as Hn,Q as Jn,S as Vn,d as Yn,b9 as Zn,ba as Be,a8 as Fn,bb as er,bc as tr}from"./index-Du8ptiSm.js";import{bf as Pa,bd as Na,be as Da,bi as Aa,bl as Ra,bk as ka,bj as Ma,bm as Ta,bo as $a,bn as qa,bg as Ba,bh as Ka}from"./index-Du8ptiSm.js";var rt=function(){return rt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rt.apply(this,arguments)},nr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},rr=d(function(t){t===void 0&&(t={});var n=t.disableAuthentication,e=n===void 0?!1:n,a=t.id,r=t.queryOptions,i=r===void 0?{}:r,c=re(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var l=qt({enabled:!e}).isPending,s=yn({action:"show",resource:c,enabled:!e&&!l}).isPending,o=Bt(c),u=_e(),f=qe(),b=Je(),m=Kt().id;if(!m&&!a)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var j=a??m,C=i.meta,O=nr(i,["meta"]),g=gn(c,{id:j,meta:C},rt({enabled:!l&&!s||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),b("list",c)},"onError"),retry:!1},O)),h=g.data,v=g.error,y=g.isLoading,_=g.isFetching,p=g.isPaused,x=g.isPending,S=g.isPlaceholderData,w=g.refetch;if(h&&h.id&&h.id!=j)throw new Error("useShowController: Fetched record's id attribute (".concat(h.id,") must match the requested 'id' (").concat(j,")"));var D=mt(),P=o(h),A=u("resources.".concat(c,".page.show"),{id:j,record:h,recordRepresentation:typeof P=="string"?P:"",_:u("ra.page.show",{name:D(c,1),id:j,record:h,recordRepresentation:typeof P=="string"?P:""})});return{defaultTitle:A,error:v,isLoading:y,isFetching:_,isPaused:p,isPending:x,isPlaceholderData:S,record:h,refetch:w,resource:c}},"useShowController"),pt=N.createContext(null);pt.displayName="ShowContext";var ar=d(function(t){var n=t.children,e=t.value;return N.createElement(pt.Provider,{value:e},N.createElement(mn,{value:e&&e.record},n))},"ShowContextProvider"),ir=d(function(){var t=N.useContext(pt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),at=function(){return at=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)},or=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ur=d(function(t){var n=bt(t).hasEdit;return N.createElement(bn,at({},cr(t)),n&&N.createElement(wn,null))},"ShowActions"),cr=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var n=or(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return n},"sanitizeRestProps$1"),ze=function(){return ze=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)},dr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Te,lr=N.createElement(ur,null),sr=N.createElement(_n,null),fr=d(function(t){var n,e=t.actions,a=t.aside,r=t.children,i=t.render,c=t.className,l=t.component,s=l===void 0?It:l,o=t.emptyWhileLoading,u=o===void 0?!1:o,f=t.offline,b=f===void 0?sr:f,m=t.title,j=dr(t,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),C=ir(),O=C.resource,g=C.defaultTitle,h=C.isPaused,v=C.isPending,y=C.record,_=bt().hasEdit,p=typeof e>"u"&&_?lr:e;return h&&v&&b!==void 0&&b!==!1?N.createElement(jt,ze({className:be("show-page",c)},j),N.createElement("div",{className:be(de.main,de.noActions)},N.createElement(s,{className:de.card},b),a)):!y&&u?null:N.createElement(jt,ze({className:be("show-page",c)},j),m!==!1&&N.createElement(Lt,{title:m,defaultTitle:g,preferenceKey:"".concat(O,".show.title")}),p!==!1&&p,N.createElement("div",{className:be(de.main,(n={},n[de.noActions]=!p,n))},N.createElement(s,{className:de.card},i?i(C):r),a))},"ShowView"),Ie="RaShow",de={main:"".concat(Ie,"-main"),noActions:"".concat(Ie,"-noActions"),card:"".concat(Ie,"-card")},jt=pe("div",{name:Ie,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((Te={},Te["& .".concat(de.main)]={display:"flex"},Te["& .".concat(de.noActions)]={marginTop:"1em"},Te["& .".concat(de.card)]={flex:"1 1 auto"},Te)),H=function(){return H=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)},ue=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},ce=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ba=d(function(t,n,e,a){n===void 0&&(n="parent_id"),e===void 0&&(e="position"),a===void 0&&(a=!1);var r=a?pn:On,i=H(H({},t),{getTree:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:l==null?void 0:l.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=u.sent().data,o=s.map(function(f){return H(H({},f),{children:s.filter(function(b){return b[n]==f.id}).sort(function(b,m){return b[e]-m[e]}).map(function(b){return b.id})})}),[2,{data:o}]}})})},"getTree"),getRootNodes:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:H(H({},l==null?void 0:l.filter),(u={},u[n]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=f.sent().data,[4,Promise.all(s.map(function(b){var m;return t.getList(c,{filter:(m={},m[n]=b.id,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta}).then(function(j){var C=j.data;return H(H({},b),{children:C.map(function(O){var g=O.id;return g})})})}))];case 2:return o=f.sent(),[2,{data:o}]}})})},"getRootNodes"),getParentNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m=o.childId,j=o.meta;return ce(this,function(C){switch(C.label){case 0:return[4,i.getTree(s,{meta:j})];case 1:return u=C.sent().data,f=u.find(function(O){return O.id===m}),f?(b=u.find(function(O){return O.id===f[n]}),[2,{data:b}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m=o.parentId,j=o.meta;return ce(this,function(C){switch(C.label){case 0:return[4,t.getList(s,{filter:(b={},b[n]=m,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 1:return u=C.sent().data,[4,Promise.all(u.map(function(O){var g;return t.getList(s,{filter:(g={},g[n]=O.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j}).then(function(h){var v=h.data;return H(H({},O),{children:v.map(function(y){var _=y.id;return _})})})}))];case 2:return f=C.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m,j,C,O=o.source,g=o.destination,h=o.position,v=o.meta;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(m={},m[n]=g.id,m["".concat(e,"_gte")]=h,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=y.sent().data,u.length>0?[4,Promise.all(u.map(function(_){var p;return t.update(s,{id:_.id,data:(p={},p[e]=_[e]+1,p),previousData:_,meta:v})}))]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,t.getList(s,{filter:(j={},j[n]=O[n],j["".concat(e,"_gt")]=O[e],j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=y.sent().data,f.length>0?[4,Promise.all(f.map(function(_){var p;return t.update(s,{id:_.id,data:(p={},p[e]=_[e]-1,p),previousData:_,meta:v})}))]:[3,6];case 5:y.sent(),y.label=6;case 6:return[4,t.update(s,{id:O.id,data:(C={},C[n]=g.id,C[e]=h,C),previousData:O,meta:v})];case 7:return b=y.sent().data,[2,{data:b}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m,j,C,O,g,h,v,y,_,p,x,S=o.source,w=o.destination,D=o.position,P=o.meta;return ce(this,function(A){switch(A.label){case 0:return(D===0||D===-1)&&(u=(C={},C[n]=w[n],C)),S[e]>w[e]&&S[n]===w[n]&&(D===-1?u=(O={},O[n]=w[n],O["".concat(e,"_gte")]=w[e],O):u=(g={},g[n]=w[n],g["".concat(e,"_gt")]=w[e],g)),S[n]!==w[n]&&D>0&&(u=(h={},h[n]=w[n],h["".concat(e,"_gt")]=w[e],h)),u?[4,t.getList(s,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:P})]:[3,3];case 1:return f=A.sent().data,f.length>0?[4,Promise.all(f.map(function(M){var k;return M.id===S.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]+1,k),previousData:M,meta:P})}))]:[3,3];case 2:A.sent(),A.label=3;case 3:return S[n]===w[n]?S[e]>w[e]?b=(v={},v[n]=S[n],v["".concat(e,"_gt")]=S[e],v):b=(y={},y[n]=S[n],y["".concat(e,"_gt")]=S[e],y["".concat(e,"_lte")]=w[e],y):b=(_={},_[n]=S[n],_["".concat(e,"_gt")]=S[e],_),[4,t.getList(s,{filter:b,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:P})];case 4:return m=A.sent().data,m.length>0?[4,Promise.all(m.map(function(M){var k;return M.id===S.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]-1,k),previousData:M,meta:P})}))]:[3,6];case 5:A.sent(),A.label=6;case 6:return j=S[n]===w[n]?S[e]>w[e]?w[e]+1:w[e]:D<0?0:D,D===-1&&(j=0),[4,t.update(s,{id:S.id,data:(p={},p[n]=(x=w[n])!==null&&x!==void 0?x:null,p[e]=j,p),previousData:S,meta:P})];case 7:return A.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m,j,C=o.data,O=o.meta;return ce(this,function(g){switch(g.label){case 0:return[4,t.getList(s,{filter:(m={},m[n]=null,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:O})];case 1:return u=g.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(s,{data:H(H({},C),(j={},j[n]=null,j[e]=f,j)),meta:O})];case 2:return b=g.sent().data,[2,{data:H(H({},b),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,m,j,C,O=o.parentId,g=o.data,h=o.meta,v=o.position;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(j={},j[n]=O,j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(_,p){return p[e]>_?p[e]:_},-1/0)+1:0,b=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(s,{data:H(H({},g),(C={},C[n]=O,C[e]=b,C)),meta:h})];case 2:return m=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(_){var p;_[e]>=v&&t.update(s,{id:_.id,data:H(H({},_),(p={},p[e]=_[e]+1,p)),previousData:_,meta:h})}),[2,{data:H(H({},m),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u,f;return ce(this,function(b){switch(b.label){case 0:return s=l.id,o=l.previousData,u=l.meta,[4,r(i,c,l)];case 1:return b.sent(),[4,i.getChildNodes(c,{parentId:o[n],meta:u})];case 2:return f=b.sent().data,[4,Promise.all(f.filter(function(m){return m[e]>o[e]&&m.id!==s}).map(function(m){var j;return t.update(c,{id:m.id,data:H(H({},m),(j={},j[e]=m[e]-1,j)),previousData:m,meta:u})}))];case 3:return b.sent(),[2,{data:o}]}})})},"deleteBranch")});return i},"addTreeMethodsBasedOnParentAndPosition"),Se=function(){return Se=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Se.apply(this,arguments)},vr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},hr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},yr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},gr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},mr=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=De(),r=Ae(),i=N.useRef(n),c=Re(Se(Se({mutationFn:d(function(s){var o=s===void 0?{}:s,u=o.resource,f=u===void 0?t:u,b=o.data,m=b===void 0?i.current.data:b,j=o.meta,C=j===void 0?i.current.meta:j;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(m==null)throw new Error("useAddRootNode mutation requires non-empty data");return a.addRootNode(f,{data:m,meta:C}).then(function(O){var g=O.data;return g})},"mutationFn")},e),{onSuccess:d(function(s,o,u){o===void 0&&(o={});var f=o.resource,b=f===void 0?t:f;r.setQueryData([b,"getOne",{id:String(s.id)}],s),e.onSuccess&&e.onSuccess(s,o,u)},"onSuccess")})),l=d(function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return vr(void 0,gr([],s,!0),void 0,function(u,f,b){var m,j;return u===void 0&&(u=t),f===void 0&&(f={}),b===void 0&&(b={}),hr(this,function(C){return m=b.returnPromise,j=yr(b,["returnPromise"]),m?[2,c.mutateAsync(Se({resource:u},f),b)]:(c.mutate(Se({resource:u},f),j),[2])})})},"addRootNode");return[l,c]},"useAddRootNode"),ne=function(){return ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ne.apply(this,arguments)},St=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Et=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},br=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ye=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Ft=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=De(),r=Ae(),i=n.id,c=n.previousData,l=e.mutationMode,s=l===void 0?"pessimistic":l,o=br(e,["mutationMode"]),u=N.useRef(s),f=N.useRef(n),b=N.useRef([]),m=d(function(O){var g=O.resource,h=O.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,_=d(function(x,S){var w=x.findIndex(function(T){return T.id==S});if(w===-1)return x;for(var D=x[w],P=Ye(Ye([],x.slice(0,w),!0),x.slice(w+1),!0),A=D.children||[],M=0,k=A;M<k.length;M++){var R=k[M];P=_(P,R)}return P},"removeRecord"),p=d(function(x){var S=_(x,h);return S.map(function(w){return ne(ne({},w),{children:w.children?w.children.filter(function(D){return D!==h}):w.children})})},"updateCollection");r.setQueriesData({queryKey:[g,"getTree"]},function(x){if(!x)return x;var S=p(x),w=S.length<x.length;return w?S:x},{updatedAt:y}),r.setQueriesData({queryKey:[g,"getRootNodes"]},function(x){return x&&x.length>0?p(x):x},{updatedAt:y}),r.setQueriesData({queryKey:[g,"getChildNodes"]},function(x){if(!x)return x;var S=p(x),w=S.length<x.length;return w?S:x},{updatedAt:y})},"updateCache"),j=Re(ne(ne({mutationFn:d(function(O){var g=O===void 0?{}:O,h=g.resource,v=h===void 0?t:h,y=g.id,_=y===void 0?f.current.id:y,p=g.previousData,x=p===void 0?f.current.previousData:p,S=g.meta,w=S===void 0?f.current.meta:S;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(_==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(x==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return a.deleteBranch(v,{id:_,previousData:x,meta:w}).then(function(D){var P=D.data;return P})},"mutationFn")},o),{onMutate:d(function(O){return St(void 0,void 0,void 0,function(){var g;return Et(this,function(h){switch(h.label){case 0:return o.onMutate?[4,o.onMutate(O)]:[3,2];case 1:return g=h.sent()||{},[2,ne({snapshot:b.current},g)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(O,g,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],_=v[1];r.setQueryData(y,_)}),o.onError)return o.onError(O,g,h)},"onError"),onSuccess:d(function(O,g,h){if(g===void 0&&(g={}),u.current==="pessimistic"){var v=g.resource,y=v===void 0?t:v,_=g.id,p=_===void 0?i:_;m({resource:y,id:p}),o.onSuccess&&o.onSuccess(O,g,h)}},"onSuccess"),onSettled:d(function(O,g,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0];r.invalidateQueries({queryKey:_})}),o.onSettled)return o.onSettled(O,g,h,v)},"onSettled")})),C=d(function(){for(var O=[],g=0;g<arguments.length;g++)O[g]=arguments[g];return St(void 0,Ye([],O,!0),void 0,function(h,v,y){var _,p,x,S,w,D,P,A,M;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),Et(this,function(k){switch(k.label){case 0:return _=y.mutationMode,p=y.onSuccess,x=y.onSettled,S=y.onError,f.current=n,_&&(u.current=_),u.current==="pessimistic"?[2,j.mutate(ne({resource:h},v),{onSuccess:p,onSettled:x,onError:S})]:(w=v.id,D=w===void 0?i:w,P=v.previousData,A=P===void 0?c:P,M=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],b.current=M.reduce(function(R,T){return R.concat(r.getQueriesData({queryKey:T}))},[]),[4,Promise.all(b.current.map(function(R){var T=R[0];return r.cancelQueries({queryKey:T})}))]);case 1:return k.sent(),m({resource:h,id:D}),p&&setTimeout(function(){return p(A,ne({resource:h},v),{snapshot:b.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(A,ne({resource:h},v),{snapshot:b.current})},0),u.current==="optimistic"?[2,j.mutate(ne({resource:h},v),{onSettled:x,onError:S})]:(wt.once("end",function(R){var T=R.isUndo;T?b.current.forEach(function(B){var q=B[0],I=B[1];r.setQueryData(q,I)}):j.mutate(ne({resource:h},v),{onSettled:x,onError:S})}),[2])}})})},"mutate");return[C,j]},"useDeleteBranch"),ge=function(){return ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ge.apply(this,arguments)},wr=d(function(t,n,e){var a=De(),r=Re(ge({mutationKey:[t,"getChildNodes",n],mutationFn:d(function(c){return a.getChildNodes(t,ge(ge({},n),c)).then(function(l){var s=l.data;return s})},"mutationFn")},e)),i=te(function(c){return r.mutateAsync(ge(ge({},n),{parentId:c}))});return i},"useGetChildNodesCallback"),Ue=function(){return Ue=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)},wa=d(function(t){return Ue(Ue({},t),{children:t.children.map(function(n){return n.id})})},"removeChildren"),it=function(){return it=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it.apply(this,arguments)},_r=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=De(),r=Ae(),i=Re(it({mutationKey:[t,"getTree",n],mutationFn:d(function(){return a.getTree(t,n).then(function(l){var s=l.data;return s})},"mutationFn"),onSuccess:d(function(l){xn(r,t,l,n)},"onSuccess")},e)),c=N.useCallback(function(){return i.mutateAsync(n)},[i,n]);return c},"useGetTreeCallback"),ie=function(){return ie=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ie.apply(this,arguments)},Pt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Nt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},pr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},fe=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Or=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=De(),r=Ae(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=pr(e,["mutationMode"]),f=N.useRef(o),b=N.useRef(n),m=N.useRef([]),j=d(function(g){var h=g.resource,v=g.position,y=g.source,_=g.destination,p=Date.now(),x=f.current==="undoable"?p+5*1e3:p,S=d(function(w){var D,P,A,M,k,R=We(w),T=R.find(function(q){var I;return(I=q.children)===null||I===void 0?void 0:I.includes(y.id)});T?T.children=(D=T.children)===null||D===void 0?void 0:D.filter(function(q){return q!==y.id}):R=R.filter(function(q){return q.id!==y.id});var B=R.find(function(q){return q.id===_.id});return B?B.children=fe(fe(fe([],(A=(P=B.children)===null||P===void 0?void 0:P.slice(0,v))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(v))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(q){return q.id!==y.id}),R=fe(fe(fe([],R.slice(0,v),!0),[y],!1),R.slice(v),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x})},"updateCache"),C=Re(ie(ie({mutationFn:d(function(g){var h=g===void 0?{}:g,v=h.resource,y=v===void 0?t:v,_=h.position,p=_===void 0?b.current.position:_,x=h.source,S=x===void 0?b.current.source:x,w=h.destination,D=w===void 0?b.current.destination:w,P=h.meta,A=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(p==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return a.moveAsNthChildOf(y,{position:p,source:S,destination:D,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(g){return Pt(void 0,void 0,void 0,function(){var h;return Nt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return h=v.sent()||{},[2,ie({snapshot:m.current},h)];case 2:return[2,{snapshot:m.current}]}})})},"onMutate"),onError:d(function(g,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],p=y[1];r.setQueryData(_,p)}),u.onError)return u.onError(g,h,v)},"onError"),onSettled:d(function(g,h,v,y){v===void 0&&(v={});var _=v.resource,p=_===void 0?t:_;if(r.invalidateQueries({queryKey:[p,"getTree"]}),r.invalidateQueries({queryKey:[p,"getRootNodes"]}),r.invalidateQueries({queryKey:[p,"getChildNodes"]}),u.onSettled)return u.onSettled(g,h,v,y)},"onSettled")})),O=d(function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];return Pt(void 0,fe([],g,!0),void 0,function(v,y,_){var p,x,S,w,D,P,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),Nt(this,function(B){switch(B.label){case 0:if(p=_.mutationMode,x=_.onSuccess,S=_.onSettled,w=_.onError,b.current=n,p&&(f.current=p),f.current==="pessimistic")return[2,C.mutate(ie({resource:v},y),{onSuccess:x,onSettled:S,onError:w})];if(D=y.position,P=D===void 0?l:D,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],m.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(m.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:P,source:M,destination:R}),x&&setTimeout(function(){return x(void 0,ie({resource:v},y),{snapshot:m.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ie({resource:v},y),{snapshot:m.current})},0),f.current==="optimistic"?[2,C.mutate(ie({resource:v},y),{onSettled:S,onError:w})]:(wt.once("end",function(q){var I=q.isUndo;I?m.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):C.mutate(ie({resource:v},y),{onSettled:S,onError:w})}),[2])}})})},"mutate");return[O,C]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oe.apply(this,arguments)},Dt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},At=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},xr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Cr=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=De(),r=Ae(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=xr(e,["mutationMode"]),f=N.useRef(o),b=N.useRef(n),m=N.useRef([]),j=d(function(g){var h=g.resource,v=g.position,y=g.source,_=g.destination,p=Date.now(),x=f.current==="undoable"?p+5*1e3:p,S=d(function(w){var D,P,A,M,k,R=We(w),T=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(y.id)}),B=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(_.id)}),q=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(L){return L===y.id})<T.children.findIndex(function(L){return L===_.id})&&(q=v-1);var I=q<0?0:q;return T?T.children=(D=T.children)===null||D===void 0?void 0:D.filter(function(L){return L!==y.id}):R=R.filter(function(L){return L.id!==y.id}),B?B.children=ve(ve(ve([],(A=(P=B.children)===null||P===void 0?void 0:P.slice(0,I))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(I))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(L){return L.id!==y.id}),R=ve(ve(ve([],R.slice(0,I),!0),[y],!1),R.slice(I),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:x})},"updateCache"),C=Re(oe(oe({mutationFn:d(function(g){var h=g===void 0?{}:g,v=h.resource,y=v===void 0?t:v,_=h.position,p=_===void 0?b.current.position:_,x=h.source,S=x===void 0?b.current.source:x,w=h.destination,D=w===void 0?b.current.destination:w,P=h.meta,A=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(p==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return a.moveAsNthSiblingOf(y,{position:p,source:S,destination:D,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(g){return Dt(void 0,void 0,void 0,function(){var h;return At(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return h=v.sent()||{},[2,oe({snapshot:m.current},h)];case 2:return[2,{snapshot:m.current}]}})})},"onMutate"),onError:d(function(g,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],p=y[1];r.setQueryData(_,p)}),u.onError)return u.onError(g,h,v)},"onError"),onSettled:d(function(g,h,v,y){v===void 0&&(v={});var _=v.resource,p=_===void 0?t:_;if(r.invalidateQueries({queryKey:[p,"getTree"]}),r.invalidateQueries({queryKey:[p,"getRootNodes"]}),r.invalidateQueries({queryKey:[p,"getChildNodes"]}),u.onSettled)return u.onSettled(g,h,v,y)},"onSettled")})),O=d(function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];return Dt(void 0,ve([],g,!0),void 0,function(v,y,_){var p,x,S,w,D,P,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),At(this,function(B){switch(B.label){case 0:if(p=_.mutationMode,x=_.onSuccess,S=_.onSettled,w=_.onError,b.current=n,p&&(f.current=p),f.current==="pessimistic")return[2,C.mutate(oe({resource:v},y),{onSuccess:x,onSettled:S,onError:w})];if(D=y.position,P=D===void 0?l:D,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],m.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(m.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:P,source:M,destination:R}),x&&setTimeout(function(){return x(void 0,oe({resource:v},y),{snapshot:m.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},y),{snapshot:m.current})},0),f.current==="optimistic"?[2,C.mutate(oe({resource:v},y),{onSettled:S,onError:w})]:(wt.once("end",function(q){var I=q.isUndo;I?m.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):C.mutate(oe({resource:v},y),{onSettled:S,onError:w})}),[2])}})})},"mutate");return[O,C]},"useMoveAsNthSiblingOf"),le=function(){return le=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},le.apply(this,arguments)},Rt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},kt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},_a=d(function(t){return le(le({},t),{getRootNodes:d(function(n,e){return Rt(void 0,void 0,void 0,function(){var a,r;return kt(this,function(i){switch(i.label){case 0:return[4,t.getRootNodes(n,e)];case 1:return a=i.sent().data,r=a.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(n,e){return Rt(void 0,[n,e],void 0,function(a,r){var i,c,l,s,o=r.data,u=r.meta;return kt(this,function(f){switch(f.label){case 0:return[4,t.getList(a,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return i=f.sent().data,c=i.filter(function(b){return typeof b.parent_id>"u"}),l=c.length>0?c.reduce(function(b,m){return m.position>b?m.position:b},-1/0)+1:0,[4,t.create(a,{data:le(le({},o),{parent_id:null,position:l}),meta:u})];case 2:return s=f.sent().data,[2,{data:le(le({},s),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),Mt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},en=d(function(t,n){var e,a=t.filter(function(c){return c.id!==n.id}),r=a.find(function(c){var l;return(l=c.children)===null||l===void 0?void 0:l.includes(n.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==n.id})),!n.children||n.children.length===0)return a;var i=tn(a,n);return a=a.filter(function(c){return!i.includes(c)}),a},"removeNode"),tn=d(function(t,n){return n?!n.children||n.children.length===0?[]:Mt(Mt([],n.children,!0),n.children.flatMap(function(e){var a=t.find(function(r){return r.id===e});return a?tn(t,a):[]}),!0):[]},"getNodeChildrenRecursive"),ot=function(){return ot=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)},nn=d(function(t){var n=t.mutationMode,e=t.mutationOptions,a=t.redirect,r=a===void 0?"list":a,i=qe(),c=Je(),l=Cn(),s=re(t);if(s==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=Oe(t);if(o==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Ft(),f=u[0],b=u[1].isPending,m=N.useState(!1),j=m[0],C=m[1],O=_t().setFinalData,g=N.useCallback(function(y){y.stopPropagation(),f(s,{id:o.id,previousData:o},ot({mutationMode:n,onSuccess:d(function(){i("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,s),n==="pessimistic"?l():O&&O(function(_){return en(_,o)})},"onSuccess"),onError:d(function(_){i(typeof _=="string"?_:_.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,n,e,i,o,c,r,l,s,O]),h=d(function(y){y.stopPropagation(),C(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),C(!1)},"handleDialogClose");return{handleDelete:g,handleDialogOpen:h,handleDialogClose:v,isPending:b,open:j}},"useDeleteBranchWithConfirmController"),ut=function(){return ut=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(this,arguments)},rn=d(function(t){var n=t.mutationOptions,e=t.redirect,a=e===void 0?"list":e,r=qe(),i=Je(),c=_t().setFinalData,l=re(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var s=Oe(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var o=Ft(),u=o[0],f=o[1].isPending,b=N.useCallback(function(m){m.stopPropagation(),u(l,{id:s.id,previousData:s},ut({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(j){return en(j,s)}),i(a,l)},"onSuccess"),onError:d(function(j){return r(typeof j=="string"?j:j.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},n))},[u,n,r,s,i,a,l,c]);return{handleDelete:b,isPending:f}},"useDeleteBranchWithUndoController"),Ee=function(){return Ee=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ee.apply(this,arguments)},jr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Sr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Er=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Pr=d(function(t){var n=t.disableAuthentication,e=t.record,a=e===void 0?{}:e,r=t.redirect,i=t.mutationOptions,c=i===void 0?{}:i,l=t.transform;qt({enabled:!n});var s=re(t);if(s==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=mt(),u=Ae(),f=jn(),b=_t().handleAddNode,m=f.state&&f.state.parentId,j=f.state&&f.state.insertAsFirstChild,C=typeof m<"u"&&m!==null,O=f.state&&f.state.record||a,g=c.onSuccess,h=c.onError,v=Er(c,["onSuccess","onError"]),y=bt(t),_=y.hasEdit,p=y.hasShow,x=r||Nr(p,_),S=mr(s,void 0,v),w=S[0],D=S[1],P=Sn(s,void 0,v),A=P[0],M=P[1],k=te(b??Dr);N.useEffect(function(){return k({record:{},parentId:m,insertAsFirstChild:j}),function(){k(void 0)}},[k,m,j]);var R=_e(),T=qe(),B=Je(),q=N.useCallback(function(W,V){var Q=V===void 0?{}:V,G=Q.onSuccess,z=Q.onError,K=Q.transform,$=d(function(U){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(x,s,U.id,U),u.refetchQueries({queryKey:[s,"getTree"],type:"active"}),u.refetchQueries({queryKey:[s,"getRootNodes"],type:"active"})},"defaultOnSuccess"),X=d(function(U){T(typeof U=="string"?U:U.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(K?K(W):l?l(W):W).then(function(U){return jr(void 0,void 0,void 0,function(){var ee,Y,Z;return Sr(this,function(ae){switch(ae.label){case 0:ee={onSuccess:d(function(se,xe,J){k(void 0),G?G(se,xe,J):g?g(se,xe,J):$(se)},"onSuccess"),onError:z||h||X},ae.label=1;case 1:return ae.trys.push([1,6,,7]),C?[4,A(s,{data:U,parentId:m,meta:v.meta,position:j?0:void 0},Ee(Ee({},ee),{returnPromise:!0}))]:[3,3];case 2:return ae.sent(),[3,5];case 3:return[4,w(s,{data:U,meta:v.meta},Ee(Ee({},ee),{returnPromise:!0}))];case 4:ae.sent(),ae.label=5;case 5:return[3,7];case 6:return Y=ae.sent(),(Y instanceof En||typeof Y=="object"&&Y!==null&&Y.hasOwnProperty("body"))&&((Z=Y.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,Y.body.errors]:[3,7];case 7:return[2]}})})})},[A,w,k,C,T,h,g,m,u,B,s,l,v.meta,x,j]),I=o(s,1),L=R("ra.page.create",{name:"".concat(I)});return{isLoading:!1,isFetching:!1,defaultTitle:L,save:q,saving:D.isPending||M.isPending,isPending:D.isPending||M.isPending,resource:s,record:O,redirect:x}},"useCreateNodeController"),Nr=d(function(t,n){return n?"edit":t?"show":"list"},"getDefaultRedirectRoute"),Dr=d(function(){},"noop"),Ar=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},an=d(function(t,n){var e=n.find(function(a){return a.id==t});return e?Ar([e.id.toString()],(e.children||[]).flatMap(function(a){return an(a,n)}),!0):[]},"getNodeKeysRecursively"),me=function(){return me=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},me.apply(this,arguments)},Ze=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Fe=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},et=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},he=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Rr=d(function(t){var n=_e(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var a=mt(),r=t.lazy,i=r===void 0?!1:r,c=t.filter,l=c===void 0?{}:c,s=t.mutationMode,o=s===void 0?"undoable":s,u=t.meta,f=Wt(e,{filter:l,meta:u},{enabled:!i}),b=Pn(e,{filter:l,meta:u},{enabled:i,gcTime:0}),m=wr(e,{meta:u}),j=N.useMemo(function(){var Q;return(Q=b.data)===null||Q===void 0?void 0:Q.map(function(G){var z=G.children,K=et(G,["children"]);return z!=null&&z.length?K:G})},[b.data,b.isFetching]),C=i?me(me({},b),{data:j}):f,O=C.data,g=C.error,h=C.isLoading,v=C.isPending,y=C.isFetching,_=N.useState(O),p=_[0],x=_[1],S=te(function(Q){return Ze(void 0,void 0,void 0,function(){var G;return Fe(this,function(z){switch(z.label){case 0:return[4,m(Q)];case 1:return G=z.sent(),x(function(K){var $,X=G.map(function(Y){var Z=Y.children,ae=et(Y,["children"]),se=K==null?void 0:K.some(function(xe){var J;return(J=Y.children)===null||J===void 0?void 0:J.includes(xe.id)});return Z!=null&&Z.length&&!se?ae:Y}),U=he(he([],($=K==null?void 0:K.map(function(Y){return Y.id===Q?me(me({},Y),{children:X.map(function(Z){return Z.id})}):Y}))!==null&&$!==void 0?$:[],!0),X,!0),ee=U.reduce(function(Y,Z){return Y[Z.id]=Z,Y},{});return Object.values(ee)}),[2]}})})});N.useEffect(function(){x(O)},[O]);var w=N.useState(),D=w[0],P=w[1],A=te(function(Q){var G,z=We(p);if(Q){if(P(Q),Q.parentId!=null){var K=z==null?void 0:z.find(function(X){return X.id===Q.parentId});K&&(K.children=K.children||[],K.children=Q.insertAsFirstChild?he([ye],K.children,!0):he(he([],K.children,!0),[ye],!1))}x(he(he([],z??[],!0),[me({id:ye,children:[]},Q.record)],!1))}else{if(!D)return;var $=We(p);if(D.parentId!=null){var K=$==null?void 0:$.find(function(U){return U.id===D.parentId});K&&(K.children=(G=K.children)===null||G===void 0?void 0:G.filter(function(U){return U!=ye}))}P(void 0),x($==null?void 0:$.filter(function(X){return X.id!==ye}))}}),M=Qt(void 0,t.expandedKeys),k=M[0],R=M[1],T=te(function(Q){R(function(G){var z,K,$=typeof Q=="function"?Q(G??[]):Q,X=(z=G==null?void 0:G.filter(function(ee){return!$.includes(ee)}))!==null&&z!==void 0?z:[],U=(K=X==null?void 0:X.flatMap(function(ee){return an(ee,p??[])},[]))!==null&&K!==void 0?K:[];return $.filter(function(ee){return!U.includes(ee)})})}),B=Or(e,{meta:u})[0],q=Cr(e,{meta:u})[0],I=_r(e),L=qe(),W=te(function(Q){var G=Q.type,z=et(Q,["type"]),K=d(function(){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(X){switch(X.label){case 0:return[4,I()];case 1:return X.sent(),L("ra-tree.item_moved",{undoable:o==="undoable"}),[2]}})})},"successSideEffect"),$=d(function(X){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(U){return L(X.message,{type:"error"}),[2]})})},"errorSideEffect");G==="child"?B(e,z,{onSuccess:K,onError:$,mutationMode:o}):q(e,z,{onSuccess:K,onError:$,mutationMode:o})}),V=n("ra.page.list",{name:a(e,2)});return{data:p,defaultTitle:V,error:g,expandedKeys:k,handleAddNode:A,handleDrop:W,handleExpand:T,isLoading:h,isFetching:y,isPending:v,loadChildNodes:S,newNode:D,lazy:i,setFinalData:x}},"useTreeController"),on=N.createContext(void 0),Ne=function(){return Ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ne.apply(this,arguments)},Ot=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},kr=d(function(t){var n=t.id,e=t.label,a=t.multiple,r=t.sx,i=t.className,c=t.helperText,l=t.fullWidth,s=t.margin,o=s===void 0?"dense":s,u=t.variant,f=u===void 0?"filled":u,b=t.size,m=b===void 0?"small":b,j=Ot(t,["id","label","multiple","sx","className","helperText","fullWidth","margin","variant","size"]),C=Lr(t),O=C.data,g=C.resource,h=C.source,v=C.fetchError,y=C.isLoading,_=C.isRequired,p=C.field,x=C.fieldState,S=C.formState,w=_e(),D=x.isTouched,P=x.invalid,A=x.error,M=S.isSubmitted,k=N.useMemo(function(){return(p==null?void 0:p.value)||(a?[]:"")},[p,a]),R=N.useMemo(function(){return O.filter(function(B){return a?k.includes(B.id):k===B.id})},[k,O,a]),T={standard:Gt,outlined:Ut,filled:zt}[f];return v?E.jsxs(tt,{className:i,sx:r,"data-testid":"error",variant:f,size:m,margin:o,error:!0,children:[E.jsx(Ve,{error:!0,margin:o==="dense"?o:void 0,size:m==="medium"?"normal":m,variant:f,children:E.jsx(Ke,{resource:g,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct}),E.jsx(xt,{error:!0,children:E.jsx(Ct,{error:w("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"}),helperText:c})})]}):y||!O?E.jsxs(tt,{className:i,sx:r,"data-testid":"loading",variant:f,size:m,margin:o,children:[E.jsx(Ve,{margin:o==="dense"?o:void 0,size:m==="medium"?"normal":m,variant:f,children:E.jsx(Ke,{resource:g,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct,endAdornment:E.jsx(Nn,{color:"inherit",size:"30px"})})]}):E.jsxs(tt,{className:i,sx:r,variant:f,size:m,margin:o,children:[E.jsx(Ve,{htmlFor:n??h,error:P,margin:o==="dense"?o:void 0,shrink:R.length>0,size:m==="medium"?"normal":m,variant:f,children:E.jsx(Ke,{resource:g,label:e,isRequired:_,source:h})}),E.jsx(Tr,Ne({source:h,multiple:a,className:Mr.tree,field:p,fullWidth:l},j,{data:O,variant:f,size:m,margin:o,id:n??h})),(D||M)&&A||c?E.jsx(xt,{error:(D||M)&&!!A,children:E.jsx(Ct,{error:A==null?void 0:A.message,helperText:c})}):null]})},"TreeInput"),un="RaTreeInput",Mr={tree:"".concat(un,"-tree")},tt=pe(Mn,{name:un,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{"& .MuiInputBase-input":{height:"auto",minHeight:"1.4375em"},"& .MuiChip-root":{marginTop:n.spacing(.5),marginRight:n.spacing(.5)}}}),Tr=d(function(t){var n,e=t.className,a=t.data,r=t.multiple,i=t.field,c=t.checkStrictly,l=c===void 0?!0:c,s=t.expandAction,o=s===void 0?!1:s,u=t.titleField,f=t.margin,b=f===void 0?"dense":f,m=t.variant,j=m===void 0?"filled":m,C=t.size,O=C===void 0?"small":C,g=t.label,h=t.isRequired,v=t.source,y=t.id,_=t.sx,p=Ot(t,["className","data","multiple","field","checkStrictly","expandAction","titleField","margin","variant","size","label","isRequired","source","id","sx"]),x=N.useMemo(function(){return(i==null?void 0:i.value)||(r?[]:"")},[i,r]),S=N.useMemo(function(){return a.filter(function($){return r?x.includes($.id):x===$.id})},[x,a,r]),w=N.useState(0),D=w[0],P=w[1],A=N.useRef(!0);N.useEffect(function(){A.current&&P(function($){return $+1}),A.current=!0},[x]);var M=te(function($,X){A.current=!1,i==null||i.onChange(X.map(function(U){return U.id}))}),k=te(function($,X){var U;A.current=!1,i==null||i.onChange((U=X==null?void 0:X.id)!==null&&U!==void 0?U:null),W()}),R=N.useState(!1),T=R[0],B=R[1],q=te(function($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),B(!0))}),I=N.useRef(null),L=d(function(){B(!0)},"handleClick"),W=d(function(){B(!1)},"handleClose"),V=N.useRef(null),Q=d(function(){var $;($=V.current)===null||$===void 0||$.updatePosition()},"handleExpand"),G=re(t),z=Bt(G),K={standard:Gt,outlined:Ut,filled:zt}[j];return E.jsxs(E.Fragment,{children:[E.jsx(K,{id:y,ref:I,onClick:L,endAdornment:E.jsx(Rn,{}),size:O,margin:b,inputComponent:ct,className:e,onKeyDown:q,label:E.jsx(Ke,{resource:G,label:g,isRequired:h,source:v}),notched:j==="outlined"?S.length>0:void 0,inputProps:{children:S.length===0?null:E.jsx(Dn,{direction:"row",flexWrap:"wrap",children:r?S.map(function($){return E.jsx(An,{size:O,onDelete:d(function(X){M(X,S.filter(function(U){return U.id!==$.id}),$,!1)},"onDelete"),label:E.jsx(Tt,{record:$,titleField:u||z})},$.id)}):E.jsx(Tt,{record:S[0],titleField:u||z})})}}),E.jsx(kn,{action:V,open:T,anchorEl:I.current,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{minWidth:I?(n=I.current)===null||n===void 0?void 0:n.clientWidth:"auto"}}},children:N.createElement(Xt,Ne({},p,{key:D,checkStrictly:l,expandAction:o,checkable:r,selectable:!r,checkedKeys:r?x:[],selectedKeys:r?[]:[x],defaultCheckedKeys:r?x:void 0,defaultSelectedKeys:r?void 0:[x],defaultExpandedKeys:r?x:[x],onCheck:M,onSelect:k,onExpand:Q,data:a,onBlur:i==null?void 0:i.onBlur,sx:Ne({padding:1},_)}))})]})},"TreeInputTree"),ct=N.forwardRef(d(function(n,e){var a=n.className,r=n.children,i=Ot(n,["className","children"]);return E.jsxs(Tn,{className:a,children:[E.jsx("input",Ne({ref:e},i,{style:$n})),r]})},"TreeInputInput")),Tt=d(function(t){var n=t.titleField,e=t.record;return e?typeof n=="function"?n(e):qn(e,n):null},"ChoiceLabel"),$r=d(function(t){var n=t.reference,e=t.source,a=t.meta,r=Wt(n,{meta:a}),i=r.data,c=r.error,l=r.isLoading,s=r.isFetching;return{source:e,resource:n,data:i,error:c??void 0,isLoading:l,isFetching:s}},"useReferenceNodeInputController"),qr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},pa=d(function(t){var n=t.children,e=n===void 0?E.jsx(kr,{}):n,a=$r(t),r=a.resource,i=qr(a,["resource"]);return E.jsx(Bn,{value:r,children:E.jsx(Br,{value:i,children:e})})},"ReferenceNodeInput"),Br=d(function(t){var n=t.children,e=t.value;return E.jsx(on.Provider,{value:e,children:n})},"TreeChoicesContextProvider"),Kr=d(function(){return N.useContext(on)||{}},"useTreeChoicesContext"),Ge=function(){return Ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ge.apply(this,arguments)},Ir=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Lr=d(function(t){var n=t.source,e=t.data;t.hideRootNodes;var a=Ir(t,["source","data","hideRootNodes"]),r=re(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=Kr(),c=i.source,l=i.data,s=i.isLoading,o=i.isFetching,u=i.error,f=e??l,b=n??c;if(b==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var m=Kn(Ge(Ge({},a),{resource:r,source:b,type:"text"})),j=m.isRequired,C=m.field,O=m.fieldState,g=m.formState;return{resource:r,source:b,data:f??[],fetchError:u,isLoading:s,isFetching:o,isRequired:j,field:C,fieldState:O,formState:g}},"useTreeInputController"),Wr=d(function(t){var n=t.children,e=t.value;return E.jsx(In.Provider,{value:e,children:n})},"TreeContextProvider"),dt=function(){return dt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)},Oa=d(function(t){var n=Pr(t);return E.jsx(Ln,{value:n,children:E.jsx(Wn,dt({},t,n))})},"CreateNode"),lt=function(){return lt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(this,arguments)},$t=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},xa=d(function(t){var n=t.id,e=Kt().id;if(!e&&!n)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var a=n??e,r=Qt(),i=r[1];N.useEffect(function(){i(function(l){var s=a.toString();return Array.isArray(l)?l.includes(s)?l:$t($t([],l,!0),[s],!1):[s]})},[t.resource,a,i]);var c=rr(t);return E.jsx(ar,{value:c,children:E.jsx(fr,lt({},t))})},"ShowNode"),st=function(){return st=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)},Qr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},zr=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.label,l=c===void 0?"ra.action.delete":c,s=t.mutationMode,o=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,b=f===void 0?"list":f,m=Qr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),j=re(t);if(!j)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var C=Oe(t);if(!C)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var O=nn({mutationMode:s,record:C,resource:j,redirect:b}),g=O.handleDelete,h=O.handleDialogClose,v=O.handleDialogOpen,y=O.isPending,_=O.open,p=_e(),x=d(function(S){S.stopPropagation(),o&&o(S),S.isDefaultPrevented()||v(S)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Ht,st({className:n,onClick:x,ref:u},m,{children:p(l,{_:l})})),E.jsx(Jt,{isOpen:_,loading:y,title:a,content:i,translateOptions:{name:Qe.humanize(p("resources.".concat(j,".name"),{smart_count:1,_:Qe.singularize(j)}),!0),id:C.id},onConfirm:g,onClose:h})]})},"DeleteMenuItemWithConfirmation"),ft=function(){return ft=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)},Ur=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Gr=d(function(t){var n=t.className,e=t.label,a=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var i=t.ref;t.resource;var c=t.redirect,l=c===void 0?"list":c,s=Ur(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),o=re(t);if(!o)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=Oe(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=rn({record:u,resource:o,redirect:l}),b=f.handleDelete,m=f.isPending,j=_e(),C=d(function(O){O.stopPropagation(),r&&r(O),O.isDefaultPrevented()||b(O)},"handleClick");return E.jsx(Ht,ft({className:n,disabled:m,onClick:C,ref:i},s,{children:j(a,{_:a})}))},"DeleteMenuItemWithUndo"),Xe=function(){return Xe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xe.apply(this,arguments)},Xr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},cn=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n,a=Xr(t,["mutationMode"]);return e==="undoable"?E.jsx(Gr,Xe({},a,{mutationMode:e})):E.jsx(zr,Xe({},a,{mutationMode:e}))},"DeleteMenuItem");cn.displayName="DeleteMenuItem";var Hr=N.createContext(null),Jr=Hr.Provider,Vr=d(function(t){var n=t.children,e=n===void 0?E.jsx(cn,{}):n,a=t.className,r=N.useState(null),i=r[0],c=r[1],l=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),s=N.useCallback(function(u){u.stopPropagation(),c(null)},[]),o=N.useMemo(function(){return{close:s}},[s]);return E.jsxs(Zr,{className:a,children:[E.jsx("button",{className:Yr.menuButton,onClick:l,children:E.jsx(Qn,{})}),E.jsx(zn,{anchorEl:i,open:!!i,onClose:s,children:E.jsx(Jr,{value:o,children:e})})]})},"NodeActions"),dn="RaNodeActions",Yr={menuButton:"".concat(dn,"-menuButton")},Zr=pe("div",{name:dn,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(){return{}}),vt=function(){return vt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(this,arguments)},Fr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ea=d(function(t){var n=t.label,e=n===void 0?"ra.action.delete":n,a=t.className,r=t.icon,i=r===void 0?na:r,c=t.onClick;t.resource,t.record;var l=t.redirect,s=l===void 0?"list":l,o=Fr(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=Oe(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var b=rn({resource:u,record:f,redirect:s}),m=b.handleDelete,j=b.isPending,C=d(function(O){c&&c(O),O.isDefaultPrevented()||m(O)},"handleClick");return E.jsx(ta,vt({onClick:C,disabled:j,label:e,className:be("ra-delete-button",a)},o,{children:i}),"button")},"DeleteBranchWithUndoButton"),ta=pe(Vt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{color:n.palette.error.main,"&:hover":{backgroundColor:Yt(n.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),na=E.jsx(Zt,{}),ht=function(){return ht=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)},ra=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},aa=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.icon,l=c===void 0?ia:c,s=t.label,o=s===void 0?"ra.action.delete":s,u=t.mutationMode,f=t.onClick;t.record,t.resource;var b=t.redirect,m=b===void 0?"list":b,j=ra(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),C=_e(),O=re(t);if(!O)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var g=Oe(t);if(!g)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=nn({mutationMode:u,resource:O,record:g,redirect:m}),v=h.handleDelete,y=h.handleDialogClose,_=h.handleDialogOpen,p=h.isPending,x=h.open,S=d(function(w){f&&f(w),w.isDefaultPrevented()||_(w)},"handleClick");return E.jsxs(oa,{className:n,children:[E.jsx(Vt,ht({onClick:S,label:o,className:be("ra-delete-button",sn.deleteButton)},j,{children:l}),"button"),E.jsx(Jt,{isOpen:x,loading:p,title:a,content:i,translateOptions:{name:C("resources.".concat(O,".forcedCaseName"),{smart_count:1,_:Qe.humanize(C("resources.".concat(O,".name"),{smart_count:1,_:Qe.singularize(O)}),!0)}),id:g.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),ia=E.jsx(Zt,{}),ln="RaDeleteBranchWithConfirmButton",sn={deleteButton:"".concat(ln,"-deleteButton")},oa=pe("div",{name:ln})(function(t){var n,e=t.theme;return n={},n["& .".concat(sn.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Yt(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},n}),He=function(){return He=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},He.apply(this,arguments)},ua=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ca=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n;t.record;var a=ua(t,["mutationMode","record"]),r=Oe(t),i=Un();if(!r||r.id==null)return null;var c=e||(i!=null&&i.mutationMode?i.mutationMode:"undoable");return c==="undoable"?E.jsx(ea,He({record:r},a)):E.jsx(aa,He({mutationMode:c,record:r},a))},"DeleteBranchButton");function nt(t){var n=Gn();return Xn((n??"")+t)}d(nt,"useMatchWithBasename");var yt=function(){return yt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)},da=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},la=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},fn=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},je,Ca=d(function(t){var n=t.allowMultipleRoots,e=n===void 0?!1:n,a=t.className,r=t.create,i=t.defaultExpandedKeys,c=t.edit,l=t.filter,s=t.hideRootNodes,o=t.lazy,u=o===void 0?!1:o;t.linkTo;var f=t.nodeActions,b=f===void 0?E.jsx(Vr,{}):f,m=t.show,j=t.showLine,C=t.sx,O=t.title,g=t.titleField,h=t.addRootButton,v=h===void 0?E.jsx(Hn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,y=t.meta,_=t.mutationMode,p=t.expandedKeys,x=t.onExpand,S=t.onClick,w=t.onDrop,D=fn(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),P=re(t);if(P==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var A=Jn(),M=Vn(),k=nt("/".concat(P,"/create/*")),R=nt("/".concat(P,"/:id/*")),T=nt("/".concat(P,"/:id/show/*")),B=va(t),q=N.useState(function(){if(k)return[ye];if(R)return[R.params.id];if(T)return[T.params.id]}),I=q[0],L=q[1];N.useEffect(function(){if(k){L([ye]);return}if(R){L([R.params.id]);return}if(T){L([T.params.id]);return}},[k,R,T]);var W=Rr({lazy:u,resource:P,filter:l,meta:y,mutationMode:_,expandedKeys:p??i}),V=W.data,Q=W.defaultTitle,G=W.handleExpand,z=W.isPending,K=W.loadChildNodes,$=W.handleDrop,X=W.expandedKeys,U=te(function(J,F){if(S&&S(J,F),!J.defaultPrevented&&B)return A(M({resource:P,id:F.id,type:B}))}),ee=te(function(J,F,Ce,ke){x&&x(J,F,Ce,ke),J.defaultPrevented||G(F.map(function(Me){var vn=Me.id;return vn}))}),Y=te(function(J,F){w&&w(J,F),$(F)}),Z=N.useCallback(function(J){return da(void 0,void 0,void 0,function(){return la(this,function(F){return u?[2,K(J.record.id)]:[2,Promise.resolve()]})})},[u,K]),ae=N.useMemo(function(){var J;return(J=V==null?void 0:V.reduce(function(F,Ce){return V.some(function(ke){var Me;return(Me=ke.children)===null||Me===void 0?void 0:Me.includes(Ce.id)})||F.push(Ce.id),F},[]))!==null&&J!==void 0?J:[]},[V]),se=te(function(J){var F=J.destination,Ce=J.position;if(V==null)return!1;if(e)return!0;var ke=ae.includes(F.id);return!(ke&&Ce===-1)});if(z||V==null)return null;var xe=!V||V.length===0||e;return E.jsx(Wr,{value:W,children:E.jsxs(fa,{className:a,sx:C,children:[E.jsx("div",{className:we.cardTree,children:E.jsx(It,{children:E.jsxs(Yn,{className:we.cardContentTree,children:[E.jsx(Xt,yt({allowDrop:se,data:V,hideRootNodes:s,titleField:g,onDrop:Y,onExpand:ee,onClick:U,selectedKeys:I,showLine:j,nodeActions:b,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:X},sa(D))),xe?v:null]})})}),E.jsx("div",{className:we.actionCard,children:E.jsxs(Zn,{children:[r?E.jsx(Be,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,m?E.jsx(Be,{path:":id/show/*",element:typeof m=="function"?E.jsx(m,{}):m}):null,c?E.jsx(Be,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,O!==!1?E.jsx(Be,{path:"*",element:E.jsx(Lt,{title:O,defaultTitle:Q})}):null]})})]})})},"TreeWithDetails"),sa=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var n=fn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return n},"sanitizeRestProps"),$e="RaTreeWithDetails",we={container:"".concat($e,"-container"),cardTree:"".concat($e,"-cardTree"),cardContentTree:"".concat($e,"-cardContentTree"),actionCard:"".concat($e,"-actionCard")},fa=pe("div",{name:$e,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((je={display:"flex"},je["& .".concat(we.actionCard)]={width:"100%"},je["& .".concat(we.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},je["& .".concat(we.cardContentTree)]={},je["& .".concat(we.container)]={display:"flex"},je)),va=d(function(t){var n=t.linkTo,e=t.show,a=t.edit;return n||(e?"show":a?"edit":!1)},"getLinkTo"),gt=function(){return gt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt.apply(this,arguments)},ha=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ja=d(function(t){var n,e=t.children,a=t.className,r=t.resource,i=ha(t,["children","className","resource"]),c=Fn(function(l){return l.breakpoints.down("sm")});return E.jsx(ya,gt({className:be((n={},n[Pe.mobileToolbar]=c,n[Pe.desktopToolbar]=!c,n),a),role:"toolbar"},i,{children:N.Children.count(e)===0?E.jsxs("div",{className:Pe.defaultToolbar,children:[E.jsx(er,{}),E.jsx(ca,{resource:r})]}):e}))},"EditNodeToolbar"),Le="RaEditNodeToolbar",Pe={desktopToolbar:"".concat(Le,"-desktopToolbar"),mobileToolbar:"".concat(Le,"-mobileToolbar"),defaultToolbar:"".concat(Le,"-defaultToolbar")},ya=pe(tr,{name:Le,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n,e=t.theme;return n={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},n["&.".concat(Pe.desktopToolbar)]={},n["&.".concat(Pe.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},n["& .".concat(Pe.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},n});export{Pa as AddChildButton,Oa as CreateNode,ca as DeleteBranchButton,aa as DeleteBranchWithConfirmButton,ea as DeleteBranchWithUndoButton,cn as DeleteMenuItem,zr as DeleteMenuItemWithConfirmation,Gr as DeleteMenuItemWithUndo,sn as DeleteWithConfirmButtonClasses,Na as EditNode,ja as EditNodeToolbar,Pe as EditNodeToolbarClasses,Vr as NodeActions,Da as NodeEditActions,pa as ReferenceNodeInput,xa as ShowNode,Xt as Tree,on as TreeChoicesContext,Br as TreeChoicesContextProvider,In as TreeContext,Wr as TreeContextProvider,kr as TreeInput,Mr as TreeInputClasses,Tr as TreeInputTree,Ca as TreeWithDetails,we as TreeWithDetailsClasses,ye as UNSAVED_NEW_NODE,Aa as addTreeMethodsBasedOnChildren,ba as addTreeMethodsBasedOnParentAndPosition,On as deleteBranchByDeletingAllChildren,pn as deleteBranchByDeletingNode,_a as fixFakeRestDataProvider,Ra as getRCTree,ka as getRCTreeDatum,Ma as getRecordTree,Ta as getRootAndChildNodes,$a as raTreeLanguageEnglish,qa as raTreeLanguageFrench,wa as removeChildren,Ba as renderSwitcherIcon,xn as updateQueryCacheFromGetTree,Sn as useAddChildNode,mr as useAddRootNode,Pr as useCreateNodeController,Ft as useDeleteBranch,nn as useDeleteBranchWithConfirmController,rn as useDeleteBranchWithUndoController,Ka as useEditNodeController,Qt as useExpandedKeys,wr as useGetChildNodesCallback,Pn as useGetRootNodes,Wt as useGetTree,_r as useGetTreeCallback,Or as useMoveAsNthChildOf,Cr as useMoveAsNthSiblingOf,$r as useReferenceNodeInputController,Kr as useTreeChoicesContext,_t as useTreeContext,Rr as useTreeController,Lr as useTreeInputController};
//# sourceMappingURL=index-C6EV_8iL.js.map
