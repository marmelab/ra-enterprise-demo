var un=Object.defineProperty;var d=(t,a)=>un(t,"name",{value:a,configurable:!0});import{aj as ae,ak as kt,al as cn,am as dn,u as be,M as $e,S as Rt,an as Xe,O as Mt,m as Tt,ac as ln,ao as gt,r as A,ap as sn,aq as mt,i as fn,ar as vn,A as _e,D as Te,as as $t,C as qt,at as hn,au as yn,av as Ne,aw as Pe,ax as Ae,ay as bt,az as ne,aA as gn,aB as Le,a7 as we,aC as _t,aD as mn,aE as bn,aF as _n,aG as Bt,aH as wn,aI as he,aJ as Kt,j as E,af as He,T as pn,aK as On,ai as xn,I as Cn,aL as Lt,f as Sn,aM as jn,y as En,aN as Nn,aO as Pn,aP as An,aQ as Wt,aR as It,aS as We,aT as Dn,aU as kn,k as Qt,aV as Ut,aW as Gt,aX as Rn,aY as Mn,Q as Tn,aZ as Je,d as $n,a_ as qn,a$ as qe,a8 as Bn,b0 as Kn,b1 as Ln}from"./index-DkxjkOXC.js";import{b4 as fa,b2 as va,b3 as ha,b7 as ya,ba as ga,b9 as ma,b8 as ba,bb as _a,bd as wa,bc as pa,b5 as Oa,b6 as xa}from"./index-DkxjkOXC.js";var tt=function(){return tt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tt.apply(this,arguments)},Wn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},In=d(function(t){t===void 0&&(t={});var a=t.disableAuthentication,e=a===void 0?!1:a,n=t.id,r=t.queryOptions,o=r===void 0?{}:r,c=ae(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var s=kt({enabled:!e}).isPending,l=cn({action:"show",resource:c,enabled:!e&&!s}).isPending,i=dn(c),u=be(),f=$e(),m=Rt(),b=Xe(),x=Mt(),j=Tt().id;if(!j&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var w=n??j,g=o.meta,y=Wn(o,["meta"]),v=ln(c,{id:w,meta:g},tt({enabled:!s&&!l||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),b(function(){return{pathname:m({resource:c,type:"list"}),flushSync:!0}}),x()},"onError"),retry:!1},y)),h=v.data,p=v.error,O=v.isLoading,C=v.isFetching,S=v.isPending,_=v.refetch;if(h&&h.id&&h.id!=w)throw new Error("useShowController: Fetched record's id attribute (".concat(h.id,") must match the requested 'id' (").concat(w,")"));var P=gt(),N=i(h),M=u("resources.".concat(c,".page.show"),{id:w,record:h,recordRepresentation:typeof N=="string"?N:"",_:u("ra.page.show",{name:P(c,1),id:w,record:h,recordRepresentation:typeof N=="string"?N:""})});return{defaultTitle:M,error:p,isLoading:O,isFetching:C,isPending:S,record:h,refetch:_,resource:c}},"useShowController"),wt=A.createContext(null);wt.displayName="ShowContext";var Qn=d(function(t){var a=t.children,e=t.value;return A.createElement(wt.Provider,{value:e},A.createElement(sn,{value:e&&e.record},a))},"ShowContextProvider"),Un=d(function(){var t=A.useContext(wt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),nt=function(){return nt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},nt.apply(this,arguments)},Gn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},zn=d(function(t){var a=mt(t).hasEdit;return A.createElement(fn,nt({},Xn(t)),a&&A.createElement(vn,null))},"ShowActions"),Xn=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var a=Gn(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return a},"sanitizeRestProps$1"),rt=function(){return rt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},rt.apply(this,arguments)},Hn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Re,Jn=A.createElement(zn,null),Vn=d(function(t){var a,e=t.actions,n=t.aside,r=t.children,o=t.className,c=t.component,s=c===void 0?qt:c,l=t.emptyWhileLoading,i=l===void 0?!1:l,u=t.title,f=Hn(t,["actions","aside","children","className","component","emptyWhileLoading","title"]),m=Un(),b=m.resource,x=m.defaultTitle,j=m.record,w=mt().hasEdit,g=typeof e>"u"&&w?Jn:e;return!r||!j&&i?null:A.createElement(Yn,rt({className:Te("show-page",o)},f),u!==!1&&A.createElement($t,{title:u,defaultTitle:x,preferenceKey:"".concat(b,".show.title")}),g!==!1&&g,A.createElement("div",{className:Te(je.main,(a={},a[je.noActions]=!g,a))},A.createElement(s,{className:je.card},r),n))},"ShowView"),Be="RaShow",je={main:"".concat(Be,"-main"),noActions:"".concat(Be,"-noActions"),card:"".concat(Be,"-card")},Yn=_e("div",{name:Be,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((Re={},Re["& .".concat(je.main)]={display:"flex"},Re["& .".concat(je.noActions)]={marginTop:"1em"},Re["& .".concat(je.card)]={flex:"1 1 auto"},Re)),G=function(){return G=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},G.apply(this,arguments)},ue=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},ce=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},na=d(function(t,a,e,n){a===void 0&&(a="parent_id"),e===void 0&&(e="position"),n===void 0&&(n=!1);var r=n?hn:yn,o=G(G({},t),{getTree:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:s==null?void 0:s.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=u.sent().data,i=l.map(function(f){return G(G({},f),{children:l.filter(function(m){return m[a]==f.id}).sort(function(m,b){return m[e]-b[e]}).map(function(m){return m.id})})}),[2,{data:i}]}})})},"getTree"),getRootNodes:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:G(G({},s==null?void 0:s.filter),(u={},u[a]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=f.sent().data,[4,Promise.all(l.map(function(m){var b;return t.getList(c,{filter:(b={},b[a]=m.id,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta}).then(function(x){var j=x.data;return G(G({},m),{children:j.map(function(w){var g=w.id;return g})})})}))];case 2:return i=f.sent(),[2,{data:i}]}})})},"getRootNodes"),getParentNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b=i.childId,x=i.meta;return ce(this,function(j){switch(j.label){case 0:return[4,o.getTree(l,{meta:x})];case 1:return u=j.sent().data,f=u.find(function(w){return w.id===b}),f?(m=u.find(function(w){return w.id===f[a]}),[2,{data:m}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b=i.parentId,x=i.meta;return ce(this,function(j){switch(j.label){case 0:return[4,t.getList(l,{filter:(m={},m[a]=b,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x})];case 1:return u=j.sent().data,[4,Promise.all(u.map(function(w){var g;return t.getList(l,{filter:(g={},g[a]=w.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x}).then(function(y){var v=y.data;return G(G({},w),{children:v.map(function(h){var p=h.id;return p})})})}))];case 2:return f=j.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b,x,j,w=i.source,g=i.destination,y=i.position,v=i.meta;return ce(this,function(h){switch(h.label){case 0:return[4,t.getList(l,{filter:(b={},b[a]=g.id,b["".concat(e,"_gte")]=y,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=h.sent().data,u.length>0?[4,Promise.all(u.map(function(p){var O;return t.update(l,{id:p.id,data:(O={},O[e]=p[e]+1,O),previousData:p,meta:v})}))]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,t.getList(l,{filter:(x={},x[a]=w[a],x["".concat(e,"_gt")]=w[e],x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=h.sent().data,f.length>0?[4,Promise.all(f.map(function(p){var O;return t.update(l,{id:p.id,data:(O={},O[e]=p[e]-1,O),previousData:p,meta:v})}))]:[3,6];case 5:h.sent(),h.label=6;case 6:return[4,t.update(l,{id:w.id,data:(j={},j[a]=g.id,j[e]=y,j),previousData:w,meta:v})];case 7:return m=h.sent().data,[2,{data:m}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b,x,j,w,g,y,v,h,p,O,C,S=i.source,_=i.destination,P=i.position,N=i.meta;return ce(this,function(M){switch(M.label){case 0:return(P===0||P===-1)&&(u=(j={},j[a]=_[a],j)),S[e]>_[e]&&S[a]===_[a]&&(P===-1?u=(w={},w[a]=_[a],w["".concat(e,"_gte")]=_[e],w):u=(g={},g[a]=_[a],g["".concat(e,"_gt")]=_[e],g)),S[a]!==_[a]&&P>0&&(u=(y={},y[a]=_[a],y["".concat(e,"_gt")]=_[e],y)),u?[4,t.getList(l,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})]:[3,3];case 1:return f=M.sent().data,f.length>0?[4,Promise.all(f.map(function(R){var k;return R.id===S.id?Promise.resolve(void 0):t.update(l,{id:R.id,data:(k={},k[e]=R[e]+1,k),previousData:R,meta:N})}))]:[3,3];case 2:M.sent(),M.label=3;case 3:return S[a]===_[a]?S[e]>_[e]?m=(v={},v[a]=S[a],v["".concat(e,"_gt")]=S[e],v):m=(h={},h[a]=S[a],h["".concat(e,"_gt")]=S[e],h["".concat(e,"_lte")]=_[e],h):m=(p={},p[a]=S[a],p["".concat(e,"_gt")]=S[e],p),[4,t.getList(l,{filter:m,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})];case 4:return b=M.sent().data,b.length>0?[4,Promise.all(b.map(function(R){var k;return R.id===S.id?Promise.resolve(void 0):t.update(l,{id:R.id,data:(k={},k[e]=R[e]-1,k),previousData:R,meta:N})}))]:[3,6];case 5:M.sent(),M.label=6;case 6:return x=S[a]===_[a]?S[e]>_[e]?_[e]+1:_[e]:P<0?0:P,P===-1&&(x=0),[4,t.update(l,{id:S.id,data:(O={},O[a]=(C=_[a])!==null&&C!==void 0?C:null,O[e]=x,O),previousData:S,meta:N})];case 7:return M.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b,x,j=i.data,w=i.meta;return ce(this,function(g){switch(g.label){case 0:return[4,t.getList(l,{filter:(b={},b[a]=null,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:w})];case 1:return u=g.sent().data,f=u.length>0?u.reduce(function(y,v){return v[e]>y?v[e]:y},-1/0)+1:0,[4,t.create(l,{data:G(G({},j),(x={},x[a]=null,x[e]=f,x)),meta:w})];case 2:return m=g.sent().data,[2,{data:G(G({},m),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,m,b,x,j,w=i.parentId,g=i.data,y=i.meta,v=i.position;return ce(this,function(h){switch(h.label){case 0:return[4,t.getList(l,{filter:(x={},x[a]=w,x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:y})];case 1:return u=h.sent().data,f=u.length>0?u.reduce(function(p,O){return O[e]>p?O[e]:p},-1/0)+1:0,m=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(l,{data:G(G({},g),(j={},j[a]=w,j[e]=m,j)),meta:y})];case 2:return b=h.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(p){var O;p[e]>=v&&t.update(l,{id:p.id,data:G(G({},p),(O={},O[e]=p[e]+1,O)),previousData:p,meta:y})}),[2,{data:G(G({},b),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i,u,f;return ce(this,function(m){switch(m.label){case 0:return l=s.id,i=s.previousData,u=s.meta,[4,r(o,c,s)];case 1:return m.sent(),[4,o.getChildNodes(c,{parentId:i[a],meta:u})];case 2:return f=m.sent().data,[4,Promise.all(f.filter(function(b){return b[e]>i[e]&&b.id!==l}).map(function(b){var x;return t.update(c,{id:b.id,data:G(G({},b),(x={},x[e]=b[e]-1,x)),previousData:b,meta:u})}))];case 3:return m.sent(),[2,{data:i}]}})})},"deleteBranch")});return o},"addTreeMethodsBasedOnParentAndPosition"),Ce=function(){return Ce=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ce.apply(this,arguments)},Zn=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Fn=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},er=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},tr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},nr=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ne(),r=Pe(),o=A.useRef(a),c=Ae(Ce(Ce({mutationFn:d(function(l){var i=l===void 0?{}:l,u=i.resource,f=u===void 0?t:u,m=i.data,b=m===void 0?o.current.data:m,x=i.meta,j=x===void 0?o.current.meta:x;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(b==null)throw new Error("useAddRootNode mutation requires non-empty data");return n.addRootNode(f,{data:b,meta:j}).then(function(w){var g=w.data;return g})},"mutationFn")},e),{onSuccess:d(function(l,i,u){i===void 0&&(i={});var f=i.resource,m=f===void 0?t:f;r.setQueryData([m,"getOne",{id:String(l.id)}],l),e.onSuccess&&e.onSuccess(l,i,u)},"onSuccess")})),s=d(function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];return Zn(void 0,tr([],l,!0),void 0,function(u,f,m){var b,x;return u===void 0&&(u=t),f===void 0&&(f={}),m===void 0&&(m={}),Fn(this,function(j){return b=m.returnPromise,x=er(m,["returnPromise"]),b?[2,c.mutateAsync(Ce({resource:u},f),m)]:(c.mutate(Ce({resource:u},f),x),[2])})})},"addRootNode");return[s,c]},"useAddRootNode"),te=function(){return te=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},te.apply(this,arguments)},pt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Ot=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},rr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ve=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},zt=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ne(),r=Pe(),o=a.id,c=a.previousData,s=e.mutationMode,l=s===void 0?"pessimistic":s,i=rr(e,["mutationMode"]),u=A.useRef(l),f=A.useRef(a),m=A.useRef([]),b=d(function(w){var g=w.resource,y=w.id,v=Date.now(),h=u.current==="undoable"?v+5*1e3:v,p=d(function(C,S){var _=C.findIndex(function(T){return T.id==S});if(_===-1)return C;for(var P=C[_],N=Ve(Ve([],C.slice(0,_),!0),C.slice(_+1),!0),M=P.children||[],R=0,k=M;R<k.length;R++){var D=k[R];N=p(N,D)}return N},"removeRecord"),O=d(function(C){var S=p(C,y);return S.map(function(_){return te(te({},_),{children:_.children?_.children.filter(function(P){return P!==y}):_.children})})},"updateCollection");r.setQueriesData({queryKey:[g,"getTree"]},function(C){if(!C)return C;var S=O(C),_=S.length<C.length;return _?S:C},{updatedAt:h}),r.setQueriesData({queryKey:[g,"getRootNodes"]},function(C){return C&&C.length>0?O(C):C},{updatedAt:h}),r.setQueriesData({queryKey:[g,"getChildNodes"]},function(C){if(!C)return C;var S=O(C),_=S.length<C.length;return _?S:C},{updatedAt:h})},"updateCache"),x=Ae(te(te({mutationFn:d(function(w){var g=w===void 0?{}:w,y=g.resource,v=y===void 0?t:y,h=g.id,p=h===void 0?f.current.id:h,O=g.previousData,C=O===void 0?f.current.previousData:O,S=g.meta,_=S===void 0?f.current.meta:S;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(p==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(C==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return n.deleteBranch(v,{id:p,previousData:C,meta:_}).then(function(P){var N=P.data;return N})},"mutationFn")},i),{onMutate:d(function(w){return pt(void 0,void 0,void 0,function(){var g;return Ot(this,function(y){switch(y.label){case 0:return i.onMutate?[4,i.onMutate(w)]:[3,2];case 1:return g=y.sent()||{},[2,te({snapshot:m.current},g)];case 2:return[2,{snapshot:m.current}]}})})},"onMutate"),onError:d(function(w,g,y){if((u.current==="optimistic"||u.current==="undoable")&&y.snapshot.forEach(function(v){var h=v[0],p=v[1];r.setQueryData(h,p)}),i.onError)return i.onError(w,g,y)},"onError"),onSuccess:d(function(w,g,y){if(g===void 0&&(g={}),u.current==="pessimistic"){var v=g.resource,h=v===void 0?t:v,p=g.id,O=p===void 0?o:p;b({resource:h,id:O}),i.onSuccess&&i.onSuccess(w,g,y)}},"onSuccess"),onSettled:d(function(w,g,y,v){if(y===void 0&&(y={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0];r.invalidateQueries({queryKey:p})}),i.onSettled)return i.onSettled(w,g,y,v)},"onSettled")})),j=d(function(){for(var w=[],g=0;g<arguments.length;g++)w[g]=arguments[g];return pt(void 0,Ve([],w,!0),void 0,function(y,v,h){var p,O,C,S,_,P,N,M,R;return y===void 0&&(y=t),v===void 0&&(v={}),h===void 0&&(h={}),Ot(this,function(k){switch(k.label){case 0:return p=h.mutationMode,O=h.onSuccess,C=h.onSettled,S=h.onError,f.current=a,p&&(u.current=p),u.current==="pessimistic"?[2,x.mutate(te({resource:y},v),{onSuccess:O,onSettled:C,onError:S})]:(_=v.id,P=_===void 0?o:_,N=v.previousData,M=N===void 0?c:N,R=[[y,"getTree"],[y,"getRootNodes"],[y,"getChildNodes"]],m.current=R.reduce(function(D,T){return D.concat(r.getQueriesData({queryKey:T}))},[]),[4,Promise.all(m.current.map(function(D){var T=D[0];return r.cancelQueries({queryKey:T})}))]);case 1:return k.sent(),b({resource:y,id:P}),O&&setTimeout(function(){return O(M,te({resource:y},v),{snapshot:m.current})},0),i.onSuccess&&setTimeout(function(){i.onSuccess&&i.onSuccess(M,te({resource:y},v),{snapshot:m.current})},0),u.current==="optimistic"?[2,x.mutate(te({resource:y},v),{onSettled:C,onError:S})]:(bt.once("end",function(D){var T=D.isUndo;T?m.current.forEach(function(B){var $=B[0],K=B[1];r.setQueryData($,K)}):x.mutate(te({resource:y},v),{onSettled:C,onError:S})}),[2])}})})},"mutate");return[j,x]},"useDeleteBranch"),ye=function(){return ye=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ye.apply(this,arguments)},ar=d(function(t,a,e){var n=Ne(),r=Ae(ye({mutationKey:[t,"getChildNodes",a],mutationFn:d(function(c){return n.getChildNodes(t,ye(ye({},a),c)).then(function(s){var l=s.data;return l})},"mutationFn")},e)),o=ne(function(c){return r.mutateAsync(ye(ye({},a),{parentId:c}))});return o},"useGetChildNodesCallback"),Ie=function(){return Ie=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ie.apply(this,arguments)},ra=d(function(t){return Ie(Ie({},t),{children:t.children.map(function(a){return a.id})})},"removeChildren"),at=function(){return at=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)},or=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ne(),r=Pe(),o=Ae(at({mutationKey:[t,"getTree",a],mutationFn:d(function(){return n.getTree(t,a).then(function(s){var l=s.data;return l})},"mutationFn"),onSuccess:d(function(s){gn(r,t,s,a)},"onSuccess")},e)),c=A.useCallback(function(){return o.mutateAsync(a)},[o,a]);return c},"useGetTreeCallback"),oe=function(){return oe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},oe.apply(this,arguments)},xt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Ct=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ir=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},se=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ur=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ne(),r=Pe(),o=a.source,c=a.destination,s=a.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=ir(e,["mutationMode"]),f=A.useRef(i),m=A.useRef(a),b=A.useRef([]),x=d(function(g){var y=g.resource,v=g.position,h=g.source,p=g.destination,O=Date.now(),C=f.current==="undoable"?O+5*1e3:O,S=d(function(_){var P,N,M,R,k,D=Le(_),T=D.find(function($){var K;return(K=$.children)===null||K===void 0?void 0:K.includes(h.id)});T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function($){return $!==h.id}):D=D.filter(function($){return $.id!==h.id});var B=D.find(function($){return $.id===p.id});return B?B.children=se(se(se([],(M=(N=B.children)===null||N===void 0?void 0:N.slice(0,v))!==null&&M!==void 0?M:[],!0),[h.id],!1),(k=(R=B.children)===null||R===void 0?void 0:R.slice(v))!==null&&k!==void 0?k:[],!0):(D=D.filter(function($){return $.id!==h.id}),D=se(se(se([],D.slice(0,v),!0),[h],!1),D.slice(v),!0)),D},"updateCollection");r.setQueriesData({queryKey:[y,"getTree"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C}),r.setQueriesData({queryKey:[y,"getRootNodes"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C}),r.setQueriesData({queryKey:[y,"getChildNodes"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C})},"updateCache"),j=Ae(oe(oe({mutationFn:d(function(g){var y=g===void 0?{}:g,v=y.resource,h=v===void 0?t:v,p=y.position,O=p===void 0?m.current.position:p,C=y.source,S=C===void 0?m.current.source:C,_=y.destination,P=_===void 0?m.current.destination:_,N=y.meta,M=N===void 0?m.current.meta:N;if(h==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return n.moveAsNthChildOf(h,{position:O,source:S,destination:P,meta:M}).then(function(R){var k=R.data;return k})},"mutationFn")},u),{onMutate:d(function(g){return xt(void 0,void 0,void 0,function(){var y;return Ct(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return y=v.sent()||{},[2,oe({snapshot:b.current},y)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(g,y,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0],O=h[1];r.setQueryData(p,O)}),u.onError)return u.onError(g,y,v)},"onError"),onSettled:d(function(g,y,v,h){v===void 0&&(v={});var p=v.resource,O=p===void 0?t:p;if(r.invalidateQueries({queryKey:[O,"getTree"]}),r.invalidateQueries({queryKey:[O,"getRootNodes"]}),r.invalidateQueries({queryKey:[O,"getChildNodes"]}),u.onSettled)return u.onSettled(g,y,v,h)},"onSettled")})),w=d(function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return xt(void 0,se([],g,!0),void 0,function(v,h,p){var O,C,S,_,P,N,M,R,k,D,T;return v===void 0&&(v=t),h===void 0&&(h={}),p===void 0&&(p={}),Ct(this,function(B){switch(B.label){case 0:if(O=p.mutationMode,C=p.onSuccess,S=p.onSettled,_=p.onError,m.current=a,O&&(f.current=O),f.current==="pessimistic")return[2,j.mutate(oe({resource:v},h),{onSuccess:C,onSettled:S,onError:_})];if(P=h.position,N=P===void 0?s:P,M=h.source,R=M===void 0?o:M,k=h.destination,D=k===void 0?c:k,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=T.reduce(function($,K){return $.concat(r.getQueriesData({queryKey:K}))},[]),[4,Promise.all(b.current.map(function($){var K=$[0];return r.cancelQueries({queryKey:K})}))];case 1:return B.sent(),x({resource:v,position:N,source:R,destination:D}),C&&setTimeout(function(){return C(void 0,oe({resource:v},h),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},h),{snapshot:b.current})},0),f.current==="optimistic"?[2,j.mutate(oe({resource:v},h),{onSettled:S,onError:_})]:(bt.once("end",function($){var K=$.isUndo;K?b.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):j.mutate(oe({resource:v},h),{onSettled:S,onError:_})}),[2])}})})},"mutate");return[w,j]},"useMoveAsNthChildOf"),ie=function(){return ie=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ie.apply(this,arguments)},St=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},jt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},cr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},fe=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},dr=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ne(),r=Pe(),o=a.source,c=a.destination,s=a.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=cr(e,["mutationMode"]),f=A.useRef(i),m=A.useRef(a),b=A.useRef([]),x=d(function(g){var y=g.resource,v=g.position,h=g.source,p=g.destination,O=Date.now(),C=f.current==="undoable"?O+5*1e3:O,S=d(function(_){var P,N,M,R,k,D=Le(_),T=D.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(h.id)}),B=D.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(p.id)}),$=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(L){return L===h.id})<T.children.findIndex(function(L){return L===p.id})&&($=v-1);var K=$<0?0:$;return T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function(L){return L!==h.id}):D=D.filter(function(L){return L.id!==h.id}),B?B.children=fe(fe(fe([],(M=(N=B.children)===null||N===void 0?void 0:N.slice(0,K))!==null&&M!==void 0?M:[],!0),[h.id],!1),(k=(R=B.children)===null||R===void 0?void 0:R.slice(K))!==null&&k!==void 0?k:[],!0):(D=D.filter(function(L){return L.id!==h.id}),D=fe(fe(fe([],D.slice(0,K),!0),[h],!1),D.slice(K),!0)),D},"updateCollection");r.setQueriesData({queryKey:[y,"getTree"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C}),r.setQueriesData({queryKey:[y,"getRootNodes"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C}),r.setQueriesData({queryKey:[y,"getChildNodes"]},function(_){return _&&_.length>0?S(_):_},{updatedAt:C})},"updateCache"),j=Ae(ie(ie({mutationFn:d(function(g){var y=g===void 0?{}:g,v=y.resource,h=v===void 0?t:v,p=y.position,O=p===void 0?m.current.position:p,C=y.source,S=C===void 0?m.current.source:C,_=y.destination,P=_===void 0?m.current.destination:_,N=y.meta,M=N===void 0?m.current.meta:N;if(h==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return n.moveAsNthSiblingOf(h,{position:O,source:S,destination:P,meta:M}).then(function(R){var k=R.data;return k})},"mutationFn")},u),{onMutate:d(function(g){return St(void 0,void 0,void 0,function(){var y;return jt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return y=v.sent()||{},[2,ie({snapshot:b.current},y)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(g,y,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0],O=h[1];r.setQueryData(p,O)}),u.onError)return u.onError(g,y,v)},"onError"),onSettled:d(function(g,y,v,h){v===void 0&&(v={});var p=v.resource,O=p===void 0?t:p;if(r.invalidateQueries({queryKey:[O,"getTree"]}),r.invalidateQueries({queryKey:[O,"getRootNodes"]}),r.invalidateQueries({queryKey:[O,"getChildNodes"]}),u.onSettled)return u.onSettled(g,y,v,h)},"onSettled")})),w=d(function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return St(void 0,fe([],g,!0),void 0,function(v,h,p){var O,C,S,_,P,N,M,R,k,D,T;return v===void 0&&(v=t),h===void 0&&(h={}),p===void 0&&(p={}),jt(this,function(B){switch(B.label){case 0:if(O=p.mutationMode,C=p.onSuccess,S=p.onSettled,_=p.onError,m.current=a,O&&(f.current=O),f.current==="pessimistic")return[2,j.mutate(ie({resource:v},h),{onSuccess:C,onSettled:S,onError:_})];if(P=h.position,N=P===void 0?s:P,M=h.source,R=M===void 0?o:M,k=h.destination,D=k===void 0?c:k,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=T.reduce(function($,K){return $.concat(r.getQueriesData({queryKey:K}))},[]),[4,Promise.all(b.current.map(function($){var K=$[0];return r.cancelQueries({queryKey:K})}))];case 1:return B.sent(),x({resource:v,position:N,source:R,destination:D}),C&&setTimeout(function(){return C(void 0,ie({resource:v},h),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ie({resource:v},h),{snapshot:b.current})},0),f.current==="optimistic"?[2,j.mutate(ie({resource:v},h),{onSettled:S,onError:_})]:(bt.once("end",function($){var K=$.isUndo;K?b.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):j.mutate(ie({resource:v},h),{onSettled:S,onError:_})}),[2])}})})},"mutate");return[w,j]},"useMoveAsNthSiblingOf"),de=function(){return de=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},de.apply(this,arguments)},Et=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Nt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},aa=d(function(t){return de(de({},t),{getRootNodes:d(function(a,e){return Et(void 0,void 0,void 0,function(){var n,r;return Nt(this,function(o){switch(o.label){case 0:return[4,t.getRootNodes(a,e)];case 1:return n=o.sent().data,r=n.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(a,e){return Et(void 0,[a,e],void 0,function(n,r){var o,c,s,l,i=r.data,u=r.meta;return Nt(this,function(f){switch(f.label){case 0:return[4,t.getList(n,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return o=f.sent().data,c=o.filter(function(m){return typeof m.parent_id>"u"}),s=c.length>0?c.reduce(function(m,b){return b.position>m?b.position:m},-1/0)+1:0,[4,t.create(n,{data:de(de({},i),{parent_id:null,position:s}),meta:u})];case 2:return l=f.sent().data,[2,{data:de(de({},l),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),Pt=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Xt=d(function(t,a){var e,n=t.filter(function(c){return c.id!==a.id}),r=n.find(function(c){var s;return(s=c.children)===null||s===void 0?void 0:s.includes(a.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==a.id})),!a.children||a.children.length===0)return n;var o=Ht(n,a);return n=n.filter(function(c){return!o.includes(c)}),n},"removeNode"),Ht=d(function(t,a){return a?!a.children||a.children.length===0?[]:Pt(Pt([],a.children,!0),a.children.flatMap(function(e){var n=t.find(function(r){return r.id===e});return n?Ht(t,n):[]}),!0):[]},"getNodeChildrenRecursive"),ot=function(){return ot=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ot.apply(this,arguments)},Jt=d(function(t){var a=t.mutationMode,e=t.mutationOptions,n=t.redirect,r=n===void 0?"list":n,o=$e(),c=Xe(),s=Mt(),l=ae(t);if(l==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=we(t);if(i==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=zt(),f=u[0],m=u[1].isPending,b=A.useState(!1),x=b[0],j=b[1],w=_t().setFinalData,g=A.useCallback(function(h){h.stopPropagation(),f(l,{id:i.id,previousData:i},ot({mutationMode:a,onSuccess:d(function(){o("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,l),a==="pessimistic"?s():w&&w(function(p){return Xt(p,i)})},"onSuccess"),onError:d(function(p){o(typeof p=="string"?p:p.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,a,e,o,i,c,r,s,l,w]),y=d(function(h){h.stopPropagation(),j(!0)},"handleDialogOpen"),v=d(function(h){h.stopPropagation(),j(!1)},"handleDialogClose");return{handleDelete:g,handleDialogOpen:y,handleDialogClose:v,isPending:m,open:x}},"useDeleteBranchWithConfirmController"),it=function(){return it=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},it.apply(this,arguments)},Vt=d(function(t){var a=t.mutationOptions,e=t.redirect,n=e===void 0?"list":e,r=$e(),o=Xe(),c=_t().setFinalData,s=ae(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var l=we(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var i=zt(),u=i[0],f=i[1].isPending,m=A.useCallback(function(b){b.stopPropagation(),u(s,{id:l.id,previousData:l},it({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(x){return Xt(x,l)}),o(n,s)},"onSuccess"),onError:d(function(x){return r(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},a))},[u,a,r,l,o,n,s,c]);return{handleDelete:m,isPending:f}},"useDeleteBranchWithUndoController"),Se=function(){return Se=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Se.apply(this,arguments)},lr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},sr=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},fr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},vr=d(function(t){var a=t.disableAuthentication,e=t.record,n=e===void 0?{}:e,r=t.redirect,o=t.mutationOptions,c=o===void 0?{}:o,s=t.transform;kt({enabled:!a});var l=ae(t);if(l==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=gt(),u=Pe(),f=mn(),m=_t().handleAddNode,b=f.state&&f.state.parentId,x=f.state&&f.state.insertAsFirstChild,j=typeof b<"u"&&b!==null,w=f.state&&f.state.record||n,g=c.onSuccess,y=c.onError,v=fr(c,["onSuccess","onError"]),h=mt(t),p=h.hasEdit,O=h.hasShow,C=r||hr(O,p),S=nr(l,void 0,v),_=S[0],P=S[1],N=bn(l,void 0,v),M=N[0],R=N[1],k=ne(m??yr);A.useEffect(function(){return k({record:{},parentId:b,insertAsFirstChild:x}),function(){k(void 0)}},[k,b,x]);var D=be(),T=$e(),B=Xe(),$=A.useCallback(function(W,V){var I=V===void 0?{}:V,U=I.onSuccess,Q=I.onError,q=I.transform,H=d(function(J){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(C,l,J.id,J),u.refetchQueries({queryKey:[l,"getTree"],type:"active"}),u.refetchQueries({queryKey:[l,"getRootNodes"],type:"active"})},"defaultOnSuccess"),Y=d(function(J){T(typeof J=="string"?J:J.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(q?q(W):s?s(W):W).then(function(J){return lr(void 0,void 0,void 0,function(){var ee,X,Z;return sr(this,function(re){switch(re.label){case 0:ee={onSuccess:d(function(le,pe,z){k(void 0),U?U(le,pe,z):g?g(le,pe,z):H(le)},"onSuccess"),onError:Q||y||Y},re.label=1;case 1:return re.trys.push([1,6,,7]),j?[4,M(l,{data:J,parentId:b,meta:v.meta,position:x?0:void 0},Se(Se({},ee),{returnPromise:!0}))]:[3,3];case 2:return re.sent(),[3,5];case 3:return[4,_(l,{data:J,meta:v.meta},Se(Se({},ee),{returnPromise:!0}))];case 4:re.sent(),re.label=5;case 5:return[3,7];case 6:return X=re.sent(),(X instanceof _n||typeof X=="object"&&X!==null&&X.hasOwnProperty("body"))&&((Z=X.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,X.body.errors]:[3,7];case 7:return[2]}})})})},[M,_,k,j,T,y,g,b,u,B,l,s,v.meta,C,x]),K=i(l,1),L=D("ra.page.create",{name:"".concat(K)});return{isLoading:!1,isFetching:!1,defaultTitle:L,save:$,saving:P.isPending||R.isPending,isPending:P.isPending||R.isPending,resource:l,record:w,redirect:C}},"useCreateNodeController"),hr=d(function(t,a){return a?"edit":t?"show":"list"},"getDefaultRedirectRoute"),yr=d(function(){},"noop"),gr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Yt=d(function(t,a){var e=a.find(function(n){return n.id==t});return e?gr([e.id.toString()],(e.children||[]).flatMap(function(n){return Yt(n,a)}),!0):[]},"getNodeKeysRecursively"),ge=function(){return ge=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ge.apply(this,arguments)},Ye=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Ze=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Fe=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ve=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},mr=d(function(t){var a=be(),e=ae(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var n=gt(),r=t.lazy,o=r===void 0?!1:r,c=t.filter,s=c===void 0?{}:c,l=t.mutationMode,i=l===void 0?"undoable":l,u=t.meta,f=Bt(e,{filter:s,meta:u},{enabled:!o}),m=wn(e,{filter:s,meta:u},{enabled:o,gcTime:0}),b=ar(e,{meta:u}),x=A.useMemo(function(){var I;return(I=m.data)===null||I===void 0?void 0:I.map(function(U){var Q=U.children,q=Fe(U,["children"]);return Q!=null&&Q.length?q:U})},[m.data,m.isFetching]),j=o?ge(ge({},m),{data:x}):f,w=j.data,g=j.error,y=j.isLoading,v=j.isPending,h=j.isFetching,p=A.useState(w),O=p[0],C=p[1],S=ne(function(I){return Ye(void 0,void 0,void 0,function(){var U;return Ze(this,function(Q){switch(Q.label){case 0:return[4,b(I)];case 1:return U=Q.sent(),C(function(q){var H,Y=U.map(function(X){var Z=X.children,re=Fe(X,["children"]),le=q==null?void 0:q.some(function(pe){var z;return(z=X.children)===null||z===void 0?void 0:z.includes(pe.id)});return Z!=null&&Z.length&&!le?re:X}),J=ve(ve([],(H=q==null?void 0:q.map(function(X){return X.id===I?ge(ge({},X),{children:Y.map(function(Z){return Z.id})}):X}))!==null&&H!==void 0?H:[],!0),Y,!0),ee=J.reduce(function(X,Z){return X[Z.id]=Z,X},{});return Object.values(ee)}),[2]}})})});A.useEffect(function(){C(w)},[w]);var _=A.useState(),P=_[0],N=_[1],M=ne(function(I){var U,Q=Le(O);if(I){if(N(I),I.parentId!=null){var q=Q==null?void 0:Q.find(function(Y){return Y.id===I.parentId});q&&(q.children=q.children||[],q.children=I.insertAsFirstChild?ve([he],q.children,!0):ve(ve([],q.children,!0),[he],!1))}C(ve(ve([],Q??[],!0),[ge({id:he,children:[]},I.record)],!1))}else{if(!P)return;var H=Le(O);if(P.parentId!=null){var q=H==null?void 0:H.find(function(J){return J.id===P.parentId});q&&(q.children=(U=q.children)===null||U===void 0?void 0:U.filter(function(J){return J!=he}))}N(void 0),C(H==null?void 0:H.filter(function(Y){return Y.id!==he}))}}),R=Kt(void 0,t.expandedKeys),k=R[0],D=R[1],T=ne(function(I){D(function(U){var Q,q,H=typeof I=="function"?I(U??[]):I,Y=(Q=U==null?void 0:U.filter(function(ee){return!H.includes(ee)}))!==null&&Q!==void 0?Q:[],J=(q=Y==null?void 0:Y.flatMap(function(ee){return Yt(ee,O??[])},[]))!==null&&q!==void 0?q:[];return H.filter(function(ee){return!J.includes(ee)})})}),B=ur(e,{meta:u})[0],$=dr(e,{meta:u})[0],K=or(e),L=$e(),W=ne(function(I){var U=I.type,Q=Fe(I,["type"]),q=d(function(){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(Y){switch(Y.label){case 0:return[4,K()];case 1:return Y.sent(),L("ra-tree.item_moved",{undoable:i==="undoable"}),[2]}})})},"successSideEffect"),H=d(function(Y){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(J){return L(Y.message,{type:"error"}),[2]})})},"errorSideEffect");U==="child"?B(e,Q,{onSuccess:q,onError:H,mutationMode:i}):$(e,Q,{onSuccess:q,onError:H,mutationMode:i})}),V=a("ra.page.list",{name:n(e,2)});return{data:O,defaultTitle:V,error:g,expandedKeys:k,handleAddNode:M,handleDrop:W,handleExpand:T,isLoading:y,isFetching:h,isPending:v,loadChildNodes:S,newNode:P,lazy:o,setFinalData:C}},"useTreeController"),Zt=A.createContext(void 0),Qe=function(){return Qe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qe.apply(this,arguments)},Ft=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},br=d(function(t){var a=t.label,e=t.multiple,n=t.sx,r=t.className,o=t.helperText,c=t.fullWidth,s=Ft(t,["label","multiple","sx","className","helperText","fullWidth"]),l=Sr(t),i=l.data,u=l.resource,f=l.source,m=l.fetchError,b=l.isLoading,x=l.isRequired,j=l.field,w=l.fieldState,g=l.formState,y=w.isTouched,v=w.invalid,h=w.error,p=g.isSubmitted,O=be();return m?E.jsx(et,{className:r,sx:n,"data-testid":"error",children:E.jsx(He,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(pn,{sx:{color:"error.main"},children:O("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):b||!i?E.jsx(et,{className:r,sx:n,"data-testid":"loading",children:E.jsx(He,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(On,{})})}):E.jsxs(et,{className:r,sx:n,children:[E.jsx(He,{htmlFor:f,className:At.label,color:(y||p)&&v?"error":void 0,label:a,source:f,resource:u,isRequired:x,fullWidth:c,children:E.jsx(_r,Qe({source:f,multiple:e,className:At.tree,field:j,fullWidth:c},s,{data:i}))}),(y||p)&&h||o?E.jsx(xn,{error:(y||p)&&!!h,children:E.jsx(Cn,{error:h==null?void 0:h.message,helperText:o})}):null]})},"TreeInput"),ut="RaTreeInput",At={label:"".concat(ut,"-label"),tree:"".concat(ut,"-tree")},et=_e(Sn,{name:ut,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),_r=d(function(t){var a=t.data,e=t.multiple,n=t.field,r=t.checkStrictly,o=r===void 0?!0:r,c=t.expandAction,s=c===void 0?!1:c,l=Ft(t,["data","multiple","field","checkStrictly","expandAction"]),i=A.useMemo(function(){return(n==null?void 0:n.value)||(e?[]:"")},[n,e]),u=A.useState(0),f=u[0],m=u[1],b=A.useRef(!0);A.useEffect(function(){b.current&&m(function(w){return w+1}),b.current=!0},[i]);var x=ne(function(w,g){b.current=!1,n==null||n.onChange(g.map(function(y){return y.id}))}),j=ne(function(w,g){var y;b.current=!1,n==null||n.onChange((y=g==null?void 0:g.id)!==null&&y!==void 0?y:null)});return A.createElement(Lt,Qe({},l,{key:f,checkStrictly:o,expandAction:s,checkable:e,selectable:!e,checkedKeys:e?i:[],selectedKeys:e?[]:[i],defaultCheckedKeys:e?i:void 0,defaultSelectedKeys:e?void 0:[i],defaultExpandedKeys:e?i:[i],onCheck:x,onSelect:j,data:a,onBlur:n==null?void 0:n.onBlur}))},"TreeInputTree"),wr=d(function(t){var a=t.reference,e=t.source,n=t.meta,r=Bt(a,{meta:n}),o=r.data,c=r.error,s=r.isLoading,l=r.isFetching;return{source:e,resource:a,data:o,error:c??void 0,isLoading:s,isFetching:l}},"useReferenceNodeInputController"),pr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},oa=d(function(t){var a=t.children,e=a===void 0?E.jsx(br,{}):a,n=wr(t),r=n.resource,o=pr(n,["resource"]);return E.jsx(jn,{value:r,children:E.jsx(Or,{value:o,children:e})})},"ReferenceNodeInput"),Or=d(function(t){var a=t.children,e=t.value;return E.jsx(Zt.Provider,{value:e,children:a})},"TreeChoicesContextProvider"),xr=d(function(){return A.useContext(Zt)||{}},"useTreeChoicesContext"),Ue=function(){return Ue=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ue.apply(this,arguments)},Cr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Sr=d(function(t){var a=t.source,e=t.data;t.hideRootNodes;var n=Cr(t,["source","data","hideRootNodes"]),r=ae(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=xr(),c=o.source,s=o.data,l=o.isLoading,i=o.isFetching,u=o.error,f=e??s,m=a??c;if(m==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var b=En(Ue(Ue({},n),{resource:r,source:m,type:"text"})),x=b.isRequired,j=b.field,w=b.fieldState,g=b.formState;return{resource:r,source:m,data:f??[],fetchError:u,isLoading:l,isFetching:i,isRequired:x,field:j,fieldState:w,formState:g}},"useTreeInputController"),jr=d(function(t){var a=t.children,e=t.value;return E.jsx(Nn.Provider,{value:e,children:a})},"TreeContextProvider"),ct=function(){return ct=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ct.apply(this,arguments)},ia=d(function(t){var a=vr(t);return E.jsx(Pn,{value:a,children:E.jsx(An,ct({},t,a))})},"CreateNode"),dt=function(){return dt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dt.apply(this,arguments)},Dt=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ua=d(function(t){var a=t.id,e=Tt().id;if(!e&&!a)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var n=a??e,r=Kt(),o=r[1];A.useEffect(function(){o(function(s){var l=n.toString();return Array.isArray(s)?s.includes(l)?s:Dt(Dt([],s,!0),[l],!1):[l]})},[t.resource,n,o]);var c=In(t);return E.jsx(Qn,{value:c,children:E.jsx(Vn,dt({},t))})},"ShowNode"),lt=function(){return lt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},lt.apply(this,arguments)},Er=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Nr=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.label,s=c===void 0?"ra.action.delete":c,l=t.mutationMode,i=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,m=f===void 0?"list":f,b=Er(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),x=ae(t);if(!x)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var j=we(t);if(!j)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var w=Jt({mutationMode:l,record:j,resource:x,redirect:m}),g=w.handleDelete,y=w.handleDialogClose,v=w.handleDialogOpen,h=w.isPending,p=w.open,O=be(),C=d(function(S){S.stopPropagation(),i&&i(S),S.isDefaultPrevented()||v(S)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Wt,lt({className:a,onClick:C,ref:u},b,{children:O(s,{_:s})})),E.jsx(It,{isOpen:p,loading:h,title:n,content:o,translateOptions:{name:We.humanize(O("resources.".concat(x,".name"),{smart_count:1,_:We.singularize(x)}),!0),id:j.id},onConfirm:g,onClose:y})]})},"DeleteMenuItemWithConfirmation"),st=function(){return st=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},st.apply(this,arguments)},Pr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ar=d(function(t){var a=t.className,e=t.label,n=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var o=t.ref;t.resource;var c=t.redirect,s=c===void 0?"list":c,l=Pr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=ae(t);if(!i)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=we(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=Vt({record:u,resource:i,redirect:s}),m=f.handleDelete,b=f.isPending,x=be(),j=d(function(w){w.stopPropagation(),r&&r(w),w.isDefaultPrevented()||m(w)},"handleClick");return E.jsx(Wt,st({className:a,disabled:b,onClick:j,ref:o},l,{children:x(n,{_:n})}))},"DeleteMenuItemWithUndo"),Ge=function(){return Ge=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ge.apply(this,arguments)},Dr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},en=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a,n=Dr(t,["mutationMode"]);return e==="undoable"?E.jsx(Ar,Ge({},n,{mutationMode:e})):E.jsx(Nr,Ge({},n,{mutationMode:e}))},"DeleteMenuItem");en.displayName="DeleteMenuItem";var kr=A.createContext(null),Rr=kr.Provider,Mr=d(function(t){var a=t.children,e=a===void 0?E.jsx(en,{}):a,n=t.className,r=A.useState(null),o=r[0],c=r[1],s=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),l=A.useCallback(function(u){u.stopPropagation(),c(null)},[]),i=A.useMemo(function(){return{close:l}},[l]);return E.jsxs($r,{className:n,children:[E.jsx("button",{className:Tr.menuButton,onClick:s,children:E.jsx(Dn,{})}),E.jsx(kn,{anchorEl:o,open:!!o,onClose:l,children:E.jsx(Rr,{value:i,children:e})})]})},"NodeActions"),tn="RaNodeActions",Tr={menuButton:"".concat(tn,"-menuButton")},$r=_e("div",{name:tn,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),ft=function(){return ft=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ft.apply(this,arguments)},qr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Br=d(function(t){var a=t.label,e=a===void 0?"ra.action.delete":a,n=t.className,r=t.icon,o=r===void 0?Lr:r,c=t.onClick;t.resource,t.record;var s=t.redirect,l=s===void 0?"list":s,i=qr(t,["label","className","icon","onClick","resource","record","redirect"]),u=ae(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=we(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var m=Vt({resource:u,record:f,redirect:l}),b=m.handleDelete,x=m.isPending,j=d(function(w){c&&c(w),w.isDefaultPrevented()||b(w)},"handleClick");return E.jsx(Kr,ft({onClick:j,disabled:x,label:e,className:Te("ra-delete-button",n)},i,{children:o}),"button")},"DeleteBranchWithUndoButton"),Kr=_e(Qt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a=t.theme;return{color:a.palette.error.main,"&:hover":{backgroundColor:Ut(a.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Lr=E.jsx(Gt,{}),vt=function(){return vt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vt.apply(this,arguments)},Wr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ir=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.icon,s=c===void 0?Qr:c,l=t.label,i=l===void 0?"ra.action.delete":l,u=t.mutationMode,f=t.onClick;t.record,t.resource;var m=t.redirect,b=m===void 0?"list":m,x=Wr(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),j=be(),w=ae(t);if(!w)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var g=we(t);if(!g)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var y=Jt({mutationMode:u,resource:w,record:g,redirect:b}),v=y.handleDelete,h=y.handleDialogClose,p=y.handleDialogOpen,O=y.isPending,C=y.open,S=d(function(_){f&&f(_),_.isDefaultPrevented()||p(_)},"handleClick");return E.jsxs(Ur,{className:a,children:[E.jsx(Qt,vt({onClick:S,label:i,className:Te("ra-delete-button",rn.deleteButton)},x,{children:s}),"button"),E.jsx(It,{isOpen:C,loading:O,title:n,content:o,translateOptions:{name:j("resources.".concat(w,".forcedCaseName"),{smart_count:1,_:We.humanize(j("resources.".concat(w,".name"),{smart_count:1,_:We.singularize(w)}),!0)}),id:g.id},onConfirm:v,onClose:h})]})},"DeleteBranchWithConfirmButton"),Qr=E.jsx(Gt,{}),nn="RaDeleteBranchWithConfirmButton",rn={deleteButton:"".concat(nn,"-deleteButton")},Ur=_e("div",{name:nn})(function(t){var a,e=t.theme;return a={},a["& .".concat(rn.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Ut(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},a}),ze=function(){return ze=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ze.apply(this,arguments)},Gr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},zr=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a;t.record;var n=Gr(t,["mutationMode","record"]),r=we(t),o=Rn();if(!r||r.id==null)return null;var c=e||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return c==="undoable"?E.jsx(Br,ze({record:r},n)):E.jsx(Ir,ze({mutationMode:c,record:r},n))},"DeleteBranchButton"),ht=function(){return ht=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ht.apply(this,arguments)},Xr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):r(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Hr=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},an=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},xe,ca=d(function(t){var a=t.allowMultipleRoots,e=a===void 0?!1:a,n=t.className,r=t.create,o=t.defaultExpandedKeys,c=t.edit,s=t.filter,l=t.hideRootNodes,i=t.lazy,u=i===void 0?!1:i;t.linkTo;var f=t.nodeActions,m=f===void 0?E.jsx(Mr,{}):f,b=t.show,x=t.showLine,j=t.sx,w=t.title,g=t.titleField,y=t.addRootButton,v=y===void 0?E.jsx(Mn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):y,h=t.meta,p=t.mutationMode,O=t.expandedKeys,C=t.onExpand,S=t.onClick,_=t.onDrop,P=an(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),N=ae(t);if(N==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var M=Tn(),R=Rt(),k=Je("/".concat(N,"/create/*")),D=Je("/".concat(N,"/:id/*")),T=Je("/".concat(N,"/:id/show/*")),B=Yr(t),$=A.useState(function(){if(k)return[he];if(D)return[D.params.id];if(T)return[T.params.id]}),K=$[0],L=$[1];A.useEffect(function(){if(k){L([he]);return}if(D){L([D.params.id]);return}if(T){L([T.params.id]);return}},[k,D,T]);var W=mr({lazy:u,resource:N,filter:s,meta:h,mutationMode:p,expandedKeys:O??o}),V=W.data,I=W.defaultTitle,U=W.handleExpand,Q=W.isPending,q=W.loadChildNodes,H=W.handleDrop,Y=W.expandedKeys,J=ne(function(z,F){if(S&&S(z,F),!z.defaultPrevented&&B)return M(R({resource:N,id:F.id,type:B}))}),ee=ne(function(z,F,Oe,De){C&&C(z,F,Oe,De),z.defaultPrevented||U(F.map(function(ke){var on=ke.id;return on}))}),X=ne(function(z,F){_&&_(z,F),H(F)}),Z=A.useCallback(function(z){return Xr(void 0,void 0,void 0,function(){return Hr(this,function(F){return u?[2,q(z.record.id)]:[2,Promise.resolve()]})})},[u,q]),re=A.useMemo(function(){var z;return(z=V==null?void 0:V.reduce(function(F,Oe){return V.some(function(De){var ke;return(ke=De.children)===null||ke===void 0?void 0:ke.includes(Oe.id)})||F.push(Oe.id),F},[]))!==null&&z!==void 0?z:[]},[V]),le=ne(function(z){var F=z.destination,Oe=z.position;if(V==null)return!1;if(e)return!0;var De=re.includes(F.id);return!(De&&Oe===-1)});if(Q||V==null)return null;var pe=!V||V.length===0||e;return E.jsx(jr,{value:W,children:E.jsxs(Vr,{className:n,sx:j,children:[E.jsx("div",{className:me.cardTree,children:E.jsx(qt,{children:E.jsxs($n,{className:me.cardContentTree,children:[E.jsx(Lt,ht({allowDrop:le,data:V,hideRootNodes:l,titleField:g,onDrop:X,onExpand:ee,onClick:J,selectedKeys:K,showLine:x,nodeActions:m,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:Y},Jr(P))),pe?v:null]})})}),E.jsx("div",{className:me.actionCard,children:E.jsxs(qn,{children:[r?E.jsx(qe,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,b?E.jsx(qe,{path:":id/show/*",element:typeof b=="function"?E.jsx(b,{}):b}):null,c?E.jsx(qe,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,w!==!1?E.jsx(qe,{path:"*",element:E.jsx($t,{title:w,defaultTitle:I})}):null]})})]})})},"TreeWithDetails"),Jr=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var a=an(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return a},"sanitizeRestProps"),Me="RaTreeWithDetails",me={container:"".concat(Me,"-container"),cardTree:"".concat(Me,"-cardTree"),cardContentTree:"".concat(Me,"-cardContentTree"),actionCard:"".concat(Me,"-actionCard")},Vr=_e("div",{name:Me,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((xe={display:"flex"},xe["& .".concat(me.actionCard)]={width:"100%"},xe["& .".concat(me.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},xe["& .".concat(me.cardContentTree)]={},xe["& .".concat(me.container)]={display:"flex"},xe)),Yr=d(function(t){var a=t.linkTo,e=t.show,n=t.edit;return a||(e?"show":n?"edit":!1)},"getLinkTo"),yt=function(){return yt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yt.apply(this,arguments)},Zr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},da=d(function(t){var a,e=t.children,n=t.className,r=t.resource,o=Zr(t,["children","className","resource"]),c=Bn(function(s){return s.breakpoints.down("sm")});return E.jsx(Fr,yt({className:Te((a={},a[Ee.mobileToolbar]=c,a[Ee.desktopToolbar]=!c,a),n),role:"toolbar"},o,{children:A.Children.count(e)===0?E.jsxs("div",{className:Ee.defaultToolbar,children:[E.jsx(Kn,{}),E.jsx(zr,{resource:r})]}):e}))},"EditNodeToolbar"),Ke="RaEditNodeToolbar",Ee={desktopToolbar:"".concat(Ke,"-desktopToolbar"),mobileToolbar:"".concat(Ke,"-mobileToolbar"),defaultToolbar:"".concat(Ke,"-defaultToolbar")},Fr=_e(Ln,{name:Ke,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a,e=t.theme;return a={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},a["&.".concat(Ee.desktopToolbar)]={},a["&.".concat(Ee.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},a["& .".concat(Ee.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},a});export{fa as AddChildButton,ia as CreateNode,zr as DeleteBranchButton,Ir as DeleteBranchWithConfirmButton,Br as DeleteBranchWithUndoButton,en as DeleteMenuItem,Nr as DeleteMenuItemWithConfirmation,Ar as DeleteMenuItemWithUndo,rn as DeleteWithConfirmButtonClasses,va as EditNode,da as EditNodeToolbar,Ee as EditNodeToolbarClasses,Mr as NodeActions,ha as NodeEditActions,oa as ReferenceNodeInput,ua as ShowNode,Lt as Tree,Zt as TreeChoicesContext,Or as TreeChoicesContextProvider,Nn as TreeContext,jr as TreeContextProvider,br as TreeInput,At as TreeInputClasses,_r as TreeInputTree,ca as TreeWithDetails,me as TreeWithDetailsClasses,he as UNSAVED_NEW_NODE,ya as addTreeMethodsBasedOnChildren,na as addTreeMethodsBasedOnParentAndPosition,yn as deleteBranchByDeletingAllChildren,hn as deleteBranchByDeletingNode,aa as fixFakeRestDataProvider,ga as getRCTree,ma as getRCTreeDatum,ba as getRecordTree,_a as getRootAndChildNodes,wa as raTreeLanguageEnglish,pa as raTreeLanguageFrench,ra as removeChildren,Oa as renderSwitcherIcon,gn as updateQueryCacheFromGetTree,bn as useAddChildNode,nr as useAddRootNode,vr as useCreateNodeController,zt as useDeleteBranch,Jt as useDeleteBranchWithConfirmController,Vt as useDeleteBranchWithUndoController,xa as useEditNodeController,Kt as useExpandedKeys,ar as useGetChildNodesCallback,wn as useGetRootNodes,Bt as useGetTree,or as useGetTreeCallback,ur as useMoveAsNthChildOf,dr as useMoveAsNthSiblingOf,wr as useReferenceNodeInputController,xr as useTreeChoicesContext,_t as useTreeContext,mr as useTreeController,Sr as useTreeInputController};
//# sourceMappingURL=index-DHNBTJ1_.js.map
