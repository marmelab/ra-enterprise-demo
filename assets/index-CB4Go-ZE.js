var yn=Object.defineProperty;var d=(t,n)=>yn(t,"name",{value:n,configurable:!0});import{aj as re,ak as $t,al as gn,am as qt,u as be,M as qe,S as Bt,an as He,O as Kt,m as It,ac as mn,ao as mt,r as D,ap as bn,aq as bt,i as wn,ar as _n,A as we,D as $e,as as Lt,C as Wt,at as pn,au as On,av as Pe,aw as De,ax as Ae,ay as wt,az as te,aA as xn,aB as We,a7 as _e,aC as _t,aD as Cn,aE as Sn,aF as jn,aG as Qt,aH as En,aI as he,aJ as zt,j as E,aK as Je,F as Ke,aL as Ut,aM as Gt,aN as Xt,ai as xt,I as Ct,aO as Nn,a4 as Pn,aP as Dn,aQ as An,aR as Rn,aS as Ht,aT as kn,f as Mn,aU as Tn,ae as $n,aV as qn,y as Bn,aW as Kn,aX as In,aY as Ln,aZ as Jt,a_ as Vt,a$ as Qe,b0 as Wn,b1 as Qn,k as Yt,b2 as Zt,b3 as Ft,b4 as zn,b5 as Un,Q as Gn,b6 as Ve,d as Xn,b7 as Hn,b8 as Be,a8 as Jn,b9 as Vn,ba as Yn}from"./index-Cx4dsLuc.js";import{bd as Ca,bb as Sa,bc as ja,bg as Ea,bj as Na,bi as Pa,bh as Da,bk as Aa,bm as Ra,bl as ka,be as Ma,bf as Ta}from"./index-Cx4dsLuc.js";var nt=function(){return nt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nt.apply(this,arguments)},Zn=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Fn=d(function(t){t===void 0&&(t={});var n=t.disableAuthentication,e=n===void 0?!1:n,a=t.id,r=t.queryOptions,i=r===void 0?{}:r,c=re(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var l=$t({enabled:!e}).isPending,s=gn({action:"show",resource:c,enabled:!e&&!l}).isPending,o=qt(c),u=be(),f=qe(),b=Bt(),g=He(),j=Kt(),C=It().id;if(!C&&!a)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var p=a??C,m=i.meta,h=Zn(i,["meta"]),v=mn(c,{id:p,meta:m},nt({enabled:!l&&!s||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),g(function(){return{pathname:b({resource:c,type:"list"}),flushSync:!0}}),j()},"onError"),retry:!1},h)),y=v.data,_=v.error,x=v.isLoading,O=v.isFetching,S=v.isPending,w=v.refetch;if(y&&y.id&&y.id!=p)throw new Error("useShowController: Fetched record's id attribute (".concat(y.id,") must match the requested 'id' (").concat(p,")"));var P=mt(),N=o(y),A=u("resources.".concat(c,".page.show"),{id:p,record:y,recordRepresentation:typeof N=="string"?N:"",_:u("ra.page.show",{name:P(c,1),id:p,record:y,recordRepresentation:typeof N=="string"?N:""})});return{defaultTitle:A,error:_,isLoading:x,isFetching:O,isPending:S,record:y,refetch:w,resource:c}},"useShowController"),pt=D.createContext(null);pt.displayName="ShowContext";var er=d(function(t){var n=t.children,e=t.value;return D.createElement(pt.Provider,{value:e},D.createElement(bn,{value:e&&e.record},n))},"ShowContextProvider"),tr=d(function(){var t=D.useContext(pt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),rt=function(){return rt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rt.apply(this,arguments)},nr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},rr=d(function(t){var n=bt(t).hasEdit;return D.createElement(wn,rt({},ar(t)),n&&D.createElement(_n,null))},"ShowActions"),ar=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var n=nr(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return n},"sanitizeRestProps$1"),at=function(){return at=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)},ir=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Me,or=D.createElement(rr,null),ur=d(function(t){var n,e=t.actions,a=t.aside,r=t.children,i=t.render,c=t.className,l=t.component,s=l===void 0?Wt:l,o=t.emptyWhileLoading,u=o===void 0?!1:o,f=t.title,b=ir(t,["actions","aside","children","render","className","component","emptyWhileLoading","title"]),g=tr(),j=g.resource,C=g.defaultTitle,p=g.record,m=bt().hasEdit,h=typeof e>"u"&&m?or:e;return!p&&u?null:D.createElement(cr,at({className:$e("show-page",c)},b),f!==!1&&D.createElement(Lt,{title:f,defaultTitle:C,preferenceKey:"".concat(j,".show.title")}),h!==!1&&h,D.createElement("div",{className:$e(je.main,(n={},n[je.noActions]=!h,n))},D.createElement(s,{className:je.card},i?i(g):r),a))},"ShowView"),Ie="RaShow",je={main:"".concat(Ie,"-main"),noActions:"".concat(Ie,"-noActions"),card:"".concat(Ie,"-card")},cr=we("div",{name:Ie,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((Me={},Me["& .".concat(je.main)]={display:"flex"},Me["& .".concat(je.noActions)]={marginTop:"1em"},Me["& .".concat(je.card)]={flex:"1 1 auto"},Me)),H=function(){return H=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)},ue=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},ce=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ha=d(function(t,n,e,a){n===void 0&&(n="parent_id"),e===void 0&&(e="position"),a===void 0&&(a=!1);var r=a?pn:On,i=H(H({},t),{getTree:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:l==null?void 0:l.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=u.sent().data,o=s.map(function(f){return H(H({},f),{children:s.filter(function(b){return b[n]==f.id}).sort(function(b,g){return b[e]-g[e]}).map(function(b){return b.id})})}),[2,{data:o}]}})})},"getTree"),getRootNodes:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:H(H({},l==null?void 0:l.filter),(u={},u[n]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=f.sent().data,[4,Promise.all(s.map(function(b){var g;return t.getList(c,{filter:(g={},g[n]=b.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta}).then(function(j){var C=j.data;return H(H({},b),{children:C.map(function(p){var m=p.id;return m})})})}))];case 2:return o=f.sent(),[2,{data:o}]}})})},"getRootNodes"),getParentNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g=o.childId,j=o.meta;return ce(this,function(C){switch(C.label){case 0:return[4,i.getTree(s,{meta:j})];case 1:return u=C.sent().data,f=u.find(function(p){return p.id===g}),f?(b=u.find(function(p){return p.id===f[n]}),[2,{data:b}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g=o.parentId,j=o.meta;return ce(this,function(C){switch(C.label){case 0:return[4,t.getList(s,{filter:(b={},b[n]=g,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 1:return u=C.sent().data,[4,Promise.all(u.map(function(p){var m;return t.getList(s,{filter:(m={},m[n]=p.id,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j}).then(function(h){var v=h.data;return H(H({},p),{children:v.map(function(y){var _=y.id;return _})})})}))];case 2:return f=C.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g,j,C,p=o.source,m=o.destination,h=o.position,v=o.meta;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(g={},g[n]=m.id,g["".concat(e,"_gte")]=h,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=y.sent().data,u.length>0?[4,Promise.all(u.map(function(_){var x;return t.update(s,{id:_.id,data:(x={},x[e]=_[e]+1,x),previousData:_,meta:v})}))]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,t.getList(s,{filter:(j={},j[n]=p[n],j["".concat(e,"_gt")]=p[e],j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=y.sent().data,f.length>0?[4,Promise.all(f.map(function(_){var x;return t.update(s,{id:_.id,data:(x={},x[e]=_[e]-1,x),previousData:_,meta:v})}))]:[3,6];case 5:y.sent(),y.label=6;case 6:return[4,t.update(s,{id:p.id,data:(C={},C[n]=m.id,C[e]=h,C),previousData:p,meta:v})];case 7:return b=y.sent().data,[2,{data:b}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g,j,C,p,m,h,v,y,_,x,O,S=o.source,w=o.destination,P=o.position,N=o.meta;return ce(this,function(A){switch(A.label){case 0:return(P===0||P===-1)&&(u=(C={},C[n]=w[n],C)),S[e]>w[e]&&S[n]===w[n]&&(P===-1?u=(p={},p[n]=w[n],p["".concat(e,"_gte")]=w[e],p):u=(m={},m[n]=w[n],m["".concat(e,"_gt")]=w[e],m)),S[n]!==w[n]&&P>0&&(u=(h={},h[n]=w[n],h["".concat(e,"_gt")]=w[e],h)),u?[4,t.getList(s,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})]:[3,3];case 1:return f=A.sent().data,f.length>0?[4,Promise.all(f.map(function(M){var k;return M.id===S.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]+1,k),previousData:M,meta:N})}))]:[3,3];case 2:A.sent(),A.label=3;case 3:return S[n]===w[n]?S[e]>w[e]?b=(v={},v[n]=S[n],v["".concat(e,"_gt")]=S[e],v):b=(y={},y[n]=S[n],y["".concat(e,"_gt")]=S[e],y["".concat(e,"_lte")]=w[e],y):b=(_={},_[n]=S[n],_["".concat(e,"_gt")]=S[e],_),[4,t.getList(s,{filter:b,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})];case 4:return g=A.sent().data,g.length>0?[4,Promise.all(g.map(function(M){var k;return M.id===S.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]-1,k),previousData:M,meta:N})}))]:[3,6];case 5:A.sent(),A.label=6;case 6:return j=S[n]===w[n]?S[e]>w[e]?w[e]+1:w[e]:P<0?0:P,P===-1&&(j=0),[4,t.update(s,{id:S.id,data:(x={},x[n]=(O=w[n])!==null&&O!==void 0?O:null,x[e]=j,x),previousData:S,meta:N})];case 7:return A.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g,j,C=o.data,p=o.meta;return ce(this,function(m){switch(m.label){case 0:return[4,t.getList(s,{filter:(g={},g[n]=null,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:p})];case 1:return u=m.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(s,{data:H(H({},C),(j={},j[n]=null,j[e]=f,j)),meta:p})];case 2:return b=m.sent().data,[2,{data:H(H({},b),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,b,g,j,C,p=o.parentId,m=o.data,h=o.meta,v=o.position;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(j={},j[n]=p,j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(_,x){return x[e]>_?x[e]:_},-1/0)+1:0,b=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(s,{data:H(H({},m),(C={},C[n]=p,C[e]=b,C)),meta:h})];case 2:return g=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(_){var x;_[e]>=v&&t.update(s,{id:_.id,data:H(H({},_),(x={},x[e]=_[e]+1,x)),previousData:_,meta:h})}),[2,{data:H(H({},g),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u,f;return ce(this,function(b){switch(b.label){case 0:return s=l.id,o=l.previousData,u=l.meta,[4,r(i,c,l)];case 1:return b.sent(),[4,i.getChildNodes(c,{parentId:o[n],meta:u})];case 2:return f=b.sent().data,[4,Promise.all(f.filter(function(g){return g[e]>o[e]&&g.id!==s}).map(function(g){var j;return t.update(c,{id:g.id,data:H(H({},g),(j={},j[e]=g[e]-1,j)),previousData:g,meta:u})}))];case 3:return b.sent(),[2,{data:o}]}})})},"deleteBranch")});return i},"addTreeMethodsBasedOnParentAndPosition"),Ce=function(){return Ce=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ce.apply(this,arguments)},dr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},lr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},sr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},fr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},vr=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=D.useRef(n),c=Ae(Ce(Ce({mutationFn:d(function(s){var o=s===void 0?{}:s,u=o.resource,f=u===void 0?t:u,b=o.data,g=b===void 0?i.current.data:b,j=o.meta,C=j===void 0?i.current.meta:j;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(g==null)throw new Error("useAddRootNode mutation requires non-empty data");return a.addRootNode(f,{data:g,meta:C}).then(function(p){var m=p.data;return m})},"mutationFn")},e),{onSuccess:d(function(s,o,u){o===void 0&&(o={});var f=o.resource,b=f===void 0?t:f;r.setQueryData([b,"getOne",{id:String(s.id)}],s),e.onSuccess&&e.onSuccess(s,o,u)},"onSuccess")})),l=d(function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return dr(void 0,fr([],s,!0),void 0,function(u,f,b){var g,j;return u===void 0&&(u=t),f===void 0&&(f={}),b===void 0&&(b={}),lr(this,function(C){return g=b.returnPromise,j=sr(b,["returnPromise"]),g?[2,c.mutateAsync(Ce({resource:u},f),b)]:(c.mutate(Ce({resource:u},f),j),[2])})})},"addRootNode");return[l,c]},"useAddRootNode"),ne=function(){return ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ne.apply(this,arguments)},St=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},jt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},hr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ye=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},en=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.id,c=n.previousData,l=e.mutationMode,s=l===void 0?"pessimistic":l,o=hr(e,["mutationMode"]),u=D.useRef(s),f=D.useRef(n),b=D.useRef([]),g=d(function(p){var m=p.resource,h=p.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,_=d(function(O,S){var w=O.findIndex(function(T){return T.id==S});if(w===-1)return O;for(var P=O[w],N=Ye(Ye([],O.slice(0,w),!0),O.slice(w+1),!0),A=P.children||[],M=0,k=A;M<k.length;M++){var R=k[M];N=_(N,R)}return N},"removeRecord"),x=d(function(O){var S=_(O,h);return S.map(function(w){return ne(ne({},w),{children:w.children?w.children.filter(function(P){return P!==h}):w.children})})},"updateCollection");r.setQueriesData({queryKey:[m,"getTree"]},function(O){if(!O)return O;var S=x(O),w=S.length<O.length;return w?S:O},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getRootNodes"]},function(O){return O&&O.length>0?x(O):O},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getChildNodes"]},function(O){if(!O)return O;var S=x(O),w=S.length<O.length;return w?S:O},{updatedAt:y})},"updateCache"),j=Ae(ne(ne({mutationFn:d(function(p){var m=p===void 0?{}:p,h=m.resource,v=h===void 0?t:h,y=m.id,_=y===void 0?f.current.id:y,x=m.previousData,O=x===void 0?f.current.previousData:x,S=m.meta,w=S===void 0?f.current.meta:S;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(_==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(O==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return a.deleteBranch(v,{id:_,previousData:O,meta:w}).then(function(P){var N=P.data;return N})},"mutationFn")},o),{onMutate:d(function(p){return St(void 0,void 0,void 0,function(){var m;return jt(this,function(h){switch(h.label){case 0:return o.onMutate?[4,o.onMutate(p)]:[3,2];case 1:return m=h.sent()||{},[2,ne({snapshot:b.current},m)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(p,m,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],_=v[1];r.setQueryData(y,_)}),o.onError)return o.onError(p,m,h)},"onError"),onSuccess:d(function(p,m,h){if(m===void 0&&(m={}),u.current==="pessimistic"){var v=m.resource,y=v===void 0?t:v,_=m.id,x=_===void 0?i:_;g({resource:y,id:x}),o.onSuccess&&o.onSuccess(p,m,h)}},"onSuccess"),onSettled:d(function(p,m,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0];r.invalidateQueries({queryKey:_})}),o.onSettled)return o.onSettled(p,m,h,v)},"onSettled")})),C=d(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return St(void 0,Ye([],p,!0),void 0,function(h,v,y){var _,x,O,S,w,P,N,A,M;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),jt(this,function(k){switch(k.label){case 0:return _=y.mutationMode,x=y.onSuccess,O=y.onSettled,S=y.onError,f.current=n,_&&(u.current=_),u.current==="pessimistic"?[2,j.mutate(ne({resource:h},v),{onSuccess:x,onSettled:O,onError:S})]:(w=v.id,P=w===void 0?i:w,N=v.previousData,A=N===void 0?c:N,M=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],b.current=M.reduce(function(R,T){return R.concat(r.getQueriesData({queryKey:T}))},[]),[4,Promise.all(b.current.map(function(R){var T=R[0];return r.cancelQueries({queryKey:T})}))]);case 1:return k.sent(),g({resource:h,id:P}),x&&setTimeout(function(){return x(A,ne({resource:h},v),{snapshot:b.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(A,ne({resource:h},v),{snapshot:b.current})},0),u.current==="optimistic"?[2,j.mutate(ne({resource:h},v),{onSettled:O,onError:S})]:(wt.once("end",function(R){var T=R.isUndo;T?b.current.forEach(function(B){var q=B[0],I=B[1];r.setQueryData(q,I)}):j.mutate(ne({resource:h},v),{onSettled:O,onError:S})}),[2])}})})},"mutate");return[C,j]},"useDeleteBranch"),ye=function(){return ye=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ye.apply(this,arguments)},yr=d(function(t,n,e){var a=Pe(),r=Ae(ye({mutationKey:[t,"getChildNodes",n],mutationFn:d(function(c){return a.getChildNodes(t,ye(ye({},n),c)).then(function(l){var s=l.data;return s})},"mutationFn")},e)),i=te(function(c){return r.mutateAsync(ye(ye({},n),{parentId:c}))});return i},"useGetChildNodesCallback"),ze=function(){return ze=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)},ya=d(function(t){return ze(ze({},t),{children:t.children.map(function(n){return n.id})})},"removeChildren"),it=function(){return it=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it.apply(this,arguments)},gr=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=Ae(it({mutationKey:[t,"getTree",n],mutationFn:d(function(){return a.getTree(t,n).then(function(l){var s=l.data;return s})},"mutationFn"),onSuccess:d(function(l){xn(r,t,l,n)},"onSuccess")},e)),c=D.useCallback(function(){return i.mutateAsync(n)},[i,n]);return c},"useGetTreeCallback"),ie=function(){return ie=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ie.apply(this,arguments)},Et=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Nt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},mr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},se=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},br=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=mr(e,["mutationMode"]),f=D.useRef(o),b=D.useRef(n),g=D.useRef([]),j=d(function(m){var h=m.resource,v=m.position,y=m.source,_=m.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,S=d(function(w){var P,N,A,M,k,R=We(w),T=R.find(function(q){var I;return(I=q.children)===null||I===void 0?void 0:I.includes(y.id)});T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function(q){return q!==y.id}):R=R.filter(function(q){return q.id!==y.id});var B=R.find(function(q){return q.id===_.id});return B?B.children=se(se(se([],(A=(N=B.children)===null||N===void 0?void 0:N.slice(0,v))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(v))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(q){return q.id!==y.id}),R=se(se(se([],R.slice(0,v),!0),[y],!1),R.slice(v),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O})},"updateCache"),C=Ae(ie(ie({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,_=h.position,x=_===void 0?b.current.position:_,O=h.source,S=O===void 0?b.current.source:O,w=h.destination,P=w===void 0?b.current.destination:w,N=h.meta,A=N===void 0?b.current.meta:N;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return a.moveAsNthChildOf(y,{position:x,source:S,destination:P,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(m){return Et(void 0,void 0,void 0,function(){var h;return Nt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,ie({snapshot:g.current},h)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],x=y[1];r.setQueryData(_,x)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var _=v.resource,x=_===void 0?t:_;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return Et(void 0,se([],m,!0),void 0,function(v,y,_){var x,O,S,w,P,N,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),Nt(this,function(B){switch(B.label){case 0:if(x=_.mutationMode,O=_.onSuccess,S=_.onSettled,w=_.onError,b.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,C.mutate(ie({resource:v},y),{onSuccess:O,onSettled:S,onError:w})];if(P=y.position,N=P===void 0?l:P,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:N,source:M,destination:R}),O&&setTimeout(function(){return O(void 0,ie({resource:v},y),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ie({resource:v},y),{snapshot:g.current})},0),f.current==="optimistic"?[2,C.mutate(ie({resource:v},y),{onSettled:S,onError:w})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):C.mutate(ie({resource:v},y),{onSettled:S,onError:w})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oe.apply(this,arguments)},Pt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Dt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},wr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},fe=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},_r=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=wr(e,["mutationMode"]),f=D.useRef(o),b=D.useRef(n),g=D.useRef([]),j=d(function(m){var h=m.resource,v=m.position,y=m.source,_=m.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,S=d(function(w){var P,N,A,M,k,R=We(w),T=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(y.id)}),B=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(_.id)}),q=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(L){return L===y.id})<T.children.findIndex(function(L){return L===_.id})&&(q=v-1);var I=q<0?0:q;return T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function(L){return L!==y.id}):R=R.filter(function(L){return L.id!==y.id}),B?B.children=fe(fe(fe([],(A=(N=B.children)===null||N===void 0?void 0:N.slice(0,I))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(I))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(L){return L.id!==y.id}),R=fe(fe(fe([],R.slice(0,I),!0),[y],!1),R.slice(I),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(w){return w&&w.length>0?S(w):w},{updatedAt:O})},"updateCache"),C=Ae(oe(oe({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,_=h.position,x=_===void 0?b.current.position:_,O=h.source,S=O===void 0?b.current.source:O,w=h.destination,P=w===void 0?b.current.destination:w,N=h.meta,A=N===void 0?b.current.meta:N;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(S==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return a.moveAsNthSiblingOf(y,{position:x,source:S,destination:P,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(m){return Pt(void 0,void 0,void 0,function(){var h;return Dt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,oe({snapshot:g.current},h)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],x=y[1];r.setQueryData(_,x)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var _=v.resource,x=_===void 0?t:_;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return Pt(void 0,fe([],m,!0),void 0,function(v,y,_){var x,O,S,w,P,N,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),Dt(this,function(B){switch(B.label){case 0:if(x=_.mutationMode,O=_.onSuccess,S=_.onSettled,w=_.onError,b.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,C.mutate(oe({resource:v},y),{onSuccess:O,onSettled:S,onError:w})];if(P=y.position,N=P===void 0?l:P,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:N,source:M,destination:R}),O&&setTimeout(function(){return O(void 0,oe({resource:v},y),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},y),{snapshot:g.current})},0),f.current==="optimistic"?[2,C.mutate(oe({resource:v},y),{onSettled:S,onError:w})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):C.mutate(oe({resource:v},y),{onSettled:S,onError:w})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthSiblingOf"),de=function(){return de=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)},At=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Rt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ga=d(function(t){return de(de({},t),{getRootNodes:d(function(n,e){return At(void 0,void 0,void 0,function(){var a,r;return Rt(this,function(i){switch(i.label){case 0:return[4,t.getRootNodes(n,e)];case 1:return a=i.sent().data,r=a.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(n,e){return At(void 0,[n,e],void 0,function(a,r){var i,c,l,s,o=r.data,u=r.meta;return Rt(this,function(f){switch(f.label){case 0:return[4,t.getList(a,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return i=f.sent().data,c=i.filter(function(b){return typeof b.parent_id>"u"}),l=c.length>0?c.reduce(function(b,g){return g.position>b?g.position:b},-1/0)+1:0,[4,t.create(a,{data:de(de({},o),{parent_id:null,position:l}),meta:u})];case 2:return s=f.sent().data,[2,{data:de(de({},s),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),kt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},tn=d(function(t,n){var e,a=t.filter(function(c){return c.id!==n.id}),r=a.find(function(c){var l;return(l=c.children)===null||l===void 0?void 0:l.includes(n.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==n.id})),!n.children||n.children.length===0)return a;var i=nn(a,n);return a=a.filter(function(c){return!i.includes(c)}),a},"removeNode"),nn=d(function(t,n){return n?!n.children||n.children.length===0?[]:kt(kt([],n.children,!0),n.children.flatMap(function(e){var a=t.find(function(r){return r.id===e});return a?nn(t,a):[]}),!0):[]},"getNodeChildrenRecursive"),ot=function(){return ot=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)},rn=d(function(t){var n=t.mutationMode,e=t.mutationOptions,a=t.redirect,r=a===void 0?"list":a,i=qe(),c=He(),l=Kt(),s=re(t);if(s==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=_e(t);if(o==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=en(),f=u[0],b=u[1].isPending,g=D.useState(!1),j=g[0],C=g[1],p=_t().setFinalData,m=D.useCallback(function(y){y.stopPropagation(),f(s,{id:o.id,previousData:o},ot({mutationMode:n,onSuccess:d(function(){i("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,s),n==="pessimistic"?l():p&&p(function(_){return tn(_,o)})},"onSuccess"),onError:d(function(_){i(typeof _=="string"?_:_.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,n,e,i,o,c,r,l,s,p]),h=d(function(y){y.stopPropagation(),C(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),C(!1)},"handleDialogClose");return{handleDelete:m,handleDialogOpen:h,handleDialogClose:v,isPending:b,open:j}},"useDeleteBranchWithConfirmController"),ut=function(){return ut=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(this,arguments)},an=d(function(t){var n=t.mutationOptions,e=t.redirect,a=e===void 0?"list":e,r=qe(),i=He(),c=_t().setFinalData,l=re(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var s=_e(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var o=en(),u=o[0],f=o[1].isPending,b=D.useCallback(function(g){g.stopPropagation(),u(l,{id:s.id,previousData:s},ut({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(j){return tn(j,s)}),i(a,l)},"onSuccess"),onError:d(function(j){return r(typeof j=="string"?j:j.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},n))},[u,n,r,s,i,a,l,c]);return{handleDelete:b,isPending:f}},"useDeleteBranchWithUndoController"),Se=function(){return Se=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Se.apply(this,arguments)},pr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Or=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},xr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Cr=d(function(t){var n=t.disableAuthentication,e=t.record,a=e===void 0?{}:e,r=t.redirect,i=t.mutationOptions,c=i===void 0?{}:i,l=t.transform;$t({enabled:!n});var s=re(t);if(s==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=mt(),u=De(),f=Cn(),b=_t().handleAddNode,g=f.state&&f.state.parentId,j=f.state&&f.state.insertAsFirstChild,C=typeof g<"u"&&g!==null,p=f.state&&f.state.record||a,m=c.onSuccess,h=c.onError,v=xr(c,["onSuccess","onError"]),y=bt(t),_=y.hasEdit,x=y.hasShow,O=r||Sr(x,_),S=vr(s,void 0,v),w=S[0],P=S[1],N=Sn(s,void 0,v),A=N[0],M=N[1],k=te(b??jr);D.useEffect(function(){return k({record:{},parentId:g,insertAsFirstChild:j}),function(){k(void 0)}},[k,g,j]);var R=be(),T=qe(),B=He(),q=D.useCallback(function(W,V){var Q=V===void 0?{}:V,G=Q.onSuccess,z=Q.onError,K=Q.transform,$=d(function(U){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(O,s,U.id,U),u.refetchQueries({queryKey:[s,"getTree"],type:"active"}),u.refetchQueries({queryKey:[s,"getRootNodes"],type:"active"})},"defaultOnSuccess"),X=d(function(U){T(typeof U=="string"?U:U.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(K?K(W):l?l(W):W).then(function(U){return pr(void 0,void 0,void 0,function(){var ee,Y,Z;return Or(this,function(ae){switch(ae.label){case 0:ee={onSuccess:d(function(le,pe,J){k(void 0),G?G(le,pe,J):m?m(le,pe,J):$(le)},"onSuccess"),onError:z||h||X},ae.label=1;case 1:return ae.trys.push([1,6,,7]),C?[4,A(s,{data:U,parentId:g,meta:v.meta,position:j?0:void 0},Se(Se({},ee),{returnPromise:!0}))]:[3,3];case 2:return ae.sent(),[3,5];case 3:return[4,w(s,{data:U,meta:v.meta},Se(Se({},ee),{returnPromise:!0}))];case 4:ae.sent(),ae.label=5;case 5:return[3,7];case 6:return Y=ae.sent(),(Y instanceof jn||typeof Y=="object"&&Y!==null&&Y.hasOwnProperty("body"))&&((Z=Y.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,Y.body.errors]:[3,7];case 7:return[2]}})})})},[A,w,k,C,T,h,m,g,u,B,s,l,v.meta,O,j]),I=o(s,1),L=R("ra.page.create",{name:"".concat(I)});return{isLoading:!1,isFetching:!1,defaultTitle:L,save:q,saving:P.isPending||M.isPending,isPending:P.isPending||M.isPending,resource:s,record:p,redirect:O}},"useCreateNodeController"),Sr=d(function(t,n){return n?"edit":t?"show":"list"},"getDefaultRedirectRoute"),jr=d(function(){},"noop"),Er=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},on=d(function(t,n){var e=n.find(function(a){return a.id==t});return e?Er([e.id.toString()],(e.children||[]).flatMap(function(a){return on(a,n)}),!0):[]},"getNodeKeysRecursively"),ge=function(){return ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ge.apply(this,arguments)},Ze=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Fe=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},et=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Nr=d(function(t){var n=be(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var a=mt(),r=t.lazy,i=r===void 0?!1:r,c=t.filter,l=c===void 0?{}:c,s=t.mutationMode,o=s===void 0?"undoable":s,u=t.meta,f=Qt(e,{filter:l,meta:u},{enabled:!i}),b=En(e,{filter:l,meta:u},{enabled:i,gcTime:0}),g=yr(e,{meta:u}),j=D.useMemo(function(){var Q;return(Q=b.data)===null||Q===void 0?void 0:Q.map(function(G){var z=G.children,K=et(G,["children"]);return z!=null&&z.length?K:G})},[b.data,b.isFetching]),C=i?ge(ge({},b),{data:j}):f,p=C.data,m=C.error,h=C.isLoading,v=C.isPending,y=C.isFetching,_=D.useState(p),x=_[0],O=_[1],S=te(function(Q){return Ze(void 0,void 0,void 0,function(){var G;return Fe(this,function(z){switch(z.label){case 0:return[4,g(Q)];case 1:return G=z.sent(),O(function(K){var $,X=G.map(function(Y){var Z=Y.children,ae=et(Y,["children"]),le=K==null?void 0:K.some(function(pe){var J;return(J=Y.children)===null||J===void 0?void 0:J.includes(pe.id)});return Z!=null&&Z.length&&!le?ae:Y}),U=ve(ve([],($=K==null?void 0:K.map(function(Y){return Y.id===Q?ge(ge({},Y),{children:X.map(function(Z){return Z.id})}):Y}))!==null&&$!==void 0?$:[],!0),X,!0),ee=U.reduce(function(Y,Z){return Y[Z.id]=Z,Y},{});return Object.values(ee)}),[2]}})})});D.useEffect(function(){O(p)},[p]);var w=D.useState(),P=w[0],N=w[1],A=te(function(Q){var G,z=We(x);if(Q){if(N(Q),Q.parentId!=null){var K=z==null?void 0:z.find(function(X){return X.id===Q.parentId});K&&(K.children=K.children||[],K.children=Q.insertAsFirstChild?ve([he],K.children,!0):ve(ve([],K.children,!0),[he],!1))}O(ve(ve([],z??[],!0),[ge({id:he,children:[]},Q.record)],!1))}else{if(!P)return;var $=We(x);if(P.parentId!=null){var K=$==null?void 0:$.find(function(U){return U.id===P.parentId});K&&(K.children=(G=K.children)===null||G===void 0?void 0:G.filter(function(U){return U!=he}))}N(void 0),O($==null?void 0:$.filter(function(X){return X.id!==he}))}}),M=zt(void 0,t.expandedKeys),k=M[0],R=M[1],T=te(function(Q){R(function(G){var z,K,$=typeof Q=="function"?Q(G??[]):Q,X=(z=G==null?void 0:G.filter(function(ee){return!$.includes(ee)}))!==null&&z!==void 0?z:[],U=(K=X==null?void 0:X.flatMap(function(ee){return on(ee,x??[])},[]))!==null&&K!==void 0?K:[];return $.filter(function(ee){return!U.includes(ee)})})}),B=br(e,{meta:u})[0],q=_r(e,{meta:u})[0],I=gr(e),L=qe(),W=te(function(Q){var G=Q.type,z=et(Q,["type"]),K=d(function(){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(X){switch(X.label){case 0:return[4,I()];case 1:return X.sent(),L("ra-tree.item_moved",{undoable:o==="undoable"}),[2]}})})},"successSideEffect"),$=d(function(X){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(U){return L(X.message,{type:"error"}),[2]})})},"errorSideEffect");G==="child"?B(e,z,{onSuccess:K,onError:$,mutationMode:o}):q(e,z,{onSuccess:K,onError:$,mutationMode:o})}),V=n("ra.page.list",{name:a(e,2)});return{data:x,defaultTitle:V,error:m,expandedKeys:k,handleAddNode:A,handleDrop:W,handleExpand:T,isLoading:h,isFetching:y,isPending:v,loadChildNodes:S,newNode:P,lazy:i,setFinalData:O}},"useTreeController"),un=D.createContext(void 0),Ne=function(){return Ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ne.apply(this,arguments)},Ot=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Pr=d(function(t){var n=t.id,e=t.label,a=t.multiple,r=t.sx,i=t.className,c=t.helperText,l=t.fullWidth,s=t.margin,o=s===void 0?"dense":s,u=t.variant,f=u===void 0?"filled":u,b=t.size,g=b===void 0?"small":b,j=Ot(t,["id","label","multiple","sx","className","helperText","fullWidth","margin","variant","size"]),C=qr(t),p=C.data,m=C.resource,h=C.source,v=C.fetchError,y=C.isLoading,_=C.isRequired,x=C.field,O=C.fieldState,S=C.formState,w=be(),P=O.isTouched,N=O.invalid,A=O.error,M=S.isSubmitted,k=D.useMemo(function(){return(x==null?void 0:x.value)||(a?[]:"")},[x,a]),R=D.useMemo(function(){return p.filter(function(B){return a?k.includes(B.id):k===B.id})},[k,p,a]),T={standard:Xt,outlined:Gt,filled:Ut}[f];return v?E.jsxs(tt,{className:i,sx:r,"data-testid":"error",variant:f,size:g,margin:o,error:!0,children:[E.jsx(Je,{error:!0,margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct}),E.jsx(xt,{error:!0,children:E.jsx(Ct,{error:w("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"}),helperText:c})})]}):y||!p?E.jsxs(tt,{className:i,sx:r,"data-testid":"loading",variant:f,size:g,margin:o,children:[E.jsx(Je,{margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct,endAdornment:E.jsx(Nn,{color:"inherit",size:"30px"})})]}):E.jsxs(tt,{className:i,sx:r,variant:f,size:g,margin:o,children:[E.jsx(Je,{htmlFor:n??h,error:N,margin:o==="dense"?o:void 0,shrink:R.length>0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(Ar,Ne({source:h,multiple:a,className:Dr.tree,field:x,fullWidth:l},j,{data:p,variant:f,size:g,margin:o,id:n??h})),(P||M)&&A||c?E.jsx(xt,{error:(P||M)&&!!A,children:E.jsx(Ct,{error:A==null?void 0:A.message,helperText:c})}):null]})},"TreeInput"),cn="RaTreeInput",Dr={tree:"".concat(cn,"-tree")},tt=we(kn,{name:cn,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{"& .MuiInputBase-input":{height:"auto",minHeight:"1.4375em"},"& .MuiChip-root":{marginTop:n.spacing(.5),marginRight:n.spacing(.5)}}}),Ar=d(function(t){var n,e=t.className,a=t.data,r=t.multiple,i=t.field,c=t.checkStrictly,l=c===void 0?!0:c,s=t.expandAction,o=s===void 0?!1:s,u=t.titleField,f=t.margin,b=f===void 0?"dense":f,g=t.variant,j=g===void 0?"filled":g,C=t.size,p=C===void 0?"small":C,m=t.label,h=t.isRequired,v=t.source,y=t.id,_=t.sx,x=Ot(t,["className","data","multiple","field","checkStrictly","expandAction","titleField","margin","variant","size","label","isRequired","source","id","sx"]),O=D.useMemo(function(){return(i==null?void 0:i.value)||(r?[]:"")},[i,r]),S=D.useMemo(function(){return a.filter(function($){return r?O.includes($.id):O===$.id})},[O,a,r]),w=D.useState(0),P=w[0],N=w[1],A=D.useRef(!0);D.useEffect(function(){A.current&&N(function($){return $+1}),A.current=!0},[O]);var M=te(function($,X){A.current=!1,i==null||i.onChange(X.map(function(U){return U.id}))}),k=te(function($,X){var U;A.current=!1,i==null||i.onChange((U=X==null?void 0:X.id)!==null&&U!==void 0?U:null),W()}),R=D.useState(!1),T=R[0],B=R[1],q=te(function($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),B(!0))}),I=D.useRef(null),L=d(function(){B(!0)},"handleClick"),W=d(function(){B(!1)},"handleClose"),V=D.useRef(null),Q=d(function(){var $;($=V.current)===null||$===void 0||$.updatePosition()},"handleExpand"),G=re(t),z=qt(G),K={standard:Xt,outlined:Gt,filled:Ut}[j];return E.jsxs(E.Fragment,{children:[E.jsx(K,{id:y,ref:I,onClick:L,endAdornment:E.jsx(An,{}),size:p,margin:b,inputComponent:ct,className:e,onKeyDown:q,label:E.jsx(Ke,{resource:G,label:m,isRequired:h,source:v}),notched:j==="outlined"?S.length>0:void 0,inputProps:{children:S.length===0?null:E.jsx(Pn,{direction:"row",flexWrap:"wrap",children:r?S.map(function($){return E.jsx(Dn,{size:p,onDelete:d(function(X){M(X,S.filter(function(U){return U.id!==$.id}),$,!1)},"onDelete"),label:E.jsx(Mt,{record:$,titleField:u||z})},$.id)}):E.jsx(Mt,{record:S[0],titleField:u||z})})}}),E.jsx(Rn,{action:V,open:T,anchorEl:I.current,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{minWidth:I?(n=I.current)===null||n===void 0?void 0:n.clientWidth:"auto"}}},children:D.createElement(Ht,Ne({},x,{key:P,checkStrictly:l,expandAction:o,checkable:r,selectable:!r,checkedKeys:r?O:[],selectedKeys:r?[]:[O],defaultCheckedKeys:r?O:void 0,defaultSelectedKeys:r?void 0:[O],defaultExpandedKeys:r?O:[O],onCheck:M,onSelect:k,onExpand:Q,data:a,onBlur:i==null?void 0:i.onBlur,sx:Ne({padding:1},_)}))})]})},"TreeInputTree"),ct=D.forwardRef(d(function(n,e){var a=n.className,r=n.children,i=Ot(n,["className","children"]);return E.jsxs(Mn,{className:a,children:[E.jsx("input",Ne({ref:e},i,{style:Tn})),r]})},"TreeInputInput")),Mt=d(function(t){var n=t.titleField,e=t.record;return e?typeof n=="function"?n(e):$n(e,n):null},"ChoiceLabel"),Rr=d(function(t){var n=t.reference,e=t.source,a=t.meta,r=Qt(n,{meta:a}),i=r.data,c=r.error,l=r.isLoading,s=r.isFetching;return{source:e,resource:n,data:i,error:c??void 0,isLoading:l,isFetching:s}},"useReferenceNodeInputController"),kr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ma=d(function(t){var n=t.children,e=n===void 0?E.jsx(Pr,{}):n,a=Rr(t),r=a.resource,i=kr(a,["resource"]);return E.jsx(qn,{value:r,children:E.jsx(Mr,{value:i,children:e})})},"ReferenceNodeInput"),Mr=d(function(t){var n=t.children,e=t.value;return E.jsx(un.Provider,{value:e,children:n})},"TreeChoicesContextProvider"),Tr=d(function(){return D.useContext(un)||{}},"useTreeChoicesContext"),Ue=function(){return Ue=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)},$r=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},qr=d(function(t){var n=t.source,e=t.data;t.hideRootNodes;var a=$r(t,["source","data","hideRootNodes"]),r=re(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=Tr(),c=i.source,l=i.data,s=i.isLoading,o=i.isFetching,u=i.error,f=e??l,b=n??c;if(b==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var g=Bn(Ue(Ue({},a),{resource:r,source:b,type:"text"})),j=g.isRequired,C=g.field,p=g.fieldState,m=g.formState;return{resource:r,source:b,data:f??[],fetchError:u,isLoading:s,isFetching:o,isRequired:j,field:C,fieldState:p,formState:m}},"useTreeInputController"),Br=d(function(t){var n=t.children,e=t.value;return E.jsx(Kn.Provider,{value:e,children:n})},"TreeContextProvider"),dt=function(){return dt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)},ba=d(function(t){var n=Cr(t);return E.jsx(In,{value:n,children:E.jsx(Ln,dt({},t,n))})},"CreateNode"),lt=function(){return lt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(this,arguments)},Tt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},wa=d(function(t){var n=t.id,e=It().id;if(!e&&!n)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var a=n??e,r=zt(),i=r[1];D.useEffect(function(){i(function(l){var s=a.toString();return Array.isArray(l)?l.includes(s)?l:Tt(Tt([],l,!0),[s],!1):[s]})},[t.resource,a,i]);var c=Fn(t);return E.jsx(er,{value:c,children:E.jsx(ur,lt({},t))})},"ShowNode"),st=function(){return st=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)},Kr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ir=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.label,l=c===void 0?"ra.action.delete":c,s=t.mutationMode,o=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,b=f===void 0?"list":f,g=Kr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),j=re(t);if(!j)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var C=_e(t);if(!C)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var p=rn({mutationMode:s,record:C,resource:j,redirect:b}),m=p.handleDelete,h=p.handleDialogClose,v=p.handleDialogOpen,y=p.isPending,_=p.open,x=be(),O=d(function(S){S.stopPropagation(),o&&o(S),S.isDefaultPrevented()||v(S)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Jt,st({className:n,onClick:O,ref:u},g,{children:x(l,{_:l})})),E.jsx(Vt,{isOpen:_,loading:y,title:a,content:i,translateOptions:{name:Qe.humanize(x("resources.".concat(j,".name"),{smart_count:1,_:Qe.singularize(j)}),!0),id:C.id},onConfirm:m,onClose:h})]})},"DeleteMenuItemWithConfirmation"),ft=function(){return ft=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)},Lr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Wr=d(function(t){var n=t.className,e=t.label,a=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var i=t.ref;t.resource;var c=t.redirect,l=c===void 0?"list":c,s=Lr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),o=re(t);if(!o)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=_e(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=an({record:u,resource:o,redirect:l}),b=f.handleDelete,g=f.isPending,j=be(),C=d(function(p){p.stopPropagation(),r&&r(p),p.isDefaultPrevented()||b(p)},"handleClick");return E.jsx(Jt,ft({className:n,disabled:g,onClick:C,ref:i},s,{children:j(a,{_:a})}))},"DeleteMenuItemWithUndo"),Ge=function(){return Ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ge.apply(this,arguments)},Qr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},dn=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n,a=Qr(t,["mutationMode"]);return e==="undoable"?E.jsx(Wr,Ge({},a,{mutationMode:e})):E.jsx(Ir,Ge({},a,{mutationMode:e}))},"DeleteMenuItem");dn.displayName="DeleteMenuItem";var zr=D.createContext(null),Ur=zr.Provider,Gr=d(function(t){var n=t.children,e=n===void 0?E.jsx(dn,{}):n,a=t.className,r=D.useState(null),i=r[0],c=r[1],l=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),s=D.useCallback(function(u){u.stopPropagation(),c(null)},[]),o=D.useMemo(function(){return{close:s}},[s]);return E.jsxs(Hr,{className:a,children:[E.jsx("button",{className:Xr.menuButton,onClick:l,children:E.jsx(Wn,{})}),E.jsx(Qn,{anchorEl:i,open:!!i,onClose:s,children:E.jsx(Ur,{value:o,children:e})})]})},"NodeActions"),ln="RaNodeActions",Xr={menuButton:"".concat(ln,"-menuButton")},Hr=we("div",{name:ln,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(){return{}}),vt=function(){return vt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(this,arguments)},Jr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Vr=d(function(t){var n=t.label,e=n===void 0?"ra.action.delete":n,a=t.className,r=t.icon,i=r===void 0?Zr:r,c=t.onClick;t.resource,t.record;var l=t.redirect,s=l===void 0?"list":l,o=Jr(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=_e(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var b=an({resource:u,record:f,redirect:s}),g=b.handleDelete,j=b.isPending,C=d(function(p){c&&c(p),p.isDefaultPrevented()||g(p)},"handleClick");return E.jsx(Yr,vt({onClick:C,disabled:j,label:e,className:$e("ra-delete-button",a)},o,{children:i}),"button")},"DeleteBranchWithUndoButton"),Yr=we(Yt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{color:n.palette.error.main,"&:hover":{backgroundColor:Zt(n.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Zr=E.jsx(Ft,{}),ht=function(){return ht=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)},Fr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ea=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.icon,l=c===void 0?ta:c,s=t.label,o=s===void 0?"ra.action.delete":s,u=t.mutationMode,f=t.onClick;t.record,t.resource;var b=t.redirect,g=b===void 0?"list":b,j=Fr(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),C=be(),p=re(t);if(!p)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var m=_e(t);if(!m)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=rn({mutationMode:u,resource:p,record:m,redirect:g}),v=h.handleDelete,y=h.handleDialogClose,_=h.handleDialogOpen,x=h.isPending,O=h.open,S=d(function(w){f&&f(w),w.isDefaultPrevented()||_(w)},"handleClick");return E.jsxs(na,{className:n,children:[E.jsx(Yt,ht({onClick:S,label:o,className:$e("ra-delete-button",fn.deleteButton)},j,{children:l}),"button"),E.jsx(Vt,{isOpen:O,loading:x,title:a,content:i,translateOptions:{name:C("resources.".concat(p,".forcedCaseName"),{smart_count:1,_:Qe.humanize(C("resources.".concat(p,".name"),{smart_count:1,_:Qe.singularize(p)}),!0)}),id:m.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),ta=E.jsx(Ft,{}),sn="RaDeleteBranchWithConfirmButton",fn={deleteButton:"".concat(sn,"-deleteButton")},na=we("div",{name:sn})(function(t){var n,e=t.theme;return n={},n["& .".concat(fn.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Zt(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},n}),Xe=function(){return Xe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xe.apply(this,arguments)},ra=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},aa=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n;t.record;var a=ra(t,["mutationMode","record"]),r=_e(t),i=zn();if(!r||r.id==null)return null;var c=e||(i!=null&&i.mutationMode?i.mutationMode:"undoable");return c==="undoable"?E.jsx(Vr,Xe({record:r},a)):E.jsx(ea,Xe({mutationMode:c,record:r},a))},"DeleteBranchButton"),yt=function(){return yt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)},ia=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},oa=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},vn=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},xe,_a=d(function(t){var n=t.allowMultipleRoots,e=n===void 0?!1:n,a=t.className,r=t.create,i=t.defaultExpandedKeys,c=t.edit,l=t.filter,s=t.hideRootNodes,o=t.lazy,u=o===void 0?!1:o;t.linkTo;var f=t.nodeActions,b=f===void 0?E.jsx(Gr,{}):f,g=t.show,j=t.showLine,C=t.sx,p=t.title,m=t.titleField,h=t.addRootButton,v=h===void 0?E.jsx(Un,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,y=t.meta,_=t.mutationMode,x=t.expandedKeys,O=t.onExpand,S=t.onClick,w=t.onDrop,P=vn(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),N=re(t);if(N==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var A=Gn(),M=Bt(),k=Ve("/".concat(N,"/create/*")),R=Ve("/".concat(N,"/:id/*")),T=Ve("/".concat(N,"/:id/show/*")),B=da(t),q=D.useState(function(){if(k)return[he];if(R)return[R.params.id];if(T)return[T.params.id]}),I=q[0],L=q[1];D.useEffect(function(){if(k){L([he]);return}if(R){L([R.params.id]);return}if(T){L([T.params.id]);return}},[k,R,T]);var W=Nr({lazy:u,resource:N,filter:l,meta:y,mutationMode:_,expandedKeys:x??i}),V=W.data,Q=W.defaultTitle,G=W.handleExpand,z=W.isPending,K=W.loadChildNodes,$=W.handleDrop,X=W.expandedKeys,U=te(function(J,F){if(S&&S(J,F),!J.defaultPrevented&&B)return A(M({resource:N,id:F.id,type:B}))}),ee=te(function(J,F,Oe,Re){O&&O(J,F,Oe,Re),J.defaultPrevented||G(F.map(function(ke){var hn=ke.id;return hn}))}),Y=te(function(J,F){w&&w(J,F),$(F)}),Z=D.useCallback(function(J){return ia(void 0,void 0,void 0,function(){return oa(this,function(F){return u?[2,K(J.record.id)]:[2,Promise.resolve()]})})},[u,K]),ae=D.useMemo(function(){var J;return(J=V==null?void 0:V.reduce(function(F,Oe){return V.some(function(Re){var ke;return(ke=Re.children)===null||ke===void 0?void 0:ke.includes(Oe.id)})||F.push(Oe.id),F},[]))!==null&&J!==void 0?J:[]},[V]),le=te(function(J){var F=J.destination,Oe=J.position;if(V==null)return!1;if(e)return!0;var Re=ae.includes(F.id);return!(Re&&Oe===-1)});if(z||V==null)return null;var pe=!V||V.length===0||e;return E.jsx(Br,{value:W,children:E.jsxs(ca,{className:a,sx:C,children:[E.jsx("div",{className:me.cardTree,children:E.jsx(Wt,{children:E.jsxs(Xn,{className:me.cardContentTree,children:[E.jsx(Ht,yt({allowDrop:le,data:V,hideRootNodes:s,titleField:m,onDrop:Y,onExpand:ee,onClick:U,selectedKeys:I,showLine:j,nodeActions:b,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:X},ua(P))),pe?v:null]})})}),E.jsx("div",{className:me.actionCard,children:E.jsxs(Hn,{children:[r?E.jsx(Be,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,g?E.jsx(Be,{path:":id/show/*",element:typeof g=="function"?E.jsx(g,{}):g}):null,c?E.jsx(Be,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,p!==!1?E.jsx(Be,{path:"*",element:E.jsx(Lt,{title:p,defaultTitle:Q})}):null]})})]})})},"TreeWithDetails"),ua=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var n=vn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return n},"sanitizeRestProps"),Te="RaTreeWithDetails",me={container:"".concat(Te,"-container"),cardTree:"".concat(Te,"-cardTree"),cardContentTree:"".concat(Te,"-cardContentTree"),actionCard:"".concat(Te,"-actionCard")},ca=we("div",{name:Te,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((xe={display:"flex"},xe["& .".concat(me.actionCard)]={width:"100%"},xe["& .".concat(me.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},xe["& .".concat(me.cardContentTree)]={},xe["& .".concat(me.container)]={display:"flex"},xe)),da=d(function(t){var n=t.linkTo,e=t.show,a=t.edit;return n||(e?"show":a?"edit":!1)},"getLinkTo"),gt=function(){return gt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt.apply(this,arguments)},la=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},pa=d(function(t){var n,e=t.children,a=t.className,r=t.resource,i=la(t,["children","className","resource"]),c=Jn(function(l){return l.breakpoints.down("sm")});return E.jsx(sa,gt({className:$e((n={},n[Ee.mobileToolbar]=c,n[Ee.desktopToolbar]=!c,n),a),role:"toolbar"},i,{children:D.Children.count(e)===0?E.jsxs("div",{className:Ee.defaultToolbar,children:[E.jsx(Vn,{}),E.jsx(aa,{resource:r})]}):e}))},"EditNodeToolbar"),Le="RaEditNodeToolbar",Ee={desktopToolbar:"".concat(Le,"-desktopToolbar"),mobileToolbar:"".concat(Le,"-mobileToolbar"),defaultToolbar:"".concat(Le,"-defaultToolbar")},sa=we(Yn,{name:Le,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n,e=t.theme;return n={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},n["&.".concat(Ee.desktopToolbar)]={},n["&.".concat(Ee.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},n["& .".concat(Ee.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},n});export{Ca as AddChildButton,ba as CreateNode,aa as DeleteBranchButton,ea as DeleteBranchWithConfirmButton,Vr as DeleteBranchWithUndoButton,dn as DeleteMenuItem,Ir as DeleteMenuItemWithConfirmation,Wr as DeleteMenuItemWithUndo,fn as DeleteWithConfirmButtonClasses,Sa as EditNode,pa as EditNodeToolbar,Ee as EditNodeToolbarClasses,Gr as NodeActions,ja as NodeEditActions,ma as ReferenceNodeInput,wa as ShowNode,Ht as Tree,un as TreeChoicesContext,Mr as TreeChoicesContextProvider,Kn as TreeContext,Br as TreeContextProvider,Pr as TreeInput,Dr as TreeInputClasses,Ar as TreeInputTree,_a as TreeWithDetails,me as TreeWithDetailsClasses,he as UNSAVED_NEW_NODE,Ea as addTreeMethodsBasedOnChildren,ha as addTreeMethodsBasedOnParentAndPosition,On as deleteBranchByDeletingAllChildren,pn as deleteBranchByDeletingNode,ga as fixFakeRestDataProvider,Na as getRCTree,Pa as getRCTreeDatum,Da as getRecordTree,Aa as getRootAndChildNodes,Ra as raTreeLanguageEnglish,ka as raTreeLanguageFrench,ya as removeChildren,Ma as renderSwitcherIcon,xn as updateQueryCacheFromGetTree,Sn as useAddChildNode,vr as useAddRootNode,Cr as useCreateNodeController,en as useDeleteBranch,rn as useDeleteBranchWithConfirmController,an as useDeleteBranchWithUndoController,Ta as useEditNodeController,zt as useExpandedKeys,yr as useGetChildNodesCallback,En as useGetRootNodes,Qt as useGetTree,gr as useGetTreeCallback,br as useMoveAsNthChildOf,_r as useMoveAsNthSiblingOf,Rr as useReferenceNodeInputController,Tr as useTreeChoicesContext,_t as useTreeContext,Nr as useTreeController,qr as useTreeInputController};
//# sourceMappingURL=index-CB4Go-ZE.js.map
