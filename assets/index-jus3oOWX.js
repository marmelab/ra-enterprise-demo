var cn=Object.defineProperty;var d=(t,r)=>cn(t,"name",{value:r,configurable:!0});import{ah as re,ai as Mt,aj as dn,ak as ln,u as _e,L as Be,al as Xe,M as Tt,o as $t,ab as sn,am as mt,p as k,an as fn,ao as bt,m as vn,ap as hn,aq as yn,V as we,E as qe,ar as qt,C as Bt,as as gn,at as mn,au as Pe,av as Ne,aw as De,ax as _t,ay as ie,az as bn,aA as Ie,a6 as le,aB as wt,aC as _n,aD as wn,aE as pn,aF as Lt,aG as On,aH as ye,aI as Kt,j as E,ad as He,T as xn,aJ as Cn,ag as Sn,I as jn,aK as It,i as En,aL as Pn,z as Nn,ac as Dn,aM as An,aN as Rn,aO as kn,r as Mn,a as Tn,b as $n,g as qn,aP as Wt,aQ as Qt,aR as We,aS as Bn,n as Ut,aT as zt,aU as Gt,aV as Ln,aW as Kn,O as In,P as Wn,aX as Je,f as Qn,aY as Un,aZ as Le,a7 as zn,a_ as Gn,a$ as Vn}from"./index-CO32ohVO.js";import{b2 as Oa,b0 as xa,b1 as Ca,b5 as Sa,b8 as ja,b7 as Ea,b6 as Pa,b9 as Na,bb as Da,ba as Aa,b3 as Ra,b4 as ka}from"./index-CO32ohVO.js";var nt=function(){return nt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},nt.apply(this,arguments)},Xn=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Hn=d(function(t){t===void 0&&(t={});var r=t.disableAuthentication,e=r===void 0?!1:r,n=t.id,a=t.queryOptions,o=a===void 0?{}:a,c=re(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var s=Mt({enabled:!e}).isPending,l=dn({action:"show",resource:c,enabled:!e&&!s}).isPending,i=ln(c),u=_e(),f=Be(),g=Xe(),b=Tt(),x=$t().id;if(!x&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var C=n??x,p=o.meta,m=Xn(o,["meta"]),h=sn(c,{id:C,meta:p},nt({enabled:!s&&!l||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),g("list",c),b()},"onError"),retry:!1},m)),v=h.data,y=h.error,w=h.isLoading,O=h.isFetching,S=h.isPending,j=h.refetch;if(v&&v.id&&v.id!=C)throw new Error("useShowController: Fetched record's id attribute (".concat(v.id,") must match the requested 'id' (").concat(C,")"));var _=mt(),N=i(v),P=u("ra.page.show",{name:_(c,1),id:C,record:v,recordRepresentation:typeof N=="string"?N:""});return{defaultTitle:P,error:y,isLoading:w,isFetching:O,isPending:S,record:v,refetch:j,resource:c}},"useShowController"),pt=k.createContext(null);pt.displayName="ShowContext";var Jn=d(function(t){var r=t.children,e=t.value;return k.createElement(pt.Provider,{value:e},k.createElement(fn,{value:e&&e.record},r))},"ShowContextProvider"),Yn=d(function(){var t=k.useContext(pt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),rt=function(){return rt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},rt.apply(this,arguments)},Zn=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Fn=d(function(t){var r=bt(t).hasEdit;return k.createElement(vn,rt({},er(t)),r&&k.createElement(hn,null))},"ShowActions"),er=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var r=Zn(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return r},"sanitizeRestProps$1"),at=function(){return at=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},at.apply(this,arguments)},tr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},ke,nr=k.createElement(Fn,null),rr=d(function(t){var r,e=yn({props:t,name:$e}),n=e.actions,a=e.aside,o=e.children,c=e.className,s=e.component,l=s===void 0?Bt:s,i=e.emptyWhileLoading,u=i===void 0?!1:i,f=e.title,g=tr(e,["actions","aside","children","className","component","emptyWhileLoading","title"]),b=Yn(),x=b.resource,C=b.defaultTitle,p=b.record,m=bt().hasEdit,h=typeof n>"u"&&m?nr:n;return!o||!p&&u?null:k.createElement(ar,at({className:qe("show-page",c)},g),f!==!1&&k.createElement(qt,{title:f,defaultTitle:C,preferenceKey:"".concat(x,".show.title")}),h!==!1&&h,k.createElement("div",{className:qe(je.main,(r={},r[je.noActions]=!h,r))},k.createElement(l,{className:je.card},o),a))},"ShowView"),$e="RaShow",je={main:"".concat($e,"-main"),noActions:"".concat($e,"-noActions"),card:"".concat($e,"-card")},ar=we("div",{name:$e,overridesResolver:d(function(t,r){return r.root},"overridesResolver")})((ke={},ke["& .".concat(je.main)]={display:"flex"},ke["& .".concat(je.noActions)]={marginTop:"1em"},ke["& .".concat(je.card)]={flex:"1 1 auto"},ke)),z=function(){return z=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},z.apply(this,arguments)},ue=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},ce=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},fa=d(function(t,r,e,n){r===void 0&&(r="parent_id"),e===void 0&&(e="position"),n===void 0&&(n=!1);var a=n?gn:mn,o=z(z({},t),{getTree:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:s==null?void 0:s.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=u.sent().data,i=l.map(function(f){return z(z({},f),{children:l.filter(function(g){return g[r]==f.id}).sort(function(g,b){return g[e]-b[e]}).map(function(g){return g.id})})}),[2,{data:i}]}})})},"getTree"),getRootNodes:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:z(z({},s==null?void 0:s.filter),(u={},u[r]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=f.sent().data,[4,Promise.all(l.map(function(g){var b;return t.getList(c,{filter:(b={},b[r]=g.id,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta}).then(function(x){var C=x.data;return z(z({},g),{children:C.map(function(p){var m=p.id;return m})})})}))];case 2:return i=f.sent(),[2,{data:i}]}})})},"getRootNodes"),getParentNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b=i.childId,x=i.meta;return ce(this,function(C){switch(C.label){case 0:return[4,o.getTree(l,{meta:x})];case 1:return u=C.sent().data,f=u.find(function(p){return p.id===b}),f?(g=u.find(function(p){return p.id===f[r]}),[2,{data:g}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b=i.parentId,x=i.meta;return ce(this,function(C){switch(C.label){case 0:return[4,t.getList(l,{filter:(g={},g[r]=b,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x})];case 1:return u=C.sent().data,[4,Promise.all(u.map(function(p){var m;return t.getList(l,{filter:(m={},m[r]=p.id,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x}).then(function(h){var v=h.data;return z(z({},p),{children:v.map(function(y){var w=y.id;return w})})})}))];case 2:return f=C.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b,x,C,p=i.source,m=i.destination,h=i.position,v=i.meta;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(l,{filter:(b={},b[r]=m.id,b["".concat(e,"_gte")]=h,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=y.sent().data,u.length>0?[4,Promise.all(u.map(function(w){var O;return t.update(l,{id:w.id,data:(O={},O[e]=w[e]+1,O),previousData:w,meta:v})}))]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,t.getList(l,{filter:(x={},x[r]=p[r],x["".concat(e,"_gt")]=p[e],x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=y.sent().data,f.length>0?[4,Promise.all(f.map(function(w){var O;return t.update(l,{id:w.id,data:(O={},O[e]=w[e]-1,O),previousData:w,meta:v})}))]:[3,6];case 5:y.sent(),y.label=6;case 6:return[4,t.update(l,{id:p.id,data:(C={},C[r]=m.id,C[e]=h,C),previousData:p,meta:v})];case 7:return g=y.sent().data,[2,{data:g}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b,x,C,p,m,h,v,y,w,O,S,j=i.source,_=i.destination,N=i.position,P=i.meta;return ce(this,function(M){switch(M.label){case 0:return(N===0||N===-1)&&(u=(C={},C[r]=_[r],C)),j[e]>_[e]&&j[r]===_[r]&&(N===-1?u=(p={},p[r]=_[r],p["".concat(e,"_gte")]=_[e],p):u=(m={},m[r]=_[r],m["".concat(e,"_gt")]=_[e],m)),j[r]!==_[r]&&N>0&&(u=(h={},h[r]=_[r],h["".concat(e,"_gt")]=_[e],h)),u?[4,t.getList(l,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:P})]:[3,3];case 1:return f=M.sent().data,f.length>0?[4,Promise.all(f.map(function(R){var A;return R.id===j.id?Promise.resolve(void 0):t.update(l,{id:R.id,data:(A={},A[e]=R[e]+1,A),previousData:R,meta:P})}))]:[3,3];case 2:M.sent(),M.label=3;case 3:return j[r]===_[r]?j[e]>_[e]?g=(v={},v[r]=j[r],v["".concat(e,"_gt")]=j[e],v):g=(y={},y[r]=j[r],y["".concat(e,"_gt")]=j[e],y["".concat(e,"_lte")]=_[e],y):g=(w={},w[r]=j[r],w["".concat(e,"_gt")]=j[e],w),[4,t.getList(l,{filter:g,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:P})];case 4:return b=M.sent().data,b.length>0?[4,Promise.all(b.map(function(R){var A;return R.id===j.id?Promise.resolve(void 0):t.update(l,{id:R.id,data:(A={},A[e]=R[e]-1,A),previousData:R,meta:P})}))]:[3,6];case 5:M.sent(),M.label=6;case 6:return x=j[r]===_[r]?j[e]>_[e]?_[e]+1:_[e]:N<0?0:N,N===-1&&(x=0),[4,t.update(l,{id:j.id,data:(O={},O[r]=(S=_[r])!==null&&S!==void 0?S:null,O[e]=x,O),previousData:j,meta:P})];case 7:return M.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b,x,C=i.data,p=i.meta;return ce(this,function(m){switch(m.label){case 0:return[4,t.getList(l,{filter:(b={},b[r]=null,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:p})];case 1:return u=m.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(l,{data:z(z({},C),(x={},x[r]=null,x[e]=f,x)),meta:p})];case 2:return g=m.sent().data,[2,{data:z(z({},g),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,i){var u,f,g,b,x,C,p=i.parentId,m=i.data,h=i.meta,v=i.position;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(l,{filter:(x={},x[r]=p,x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(w,O){return O[e]>w?O[e]:w},-1/0)+1:0,g=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(l,{data:z(z({},m),(C={},C[r]=p,C[e]=g,C)),meta:h})];case 2:return b=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(w){var O;w[e]>=v&&t.update(l,{id:w.id,data:z(z({},w),(O={},O[e]=w[e]+1,O)),previousData:w,meta:h})}),[2,{data:z(z({},b),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,i,u,f;return ce(this,function(g){switch(g.label){case 0:return l=s.id,i=s.previousData,u=s.meta,[4,a(o,c,s)];case 1:return g.sent(),[4,o.getChildNodes(c,{parentId:i[r],meta:u})];case 2:return f=g.sent().data,[4,Promise.all(f.filter(function(b){return b[e]>i[e]&&b.id!==l}).map(function(b){var x;return t.update(c,{id:b.id,data:z(z({},b),(x={},x[e]=b[e]-1,x)),previousData:b,meta:u})}))];case 3:return g.sent(),[2,{data:i}]}})})},"deleteBranch")});return o},"addTreeMethodsBasedOnParentAndPosition"),Ce=function(){return Ce=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ce.apply(this,arguments)},or=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},ir=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ur=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},cr=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},dr=d(function(t,r,e){r===void 0&&(r={}),e===void 0&&(e={});var n=Pe(),a=Ne(),o=k.useRef(r),c=De(Ce(Ce({mutationFn:d(function(l){var i=l===void 0?{}:l,u=i.resource,f=u===void 0?t:u,g=i.data,b=g===void 0?o.current.data:g,x=i.meta,C=x===void 0?o.current.meta:x;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(b==null)throw new Error("useAddRootNode mutation requires non-empty data");return n.addRootNode(f,{data:b,meta:C}).then(function(p){var m=p.data;return m})},"mutationFn")},e),{onSuccess:d(function(l,i,u){i===void 0&&(i={});var f=i.resource,g=f===void 0?t:f;a.setQueryData([g,"getOne",{id:String(l.id)}],l),e.onSuccess&&e.onSuccess(l,i,u)},"onSuccess")})),s=d(function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];return or(void 0,cr([],l,!0),void 0,function(u,f,g){var b,x;return u===void 0&&(u=t),f===void 0&&(f={}),g===void 0&&(g={}),ir(this,function(C){return b=g.returnPromise,x=ur(g,["returnPromise"]),b?[2,c.mutateAsync(Ce({resource:u},f),g)]:(c.mutate(Ce({resource:u},f),x),[2])})})},"addRootNode");return[s,c]},"useAddRootNode"),te=function(){return te=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},te.apply(this,arguments)},Ot=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},xt=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},lr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Ye=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},Vt=d(function(t,r,e){r===void 0&&(r={}),e===void 0&&(e={});var n=Pe(),a=Ne(),o=r.id,c=r.previousData,s=e.mutationMode,l=s===void 0?"pessimistic":s,i=lr(e,["mutationMode"]),u=k.useRef(l),f=k.useRef(r),g=k.useRef([]),b=d(function(p){var m=p.resource,h=p.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,w=d(function(S,j){var _=S.findIndex(function(T){return T.id==j});if(_===-1)return S;for(var N=S[_],P=Ye(Ye([],S.slice(0,_),!0),S.slice(_+1),!0),M=N.children||[],R=0,A=M;R<A.length;R++){var D=A[R];P=w(P,D)}return P},"removeRecord"),O=d(function(S){var j=w(S,h);return j.map(function(_){return te(te({},_),{children:_.children?_.children.filter(function(N){return N!==h}):_.children})})},"updateCollection");a.setQueriesData({queryKey:[m,"getTree"]},function(S){if(!S)return S;var j=O(S),_=j.length<S.length;return _?j:S},{updatedAt:y}),a.setQueriesData({queryKey:[m,"getRootNodes"]},function(S){return S&&S.length>0?O(S):S},{updatedAt:y}),a.setQueriesData({queryKey:[m,"getChildNodes"]},function(S){if(!S)return S;var j=O(S),_=j.length<S.length;return _?j:S},{updatedAt:y})},"updateCache"),x=De(te(te({mutationFn:d(function(p){var m=p===void 0?{}:p,h=m.resource,v=h===void 0?t:h,y=m.id,w=y===void 0?f.current.id:y,O=m.previousData,S=O===void 0?f.current.previousData:O,j=m.meta,_=j===void 0?f.current.meta:j;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(w==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(S==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return n.deleteBranch(v,{id:w,previousData:S,meta:_}).then(function(N){var P=N.data;return P})},"mutationFn")},i),{onMutate:d(function(p){return Ot(void 0,void 0,void 0,function(){var m;return xt(this,function(h){switch(h.label){case 0:return i.onMutate?[4,i.onMutate(p)]:[3,2];case 1:return m=h.sent()||{},[2,te({snapshot:g.current},m)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(p,m,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],w=v[1];a.setQueryData(y,w)}),i.onError)return i.onError(p,m,h)},"onError"),onSuccess:d(function(p,m,h){if(m===void 0&&(m={}),u.current==="pessimistic"){var v=m.resource,y=v===void 0?t:v,w=m.id,O=w===void 0?o:w;b({resource:y,id:O}),i.onSuccess&&i.onSuccess(p,m,h)}},"onSuccess"),onSettled:d(function(p,m,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var w=y[0];a.invalidateQueries({queryKey:w})}),i.onSettled)return i.onSettled(p,m,h,v)},"onSettled")})),C=d(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return Ot(void 0,Ye([],p,!0),void 0,function(h,v,y){var w,O,S,j,_,N,P,M,R;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),xt(this,function(A){switch(A.label){case 0:return w=y.mutationMode,O=y.onSuccess,S=y.onSettled,j=y.onError,f.current=r,w&&(u.current=w),u.current==="pessimistic"?[2,x.mutate(te({resource:h},v),{onSuccess:O,onSettled:S,onError:j})]:(_=v.id,N=_===void 0?o:_,P=v.previousData,M=P===void 0?c:P,R=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],g.current=R.reduce(function(D,T){return D.concat(a.getQueriesData({queryKey:T}))},[]),[4,Promise.all(g.current.map(function(D){var T=D[0];return a.cancelQueries({queryKey:T})}))]);case 1:return A.sent(),b({resource:h,id:N}),O&&setTimeout(function(){return O(M,te({resource:h},v),{snapshot:g.current})},0),i.onSuccess&&setTimeout(function(){i.onSuccess&&i.onSuccess(M,te({resource:h},v),{snapshot:g.current})},0),u.current==="optimistic"?[2,x.mutate(te({resource:h},v),{onSettled:S,onError:j})]:(_t.once("end",function(D){var T=D.isUndo;T?g.current.forEach(function(B){var $=B[0],L=B[1];a.setQueryData($,L)}):x.mutate(te({resource:h},v),{onSettled:S,onError:j})}),[2])}})})},"mutate");return[C,x]},"useDeleteBranch"),ge=function(){return ge=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ge.apply(this,arguments)},sr=d(function(t,r,e){var n=Pe(),a=De(ge({mutationKey:[t,"getChildNodes",r],mutationFn:d(function(c){return n.getChildNodes(t,ge(ge({},r),c)).then(function(s){var l=s.data;return l})},"mutationFn")},e)),o=ie(function(c){return a.mutateAsync(ge(ge({},r),{parentId:c}))});return o},"useGetChildNodesCallback"),Qe=function(){return Qe=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Qe.apply(this,arguments)},va=d(function(t){return Qe(Qe({},t),{children:t.children.map(function(r){return r.id})})},"removeChildren"),ot=function(){return ot=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ot.apply(this,arguments)},fr=d(function(t,r,e){r===void 0&&(r={}),e===void 0&&(e={});var n=Pe(),a=Ne(),o=De(ot({mutationKey:[t,"getTree",r],mutationFn:d(function(){return n.getTree(t,r).then(function(s){var l=s.data;return l})},"mutationFn"),onSuccess:d(function(s){bn(a,t,s,r)},"onSuccess")},e)),c=k.useCallback(function(){return o.mutateAsync(r)},[o,r]);return c},"useGetTreeCallback"),ae=function(){return ae=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ae.apply(this,arguments)},Ct=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},St=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},vr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},fe=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},hr=d(function(t,r,e){r===void 0&&(r={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Pe(),a=Ne(),o=r.source,c=r.destination,s=r.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=vr(e,["mutationMode"]),f=k.useRef(i),g=k.useRef(r),b=k.useRef([]),x=d(function(m){var h=m.resource,v=m.position,y=m.source,w=m.destination,O=Date.now(),S=f.current==="undoable"?O+5*1e3:O,j=d(function(_){var N,P,M,R,A,D=Ie(_),T=D.find(function($){var L;return(L=$.children)===null||L===void 0?void 0:L.includes(y.id)});T?T.children=(N=T.children)===null||N===void 0?void 0:N.filter(function($){return $!==y.id}):D=D.filter(function($){return $.id!==y.id});var B=D.find(function($){return $.id===w.id});return B?B.children=fe(fe(fe([],(M=(P=B.children)===null||P===void 0?void 0:P.slice(0,v))!==null&&M!==void 0?M:[],!0),[y.id],!1),(A=(R=B.children)===null||R===void 0?void 0:R.slice(v))!==null&&A!==void 0?A:[],!0):(D=D.filter(function($){return $.id!==y.id}),D=fe(fe(fe([],D.slice(0,v),!0),[y],!1),D.slice(v),!0)),D},"updateCollection");a.setQueriesData({queryKey:[h,"getTree"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S}),a.setQueriesData({queryKey:[h,"getRootNodes"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S}),a.setQueriesData({queryKey:[h,"getChildNodes"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S})},"updateCache"),C=De(ae(ae({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,w=h.position,O=w===void 0?g.current.position:w,S=h.source,j=S===void 0?g.current.source:S,_=h.destination,N=_===void 0?g.current.destination:_,P=h.meta,M=P===void 0?g.current.meta:P;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return n.moveAsNthChildOf(y,{position:O,source:j,destination:N,meta:M}).then(function(R){var A=R.data;return A})},"mutationFn")},u),{onMutate:d(function(m){return Ct(void 0,void 0,void 0,function(){var h;return St(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,ae({snapshot:b.current},h)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var w=y[0],O=y[1];a.setQueryData(w,O)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var w=v.resource,O=w===void 0?t:w;if(a.invalidateQueries({queryKey:[O,"getTree"]}),a.invalidateQueries({queryKey:[O,"getRootNodes"]}),a.invalidateQueries({queryKey:[O,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return Ct(void 0,fe([],m,!0),void 0,function(v,y,w){var O,S,j,_,N,P,M,R,A,D,T;return v===void 0&&(v=t),y===void 0&&(y={}),w===void 0&&(w={}),St(this,function(B){switch(B.label){case 0:if(O=w.mutationMode,S=w.onSuccess,j=w.onSettled,_=w.onError,g.current=r,O&&(f.current=O),f.current==="pessimistic")return[2,C.mutate(ae({resource:v},y),{onSuccess:S,onSettled:j,onError:_})];if(N=y.position,P=N===void 0?s:N,M=y.source,R=M===void 0?o:M,A=y.destination,D=A===void 0?c:A,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=T.reduce(function($,L){return $.concat(a.getQueriesData({queryKey:L}))},[]),[4,Promise.all(b.current.map(function($){var L=$[0];return a.cancelQueries({queryKey:L})}))];case 1:return B.sent(),x({resource:v,position:P,source:R,destination:D}),S&&setTimeout(function(){return S(void 0,ae({resource:v},y),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ae({resource:v},y),{snapshot:b.current})},0),f.current==="optimistic"?[2,C.mutate(ae({resource:v},y),{onSettled:j,onError:_})]:(_t.once("end",function($){var L=$.isUndo;L?b.current.forEach(function(K){var I=K[0],J=K[1];a.setQueryData(I,J)}):C.mutate(ae({resource:v},y),{onSettled:j,onError:_})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},oe.apply(this,arguments)},jt=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},Et=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},yr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},ve=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},gr=d(function(t,r,e){r===void 0&&(r={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Pe(),a=Ne(),o=r.source,c=r.destination,s=r.position,l=e.mutationMode,i=l===void 0?"undoable":l,u=yr(e,["mutationMode"]),f=k.useRef(i),g=k.useRef(r),b=k.useRef([]),x=d(function(m){var h=m.resource,v=m.position,y=m.source,w=m.destination,O=Date.now(),S=f.current==="undoable"?O+5*1e3:O,j=d(function(_){var N,P,M,R,A,D=Ie(_),T=D.find(function(K){var I;return(I=K.children)===null||I===void 0?void 0:I.includes(y.id)}),B=D.find(function(K){var I;return(I=K.children)===null||I===void 0?void 0:I.includes(w.id)}),$=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(K){return K===y.id})<T.children.findIndex(function(K){return K===w.id})&&($=v-1);var L=$<0?0:$;return T?T.children=(N=T.children)===null||N===void 0?void 0:N.filter(function(K){return K!==y.id}):D=D.filter(function(K){return K.id!==y.id}),B?B.children=ve(ve(ve([],(M=(P=B.children)===null||P===void 0?void 0:P.slice(0,L))!==null&&M!==void 0?M:[],!0),[y.id],!1),(A=(R=B.children)===null||R===void 0?void 0:R.slice(L))!==null&&A!==void 0?A:[],!0):(D=D.filter(function(K){return K.id!==y.id}),D=ve(ve(ve([],D.slice(0,L),!0),[y],!1),D.slice(L),!0)),D},"updateCollection");a.setQueriesData({queryKey:[h,"getTree"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S}),a.setQueriesData({queryKey:[h,"getRootNodes"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S}),a.setQueriesData({queryKey:[h,"getChildNodes"]},function(_){return _&&_.length>0?j(_):_},{updatedAt:S})},"updateCache"),C=De(oe(oe({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,w=h.position,O=w===void 0?g.current.position:w,S=h.source,j=S===void 0?g.current.source:S,_=h.destination,N=_===void 0?g.current.destination:_,P=h.meta,M=P===void 0?g.current.meta:P;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return n.moveAsNthSiblingOf(y,{position:O,source:j,destination:N,meta:M}).then(function(R){var A=R.data;return A})},"mutationFn")},u),{onMutate:d(function(m){return jt(void 0,void 0,void 0,function(){var h;return Et(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,oe({snapshot:b.current},h)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var w=y[0],O=y[1];a.setQueryData(w,O)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var w=v.resource,O=w===void 0?t:w;if(a.invalidateQueries({queryKey:[O,"getTree"]}),a.invalidateQueries({queryKey:[O,"getRootNodes"]}),a.invalidateQueries({queryKey:[O,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return jt(void 0,ve([],m,!0),void 0,function(v,y,w){var O,S,j,_,N,P,M,R,A,D,T;return v===void 0&&(v=t),y===void 0&&(y={}),w===void 0&&(w={}),Et(this,function(B){switch(B.label){case 0:if(O=w.mutationMode,S=w.onSuccess,j=w.onSettled,_=w.onError,g.current=r,O&&(f.current=O),f.current==="pessimistic")return[2,C.mutate(oe({resource:v},y),{onSuccess:S,onSettled:j,onError:_})];if(N=y.position,P=N===void 0?s:N,M=y.source,R=M===void 0?o:M,A=y.destination,D=A===void 0?c:A,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],b.current=T.reduce(function($,L){return $.concat(a.getQueriesData({queryKey:L}))},[]),[4,Promise.all(b.current.map(function($){var L=$[0];return a.cancelQueries({queryKey:L})}))];case 1:return B.sent(),x({resource:v,position:P,source:R,destination:D}),S&&setTimeout(function(){return S(void 0,oe({resource:v},y),{snapshot:b.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},y),{snapshot:b.current})},0),f.current==="optimistic"?[2,C.mutate(oe({resource:v},y),{onSettled:j,onError:_})]:(_t.once("end",function($){var L=$.isUndo;L?b.current.forEach(function(K){var I=K[0],J=K[1];a.setQueryData(I,J)}):C.mutate(oe({resource:v},y),{onSettled:j,onError:_})}),[2])}})})},"mutate");return[p,C]},"useMoveAsNthSiblingOf"),de=function(){return de=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},de.apply(this,arguments)},Pt=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},Nt=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ha=d(function(t){return de(de({},t),{getRootNodes:d(function(r,e){return Pt(void 0,void 0,void 0,function(){var n,a;return Nt(this,function(o){switch(o.label){case 0:return[4,t.getRootNodes(r,e)];case 1:return n=o.sent().data,a=n.filter(function(c){return c.parent_id==null}),[2,{data:a,total:a.length}]}})})},"getRootNodes"),addRootNode:d(function(r,e){return Pt(void 0,[r,e],void 0,function(n,a){var o,c,s,l,i=a.data,u=a.meta;return Nt(this,function(f){switch(f.label){case 0:return[4,t.getList(n,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return o=f.sent().data,c=o.filter(function(g){return typeof g.parent_id>"u"}),s=c.length>0?c.reduce(function(g,b){return b.position>g?b.position:g},-1/0)+1:0,[4,t.create(n,{data:de(de({},i),{parent_id:null,position:s}),meta:u})];case 2:return l=f.sent().data,[2,{data:de(de({},l),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),Dt=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},Xt=d(function(t,r){var e,n=t.filter(function(c){return c.id!==r.id}),a=n.find(function(c){var s;return(s=c.children)===null||s===void 0?void 0:s.includes(r.id)});if(a&&(a.children=(e=a.children)===null||e===void 0?void 0:e.filter(function(c){return c!==r.id})),!r.children||r.children.length===0)return n;var o=Ht(n,r);return n=n.filter(function(c){return!o.includes(c)}),n},"removeNode"),Ht=d(function(t,r){return r?!r.children||r.children.length===0?[]:Dt(Dt([],r.children,!0),r.children.flatMap(function(e){var n=t.find(function(a){return a.id===e});return n?Ht(t,n):[]}),!0):[]},"getNodeChildrenRecursive"),it=function(){return it=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},it.apply(this,arguments)},Jt=d(function(t){var r=t.mutationMode,e=t.mutationOptions,n=t.redirect,a=n===void 0?"list":n,o=Be(),c=Xe(),s=Tt(),l=re(t);if(l==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=le(t);if(i==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Vt(),f=u[0],g=u[1].isPending,b=k.useState(!1),x=b[0],C=b[1],p=wt().setFinalData,m=k.useCallback(function(y){y.stopPropagation(),f(l,{id:i.id,previousData:i},it({mutationMode:r,onSuccess:d(function(){o("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(a,l),r==="pessimistic"?s():p&&p(function(w){return Xt(w,i)})},"onSuccess"),onError:d(function(w){o(typeof w=="string"?w:w.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,r,e,o,i,c,a,s,l,p]),h=d(function(y){y.stopPropagation(),C(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),C(!1)},"handleDialogClose");return{handleDelete:m,handleDialogOpen:h,handleDialogClose:v,isPending:g,open:x}},"useDeleteBranchWithConfirmController"),ut=function(){return ut=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ut.apply(this,arguments)},Yt=d(function(t){var r=t.mutationOptions,e=t.redirect,n=e===void 0?"list":e,a=Be(),o=Xe(),c=wt().setFinalData,s=re(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var l=le(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var i=Vt(),u=i[0],f=i[1].isPending,g=k.useCallback(function(b){b.stopPropagation(),u(s,{id:l.id,previousData:l},ut({onSuccess:d(function(){a("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(x){return Xt(x,l)}),o(n,s)},"onSuccess"),onError:d(function(x){return a(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},r))},[u,r,a,l,o,n,s,c]);return{handleDelete:g,isPending:f}},"useDeleteBranchWithUndoController"),Se=function(){return Se=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Se.apply(this,arguments)},mr=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},br=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},_r=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},wr=d(function(t){var r=t.disableAuthentication,e=t.record,n=e===void 0?{}:e,a=t.redirect,o=t.mutationOptions,c=o===void 0?{}:o,s=t.transform;Mt({enabled:!r});var l=re(t);if(l==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=mt(),u=Ne(),f=_n(),g=wt().handleAddNode,b=f.state&&f.state.parentId,x=f.state&&f.state.insertAsFirstChild,C=typeof b<"u"&&b!==null,p=f.state&&f.state.record||n,m=c.onSuccess,h=c.onError,v=_r(c,["onSuccess","onError"]),y=bt(t),w=y.hasEdit,O=y.hasShow,S=a||pr(O,w),j=dr(l,void 0,v),_=j[0],N=j[1],P=wn(l,void 0,v),M=P[0],R=P[1],A=ie(g??Or);k.useEffect(function(){return A({record:{},parentId:b,insertAsFirstChild:x}),function(){A(void 0)}},[A,b,x]);var D=_e(),T=Be(),B=Xe(),$=k.useCallback(function(I,J){var W=J===void 0?{}:J,U=W.onSuccess,Q=W.onError,q=W.transform,X=d(function(H){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(S,l,H.id,H),u.refetchQueries({queryKey:[l,"getTree"],type:"active"}),u.refetchQueries({queryKey:[l,"getRootNodes"],type:"active"})},"defaultOnSuccess"),Y=d(function(H){T(typeof H=="string"?H:H.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(q?q(I):s?s(I):I).then(function(H){return mr(void 0,void 0,void 0,function(){var ee,V,Z;return br(this,function(ne){switch(ne.label){case 0:ee={onSuccess:d(function(se,pe,G){A(void 0),U?U(se,pe,G):m?m(se,pe,G):X(se)},"onSuccess"),onError:Q||h||Y},ne.label=1;case 1:return ne.trys.push([1,6,,7]),C?[4,M(l,{data:H,parentId:b,meta:v.meta,position:x?0:void 0},Se(Se({},ee),{returnPromise:!0}))]:[3,3];case 2:return ne.sent(),[3,5];case 3:return[4,_(l,{data:H,meta:v.meta},Se(Se({},ee),{returnPromise:!0}))];case 4:ne.sent(),ne.label=5;case 5:return[3,7];case 6:return V=ne.sent(),(V instanceof pn||typeof V=="object"&&V!==null&&V.hasOwnProperty("body"))&&((Z=V.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,V.body.errors]:[3,7];case 7:return[2]}})})})},[M,_,A,C,T,h,m,b,u,B,l,s,v.meta,S,x]),L=i(l,1),K=D("ra.page.create",{name:"".concat(L)});return{isLoading:!1,isFetching:!1,defaultTitle:K,save:$,saving:N.isPending||R.isPending,isPending:N.isPending||R.isPending,resource:l,record:p,redirect:S}},"useCreateNodeController"),pr=d(function(t,r){return r?"edit":t?"show":"list"},"getDefaultRedirectRoute"),Or=d(function(){},"noop"),xr=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},Zt=d(function(t,r){var e=r.find(function(n){return n.id==t});return e?xr([e.id.toString()],(e.children||[]).flatMap(function(n){return Zt(n,r)}),!0):[]},"getNodeKeysRecursively"),me=function(){return me=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},me.apply(this,arguments)},Ze=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},Fe=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},et=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},he=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},Cr=d(function(t){var r=_e(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var n=mt(),a=t.lazy,o=a===void 0?!1:a,c=t.filter,s=c===void 0?{}:c,l=t.mutationMode,i=l===void 0?"undoable":l,u=t.meta,f=Lt(e,{filter:s,meta:u},{enabled:!o}),g=On(e,{filter:s,meta:u},{enabled:o,gcTime:0}),b=sr(e,{meta:u}),x=k.useMemo(function(){var W;return(W=g.data)===null||W===void 0?void 0:W.map(function(U){var Q=U.children,q=et(U,["children"]);return Q!=null&&Q.length?q:U})},[g.data,g.isFetching]),C=o?me(me({},g),{data:x}):f,p=C.data,m=C.error,h=C.isLoading,v=C.isPending,y=C.isFetching,w=k.useState(p),O=w[0],S=w[1],j=ie(function(W){return Ze(void 0,void 0,void 0,function(){var U;return Fe(this,function(Q){switch(Q.label){case 0:return[4,b(W)];case 1:return U=Q.sent(),S(function(q){var X,Y=U.map(function(V){var Z=V.children,ne=et(V,["children"]),se=q==null?void 0:q.some(function(pe){var G;return(G=V.children)===null||G===void 0?void 0:G.includes(pe.id)});return Z!=null&&Z.length&&!se?ne:V}),H=he(he([],(X=q==null?void 0:q.map(function(V){return V.id===W?me(me({},V),{children:Y.map(function(Z){return Z.id})}):V}))!==null&&X!==void 0?X:[],!0),Y,!0),ee=H.reduce(function(V,Z){return V[Z.id]=Z,V},{});return Object.values(ee)}),[2]}})})});k.useEffect(function(){S(p)},[p]);var _=k.useState(),N=_[0],P=_[1],M=ie(function(W){var U,Q=Ie(O);if(W){if(P(W),W.parentId!=null){var q=Q==null?void 0:Q.find(function(Y){return Y.id===W.parentId});q&&(q.children=q.children||[],q.children=W.insertAsFirstChild?he([ye],q.children,!0):he(he([],q.children,!0),[ye],!1))}S(he(he([],Q??[],!0),[me({id:ye,children:[]},W.record)],!1))}else{if(!N)return;var X=Ie(O);if(N.parentId!=null){var q=X==null?void 0:X.find(function(H){return H.id===N.parentId});q&&(q.children=(U=q.children)===null||U===void 0?void 0:U.filter(function(H){return H!=ye}))}P(void 0),S(X==null?void 0:X.filter(function(Y){return Y.id!==ye}))}}),R=Kt(void 0,t.expandedKeys),A=R[0],D=R[1],T=ie(function(W){D(function(U){var Q,q,X=typeof W=="function"?W(U??[]):W,Y=(Q=U==null?void 0:U.filter(function(ee){return!X.includes(ee)}))!==null&&Q!==void 0?Q:[],H=(q=Y==null?void 0:Y.flatMap(function(ee){return Zt(ee,O??[])},[]))!==null&&q!==void 0?q:[];return X.filter(function(ee){return!H.includes(ee)})})}),B=hr(e,{meta:u})[0],$=gr(e,{meta:u})[0],L=fr(e),K=Be(),I=ie(function(W){var U=W.type,Q=et(W,["type"]),q=d(function(){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(Y){switch(Y.label){case 0:return[4,L()];case 1:return Y.sent(),K("ra-tree.item_moved",{undoable:i==="undoable"}),[2]}})})},"successSideEffect"),X=d(function(Y){return Ze(void 0,void 0,void 0,function(){return Fe(this,function(H){return K(Y.message,{type:"error"}),[2]})})},"errorSideEffect");U==="child"?B(e,Q,{onSuccess:q,onError:X,mutationMode:i}):$(e,Q,{onSuccess:q,onError:X,mutationMode:i})}),J=r("ra.page.list",{name:n(e,2)});return{data:O,defaultTitle:J,error:m,expandedKeys:A,handleAddNode:M,handleDrop:I,handleExpand:T,isLoading:h,isFetching:y,isPending:v,loadChildNodes:j,newNode:N,lazy:o,setFinalData:S}},"useTreeController"),Ft=k.createContext(void 0),Ue=function(){return Ue=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ue.apply(this,arguments)},en=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Sr=d(function(t){var r=t.label,e=t.multiple,n=t.sx,a=t.className,o=t.helperText,c=t.fullWidth,s=en(t,["label","multiple","sx","className","helperText","fullWidth"]),l=Rr(t),i=l.data,u=l.resource,f=l.source,g=l.fetchError,b=l.isLoading,x=l.isRequired,C=l.field,p=l.fieldState,m=l.formState,h=l.defaultValue,v=p.isTouched,y=p.invalid,w=p.error,O=m.isSubmitted,S=_e();return g?E.jsx(tt,{className:a,sx:n,"data-testid":"error",children:E.jsx(He,{label:r,source:f,resource:u,fullWidth:c,children:E.jsx(xn,{color:"error.main",children:S("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):b||!i?E.jsx(tt,{className:a,sx:n,"data-testid":"loading",children:E.jsx(He,{label:r,source:f,resource:u,fullWidth:c,children:E.jsx(Cn,{})})}):E.jsxs(tt,{className:a,sx:n,children:[E.jsx(He,{htmlFor:f,className:At.label,color:(v||O)&&y?"error":void 0,label:r,source:f,resource:u,isRequired:x,fullWidth:c,children:E.jsx(jr,Ue({source:f,multiple:e,className:At.tree,field:C,defaultValue:h,fullWidth:c},s,{data:i}))}),(v||O)&&w||o?E.jsx(Sn,{error:(v||O)&&!!w,children:E.jsx(jn,{error:w==null?void 0:w.message,helperText:o})}):null]})},"TreeInput"),ct="RaTreeInput",At={label:"".concat(ct,"-label"),tree:"".concat(ct,"-tree")},tt=we(En,{name:ct,overridesResolver:d(function(t,r){return r.root},"overridesResolver")})(function(){return{}}),jr=d(function(t){var r=t.data,e=t.multiple,n=t.field,a=t.checkStrictly,o=a===void 0?!0:a,c=t.expandAction,s=c===void 0?!1:c,l=t.defaultValue,i=en(t,["data","multiple","field","checkStrictly","expandAction","defaultValue"]),u=(n==null?void 0:n.value)||(e?[]:""),f=l||(e?[]:""),g=d(function(x,C){n==null||n.onChange(C.map(function(p){return p.id}))},"handleCheck"),b=d(function(x,C){var p;n==null||n.onChange((p=C==null?void 0:C.id)!==null&&p!==void 0?p:null)},"handleSelect");return E.jsx(It,Ue({},i,{checkStrictly:o,expandAction:s,checkable:e,selectable:!e,checkedKeys:e?u:[],selectedKeys:e?[]:[u],defaultCheckedKeys:e?f:void 0,defaultSelectedKeys:e?void 0:[f],defaultExpandedKeys:e?f:[f],onCheck:g,onSelect:b,data:r,onBlur:n==null?void 0:n.onBlur}))},"TreeInputTree"),Er=d(function(t){var r=t.reference,e=t.source,n=t.meta,a=Lt(r,{meta:n}),o=a.data,c=a.error,s=a.isLoading,l=a.isFetching;return{source:e,resource:r,data:o,error:c??void 0,isLoading:s,isFetching:l}},"useReferenceNodeInputController"),Pr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},ya=d(function(t){var r=t.children,e=r===void 0?E.jsx(Sr,{}):r,n=Er(t),a=n.resource,o=Pr(n,["resource"]);return E.jsx(Pn,{value:a,children:E.jsx(Nr,{value:o,children:e})})},"ReferenceNodeInput"),Nr=d(function(t){var r=t.children,e=t.value;return E.jsx(Ft.Provider,{value:e,children:r})},"TreeChoicesContextProvider"),Dr=d(function(){return k.useContext(Ft)||{}},"useTreeChoicesContext"),ze=function(){return ze=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ze.apply(this,arguments)},Ar=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Rr=d(function(t){var r=t.source,e=t.data;t.hideRootNodes;var n=Ar(t,["source","data","hideRootNodes"]),a=re(t);if(a==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=le(t),c=Dr(),s=c.source,l=c.data,i=c.isLoading,u=c.isFetching,f=c.error,g=e??l,b=r??s;if(b==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var x=Nn(ze(ze({},n),{resource:a,source:b,type:"text"})),C=x.isRequired,p=x.field,m=x.fieldState,h=x.formState,v=Dn(o,b,t.defaultValue);return{resource:a,source:b,data:g??[],fetchError:f,isLoading:i,isFetching:u,isRequired:C,field:p,fieldState:m,formState:h,defaultValue:v}},"useTreeInputController"),kr=d(function(t){var r=t.children,e=t.value;return E.jsx(An.Provider,{value:e,children:r})},"TreeContextProvider"),dt=function(){return dt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},dt.apply(this,arguments)},ga=d(function(t){var r=wr(t);return E.jsx(Rn,{value:r,children:E.jsx(kn,dt({},t,r))})},"CreateNode"),lt=function(){return lt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},lt.apply(this,arguments)},Rt=function(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,o;n<a;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},ma=d(function(t){var r=t.id,e=$t().id;if(!e&&!r)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var n=r??e,a=Kt(),o=a[1];k.useEffect(function(){o(function(s){var l=n.toString();return Array.isArray(s)?s.includes(l)?s:Rt(Rt([],s,!0),[l],!1):[l]})},[t.resource,n,o]);var c=Hn(t);return E.jsx(Jn,{value:c,children:E.jsx(rr,lt({},t))})},"ShowNode"),Me={},kt;function Mr(){if(kt)return Me;kt=1;var t=Mn();Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var r=t(Tn()),e=$n();return Me.default=(0,r.default)((0,e.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),Me}d(Mr,"requireMoreVert");var Tr=Mr();const $r=qn(Tr);var st=function(){return st=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},st.apply(this,arguments)},qr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Br=d(function(t){var r=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,a=t.confirmContent,o=a===void 0?"ra.message.delete_content":a,c=t.label,s=c===void 0?"ra.action.delete":c,l=t.mutationMode,i=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,g=f===void 0?"list":f,b=qr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),x=re(t);if(!x)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var C=le(t);if(!C)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var p=Jt({mutationMode:l,record:C,resource:x,redirect:g}),m=p.handleDelete,h=p.handleDialogClose,v=p.handleDialogOpen,y=p.isPending,w=p.open,O=_e(),S=d(function(j){j.stopPropagation(),i&&i(j),j.isDefaultPrevented()||v(j)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Wt,st({className:r,onClick:S,ref:u},b,{children:O(s,{_:s})})),E.jsx(Qt,{isOpen:w,loading:y,title:n,content:o,translateOptions:{name:We.humanize(O("resources.".concat(x,".name"),{smart_count:1,_:We.singularize(x)}),!0),id:C.id},onConfirm:m,onClose:h})]})},"DeleteMenuItemWithConfirmation"),ft=function(){return ft=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ft.apply(this,arguments)},Lr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Kr=d(function(t){var r=t.className,e=t.label,n=e===void 0?"ra.action.delete":e;t.mutationMode;var a=t.onClick;t.record;var o=t.ref;t.resource;var c=t.redirect,s=c===void 0?"list":c,l=Lr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=re(t);if(!i)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=le(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=Yt({record:u,resource:i,redirect:s}),g=f.handleDelete,b=f.isPending,x=_e(),C=d(function(p){p.stopPropagation(),a&&a(p),p.isDefaultPrevented()||g(p)},"handleClick");return E.jsx(Wt,ft({className:r,disabled:b,onClick:C,ref:o},l,{children:x(n,{_:n})}))},"DeleteMenuItemWithUndo"),Ge=function(){return Ge=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ge.apply(this,arguments)},Ir=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},tn=d(function(t){var r=t.mutationMode,e=r===void 0?"undoable":r,n=Ir(t,["mutationMode"]);return e==="undoable"?E.jsx(Kr,Ge({},n,{mutationMode:e})):E.jsx(Br,Ge({},n,{mutationMode:e}))},"DeleteMenuItem");tn.displayName="DeleteMenuItem";var Wr=k.createContext(null),Qr=Wr.Provider,Ur=d(function(t){var r=t.children,e=r===void 0?E.jsx(tn,{}):r,n=t.className,a=k.useState(null),o=a[0],c=a[1],s=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),l=k.useCallback(function(u){u.stopPropagation(),c(null)},[]),i=k.useMemo(function(){return{close:l}},[l]);return E.jsxs(Gr,{className:n,children:[E.jsx("button",{className:zr.menuButton,onClick:s,children:E.jsx($r,{})}),E.jsx(Bn,{anchorEl:o,open:!!o,onClose:l,children:E.jsx(Qr,{value:i,children:e})})]})},"NodeActions"),nn="RaNodeActions",zr={menuButton:"".concat(nn,"-menuButton")},Gr=we("div",{name:nn,overridesResolver:d(function(t,r){return r.root},"overridesResolver")})(function(){return{}}),vt=function(){return vt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},vt.apply(this,arguments)},Vr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Xr=d(function(t){var r=t.label,e=r===void 0?"ra.action.delete":r,n=t.className,a=t.icon,o=a===void 0?Jr:a,c=t.onClick;t.resource,t.record;var s=t.redirect,l=s===void 0?"list":s,i=Vr(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=le(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var g=Yt({resource:u,record:f,redirect:l}),b=g.handleDelete,x=g.isPending,C=d(function(p){c&&c(p),p.isDefaultPrevented()||b(p)},"handleClick");return E.jsx(Hr,vt({onClick:C,disabled:x,label:e,className:qe("ra-delete-button",n)},i,{children:o}),"button")},"DeleteBranchWithUndoButton"),Hr=we(Ut,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,r){return r.root},"overridesResolver")})(function(t){var r=t.theme;return{color:r.palette.error.main,"&:hover":{backgroundColor:zt(r.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Jr=E.jsx(Gt,{}),ht=function(){return ht=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ht.apply(this,arguments)},Yr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},Zr=d(function(t){var r=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,a=t.confirmContent,o=a===void 0?"ra.message.delete_content":a,c=t.icon,s=c===void 0?Fr:c,l=t.label,i=l===void 0?"ra.action.delete":l,u=t.mutationMode,f=t.onClick;t.record,t.resource;var g=t.redirect,b=g===void 0?"list":g,x=Yr(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),C=_e(),p=re(t);if(!p)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var m=le(t);if(!m)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=Jt({mutationMode:u,resource:p,record:m,redirect:b}),v=h.handleDelete,y=h.handleDialogClose,w=h.handleDialogOpen,O=h.isPending,S=h.open,j=d(function(_){f&&f(_),_.isDefaultPrevented()||w(_)},"handleClick");return E.jsxs(ea,{className:r,children:[E.jsx(Ut,ht({onClick:j,label:i,className:qe("ra-delete-button",an.deleteButton)},x,{children:s}),"button"),E.jsx(Qt,{isOpen:S,loading:O,title:n,content:o,translateOptions:{name:C("resources.".concat(p,".forcedCaseName"),{smart_count:1,_:We.humanize(C("resources.".concat(p,".name"),{smart_count:1,_:We.singularize(p)}),!0)}),id:m.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),Fr=E.jsx(Gt,{}),rn="RaDeleteBranchWithConfirmButton",an={deleteButton:"".concat(rn,"-deleteButton")},ea=we("div",{name:rn})(function(t){var r,e=t.theme;return r={},r["& .".concat(an.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:zt(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},r}),Ve=function(){return Ve=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ve.apply(this,arguments)},ta=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},na=d(function(t){var r=t.mutationMode,e=r===void 0?"undoable":r;t.record;var n=ta(t,["mutationMode","record"]),a=le(t),o=Ln();if(!a||a.id==null)return null;var c=e||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return c==="undoable"?E.jsx(Xr,Ve({record:a},n)):E.jsx(Zr,Ve({mutationMode:c,record:a},n))},"DeleteBranchButton"),yt=function(){return yt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},yt.apply(this,arguments)},ra=function(t,r,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return d(a,"adopt"),new(e||(e=Promise))(function(o,c){function s(u){try{i(n.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{i(n.throw(u))}catch(f){c(f)}}d(l,"rejected");function i(u){u.done?o(u.value):a(u.value).then(s,l)}d(i,"step"),i((n=n.apply(t,r||[])).next())})},aa=function(t,r){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,a,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(i){return function(u){return l([i,u])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,a&&(o=i[0]&2?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(u){i=[6,u],a=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},on=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},xe,ba=d(function(t){var r=t.allowMultipleRoots,e=r===void 0?!1:r,n=t.className,a=t.create,o=t.defaultExpandedKeys,c=t.edit,s=t.filter,l=t.hideRootNodes,i=t.lazy,u=i===void 0?!1:i;t.linkTo;var f=t.nodeActions,g=f===void 0?E.jsx(Ur,{}):f,b=t.show,x=t.showLine,C=t.sx,p=t.title,m=t.titleField,h=t.addRootButton,v=h===void 0?E.jsx(Kn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,y=t.meta,w=t.mutationMode,O=t.expandedKeys,S=t.onExpand,j=t.onClick,_=t.onDrop,N=on(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),P=re(t);if(P==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var M=In(),R=Wn(),A=Je("/".concat(P,"/create/*")),D=Je("/".concat(P,"/:id/*")),T=Je("/".concat(P,"/:id/show/*")),B=ua(t),$=k.useState(function(){if(A)return[ye];if(D)return[D.params.id];if(T)return[T.params.id]}),L=$[0],K=$[1];k.useEffect(function(){if(A){K([ye]);return}if(D){K([D.params.id]);return}if(T){K([T.params.id]);return}},[A,D,T]);var I=Cr({lazy:u,resource:P,filter:s,meta:y,mutationMode:w,expandedKeys:O??o}),J=I.data,W=I.defaultTitle,U=I.handleExpand,Q=I.isPending,q=I.loadChildNodes,X=I.handleDrop,Y=I.expandedKeys,H=ie(function(G,F){if(j&&j(G,F),!G.defaultPrevented&&B)return M(R({resource:P,id:F.id,type:B}))}),ee=ie(function(G,F,Oe,Ae){S&&S(G,F,Oe,Ae),G.defaultPrevented||U(F.map(function(Re){var un=Re.id;return un}))}),V=ie(function(G,F){_&&_(G,F),X(F)}),Z=k.useCallback(function(G){return ra(void 0,void 0,void 0,function(){return aa(this,function(F){return u?[2,q(G.record.id)]:[2,Promise.resolve()]})})},[u,q]),ne=k.useMemo(function(){var G;return(G=J==null?void 0:J.reduce(function(F,Oe){return J.some(function(Ae){var Re;return(Re=Ae.children)===null||Re===void 0?void 0:Re.includes(Oe.id)})||F.push(Oe.id),F},[]))!==null&&G!==void 0?G:[]},[J]),se=ie(function(G){var F=G.destination,Oe=G.position;if(J==null)return!1;if(e)return!0;var Ae=ne.includes(F.id);return!(Ae&&Oe===-1)});if(Q||J==null)return null;var pe=!J||J.length===0||e;return E.jsx(kr,{value:I,children:E.jsxs(ia,{className:n,sx:C,children:[E.jsx("div",{className:be.cardTree,children:E.jsx(Bt,{children:E.jsxs(Qn,{className:be.cardContentTree,children:[E.jsx(It,yt({allowDrop:se,data:J,hideRootNodes:l,titleField:m,onDrop:V,onExpand:ee,onClick:H,selectedKeys:L,showLine:x,nodeActions:g,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:Y},oa(N))),pe?v:null]})})}),E.jsx("div",{className:be.actionCard,children:E.jsxs(Un,{children:[a?E.jsx(Le,{path:"create/*",element:typeof a=="function"?E.jsx(a,{}):a}):null,b?E.jsx(Le,{path:":id/show/*",element:typeof b=="function"?E.jsx(b,{}):b}):null,c?E.jsx(Le,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,p!==!1?E.jsx(Le,{path:"*",element:E.jsx(qt,{title:p,defaultTitle:W})}):null]})})]})})},"TreeWithDetails"),oa=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var r=on(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return r},"sanitizeRestProps"),Te="RaTreeWithDetails",be={container:"".concat(Te,"-container"),cardTree:"".concat(Te,"-cardTree"),cardContentTree:"".concat(Te,"-cardContentTree"),actionCard:"".concat(Te,"-actionCard")},ia=we("div",{name:Te,overridesResolver:d(function(t,r){return r.root},"overridesResolver")})((xe={display:"flex"},xe["& .".concat(be.actionCard)]={width:"100%"},xe["& .".concat(be.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},xe["& .".concat(be.cardContentTree)]={},xe["& .".concat(be.container)]={display:"flex"},xe)),ua=d(function(t){var r=t.linkTo,e=t.show,n=t.edit;return r||(e?"show":n?"edit":!1)},"getLinkTo"),gt=function(){return gt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},gt.apply(this,arguments)},ca=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e},_a=d(function(t){var r,e=t.children,n=t.className,a=t.resource,o=ca(t,["children","className","resource"]),c=zn(function(s){return s.breakpoints.down("sm")});return E.jsx(da,gt({className:qe((r={},r[Ee.mobileToolbar]=c,r[Ee.desktopToolbar]=!c,r),n),role:"toolbar"},o,{children:k.Children.count(e)===0?E.jsxs("div",{className:Ee.defaultToolbar,children:[E.jsx(Gn,{}),E.jsx(na,{resource:a})]}):e}))},"EditNodeToolbar"),Ke="RaEditNodeToolbar",Ee={desktopToolbar:"".concat(Ke,"-desktopToolbar"),mobileToolbar:"".concat(Ke,"-mobileToolbar"),defaultToolbar:"".concat(Ke,"-defaultToolbar")},da=we(Vn,{name:Ke,overridesResolver:d(function(t,r){return r.root},"overridesResolver")})(function(t){var r,e=t.theme;return r={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},r["&.".concat(Ee.desktopToolbar)]={},r["&.".concat(Ee.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},r["& .".concat(Ee.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},r});export{Oa as AddChildButton,ga as CreateNode,na as DeleteBranchButton,Zr as DeleteBranchWithConfirmButton,Xr as DeleteBranchWithUndoButton,tn as DeleteMenuItem,Br as DeleteMenuItemWithConfirmation,Kr as DeleteMenuItemWithUndo,an as DeleteWithConfirmButtonClasses,xa as EditNode,_a as EditNodeToolbar,Ee as EditNodeToolbarClasses,Ur as NodeActions,Ca as NodeEditActions,ya as ReferenceNodeInput,ma as ShowNode,It as Tree,Ft as TreeChoicesContext,Nr as TreeChoicesContextProvider,An as TreeContext,kr as TreeContextProvider,Sr as TreeInput,At as TreeInputClasses,jr as TreeInputTree,ba as TreeWithDetails,be as TreeWithDetailsClasses,ye as UNSAVED_NEW_NODE,Sa as addTreeMethodsBasedOnChildren,fa as addTreeMethodsBasedOnParentAndPosition,mn as deleteBranchByDeletingAllChildren,gn as deleteBranchByDeletingNode,ha as fixFakeRestDataProvider,ja as getRCTree,Ea as getRCTreeDatum,Pa as getRecordTree,Na as getRootAndChildNodes,Da as raTreeLanguageEnglish,Aa as raTreeLanguageFrench,va as removeChildren,Ra as renderSwitcherIcon,bn as updateQueryCacheFromGetTree,wn as useAddChildNode,dr as useAddRootNode,wr as useCreateNodeController,Vt as useDeleteBranch,Jt as useDeleteBranchWithConfirmController,Yt as useDeleteBranchWithUndoController,ka as useEditNodeController,Kt as useExpandedKeys,sr as useGetChildNodesCallback,On as useGetRootNodes,Lt as useGetTree,fr as useGetTreeCallback,hr as useMoveAsNthChildOf,gr as useMoveAsNthSiblingOf,Er as useReferenceNodeInputController,Dr as useTreeChoicesContext,wt as useTreeContext,Cr as useTreeController,Rr as useTreeInputController};
//# sourceMappingURL=index-jus3oOWX.js.map
