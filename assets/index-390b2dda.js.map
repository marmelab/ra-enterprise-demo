{"version":3,"file":"index-390b2dda.js","sources":["../../node_modules/ra-core/dist/esm/controller/show/useShowController.js","../../node_modules/ra-core/dist/esm/controller/show/ShowContext.js","../../node_modules/ra-core/dist/esm/controller/show/ShowContextProvider.js","../../node_modules/ra-core/dist/esm/controller/show/useShowContext.js","../../node_modules/ra-ui-materialui/dist/esm/detail/ShowView.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/builder/addTreeMethodsBasedOnParentAndPosition.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useAddRootNode.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useDeleteBranch.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useGetChildNodesCallback.js","../../node_modules/@react-admin/ra-tree/esm/src/util/removeChildren.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useGetTreeCallback.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useMoveAsNthChildOf.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/useMoveAsNthSiblingOf.js","../../node_modules/@react-admin/ra-tree/esm/src/dataProvider/fixFakeRestDataProvider.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/useDeleteBranchWithConfirmController.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/useDeleteBranchWithUndoController.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/useCreateNodeController.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/getNodesKeysRecursively.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/useTreeController.js","../../node_modules/@react-admin/ra-tree/esm/src/reference/TreeChoicesContext.js","../../node_modules/@react-admin/ra-tree/esm/src/TreeInput.js","../../node_modules/@react-admin/ra-tree/esm/src/reference/useReferenceNodeInputController.js","../../node_modules/@react-admin/ra-tree/esm/src/reference/ReferenceNodeInput.js","../../node_modules/@react-admin/ra-tree/esm/src/reference/TreeChoicesContextProvider.js","../../node_modules/@react-admin/ra-tree/esm/src/reference/useTreeChoicesContext.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/useTreeInputController.js","../../node_modules/@react-admin/ra-tree/esm/src/controllers/TreeContextProvider.js","../../node_modules/@react-admin/ra-tree/esm/src/CreateNode.js","../../node_modules/@react-admin/ra-tree/esm/src/ShowNode.js","../../node_modules/@mui/icons-material/MoreVert.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteMenuItemWithConfirmation.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteMenuItemWithUndo.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteMenuItem.js","../../node_modules/@react-admin/ra-tree/esm/src/NodeActions.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteBranchWithUndoButton.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteBranchWithConfirmButton.js","../../node_modules/@react-admin/ra-tree/esm/src/DeleteBranchButton.js","../../node_modules/@react-admin/ra-tree/esm/src/TreeWithDetails.js","../../node_modules/@react-admin/ra-tree/esm/src/EditNodeToolbar.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useParams } from 'react-router-dom';\nimport { useAuthenticated } from '../../auth';\nimport { useGetOne, useRefresh } from '../../dataProvider';\nimport { useTranslate } from '../../i18n';\nimport { useRedirect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport { useResourceContext, useGetResourceLabel, useGetRecordRepresentation, } from '../../core';\n/**\n * Prepare data for the Show view.\n *\n * useShowController does a few things:\n * - it grabs the id from the URL and the resource name from the ResourceContext,\n * - it fetches the record via useGetOne,\n * - it prepares the page title.\n *\n * @param {Object} props The props passed to the Show component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Show view\n *\n * @example\n *\n * import { useShowController } from 'react-admin';\n * import ShowView from './ShowView';\n *\n * const MyShow = () => {\n *     const controllerProps = useShowController();\n *     return <ShowView {...controllerProps} />;\n * };\n *\n * @example // useShowController can also take its parameters from props\n *\n * import { useShowController } from 'react-admin';\n * import ShowView from './ShowView';\n *\n * const MyShow = () => {\n *     const controllerProps = useShowController({ resource: 'posts', id: 1234 });\n *     return <ShowView {...controllerProps} />;\n * };\n */\nexport var useShowController = function (props) {\n    if (props === void 0) { props = {}; }\n    var disableAuthentication = props.disableAuthentication, propsId = props.id, _a = props.queryOptions, queryOptions = _a === void 0 ? {} : _a;\n    useAuthenticated({ enabled: !disableAuthentication });\n    var resource = useResourceContext(props);\n    var getRecordRepresentation = useGetRecordRepresentation(resource);\n    var translate = useTranslate();\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var routeId = useParams().id;\n    var id = propsId != null ? propsId : decodeURIComponent(routeId);\n    var meta = queryOptions.meta, otherQueryOptions = __rest(queryOptions, [\"meta\"]);\n    var _b = useGetOne(resource, { id: id, meta: meta }, __assign({ onError: function () {\n            notify('ra.notification.item_doesnt_exist', {\n                type: 'error',\n            });\n            redirect('list', resource);\n            refresh();\n        }, retry: false }, otherQueryOptions)), record = _b.data, error = _b.error, isLoading = _b.isLoading, isFetching = _b.isFetching, refetch = _b.refetch;\n    // eslint-disable-next-line eqeqeq\n    if (record && record.id && record.id != id) {\n        throw new Error(\"useShowController: Fetched record's id attribute (\".concat(record.id, \") must match the requested 'id' (\").concat(id, \")\"));\n    }\n    var getResourceLabel = useGetResourceLabel();\n    var recordRepresentation = getRecordRepresentation(record);\n    var defaultTitle = translate('ra.page.show', {\n        name: getResourceLabel(resource, 1),\n        id: id,\n        record: record,\n        recordRepresentation: typeof recordRepresentation === 'string'\n            ? recordRepresentation\n            : '',\n    });\n    return {\n        defaultTitle: defaultTitle,\n        error: error,\n        isLoading: isLoading,\n        isFetching: isFetching,\n        record: record,\n        refetch: refetch,\n        resource: resource,\n    };\n};\n//# sourceMappingURL=useShowController.js.map","import { createContext } from 'react';\n/**\n * Context to store the result of the useShowController() hook.\n *\n * Use the useShowContext() hook to read the context. That's what the Show components do in react-admin.\n *\n * @example\n *\n * import { useShowController, ShowContextProvider } from 'ra-core';\n *\n * const Show = props => {\n *     const controllerProps = useShowController(props);\n *     return (\n *         <ShowContextProvider value={controllerProps}>\n *             ...\n *         </ShowContextProvider>\n *     );\n * };\n */\nexport var ShowContext = createContext({\n    record: null,\n    defaultTitle: null,\n    isFetching: null,\n    isLoading: null,\n    refetch: null,\n    resource: null,\n});\nShowContext.displayName = 'ShowContext';\n//# sourceMappingURL=ShowContext.js.map","import * as React from 'react';\nimport { RecordContextProvider } from '../record/RecordContext';\nimport { ShowContext } from './ShowContext';\n/**\n * Create a Show Context.\n *\n * @example\n *\n * const MyShow = (props) => {\n *     const controllerProps = useShowController(props);\n *     return (\n *         <ShowContextProvider value={controllerProps}>\n *             <MyShowView>\n *         </ShowContextProvider>\n *     );\n * };\n *\n * const MyShowView = () => {\n *     const record = useRecordContext();\n * }\n *\n * @see ShowContext\n * @see RecordContext\n */\nexport var ShowContextProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(ShowContext.Provider, { value: value },\n        React.createElement(RecordContextProvider, { value: value && value.record }, children)));\n};\n//# sourceMappingURL=ShowContextProvider.js.map","import { useContext, useMemo } from 'react';\nimport defaults from 'lodash/defaults';\nimport { ShowContext } from './ShowContext';\n/**\n * Hook to read the show controller props from the ShowContext.\n *\n * Mostly used within a <ShowContext.Provider> (e.g. as a descendent of <Show>).\n *\n * But you can also use it without a <ShowContext.Provider>. In this case, it is up to you\n * to pass all the necessary props.\n *\n * The given props will take precedence over context values.\n *\n * @typedef {Object} ShowControllerResult\n *\n * @returns {ShowControllerResult} create controller props\n *\n * @see useShowController for how it is filled\n *\n */\nexport var useShowContext = function (props) {\n    // Can't find a way to specify the RecordType when ShowContext is declared\n    // @ts-ignore\n    var context = useContext(ShowContext);\n    // Props take precedence over the context\n    return useMemo(function () {\n        return defaults({}, props != null ? extractShowContextProps(props) : {}, context);\n    }, [context, props]);\n};\n/**\n * Extract only the show controller props\n *\n * @param {Object} props props passed to the useShowContext hook\n *\n * @returns {ShowControllerResult} show controller props\n */\nvar extractShowContextProps = function (_a) {\n    var record = _a.record, data = _a.data, defaultTitle = _a.defaultTitle, isFetching = _a.isFetching, isLoading = _a.isLoading, resource = _a.resource;\n    return ({\n        // Necessary for actions (EditActions) which expect a data prop containing the record\n        // @deprecated - to be removed in 4.0d\n        record: record || data,\n        data: record || data,\n        defaultTitle: defaultTitle,\n        isFetching: isFetching,\n        isLoading: isLoading,\n        resource: resource,\n    });\n};\n//# sourceMappingURL=useShowContext.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar _a;\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { Card } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport clsx from 'clsx';\nimport { useShowContext, useResourceDefinition } from 'ra-core';\nimport { ShowActions } from './ShowActions';\nimport { Title } from '../layout';\nvar defaultActions = React.createElement(ShowActions, null);\nexport var ShowView = function (props) {\n    var _a;\n    var actions = props.actions, aside = props.aside, children = props.children, className = props.className, _b = props.component, Content = _b === void 0 ? Card : _b, _c = props.emptyWhileLoading, emptyWhileLoading = _c === void 0 ? false : _c, title = props.title, rest = __rest(props, [\"actions\", \"aside\", \"children\", \"className\", \"component\", \"emptyWhileLoading\", \"title\"]);\n    var _d = useShowContext(props), resource = _d.resource, defaultTitle = _d.defaultTitle, record = _d.record;\n    var hasEdit = useResourceDefinition(props).hasEdit;\n    var finalActions = typeof actions === 'undefined' && hasEdit ? defaultActions : actions;\n    if (!children || (!record && emptyWhileLoading)) {\n        return null;\n    }\n    return (React.createElement(Root, __assign({ className: clsx('show-page', className) }, sanitizeRestProps(rest)),\n        React.createElement(Title, { title: title, defaultTitle: defaultTitle, preferenceKey: \"\".concat(resource, \".show.title\") }),\n        finalActions !== false && finalActions,\n        React.createElement(\"div\", { className: clsx(ShowClasses.main, (_a = {},\n                _a[ShowClasses.noActions] = !finalActions,\n                _a)) },\n            React.createElement(Content, { className: ShowClasses.card }, children),\n            aside)));\n};\nShowView.propTypes = {\n    actions: PropTypes.oneOfType([PropTypes.element, PropTypes.bool]),\n    children: PropTypes.node,\n    className: PropTypes.string,\n    emptyWhileLoading: PropTypes.bool,\n    title: PropTypes.any,\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nvar sanitizeRestProps = function (_a) {\n    var _b = _a.defaultTitle, defaultTitle = _b === void 0 ? null : _b, _c = _a.hasCreate, hasCreate = _c === void 0 ? null : _c, _d = _a.hasEdit, hasEdit = _d === void 0 ? null : _d, _e = _a.hasList, hasList = _e === void 0 ? null : _e, _f = _a.hasShow, hasShow = _f === void 0 ? null : _f, _g = _a.history, history = _g === void 0 ? null : _g, _h = _a.id, id = _h === void 0 ? null : _h, _j = _a.isLoading, isLoading = _j === void 0 ? null : _j, _k = _a.isFetching, isFetching = _k === void 0 ? null : _k, _l = _a.location, location = _l === void 0 ? null : _l, _m = _a.match, match = _m === void 0 ? null : _m, _o = _a.options, options = _o === void 0 ? null : _o, _p = _a.refetch, refetch = _p === void 0 ? null : _p, _q = _a.permissions, permissions = _q === void 0 ? null : _q, rest = __rest(_a, [\"defaultTitle\", \"hasCreate\", \"hasEdit\", \"hasList\", \"hasShow\", \"history\", \"id\", \"isLoading\", \"isFetching\", \"location\", \"match\", \"options\", \"refetch\", \"permissions\"]);\n    return rest;\n};\n/* eslint-enable @typescript-eslint/no-unused-vars */\nvar PREFIX = 'RaShow';\nexport var ShowClasses = {\n    main: \"\".concat(PREFIX, \"-main\"),\n    noActions: \"\".concat(PREFIX, \"-noActions\"),\n    card: \"\".concat(PREFIX, \"-card\"),\n};\nvar Root = styled('div', {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})((_a = {},\n    _a[\"& .\".concat(ShowClasses.main)] = {\n        display: 'flex',\n    },\n    _a[\"& .\".concat(ShowClasses.noActions)] = {\n        marginTop: '1em',\n    },\n    _a[\"& .\".concat(ShowClasses.card)] = {\n        flex: '1 1 auto',\n    },\n    _a));\n//# sourceMappingURL=ShowView.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { deleteBranchByDeletingAllChildren } from './deleteBranchByDeletingAllChildren';\nimport { deleteBranchByDeletingNode } from './deleteBranchByDeletingNode';\n/**\n * Provided the records contain a parent_id and a position field,\n * augment a dataProvider by adding the Tree methods (getTree, getRootNodes, etc).\n *\n * These methods will call regular dataProvider methods (getList, getOne, update).\n *\n * @warning Do not use in production.\n *\n * The added Tree methods call the API way too much, sometimes asking for the\n * entire tree. In practice, you should implement an optimized API route for\n * each of the Tree methods.\n *\n * @example // Compatible APIs should return records like\n * {\n *     id: 1234,\n *     name: 'hello',\n *     parent_id: 35,\n *     position: 4, // zero-based\n * }\n *\n * @param {DataProvider} dataProvider The dataProvider to augment\n * @param {string} parentIdField The name of the field containing the parent id. Defaults to 'parent_id'\n * @param {string} positionField The name of the field containing the position of a node inside its parent. Defaults to 'position'\n * @param {boolean} apiSupportBranchDeletion Indicates whether the API will handle children deletion when deleting a node as well as the siblings update. If false, the dataProvider will handle it by making multiple requests in the right order. Defaults to `false`.\n */\nexport var addTreeMethodsBasedOnParentAndPosition = function (dataProvider, parentIdField, positionField, apiSupportBranchDeletion) {\n    if (parentIdField === void 0) { parentIdField = 'parent_id'; }\n    if (positionField === void 0) { positionField = 'position'; }\n    if (apiSupportBranchDeletion === void 0) { apiSupportBranchDeletion = false; }\n    var deleteBranch = apiSupportBranchDeletion\n        ? deleteBranchByDeletingNode\n        : deleteBranchByDeletingAllChildren;\n    var treeDataProvider = __assign(__assign({}, dataProvider), { getTree: function (resource, params) { return __awaiter(void 0, void 0, void 0, function () {\n            var data, treeRecords;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                            filter: {},\n                            sort: { field: positionField, order: 'ASC' },\n                            pagination: { page: 1, perPage: 1000 },\n                            meta: params === null || params === void 0 ? void 0 : params.meta,\n                        })];\n                    case 1:\n                        data = (_a.sent()).data;\n                        treeRecords = data.map(function (record) { return (__assign(__assign({}, record), { children: data\n                                // eslint-disable-next-line eqeqeq\n                                .filter(function (r) { return r[parentIdField] == record.id; })\n                                .sort(function (a, b) { return a[positionField] - b[positionField]; })\n                                .map(function (child) { return child.id; }) })); });\n                        return [2 /*return*/, {\n                                data: treeRecords,\n                            }];\n                }\n            });\n        }); }, getRootNodes: function (resource, params) { return __awaiter(void 0, void 0, void 0, function () {\n            var data, treeRecords;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                            filter: (_a = {}, _a[parentIdField] = null, _a),\n                            sort: { field: positionField, order: 'ASC' },\n                            pagination: { page: 1, perPage: 1000 },\n                            meta: params === null || params === void 0 ? void 0 : params.meta,\n                        })];\n                    case 1:\n                        data = (_b.sent()).data;\n                        return [4 /*yield*/, Promise.all(data.map(function (record) {\n                                var _a;\n                                return dataProvider\n                                    .getList(resource, {\n                                    filter: (_a = {}, _a[parentIdField] = record.id, _a),\n                                    sort: {\n                                        field: positionField,\n                                        order: 'ASC',\n                                    },\n                                    pagination: { page: 1, perPage: 1000 },\n                                    meta: params === null || params === void 0 ? void 0 : params.meta,\n                                })\n                                    .then(function (_a) {\n                                    var data = _a.data;\n                                    return (__assign(__assign({}, record), { children: data.map(function (_a) {\n                                            var id = _a.id;\n                                            return id;\n                                        }) }));\n                                });\n                            }))];\n                    case 2:\n                        treeRecords = _b.sent();\n                        return [2 /*return*/, {\n                                data: treeRecords,\n                            }];\n                }\n            });\n        }); }, getParentNode: function (resource, _a) {\n            var childId = _a.childId, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var tree, child, parent;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, treeDataProvider.getTree(resource, { meta: meta })];\n                        case 1:\n                            tree = (_b.sent()).data;\n                            child = tree.find(function (node) { return node.id === childId; });\n                            if (!child) {\n                                return [2 /*return*/, { data: undefined }];\n                            }\n                            parent = tree.find(function (node) { return node.id === child[parentIdField]; });\n                            return [2 /*return*/, {\n                                    data: parent,\n                                }];\n                    }\n                });\n            });\n        }, getChildNodes: function (resource, _a) {\n            var parentId = _a.parentId, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var data, treeRecords;\n                var _b;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                                filter: (_b = {}, _b[parentIdField] = parentId, _b),\n                                sort: { field: positionField, order: 'ASC' },\n                                pagination: { page: 1, perPage: 1000 },\n                                meta: meta,\n                            })];\n                        case 1:\n                            data = (_c.sent()).data;\n                            return [4 /*yield*/, Promise.all(data.map(function (record) {\n                                    var _a;\n                                    return dataProvider\n                                        .getList(resource, {\n                                        filter: (_a = {}, _a[parentIdField] = record.id, _a),\n                                        sort: {\n                                            field: positionField,\n                                            order: 'ASC',\n                                        },\n                                        pagination: { page: 1, perPage: 1000 },\n                                        meta: meta,\n                                    })\n                                        .then(function (_a) {\n                                        var data = _a.data;\n                                        return (__assign(__assign({}, record), { children: data.map(function (_a) {\n                                                var id = _a.id;\n                                                return id;\n                                            }) }));\n                                    });\n                                }))];\n                        case 2:\n                            treeRecords = _c.sent();\n                            return [2 /*return*/, {\n                                    data: treeRecords,\n                                }];\n                    }\n                });\n            });\n        }, moveAsNthChildOf: function (resource, _a) {\n            var source = _a.source, destination = _a.destination, position = _a.position, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var destinationSiblings, sourceSiblings;\n                var _b, _c, _d;\n                return __generator(this, function (_e) {\n                    switch (_e.label) {\n                        case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                                filter: (_b = {},\n                                    _b[parentIdField] = destination.id,\n                                    _b[\"\".concat(positionField, \"_gte\")] = position,\n                                    _b),\n                                sort: {\n                                    field: positionField,\n                                    order: 'ASC',\n                                },\n                                pagination: { page: 1, perPage: 1000 },\n                                meta: meta,\n                            })];\n                        case 1:\n                            destinationSiblings = (_e.sent()).data;\n                            if (!(destinationSiblings.length > 0)) return [3 /*break*/, 3];\n                            return [4 /*yield*/, Promise.all(destinationSiblings.map(function (item) {\n                                    var _a;\n                                    return dataProvider.update(resource, {\n                                        id: item.id,\n                                        data: (_a = {}, _a[positionField] = item[positionField] + 1, _a),\n                                        previousData: item,\n                                        meta: meta,\n                                    });\n                                }))];\n                        case 2:\n                            _e.sent();\n                            _e.label = 3;\n                        case 3: return [4 /*yield*/, dataProvider.getList(resource, {\n                                filter: (_c = {},\n                                    _c[parentIdField] = source[parentIdField],\n                                    _c[\"\".concat(positionField, \"_gt\")] = source[positionField],\n                                    _c),\n                                sort: {\n                                    field: positionField,\n                                    order: 'ASC',\n                                },\n                                pagination: { page: 1, perPage: 1000 },\n                                meta: meta,\n                            })];\n                        case 4:\n                            sourceSiblings = (_e.sent()).data;\n                            if (!(sourceSiblings.length > 0)) return [3 /*break*/, 6];\n                            return [4 /*yield*/, Promise.all(sourceSiblings.map(function (item) {\n                                    var _a;\n                                    return dataProvider.update(resource, {\n                                        id: item.id,\n                                        data: (_a = {}, _a[positionField] = item[positionField] - 1, _a),\n                                        previousData: item,\n                                        meta: meta,\n                                    });\n                                }))];\n                        case 5:\n                            _e.sent();\n                            _e.label = 6;\n                        case 6: \n                        // 3. Change the parent and position of the source node\n                        return [4 /*yield*/, dataProvider.update(resource, {\n                                id: source.id,\n                                data: (_d = {},\n                                    _d[parentIdField] = destination.id,\n                                    _d[positionField] = position,\n                                    _d),\n                                previousData: source,\n                                meta: meta,\n                            })];\n                        case 7:\n                            // 3. Change the parent and position of the source node\n                            _e.sent();\n                            return [2 /*return*/, { data: null }];\n                    }\n                });\n            });\n        }, moveAsNthSiblingOf: function (resource, _a) {\n            var source = _a.source, destination = _a.destination, position = _a.position, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var destinationSiblingsToUpdateFilter, destinationSiblings, sourceSiblingsToUpdateFilters, sourceSiblings;\n                var _b, _c, _d, _e, _f, _g, _h;\n                return __generator(this, function (_j) {\n                    switch (_j.label) {\n                        case 0:\n                            if (position === 0) {\n                                destinationSiblingsToUpdateFilter = (_b = {},\n                                    _b[parentIdField] = destination[parentIdField],\n                                    _b);\n                            }\n                            if (source[positionField] > destination[positionField] &&\n                                source[parentIdField] === destination[parentIdField]) {\n                                destinationSiblingsToUpdateFilter = (_c = {},\n                                    _c[parentIdField] = destination[parentIdField],\n                                    _c[\"\".concat(positionField, \"_gt\")] = destination[positionField],\n                                    _c);\n                            }\n                            if (source[parentIdField] !== destination[parentIdField] &&\n                                position > 0) {\n                                destinationSiblingsToUpdateFilter = (_d = {},\n                                    _d[parentIdField] = destination[parentIdField],\n                                    _d[\"\".concat(positionField, \"_gt\")] = destination[positionField],\n                                    _d);\n                            }\n                            if (!destinationSiblingsToUpdateFilter) return [3 /*break*/, 3];\n                            return [4 /*yield*/, dataProvider.getList(resource, {\n                                    filter: destinationSiblingsToUpdateFilter,\n                                    sort: {\n                                        field: positionField,\n                                        order: 'ASC',\n                                    },\n                                    pagination: { page: 1, perPage: 1000 },\n                                    meta: meta,\n                                })];\n                        case 1:\n                            destinationSiblings = (_j.sent()).data;\n                            if (!(destinationSiblings.length > 0)) return [3 /*break*/, 3];\n                            return [4 /*yield*/, Promise.all(destinationSiblings.map(function (item) {\n                                    var _a;\n                                    return item.id === source.id\n                                        ? Promise.resolve(undefined)\n                                        : dataProvider.update(resource, {\n                                            id: item.id,\n                                            data: (_a = {},\n                                                _a[positionField] = item[positionField] + 1,\n                                                _a),\n                                            previousData: item,\n                                            meta: meta,\n                                        });\n                                }))];\n                        case 2:\n                            _j.sent();\n                            _j.label = 3;\n                        case 3:\n                            if (source[parentIdField] === destination[parentIdField]) {\n                                if (source[positionField] > destination[positionField]) {\n                                    sourceSiblingsToUpdateFilters = (_e = {},\n                                        _e[parentIdField] = source[parentIdField],\n                                        _e[\"\".concat(positionField, \"_gt\")] = source[positionField],\n                                        _e);\n                                }\n                                else {\n                                    sourceSiblingsToUpdateFilters = (_f = {},\n                                        _f[parentIdField] = source[parentIdField],\n                                        _f[\"\".concat(positionField, \"_gt\")] = source[positionField],\n                                        _f[\"\".concat(positionField, \"_lte\")] = destination[positionField],\n                                        _f);\n                                }\n                            }\n                            else {\n                                sourceSiblingsToUpdateFilters = (_g = {},\n                                    _g[parentIdField] = source[parentIdField],\n                                    _g[\"\".concat(positionField, \"_gt\")] = source[positionField],\n                                    _g);\n                            }\n                            return [4 /*yield*/, dataProvider.getList(resource, {\n                                    filter: sourceSiblingsToUpdateFilters,\n                                    sort: {\n                                        field: positionField,\n                                        order: 'ASC',\n                                    },\n                                    pagination: { page: 1, perPage: 1000 },\n                                    meta: meta,\n                                })];\n                        case 4:\n                            sourceSiblings = (_j.sent()).data;\n                            if (!(sourceSiblings.length > 0)) return [3 /*break*/, 6];\n                            return [4 /*yield*/, Promise.all(sourceSiblings.map(function (item) {\n                                    var _a;\n                                    return item.id === source.id\n                                        ? Promise.resolve(undefined)\n                                        : dataProvider.update(resource, {\n                                            id: item.id,\n                                            data: (_a = {},\n                                                _a[positionField] = item[positionField] - 1,\n                                                _a),\n                                            previousData: item,\n                                            meta: meta,\n                                        });\n                                }))];\n                        case 5:\n                            _j.sent();\n                            _j.label = 6;\n                        case 6: \n                        // 3. Change the parent and position of the source node\n                        return [4 /*yield*/, dataProvider.update(resource, {\n                                id: source.id,\n                                data: (_h = {},\n                                    _h[parentIdField] = destination[parentIdField],\n                                    _h[positionField] = source[parentIdField] === destination[parentIdField]\n                                        ? source[positionField] > destination[positionField]\n                                            ? destination[positionField] + 1\n                                            : destination[positionField]\n                                        : position,\n                                    _h),\n                                previousData: source,\n                                meta: meta,\n                            })];\n                        case 7:\n                            // 3. Change the parent and position of the source node\n                            _j.sent();\n                            return [2 /*return*/, { data: null }];\n                    }\n                });\n            });\n        }, addRootNode: function (resource, _a) {\n            var data = _a.data, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var roots, rootPosition, newRoot;\n                var _b, _c;\n                return __generator(this, function (_d) {\n                    switch (_d.label) {\n                        case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                                filter: (_b = {}, _b[parentIdField] = null, _b),\n                                sort: { field: positionField, order: 'ASC' },\n                                pagination: { page: 1, perPage: 1000 },\n                                meta: meta,\n                            })];\n                        case 1:\n                            roots = (_d.sent()).data;\n                            rootPosition = roots.length > 0\n                                ? roots.reduce(function (acc, curr) {\n                                    return curr[positionField] > acc\n                                        ? curr[positionField]\n                                        : acc;\n                                }, -Infinity) + 1\n                                : 0;\n                            return [4 /*yield*/, dataProvider.create(resource, {\n                                    data: __assign(__assign({}, data), (_c = {}, _c[parentIdField] = null, _c[positionField] = rootPosition, _c)),\n                                    meta: meta,\n                                })];\n                        case 2:\n                            newRoot = (_d.sent()).data;\n                            return [2 /*return*/, { data: __assign(__assign({}, newRoot), { children: [] }) }];\n                    }\n                });\n            });\n        }, addChildNode: function (resource, _a) {\n            var parentId = _a.parentId, data = _a.data, meta = _a.meta;\n            return __awaiter(void 0, void 0, void 0, function () {\n                var siblings, childPosition, newRoot;\n                var _b, _c;\n                return __generator(this, function (_d) {\n                    switch (_d.label) {\n                        case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                                filter: (_b = {}, _b[parentIdField] = parentId, _b),\n                                sort: { field: positionField, order: 'ASC' },\n                                pagination: { page: 1, perPage: 1000 },\n                                meta: meta,\n                            })];\n                        case 1:\n                            siblings = (_d.sent()).data;\n                            childPosition = siblings.length > 0\n                                ? siblings.reduce(function (acc, curr) {\n                                    return curr[positionField] > acc\n                                        ? curr[positionField]\n                                        : acc;\n                                }, -Infinity) + 1\n                                : 0;\n                            return [4 /*yield*/, dataProvider.create(resource, {\n                                    data: __assign(__assign({}, data), (_c = {}, _c[parentIdField] = parentId, _c[positionField] = childPosition, _c)),\n                                    meta: meta,\n                                })];\n                        case 2:\n                            newRoot = (_d.sent()).data;\n                            return [2 /*return*/, { data: __assign(__assign({}, newRoot), { children: [] }) }];\n                    }\n                });\n            });\n        }, deleteBranch: function (resource, params) { return __awaiter(void 0, void 0, void 0, function () {\n            var id, previousData, meta, siblings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        id = params.id, previousData = params.previousData, meta = params.meta;\n                        // Deletion of the record itself must be handled by specialized method.\n                        return [4 /*yield*/, deleteBranch(treeDataProvider, resource, params)];\n                    case 1:\n                        // Deletion of the record itself must be handled by specialized method.\n                        _a.sent();\n                        return [4 /*yield*/, treeDataProvider.getChildNodes(resource, {\n                                parentId: previousData[parentIdField],\n                                meta: meta,\n                            })];\n                    case 2:\n                        siblings = (_a.sent()).data;\n                        // update the siblings position\n                        return [4 /*yield*/, Promise.all(siblings\n                                .filter(function (node) {\n                                return node[positionField] > previousData[positionField] &&\n                                    node.id !== id;\n                            })\n                                .map(function (node) {\n                                var _a;\n                                return dataProvider.update(resource, {\n                                    id: node.id,\n                                    data: __assign(__assign({}, node), (_a = {}, _a[positionField] = node[positionField] - 1, _a)),\n                                    previousData: node,\n                                    meta: meta,\n                                });\n                            }))];\n                    case 3:\n                        // update the siblings position\n                        _a.sent();\n                        return [2 /*return*/, { data: previousData }];\n                }\n            });\n        }); } });\n    return treeDataProvider;\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useRef } from 'react';\nimport { useMutation, useQueryClient, } from 'react-query';\nimport { useDataProvider } from 'react-admin';\n/**\n * Get a callback to call the dataProvider.addRootNode() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The addRootNode parameters { data }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.data The record to add as a root node, e.g. { title: 'hello, world' }\n *\n * @returns The current mutation state. Destructure as [addRootNode, { data, error, isLoading }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [addRootNode, { isLoading: false, isIdle: true }]\n * - start:   [addRootNode, { isLoading: true }]\n * - success: [addRootNode, { data: [data from response], isLoading: false, isSuccess: true }]\n * - error:   [addRootNode, { error: [error from response], isLoading: false, isError: true }]\n *\n * The addRootNode() function must be called with a resource and a parameter object: addRootNode(resource, { data, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://react-query.tanstack.com/reference/useMutation\n *\n * @example // set params when calling the addRootNode callback\n *\n * import { useAddRootNode } from '@react-admin/ra-tree';\n *\n * const AddNodeButton = () => {\n *     const node = { title: 'a root node' };\n *     const [addRootNode, { isLoading, error }] = useAddRootNode();\n *     const handleClick = () => {\n *         addRootNode('nodes', { data: node })\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={() => addRootNode()}>Add a new root node</button>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useAddRootNode } from '@react-admin/ra-tree';\n *\n * const AddNodeButton = () => {\n *     const node = { title: 'a root node' };\n *     const [addRootNode, { isLoading, error }] = useAddRootNode('nodes', { data: node });\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={() => addRootNode()}>Add a new root node</button>;\n * };\n *\n * @example // TypeScript\n * const [addRootNode, { data }] = useAddRootNode<Product>('products', { data: product });\n *                    \\-- data is Product\n */\nexport var useAddRootNode = function (resource, params, options) {\n    if (params === void 0) { params = {}; }\n    if (options === void 0) { options = {}; }\n    var dataProvider = useDataProvider();\n    var queryClient = useQueryClient();\n    var paramsRef = useRef(params);\n    var mutation = useMutation(function (_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.resource, callTimeResource = _c === void 0 ? resource : _c, _d = _b.data, callTimeData = _d === void 0 ? paramsRef.current.data : _d, _e = _b.meta, callTimeMeta = _e === void 0 ? paramsRef.current.meta : _e;\n        return dataProvider\n            .addRootNode(callTimeResource, {\n            data: callTimeData,\n            meta: callTimeMeta,\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign(__assign({}, options), { onSuccess: function (data, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            var _a = variables.resource, callTimeResource = _a === void 0 ? resource : _a;\n            queryClient.setQueryData([callTimeResource, 'getOne', { id: String(data.id) }], data);\n            if (options.onSuccess) {\n                options.onSuccess(data, variables, context);\n            }\n            // call-time success callback is executed by react-query\n        } }));\n    var addRootNode = function (callTimeResource, callTimeParams, callTimeOptions) {\n        if (callTimeResource === void 0) { callTimeResource = resource; }\n        if (callTimeParams === void 0) { callTimeParams = {}; }\n        if (callTimeOptions === void 0) { callTimeOptions = {}; }\n        var returnPromise = callTimeOptions.returnPromise, otherOptions = __rest(callTimeOptions, [\"returnPromise\"]);\n        if (returnPromise) {\n            return mutation.mutateAsync(__assign({ resource: callTimeResource }, callTimeParams), callTimeOptions);\n        }\n        mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), otherOptions);\n    };\n    return [addRootNode, mutation];\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useRef } from 'react';\nimport { useMutation, useQueryClient, } from 'react-query';\nimport { undoableEventEmitter, useDataProvider, } from 'react-admin';\n/**\n * Get a callback to call the dataProvider.deleteBranch() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The deleteBranch parameters { id, previousData }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.id The resource identifier, e.g. 123\n * @prop params.previousData The record before the update is applied\n *\n * @returns The current mutation state. Destructure as [deleteBranch, { data, error, isLoading }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [deleteBranch, { isLoading: false, isIdle: true }]\n * - start:   [deleteBranch, { isLoading: true }]\n * - success: [deleteBranch, { data: [data from response], isLoading: false, isSuccess: true }]\n * - error:   [deleteBranch, { error: [error from response], isLoading: false, isError: true }]\n *\n * The deleteBranch() function must be called with a resource and a parameter object: deleteBranch(resource, { id, previousData, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://react-query.tanstack.com/reference/useMutation\n *\n * @example // set params when calling the deleteBranch callback\n *\n * import { useDeleteBranch } from 'react-admin';\n *\n * const DeleteButton = ({ record }) => {\n *     const [deleteBranch, { isLoading, error }] = useDeleteBranch();\n *     const handleClick = () => {\n *         deleteBranch('nodes', { id: record.id }, record)\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={handleClick}>Delete</div>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useDeleteBranch } from 'react-admin';\n *\n * const DeleteButton = ({ record }) => {\n *     const [deleteBranch, { isLoading, error }] = useDeleteBranch('nodes', { id: record.id }, record);\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={() => deleteBranch()}>Delete</button>;\n * };\n *\n * @example // TypeScript\n * const [delete, { data }] = deleteBranch<Category>('nodes', { id });\n *                    \\-- data is Category\n */\nexport var useDeleteBranch = function (resource, params, options) {\n    if (params === void 0) { params = { id: undefined }; }\n    if (options === void 0) { options = {}; }\n    var dataProvider = useDataProvider();\n    var queryClient = useQueryClient();\n    var id = params.id, previousData = params.previousData;\n    var _a = options.mutationMode, mutationMode = _a === void 0 ? 'pessimistic' : _a, reactMutationOptions = __rest(options, [\"mutationMode\"]);\n    var mode = useRef(mutationMode);\n    var paramsRef = useRef(params);\n    var snapshot = useRef([]);\n    var updateCache = function (_a) {\n        var resource = _a.resource, id = _a.id;\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        var now = Date.now();\n        var updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n        var removeRecord = function (old, parentId) {\n            var index = old.findIndex(\n            // eslint-disable-next-line eqeqeq\n            function (record) { return record.id == parentId; });\n            if (index === -1) {\n                return old;\n            }\n            var record = old[index];\n            var newRecords = __spreadArray(__spreadArray([], old.slice(0, index), true), old.slice(index + 1), true);\n            var children = record.children || [];\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n                var childId = children_1[_i];\n                newRecords = removeRecord(newRecords, childId);\n            }\n            return newRecords;\n        };\n        var updateCollection = function (old) {\n            var newRecords = removeRecord(old, id);\n            return newRecords.map(function (record) { return (__assign(__assign({}, record), { children: record.children\n                    ? record.children.filter(function (childId) { return childId !== id; })\n                    : record.children })); });\n        };\n        queryClient.setQueriesData([resource, 'getTree'], function (res) {\n            if (!res)\n                return res;\n            var newCollection = updateCollection(res);\n            var recordWasFound = newCollection.length < res.length;\n            return recordWasFound ? newCollection : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getRootNodes'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getChildNodes'], function (res) {\n            if (!res)\n                return res;\n            var newCollection = updateCollection(res);\n            var recordWasFound = newCollection.length < res.length;\n            return recordWasFound ? newCollection : res;\n        }, { updatedAt: updatedAt });\n    };\n    var mutation = useMutation(function (_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.resource, callTimeResource = _c === void 0 ? resource : _c, _d = _b.id, callTimeId = _d === void 0 ? paramsRef.current.id : _d, _e = _b.previousData, callTimePreviousData = _e === void 0 ? paramsRef.current.previousData : _e, _f = _b.meta, callTimeMeta = _f === void 0 ? paramsRef.current.meta : _f;\n        return dataProvider\n            .deleteBranch(callTimeResource, {\n            id: callTimeId,\n            previousData: callTimePreviousData,\n            meta: callTimeMeta,\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign(__assign({}, reactMutationOptions), { onMutate: function (variables) { return __awaiter(void 0, void 0, void 0, function () {\n            var userContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!reactMutationOptions.onMutate) return [3 /*break*/, 2];\n                        return [4 /*yield*/, reactMutationOptions.onMutate(variables)];\n                    case 1:\n                        userContext = (_a.sent()) || {};\n                        return [2 /*return*/, __assign({ snapshot: snapshot.current }, userContext)];\n                    case 2: \n                    // Return a context object with the snapshot value\n                    return [2 /*return*/, { snapshot: snapshot.current }];\n                }\n            });\n        }); }, onError: function (error, variables, context) {\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0], value = _a[1];\n                    queryClient.setQueryData(key, value);\n                });\n            }\n            if (reactMutationOptions.onError) {\n                return reactMutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        }, onSuccess: function (data, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                var _a = variables.resource, callTimeResource = _a === void 0 ? resource : _a, _b = variables.id, callTimeId = _b === void 0 ? id : _b;\n                updateCache({\n                    resource: callTimeResource,\n                    id: callTimeId,\n                });\n                if (reactMutationOptions.onSuccess) {\n                    reactMutationOptions.onSuccess(data, variables, context);\n                }\n                // call-time success callback is executed by react-query\n            }\n        }, onSettled: function (data, error, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0];\n                    queryClient.invalidateQueries(key);\n                });\n            }\n            if (reactMutationOptions.onSettled) {\n                return reactMutationOptions.onSettled(data, error, variables, context);\n            }\n        } }));\n    var mutate = function (callTimeResource, callTimeParams, callTimeOptions) {\n        if (callTimeResource === void 0) { callTimeResource = resource; }\n        if (callTimeParams === void 0) { callTimeParams = {}; }\n        if (callTimeOptions === void 0) { callTimeOptions = {}; }\n        return __awaiter(void 0, void 0, void 0, function () {\n            var mutationMode, onSuccess, onSettled, onError, _a, callTimeId, _b, callTimePreviousData, queryKeys;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        mutationMode = callTimeOptions.mutationMode, onSuccess = callTimeOptions.onSuccess, onSettled = callTimeOptions.onSettled, onError = callTimeOptions.onError;\n                        // store the hook time params *at the moment of the call*\n                        // because they may change afterwards, which would break the undoable mode\n                        // as the previousData would be overwritten by the optimistic update\n                        paramsRef.current = params;\n                        if (mutationMode) {\n                            mode.current = mutationMode;\n                        }\n                        if (mode.current === 'pessimistic') {\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSuccess: onSuccess, onSettled: onSettled, onError: onError })];\n                        }\n                        _a = callTimeParams.id, callTimeId = _a === void 0 ? id : _a, _b = callTimeParams.previousData, callTimePreviousData = _b === void 0 ? previousData : _b;\n                        queryKeys = [\n                            [callTimeResource, 'getTree'],\n                            [callTimeResource, 'getRootNodes'],\n                            [callTimeResource, 'getChildNodes'],\n                        ];\n                        /**\n                         * Snapshot the previous values via queryClient.getQueriesData()\n                         *\n                         * The snapshotData ref will contain an array of tuples [query key, associated data]\n                         *\n                         * @example\n                         * [\n                         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n                         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n                         * ]\n                         *\n                         * @see https://react-query.tanstack.com/reference/QueryClient#queryclientgetqueriesdata\n                         */\n                        snapshot.current = queryKeys.reduce(function (prev, curr) { return prev.concat(queryClient.getQueriesData(curr)); }, []);\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        return [4 /*yield*/, Promise.all(snapshot.current.map(function (_a) {\n                                var key = _a[0];\n                                return queryClient.cancelQueries(key);\n                            }))];\n                    case 1:\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        _c.sent();\n                        // Optimistically update to the new value\n                        updateCache({\n                            resource: callTimeResource,\n                            id: callTimeId,\n                        });\n                        // run the success callbacks during the next tick\n                        if (onSuccess) {\n                            setTimeout(function () {\n                                return onSuccess(callTimePreviousData, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (reactMutationOptions.onSuccess) {\n                            setTimeout(function () {\n                                return reactMutationOptions.onSuccess(callTimePreviousData, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (mode.current === 'optimistic') {\n                            // call the mutate method without success side effects\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError })];\n                        }\n                        else {\n                            // undoable mutation: register the mutation for later\n                            undoableEventEmitter.once('end', function (_a) {\n                                var isUndo = _a.isUndo;\n                                if (isUndo) {\n                                    // rollback\n                                    snapshot.current.forEach(function (_a) {\n                                        var key = _a[0], value = _a[1];\n                                        queryClient.setQueryData(key, value);\n                                    });\n                                }\n                                else {\n                                    // call the mutate method without success side effects\n                                    mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError });\n                                }\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return [mutate, mutation];\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { useDataProvider } from 'react-admin';\nimport { useMutation, } from 'react-query';\n/**\n * Internal hook used to lazy load a node children using the dataProvider.getChildNodes() method.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getChildNodes parameters\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.parentId The parent node identifier\n * @prop params.meta Optional meta parameters\n\n * The data structure is a flat array of TreeRecords (i.e. Records with a children field containing an array of Identifiers).\n *\n * @example // sample return value\n * [\n *   { id: 1, title: 'foo1', children: [3, 4] },\n *   { id: 2, title: 'foo2', children: [] },\n *   { id: 3, title: 'foo3', children: [5] },\n *   { id: 4, title: 'foo4', children: [] },\n *   { id: 5, title: 'foo5', children: [] },\n * ]\n */\nexport var useGetChildNodesCallback = function (resource, params, options) {\n    var dataProvider = useDataProvider();\n    var mutation = useMutation([resource, 'getChildNodes', params], function (variables) {\n        return dataProvider\n            .getChildNodes(resource, __assign(__assign({}, params), variables))\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign({}, options));\n    var callback = useCallback(function (parentId) {\n        return mutation.mutateAsync(__assign(__assign({}, params), { parentId: parentId }));\n    }, [mutation, params]);\n    return callback;\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar removeChildren = function (record) { return (__assign(__assign({}, record), { children: record.children.map(function (record) { return record.id; }) })); };\nexport default removeChildren;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { useDataProvider } from 'react-admin';\nimport { useMutation, useQueryClient, } from 'react-query';\nimport { updateQueryCacheFromGetTree } from './useGetTree';\n/**\n * Get a callback to call the dataProvider.getTree() method.\n *\n * Useful for refreshing the tree in an event handler.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getTree parameters { meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * The data structure is a flat array of TreeRecords (i.e. Records with a children field containing an array of Identifiers).\n *\n * @example // sample return value\n * [\n *   { id: 1, title: 'foo1', children: [3, 4] },\n *   { id: 2, title: 'foo2', children: [] },\n *   { id: 3, title: 'foo3', children: [5] },\n *   { id: 4, title: 'foo4', children: [] },\n *   { id: 5, title: 'foo5', children: [] },\n * ]\n *\n * @example // usage\n *\n * import { useNotify } from 'react-admin';\n * import { useGetTreeCallback } from '@react-admin/ra-tree';\n *\n * const MyComponent = () => {\n *     const refreshTree = useGetTreeCallback(resource);\n *\n *     const handleClick = () => {\n *         refreshTree()\n *             .then(tree => {\n *                 notify(`Reloaded ${tree.length} tree nodes`);\n *             });\n *     };\n *\n *     return <button onClick={handleClick}>Refresh tree</button>;\n * }\n */\nexport var useGetTreeCallback = function (resource, params, options) {\n    var dataProvider = useDataProvider();\n    var queryClient = useQueryClient();\n    var mutation = useMutation([resource, 'getTree', params], function () {\n        return dataProvider\n            .getTree(resource, params)\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign({ onSuccess: function (data) {\n            updateQueryCacheFromGetTree(queryClient, resource, data, params);\n        } }, options));\n    var callback = useCallback(function () { return mutation.mutateAsync(params); }, [mutation, params]);\n    return callback;\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useRef } from 'react';\nimport { useMutation, useQueryClient, } from 'react-query';\nimport { undoableEventEmitter, useDataProvider, } from 'react-admin';\nimport cloneDeep from 'lodash/cloneDeep';\n/**\n * Get a callback to call the dataProvider.moveAsNthChildOf() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The moveAsNthChildOf parameters { id, previousData }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.id The resource identifier, e.g. 123\n * @prop params.previousData The record before the update is applied\n *\n * @returns The current mutation state. Destructure as [moveAsNthChildOf, { data, error, isLoading }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [moveAsNthChildOf, { isLoading: false, isIdle: true }]\n * - start:   [moveAsNthChildOf, { isLoading: true }]\n * - success: [moveAsNthChildOf, { data: [data from response], isLoading: false, isSuccess: true }]\n * - error:   [moveAsNthChildOf, { error: [error from response], isLoading: false, isError: true }]\n *\n * The moveAsNthChildOf() function must be called with a resource and a parameter object: moveAsNthChildOf(resource, { id, previousData, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://react-query.tanstack.com/reference/useMutation\n *\n * @example // set params when calling the moveAsNthChildOf callback\n *\n * import { useMoveAsNthChildOf } from '@react-admin/ra-tree';\n *\n * const MoveAsNthChildOfButton = ({ record }) => {\n *     const [moveAsNthChildOf, { isLoading, error }] = useMoveAsNthChildOf();\n *     const handleClick = () => {\n *         moveAsNthChildOf('nodes', { id: record.id }, record)\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={handleClick}>Delete</div>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useMoveAsNthChildOf } from '@react-admin/ra-tree';\n *\n * const DeleteButton = ({ record }) => {\n *     const [moveAsNthChildOf, { isLoading, error }] = useMoveAsNthChildOf('nodes', { id: record.id }, record);\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={() => moveAsNthChildOf()}>Delete</button>;\n * };\n *\n * @example // TypeScript\n * const [delete, { data }] = useMoveAsNthChildOf<Product>('products', { id, previousData: product });\n *                    \\-- data is Product\n */\nexport var useMoveAsNthChildOf = function (resource, params, options) {\n    if (params === void 0) { params = {\n        source: undefined,\n        destination: undefined,\n        position: undefined,\n        meta: undefined,\n    }; }\n    if (options === void 0) { options = {}; }\n    var dataProvider = useDataProvider();\n    var queryClient = useQueryClient();\n    var source = params.source, destination = params.destination, position = params.position;\n    var _a = options.mutationMode, mutationMode = _a === void 0 ? 'undoable' : _a, reactMutationOptions = __rest(options, [\"mutationMode\"]);\n    var mode = useRef(mutationMode);\n    var paramsRef = useRef(params);\n    var snapshot = useRef([]);\n    var updateCache = function (_a) {\n        var resource = _a.resource, position = _a.position, source = _a.source, destination = _a.destination;\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        var now = Date.now();\n        var updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n        var updateCollection = function (old) {\n            var newRecords = cloneDeep(old);\n            // Remove the node from its previous parent\n            var oldParent = newRecords.find(function (record) {\n                return record.children.includes(source.id);\n            });\n            if (oldParent) {\n                oldParent.children = oldParent.children.filter(function (childId) { return childId !== source.id; });\n            }\n            else {\n                // It's a root node\n                newRecords = newRecords.filter(function (record) { return record.id !== source.id; });\n            }\n            // Add the node to the new parent\n            var newParent = newRecords.find(function (record) { return record.id === destination.id; });\n            if (newParent) {\n                newParent.children = __spreadArray(__spreadArray(__spreadArray([], newParent.children.slice(0, position), true), [\n                    source.id\n                ], false), newParent.children.slice(position), true);\n            }\n            else {\n                // It's a root node\n                newRecords = newRecords.filter(function (record) { return record.id !== source.id; });\n                newRecords = __spreadArray(__spreadArray(__spreadArray([], newRecords.slice(0, position), true), [\n                    source\n                ], false), newRecords.slice(position), true);\n            }\n            return newRecords;\n        };\n        queryClient.setQueriesData([resource, 'getTree'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getRootNodes'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getChildNodes'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n    };\n    var mutation = useMutation(function (_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.resource, callTimeResource = _c === void 0 ? resource : _c, _d = _b.position, callTimePosition = _d === void 0 ? paramsRef.current.position : _d, _e = _b.source, callTimeSource = _e === void 0 ? paramsRef.current.source : _e, _f = _b.destination, callTimeDestination = _f === void 0 ? paramsRef.current.destination : _f, _g = _b.meta, callTimeMeta = _g === void 0 ? paramsRef.current.meta : _g;\n        return dataProvider\n            .moveAsNthChildOf(callTimeResource, {\n            position: callTimePosition,\n            source: callTimeSource,\n            destination: callTimeDestination,\n            meta: callTimeMeta,\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign(__assign({}, reactMutationOptions), { onMutate: function (variables) { return __awaiter(void 0, void 0, void 0, function () {\n            var userContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!reactMutationOptions.onMutate) return [3 /*break*/, 2];\n                        return [4 /*yield*/, reactMutationOptions.onMutate(variables)];\n                    case 1:\n                        userContext = (_a.sent()) || {};\n                        return [2 /*return*/, __assign({ snapshot: snapshot.current }, userContext)];\n                    case 2: \n                    // Return a context object with the snapshot value\n                    return [2 /*return*/, { snapshot: snapshot.current }];\n                }\n            });\n        }); }, onError: function (error, variables, context) {\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0], value = _a[1];\n                    queryClient.setQueryData(key, value);\n                });\n            }\n            if (reactMutationOptions.onError) {\n                return reactMutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        }, onSuccess: function (data, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                var _a = variables.resource, callTimeResource = _a === void 0 ? resource : _a, _b = variables.position, callTimePosition = _b === void 0 ? position : _b, _c = variables.source, callTimeSource = _c === void 0 ? source : _c, _d = variables.destination, callTimeDestination = _d === void 0 ? destination : _d;\n                updateCache({\n                    resource: callTimeResource,\n                    position: callTimePosition,\n                    source: callTimeSource,\n                    destination: callTimeDestination,\n                });\n                if (reactMutationOptions.onSuccess) {\n                    reactMutationOptions.onSuccess(data, variables, context);\n                }\n                // call-time success callback is executed by react-query\n            }\n        }, onSettled: function (data, error, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0];\n                    queryClient.invalidateQueries(key);\n                });\n            }\n            if (reactMutationOptions.onSettled) {\n                return reactMutationOptions.onSettled(data, error, variables, context);\n            }\n        } }));\n    var mutate = function (callTimeResource, callTimeParams, callTimeOptions) {\n        if (callTimeResource === void 0) { callTimeResource = resource; }\n        if (callTimeParams === void 0) { callTimeParams = {}; }\n        if (callTimeOptions === void 0) { callTimeOptions = {}; }\n        return __awaiter(void 0, void 0, void 0, function () {\n            var mutationMode, onSuccess, onSettled, onError, _a, callTimePosition, _b, callTimeSource, _c, callTimeDestination, queryKeys;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        mutationMode = callTimeOptions.mutationMode, onSuccess = callTimeOptions.onSuccess, onSettled = callTimeOptions.onSettled, onError = callTimeOptions.onError;\n                        // store the hook time params *at the moment of the call*\n                        // because they may change afterwards, which would break the undoable mode\n                        // as the previousData would be overwritten by the optimistic update\n                        paramsRef.current = params;\n                        if (mutationMode) {\n                            mode.current = mutationMode;\n                        }\n                        if (mode.current === 'pessimistic') {\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSuccess: onSuccess, onSettled: onSettled, onError: onError })];\n                        }\n                        _a = callTimeParams.position, callTimePosition = _a === void 0 ? position : _a, _b = callTimeParams.source, callTimeSource = _b === void 0 ? source : _b, _c = callTimeParams.destination, callTimeDestination = _c === void 0 ? destination : _c;\n                        queryKeys = [\n                            [callTimeResource, 'getTree'],\n                            [callTimeResource, 'getRootNodes'],\n                            [callTimeResource, 'getChildNodes'],\n                        ];\n                        /**\n                         * Snapshot the previous values via queryClient.getQueriesData()\n                         *\n                         * The snapshotData ref will contain an array of tuples [query key, associated data]\n                         *\n                         * @example\n                         * [\n                         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n                         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n                         * ]\n                         *\n                         * @see https://react-query.tanstack.com/reference/QueryClient#queryclientgetqueriesdata\n                         */\n                        snapshot.current = queryKeys.reduce(function (prev, curr) { return prev.concat(queryClient.getQueriesData(curr)); }, []);\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        return [4 /*yield*/, Promise.all(snapshot.current.map(function (_a) {\n                                var key = _a[0];\n                                return queryClient.cancelQueries(key);\n                            }))];\n                    case 1:\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        _d.sent();\n                        // Optimistically update to the new value\n                        updateCache({\n                            resource: callTimeResource,\n                            position: callTimePosition,\n                            source: callTimeSource,\n                            destination: callTimeDestination,\n                        });\n                        // run the success callbacks during the next tick\n                        if (onSuccess) {\n                            setTimeout(function () {\n                                return onSuccess(undefined, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (reactMutationOptions.onSuccess) {\n                            setTimeout(function () {\n                                return reactMutationOptions.onSuccess(undefined, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (mode.current === 'optimistic') {\n                            // call the mutate method without success side effects\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError })];\n                        }\n                        else {\n                            // undoable mutation: register the mutation for later\n                            undoableEventEmitter.once('end', function (_a) {\n                                var isUndo = _a.isUndo;\n                                if (isUndo) {\n                                    // rollback\n                                    snapshot.current.forEach(function (_a) {\n                                        var key = _a[0], value = _a[1];\n                                        queryClient.setQueryData(key, value);\n                                    });\n                                }\n                                else {\n                                    // call the mutate method without success side effects\n                                    mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError });\n                                }\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return [mutate, mutation];\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useRef } from 'react';\nimport { useMutation, useQueryClient, } from 'react-query';\nimport { undoableEventEmitter, useDataProvider, } from 'react-admin';\nimport cloneDeep from 'lodash/cloneDeep';\n/**\n * Get a callback to call the dataProvider.moveAsNthChildOf() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The moveAsNthChildOf parameters { id, previousData }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.id The resource identifier, e.g. 123\n * @prop params.previousData The record before the update is applied\n *\n * @returns The current mutation state. Destructure as [moveAsNthChildOf, { data, error, isLoading }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [moveAsNthChildOf, { isLoading: false, isIdle: true }]\n * - start:   [moveAsNthChildOf, { isLoading: true }]\n * - success: [moveAsNthChildOf, { data: [data from response], isLoading: false, isSuccess: true }]\n * - error:   [moveAsNthChildOf, { error: [error from response], isLoading: false, isError: true }]\n *\n * The moveAsNthChildOf() function must be called with a resource and a parameter object: moveAsNthChildOf(resource, { id, previousData, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://react-query.tanstack.com/reference/useMutation\n *\n * @example // set params when calling the moveAsNthChildOf callback\n *\n * import { useMoveAsNthSiblingOf } from '@react-admin/ra-tree';\n *\n * const MoveAsNthChildOfButton = ({ record }) => {\n *     const [moveAsNthChildOf, { isLoading, error }] = useMoveAsNthSiblingOf();\n *     const handleClick = () => {\n *         moveAsNthChildOf('nodes', { id: record.id }, record)\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={handleClick}>Delete</div>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useMoveAsNthSiblingOf } from '@react-admin/ra-tree';\n *\n * const DeleteButton = ({ record }) => {\n *     const [moveAsNthChildOf, { isLoading, error }] = useMoveAsNthSiblingOf('nodes', { id: record.id }, record);\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isLoading} onClick={() => moveAsNthChildOf()}>Delete</button>;\n * };\n *\n * @example // TypeScript\n * const [delete, { data }] = useMoveAsNthSiblingOf<Product>('products', { id, previousData: product });\n *                    \\-- data is Product\n */\nexport var useMoveAsNthSiblingOf = function (resource, params, options) {\n    if (params === void 0) { params = {\n        source: undefined,\n        destination: undefined,\n        position: undefined,\n        meta: undefined,\n    }; }\n    if (options === void 0) { options = {}; }\n    var dataProvider = useDataProvider();\n    var queryClient = useQueryClient();\n    var source = params.source, destination = params.destination, position = params.position;\n    var _a = options.mutationMode, mutationMode = _a === void 0 ? 'undoable' : _a, reactMutationOptions = __rest(options, [\"mutationMode\"]);\n    var mode = useRef(mutationMode);\n    var paramsRef = useRef(params);\n    var snapshot = useRef([]);\n    var updateCache = function (_a) {\n        var resource = _a.resource, position = _a.position, source = _a.source, destination = _a.destination;\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        var now = Date.now();\n        var updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n        var updateCollection = function (old) {\n            var newRecords = cloneDeep(old);\n            var oldParent = newRecords.find(function (record) {\n                return record.children.includes(source.id);\n            });\n            var newParent = newRecords.find(function (record) {\n                return record.children.includes(destination.id);\n            });\n            // if source and dest come from the same parent, and if the source was moved to a lower position,\n            // the final position will be position - 1\n            var finalPosition = position;\n            if (oldParent &&\n                newParent &&\n                oldParent.id === newParent.id &&\n                oldParent.children.findIndex(function (child) { return child === source.id; }) <\n                    oldParent.children.findIndex(function (child) { return child === destination.id; })) {\n                finalPosition = position - 1;\n            }\n            if (oldParent) {\n                // Remove the node from its old parent\n                oldParent.children = oldParent.children.filter(function (child) { return child !== source.id; });\n            }\n            else {\n                // It's a root node\n                newRecords = newRecords.filter(function (record) { return record.id !== source.id; });\n            }\n            // Add the node to its new parent at correct position\n            if (newParent) {\n                newParent.children = __spreadArray(__spreadArray(__spreadArray([], newParent.children.slice(0, finalPosition), true), [\n                    source.id\n                ], false), newParent.children.slice(finalPosition), true);\n            }\n            else {\n                // It's a root node\n                newRecords = newRecords.filter(function (record) { return record.id !== source.id; });\n                newRecords = __spreadArray(__spreadArray(__spreadArray([], newRecords.slice(0, position), true), [\n                    source\n                ], false), newRecords.slice(position), true);\n            }\n            return newRecords;\n        };\n        queryClient.setQueriesData([resource, 'getTree'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getRootNodes'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n        queryClient.setQueriesData([resource, 'getChildNodes'], function (res) {\n            return res && res.length > 0 ? updateCollection(res) : res;\n        }, { updatedAt: updatedAt });\n    };\n    var mutation = useMutation(function (_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.resource, callTimeResource = _c === void 0 ? resource : _c, _d = _b.position, callTimePosition = _d === void 0 ? paramsRef.current.position : _d, _e = _b.source, callTimeSource = _e === void 0 ? paramsRef.current.source : _e, _f = _b.destination, callTimeDestination = _f === void 0 ? paramsRef.current.destination : _f, _g = _b.meta, callTimeMeta = _g === void 0 ? paramsRef.current.meta : _g;\n        return dataProvider\n            .moveAsNthSiblingOf(callTimeResource, {\n            position: callTimePosition,\n            source: callTimeSource,\n            destination: callTimeDestination,\n            meta: callTimeMeta,\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return data;\n        });\n    }, __assign(__assign({}, reactMutationOptions), { onMutate: function (variables) { return __awaiter(void 0, void 0, void 0, function () {\n            var userContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!reactMutationOptions.onMutate) return [3 /*break*/, 2];\n                        return [4 /*yield*/, reactMutationOptions.onMutate(variables)];\n                    case 1:\n                        userContext = (_a.sent()) || {};\n                        return [2 /*return*/, __assign({ snapshot: snapshot.current }, userContext)];\n                    case 2: \n                    // Return a context object with the snapshot value\n                    return [2 /*return*/, { snapshot: snapshot.current }];\n                }\n            });\n        }); }, onError: function (error, variables, context) {\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0], value = _a[1];\n                    queryClient.setQueryData(key, value);\n                });\n            }\n            if (reactMutationOptions.onError) {\n                return reactMutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        }, onSuccess: function (data, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                var _a = variables.resource, callTimeResource = _a === void 0 ? resource : _a, _b = variables.position, callTimePosition = _b === void 0 ? position : _b, _c = variables.source, callTimeSource = _c === void 0 ? source : _c, _d = variables.destination, callTimeDestination = _d === void 0 ? destination : _d;\n                updateCache({\n                    resource: callTimeResource,\n                    position: callTimePosition,\n                    source: callTimeSource,\n                    destination: callTimeDestination,\n                });\n                if (reactMutationOptions.onSuccess) {\n                    reactMutationOptions.onSuccess(data, variables, context);\n                }\n                // call-time success callback is executed by react-query\n            }\n        }, onSettled: function (data, error, variables, context) {\n            if (variables === void 0) { variables = {}; }\n            if (mode.current === 'optimistic' ||\n                mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(function (_a) {\n                    var key = _a[0];\n                    queryClient.invalidateQueries(key);\n                });\n            }\n            if (reactMutationOptions.onSettled) {\n                return reactMutationOptions.onSettled(data, error, variables, context);\n            }\n        } }));\n    var mutate = function (callTimeResource, callTimeParams, callTimeOptions) {\n        if (callTimeResource === void 0) { callTimeResource = resource; }\n        if (callTimeParams === void 0) { callTimeParams = {}; }\n        if (callTimeOptions === void 0) { callTimeOptions = {}; }\n        return __awaiter(void 0, void 0, void 0, function () {\n            var mutationMode, onSuccess, onSettled, onError, _a, callTimePosition, _b, callTimeSource, _c, callTimeDestination, queryKeys;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        mutationMode = callTimeOptions.mutationMode, onSuccess = callTimeOptions.onSuccess, onSettled = callTimeOptions.onSettled, onError = callTimeOptions.onError;\n                        // store the hook time params *at the moment of the call*\n                        // because they may change afterwards, which would break the undoable mode\n                        // as the previousData would be overwritten by the optimistic update\n                        paramsRef.current = params;\n                        if (mutationMode) {\n                            mode.current = mutationMode;\n                        }\n                        if (mode.current === 'pessimistic') {\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSuccess: onSuccess, onSettled: onSettled, onError: onError })];\n                        }\n                        _a = callTimeParams.position, callTimePosition = _a === void 0 ? position : _a, _b = callTimeParams.source, callTimeSource = _b === void 0 ? source : _b, _c = callTimeParams.destination, callTimeDestination = _c === void 0 ? destination : _c;\n                        queryKeys = [\n                            [callTimeResource, 'getTree'],\n                            [callTimeResource, 'getRootNodes'],\n                            [callTimeResource, 'getChildNodes'],\n                        ];\n                        /**\n                         * Snapshot the previous values via queryClient.getQueriesData()\n                         *\n                         * The snapshotData ref will contain an array of tuples [query key, associated data]\n                         *\n                         * @example\n                         * [\n                         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n                         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n                         * ]\n                         *\n                         * @see https://react-query.tanstack.com/reference/QueryClient#queryclientgetqueriesdata\n                         */\n                        snapshot.current = queryKeys.reduce(function (prev, curr) { return prev.concat(queryClient.getQueriesData(curr)); }, []);\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        return [4 /*yield*/, Promise.all(snapshot.current.map(function (_a) {\n                                var key = _a[0];\n                                return queryClient.cancelQueries(key);\n                            }))];\n                    case 1:\n                        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n                        _d.sent();\n                        // Optimistically update to the new value\n                        updateCache({\n                            resource: callTimeResource,\n                            position: callTimePosition,\n                            source: callTimeSource,\n                            destination: callTimeDestination,\n                        });\n                        // run the success callbacks during the next tick\n                        if (onSuccess) {\n                            setTimeout(function () {\n                                return onSuccess(undefined, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (reactMutationOptions.onSuccess) {\n                            setTimeout(function () {\n                                return reactMutationOptions.onSuccess(undefined, __assign({ resource: callTimeResource }, callTimeParams), { snapshot: snapshot.current });\n                            }, 0);\n                        }\n                        if (mode.current === 'optimistic') {\n                            // call the mutate method without success side effects\n                            return [2 /*return*/, mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError })];\n                        }\n                        else {\n                            // undoable mutation: register the mutation for later\n                            undoableEventEmitter.once('end', function (_a) {\n                                var isUndo = _a.isUndo;\n                                if (isUndo) {\n                                    // rollback\n                                    snapshot.current.forEach(function (_a) {\n                                        var key = _a[0], value = _a[1];\n                                        queryClient.setQueryData(key, value);\n                                    });\n                                }\n                                else {\n                                    // call the mutate method without success side effects\n                                    mutation.mutate(__assign({ resource: callTimeResource }, callTimeParams), { onSettled: onSettled, onError: onError });\n                                }\n                            });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return [mutate, mutation];\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/**\n * Helper method to workaround the inability of FakeRest to filter by null values\n * @param dataProvider the base dataProvider\n * @returns a dataProvider with a patched `getRootNodes` method, that will only keep nodes where `node.parent_id === 'undefined'`\n */\nexport var fixFakeRestDataProvider = function (dataProvider) { return (__assign(__assign({}, dataProvider), { getRootNodes: function (resource, params) { return __awaiter(void 0, void 0, void 0, function () {\n        var _a, data, total, filteredNodes;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, dataProvider.getRootNodes(resource, params)];\n                case 1:\n                    _a = _b.sent(), data = _a.data, total = _a.total;\n                    filteredNodes = data.filter(function (node) { return node.parent_id == null; });\n                    return [2 /*return*/, {\n                            data: filteredNodes,\n                            total: total,\n                        }];\n            }\n        });\n    }); }, addRootNode: function (resource, _a) {\n        var data = _a.data, meta = _a.meta;\n        return __awaiter(void 0, void 0, void 0, function () {\n            var roots, filteredRoots, rootPosition, newRoot;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, dataProvider.getList(resource, {\n                            filter: { parent_id: null },\n                            sort: { field: 'position', order: 'ASC' },\n                            pagination: { page: 1, perPage: 1000 },\n                            meta: meta,\n                        })];\n                    case 1:\n                        roots = (_b.sent()).data;\n                        filteredRoots = roots.filter(function (node) { return typeof node.parent_id === 'undefined'; });\n                        rootPosition = filteredRoots.length > 0\n                            ? filteredRoots.reduce(function (acc, curr) {\n                                return curr['position'] > acc ? curr['position'] : acc;\n                            }, -Infinity) + 1\n                            : 0;\n                        return [4 /*yield*/, dataProvider.create(resource, {\n                                data: __assign(__assign({}, data), { parent_id: null, position: rootPosition }),\n                                meta: meta,\n                            })];\n                    case 2:\n                        newRoot = (_b.sent()).data;\n                        return [2 /*return*/, { data: __assign(__assign({}, newRoot), { children: [] }) }];\n                }\n            });\n        });\n    } })); };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback, useState, } from 'react';\nimport { useNotify, useRedirect, useRefresh, } from 'react-admin';\nimport { useDeleteBranch } from '../dataProvider';\n/**\n * Prepare a set of callbacks for a delete branch button guarded by confirmation dialog\n *\n * @example\n *\n * const DeleteBranchButton = ({\n *     resource,\n *     record,\n *     redirect,\n *     onClick,\n *     ...rest\n * }) => {\n *     const {\n *         open,\n *         isLoading,\n *         handleDialogOpen,\n *         handleDialogClose,\n *         handleDelete,\n *     } = useDeleteBranchWithConfirmController({\n *         resource,\n *         record,\n *         redirect,\n *         onClick,\n *     });\n *\n *     return (\n *         <Fragment>\n *             <Button\n *                 onClick={handleDialogOpen}\n *                 label=\"ra.action.delete\"\n *                 {...rest}\n *             >\n *                 {icon}\n *             </Button>\n *             <Confirm\n *                 isOpen={open}\n *                 loading={isLoading}\n *                 title=\"ra.message.delete_title\"\n *                 content=\"ra.message.delete_content\"\n *                 translateOptions={{\n *                     name: resource,\n *                     id: record.id,\n *                 }}\n *                 onConfirm={handleDelete}\n *                 onClose={handleDialogClose}\n *             />\n *         </Fragment>\n *     );\n * };\n */\nexport var useDeleteBranchWithConfirmController = function (_a) {\n    var mutationMode = _a.mutationMode, mutationOptions = _a.mutationOptions, record = _a.record, redirectTo = _a.redirect, resource = _a.resource;\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var _b = useDeleteBranch(), deleteBranch = _b[0], isLoading = _b[1].isLoading;\n    var _c = useState(false), open = _c[0], setOpen = _c[1];\n    var handleDelete = useCallback(function (event) {\n        event.stopPropagation();\n        deleteBranch(resource, {\n            id: record.id,\n            previousData: record,\n        }, __assign({ mutationMode: mutationMode, onSuccess: function () {\n                notify('ra.notification.deleted', {\n                    type: 'info',\n                    messageArgs: { smart_count: 1 },\n                });\n                redirect(redirectTo, resource);\n                refresh();\n            }, onError: function (error) {\n                notify(typeof error === 'string'\n                    ? error\n                    : error.message || 'ra.notification.http_error', { type: 'warning' });\n            } }, mutationOptions));\n    }, [\n        deleteBranch,\n        mutationMode,\n        mutationOptions,\n        notify,\n        record,\n        redirect,\n        redirectTo,\n        refresh,\n        resource,\n    ]);\n    var handleDialogOpen = function (e) {\n        e.stopPropagation();\n        setOpen(true);\n    };\n    var handleDialogClose = function (e) {\n        e.stopPropagation();\n        setOpen(false);\n    };\n    return {\n        handleDelete: handleDelete,\n        handleDialogOpen: handleDialogOpen,\n        handleDialogClose: handleDialogClose,\n        isLoading: isLoading,\n        open: open,\n    };\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useCallback } from 'react';\nimport { useNotify, useRedirect } from 'react-admin';\nimport { useDeleteBranch } from '../dataProvider';\n/**\n * Prepare callback for a delete branch button with undo support\n *\n * @example\n *\n * import React from 'react';\n * import ActionDelete from '@material-ui/icons/Delete';\n * import { Button, useDeleteBranchWithUndoController } from '@react-admin/ra-tree';\n *\n * const DeleteButton = ({\n *     resource,\n *     record,\n *     basePath,\n *     redirect,\n *     onClick,\n *     ...rest\n * }) => {\n *     const [handleDelete, { isLoading }] = useDeleteBranchWithUndoController({\n *         resource,\n *         record,\n *         redirect,\n *     });\n *\n *     const handleClick = () => {\n *         handleDelete();\n *     }\n *\n *     return (\n *         <Button\n *             onClick={handleClick}\n *             disabled={isLoading}\n *             label=\"ra.action.delete\"\n *             {...rest}\n *         >\n *             <ActionDelete />\n *         </Button>\n *     );\n * };\n */\nexport var useDeleteBranchWithUndoController = function (_a) {\n    var mutationOptions = _a.mutationOptions, record = _a.record, _b = _a.redirect, redirectTo = _b === void 0 ? 'list' : _b, resource = _a.resource;\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var _c = useDeleteBranch(), deleteBranch = _c[0], isLoading = _c[1].isLoading;\n    var handleDelete = useCallback(function (event) {\n        event.stopPropagation();\n        deleteBranch(resource, {\n            id: record.id,\n            previousData: record,\n        }, __assign({ onSuccess: function () {\n                notify('ra.notification.deleted', {\n                    type: 'info',\n                    messageArgs: { smart_count: 1 },\n                    undoable: true,\n                });\n                redirect(redirectTo, resource);\n            }, onError: function (error) {\n                return notify(typeof error === 'string'\n                    ? error\n                    : error.message || 'ra.notification.http_error', { type: 'warning' });\n            }, mutationMode: 'undoable' }, mutationOptions));\n    }, [\n        deleteBranch,\n        mutationOptions,\n        notify,\n        record,\n        redirect,\n        redirectTo,\n        resource,\n    ]);\n    return { handleDelete: handleDelete, isLoading: isLoading };\n};\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useAuthenticated, useEvent, useGetResourceLabel, useNotify, useRedirect, useResourceContext, useResourceDefinition, useTranslate, } from 'react-admin';\nimport { useQueryClient } from 'react-query';\nimport { useAddRootNode, useAddChildNode } from '../dataProvider';\nimport { useTreeContext } from './useTreeContext';\nimport { UNSAVED_NEW_NODE } from '..';\n/**\n * Prepare data for the Create view\n *\n * @param {Object} props The props passed to the Create component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Create view\n *\n * @example\n *\n * import { CreateView } from 'react-admin';\n * import { useCreateNodeController } from '@react-admin/ra-tree';\n *\n * const MyCreateNode = props => {\n *     const controllerProps = useCreateNodeController(props);\n *     return <CreateView {...controllerProps} {...props} />;\n * }\n */\nexport var useCreateNodeController = function (props) {\n    var disableAuthentication = props.disableAuthentication, _a = props.record, record = _a === void 0 ? {} : _a, redirectTo = props.redirect, _b = props.mutationOptions, mutationOptions = _b === void 0 ? {} : _b, transform = props.transform;\n    useAuthenticated({ enabled: !disableAuthentication });\n    var resource = useResourceContext(props);\n    var getResourceLabel = useGetResourceLabel();\n    var queryClient = useQueryClient();\n    var location = useLocation();\n    var _c = useTreeContext(), lazy = _c.lazy, setFinalData = _c.setFinalData, handleAddNode = _c.handleAddNode, expandedKeys = _c.expandedKeys, handleExpand = _c.handleExpand;\n    var parentId = location.state && location.state.parentId;\n    var isChild = typeof parentId !== 'undefined' && parentId !== null;\n    var recordToUse = (location.state && location.state.record) ||\n        record;\n    var onSuccess = mutationOptions.onSuccess, onError = mutationOptions.onError, otherMutationOptions = __rest(mutationOptions, [\"onSuccess\", \"onError\"]);\n    var _d = useResourceDefinition(props), hasEdit = _d.hasEdit, hasShow = _d.hasShow;\n    var finalRedirectTo = redirectTo || getDefaultRedirectRoute(hasShow, hasEdit);\n    var _e = useAddRootNode(resource, undefined, otherMutationOptions), createRoot = _e[0], createRootState = _e[1];\n    var _f = useAddChildNode(resource, undefined, otherMutationOptions), createChild = _f[0], createChildState = _f[1];\n    var handleAddNodeEvent = useEvent(handleAddNode);\n    // show a local new node in the tree on mount, remove it on unmount\n    useEffect(function () {\n        handleAddNodeEvent({\n            record: {},\n            parentId: parentId,\n        });\n        return function () {\n            handleAddNodeEvent(undefined);\n        };\n    }, [handleAddNodeEvent, parentId]);\n    var translate = useTranslate();\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var save = useCallback(function (data, _a) {\n        var _b = _a === void 0 ? {} : _a, onSuccessFromSave = _b.onSuccess, onErrorFromSave = _b.onError, transformFromSave = _b.transform;\n        var defaultOnSuccess = function (newNode) {\n            notify('ra.notification.created', {\n                type: 'info',\n                messageArgs: {\n                    smart_count: 1,\n                },\n            });\n            redirect(finalRedirectTo, resource, newNode.id, newNode);\n            queryClient.refetchQueries([resource, 'getTree'], {\n                active: true,\n            });\n            queryClient.refetchQueries([resource, 'getRootNodes'], {\n                active: true,\n            });\n            // In lazy mode we can't rely on react-query to update the tree\n            // so we need to remove the temporary node manually, and collapse\n            // the parent node to force a reload of its children\n            if (lazy && setFinalData && handleExpand) {\n                setFinalData(function (old) {\n                    return old.filter(function (node) { return node.id !== UNSAVED_NEW_NODE; });\n                });\n                handleExpand(expandedKeys.filter(function (key) { return key !== String(parentId); }));\n            }\n        };\n        var defaultOnError = function (error) {\n            notify(typeof error === 'string'\n                ? error\n                : error.message || 'ra.notification.http_error', { type: 'warning' });\n        };\n        return Promise.resolve(transformFromSave\n            ? transformFromSave(data)\n            : transform\n                ? transform(data)\n                : data).then(function (data) {\n            var options = {\n                onSuccess: function (data, variables, context) {\n                    handleAddNodeEvent(undefined);\n                    onSuccessFromSave\n                        ? onSuccessFromSave(data, variables, context)\n                        : onSuccess\n                            ? onSuccess(data, variables, context)\n                            : defaultOnSuccess(data);\n                },\n                onError: onErrorFromSave\n                    ? onErrorFromSave\n                    : onError\n                        ? onError\n                        : defaultOnError,\n            };\n            if (isChild) {\n                return createChild(resource, { data: data, parentId: parentId, meta: otherMutationOptions.meta }, options);\n            }\n            else {\n                return createRoot(resource, { data: data, meta: otherMutationOptions.meta }, options);\n            }\n        });\n    }, [\n        createChild,\n        createRoot,\n        handleAddNodeEvent,\n        isChild,\n        notify,\n        onError,\n        onSuccess,\n        parentId,\n        queryClient,\n        redirect,\n        resource,\n        transform,\n        otherMutationOptions.meta,\n        finalRedirectTo,\n        lazy,\n        setFinalData,\n        expandedKeys,\n        handleExpand,\n    ]);\n    var resourceName = getResourceLabel(resource, 1);\n    var defaultTitle = translate('ra.page.create', {\n        name: \"\".concat(resourceName),\n    });\n    return {\n        isLoading: false,\n        isFetching: false,\n        defaultTitle: defaultTitle,\n        save: save,\n        saving: createRootState.isLoading || createChildState.isLoading,\n        resource: resource,\n        record: recordToUse,\n        redirect: finalRedirectTo,\n    };\n};\nvar getDefaultRedirectRoute = function (hasShow, hasEdit) {\n    if (hasEdit) {\n        return 'edit';\n    }\n    if (hasShow) {\n        return 'show';\n    }\n    return 'list';\n};\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexport var getNodeKeysRecursively = function (nodeKey, allNodes) {\n    var node = allNodes.find(function (node) { return node.id == nodeKey; });\n    if (!node)\n        return [];\n    return __spreadArray([\n        node.id.toString()\n    ], (node.children || []).flatMap(function (key) {\n        return getNodeKeysRecursively(key, allNodes);\n    }), true);\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useGetResourceLabel, useTranslate, useResourceContext, useNotify, } from 'react-admin';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { useGetChildNodesCallback, useGetRootNodes, useGetTree, useGetTreeCallback, useMoveAsNthChildOf, useMoveAsNthSiblingOf, } from '../dataProvider';\nimport { getRCTree, useExpandedKeys } from '../util';\nimport { UNSAVED_NEW_NODE } from '../constants';\nimport { getNodeKeysRecursively } from './getNodesKeysRecursively';\nexport var useTreeController = function (options) {\n    var translate = useTranslate();\n    var resource = useResourceContext(options);\n    var getResourceLabel = useGetResourceLabel();\n    var hideRootNodes = options.hideRootNodes, _a = options.lazy, lazy = _a === void 0 ? false : _a, _b = options.titleField, titleField = _b === void 0 ? 'title' : _b, _c = options.mutationMode, mutationMode = _c === void 0 ? 'undoable' : _c, meta = options.meta;\n    // load entire tree on mount if lazy loading is not enabled\n    var treeState = useGetTree(resource, { meta: meta }, { enabled: !lazy });\n    // load only the root nodes on mount if lazy loading is enabled\n    var rootNodesState = useGetRootNodes(resource, { meta: meta }, {\n        enabled: lazy,\n        // FIXME - workaround for issues when loading the tree a second time\n        // (e.g. when switching from a resource to another and back)\n        cacheTime: 0,\n    });\n    var innerLoadChildNodes = useGetChildNodesCallback(resource, {\n        meta: meta,\n    });\n    // remove the children in lazy mode, otherwise rc-tree won't offer to load them\n    var lazyDataWithoutChildren = useMemo(function () {\n        var _a;\n        return (_a = rootNodesState.data) === null || _a === void 0 ? void 0 : _a.map(function (record) {\n            var children = record.children, rest = __rest(record, [\"children\"]);\n            return children.length ? rest : record;\n        });\n    }, [rootNodesState.data]);\n    var _d = lazy\n        ? __assign(__assign({}, rootNodesState), { data: lazyDataWithoutChildren }) : treeState, data = _d.data, error = _d.error, isLoading = _d.isLoading, isFetching = _d.isFetching;\n    var _e = useState(data), finalData = _e[0], setFinalData = _e[1];\n    var loadChildNodes = useCallback(function (parentId) { return __awaiter(void 0, void 0, void 0, function () {\n        var records;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, innerLoadChildNodes(parentId)];\n                case 1:\n                    records = _a.sent();\n                    setFinalData(function (previous) {\n                        // remove the children in lazy mode, otherwise rc-tree won't offer to load them\n                        var recordsWithoutChildren = records.map(function (record) {\n                            var children = record.children, rest = __rest(record, [\"children\"]);\n                            var childrenAreLoaded = previous.some(function (node) {\n                                return record.children.includes(node.id);\n                            });\n                            return children.length && !childrenAreLoaded\n                                ? rest\n                                : record;\n                        });\n                        var updated = __spreadArray(__spreadArray([], previous.map(function (node) {\n                            if (node.id === parentId) {\n                                return __assign(__assign({}, node), { \n                                    // now we can set the children for rc-tree\n                                    children: recordsWithoutChildren.map(function (record) { return record.id; }) });\n                            }\n                            return node;\n                        }), true), recordsWithoutChildren, true);\n                        // If loadChildNodes is called multiple times on the same node,\n                        // we need to make sure we don't duplicate the children in the tree.\n                        // So we search for duplicates and only keep the last instance.\n                        var updatedAsMap = updated.reduce(function (acc, curr) {\n                            acc[curr.id] = curr;\n                            return acc;\n                        }, {});\n                        return Object.values(updatedAsMap);\n                    });\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [innerLoadChildNodes]);\n    useEffect(function () {\n        setFinalData(data);\n    }, [data]);\n    // Node creation support\n    var _f = useState(), newNode = _f[0], setNewNode = _f[1];\n    var handleAddNode = useCallback(function (nodeToCreate) {\n        var newNodes = cloneDeep(finalData);\n        if (nodeToCreate) {\n            setNewNode(nodeToCreate);\n            if (nodeToCreate.parentId != null) {\n                var parentNode = newNodes.find(function (node) { return node.id === nodeToCreate.parentId; });\n                if (parentNode) {\n                    parentNode.children = parentNode.children || [];\n                    parentNode.children.push(UNSAVED_NEW_NODE);\n                }\n            }\n            setFinalData(__spreadArray(__spreadArray([], newNodes, true), [\n                __assign({ id: UNSAVED_NEW_NODE, children: [] }, nodeToCreate.record),\n            ], false));\n        }\n        else {\n            if (!newNode)\n                return;\n            var newNodes_1 = cloneDeep(finalData);\n            if (newNode.parentId != null) {\n                var parentNode = newNodes_1.find(function (node) { return node.id === newNode.parentId; });\n                if (parentNode) {\n                    parentNode.children = parentNode.children.filter(function (node) { return node != UNSAVED_NEW_NODE; });\n                }\n            }\n            setNewNode(undefined);\n            setFinalData(newNodes_1.filter(function (record) { return record.id !== UNSAVED_NEW_NODE; }));\n        }\n    }, [finalData, newNode]);\n    // prepare data structure for rc-tree\n    // add key and title, and turn to recursive DataNode[] format\n    var tree = useMemo(function () {\n        return finalData\n            ? getRCTree(finalData, titleField, translate('ra-tree.new_node'), hideRootNodes)\n            : null;\n    }, [finalData, hideRootNodes, titleField, translate]);\n    var _g = useExpandedKeys(), expandedKeys = _g[0], setExpandedKeys = _g[1];\n    var handleExpand = useCallback(function (value) {\n        setExpandedKeys(function (previousValue) {\n            var newValue = typeof value === 'function' ? value(previousValue) : value;\n            var closedNodes = previousValue.filter(function (key) { return !newValue.includes(key); });\n            var allClosedNodes = closedNodes.flatMap(function (nodeKey) { return getNodeKeysRecursively(nodeKey, finalData); }, []);\n            return newValue.filter(function (key) { return !allClosedNodes.includes(key); });\n        });\n    }, [finalData, setExpandedKeys]);\n    // prepare hooks for drag and drop\n    var moveAsNthChildOf = useMoveAsNthChildOf(resource, { meta: meta })[0];\n    var moveAsNthSiblingOf = useMoveAsNthSiblingOf(resource, { meta: meta })[0];\n    var refreshTree = useGetTreeCallback(resource);\n    var notify = useNotify();\n    /**\n     * Call dataProvider.moveXXX() method on drop.\n     *\n     * Heavily inspired by https://github.com/react-component/tree/blob/master/examples/draggable.jsx\n     *\n     * @see https://github.com/react-component/tree/blob/master/examples/draggable.jsx\n     */\n    var handleDrop = useCallback(function (info) {\n        var dropKey = info.node.key;\n        var dragKey = info.dragNode.key;\n        var dropPos = info.node.pos.split('-');\n        var dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n        var dataById = data.reduce(function (acc, curr) {\n            acc[curr.id] = curr;\n            return acc;\n        }, {});\n        var dragObject = dataById[dragKey];\n        var targetObject = dataById[dropKey];\n        // refresh tree on success\n        var successSideEffect = function () { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, refreshTree()];\n                    case 1:\n                        _a.sent();\n                        notify('ra-tree.item_moved', {\n                            undoable: mutationMode === 'undoable',\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        if (!info.dropToGap) {\n            // Drop on a node\n            // move dragObject as first child of targetObject\n            moveAsNthChildOf(resource, {\n                source: dragObject,\n                destination: targetObject,\n                position: 0,\n            }, { onSuccess: successSideEffect, mutationMode: mutationMode });\n        }\n        else if ((info.node.children || []).length > 0 && // Has children\n            info.node.expanded && // Is expanded\n            dropPosition === 1 // On the bottom gap\n        ) {\n            // drop on the top gap\n            // move dragObject as last child of targetObject\n            moveAsNthChildOf(resource, {\n                source: dragObject,\n                destination: targetObject,\n                position: targetObject.children.length,\n            }, { onSuccess: successSideEffect, mutationMode: mutationMode });\n        }\n        else {\n            // drop between nodes\n            // look for the target position\n            var targetPosition_1;\n            var loop_1 = function (nodes, key, callback) {\n                nodes.forEach(function (item, index) {\n                    if (item.key === key) {\n                        callback(index);\n                        return;\n                    }\n                    if (item.children) {\n                        loop_1(item.children, key, callback);\n                    }\n                });\n            };\n            loop_1(tree, dropKey, function (index) {\n                targetPosition_1 = index;\n            });\n            // move dragObject to sibling targetPosition of targetObject\n            moveAsNthSiblingOf(resource, {\n                source: dragObject,\n                destination: targetObject,\n                position: dropPosition === -1\n                    ? targetPosition_1\n                    : targetPosition_1 + 1,\n            }, { onSuccess: successSideEffect, mutationMode: mutationMode });\n        }\n    }, [\n        data,\n        moveAsNthChildOf,\n        moveAsNthSiblingOf,\n        mutationMode,\n        notify,\n        refreshTree,\n        resource,\n        tree,\n    ]);\n    var defaultTitle = translate('ra.page.list', {\n        name: getResourceLabel(resource, 2),\n    });\n    return {\n        data: finalData,\n        defaultTitle: defaultTitle,\n        error: error,\n        expandedKeys: expandedKeys,\n        handleAddNode: handleAddNode,\n        handleDrop: handleDrop,\n        handleExpand: handleExpand,\n        isLoading: isLoading,\n        isFetching: isFetching,\n        loadChildNodes: loadChildNodes,\n        newNode: newNode,\n        tree: tree,\n        lazy: lazy,\n        setFinalData: setFinalData,\n    };\n};\n","import { createContext } from 'react';\nexport var TreeChoicesContext = createContext(undefined);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { Box, FormHelperText, styled, Typography } from '@mui/material';\nimport { InputHelperText, Labeled, LinearProgress, useTranslate, } from 'react-admin';\nimport { useTreeInputController, } from './controllers/useTreeInputController';\nimport { Tree } from './Tree';\n/**\n * The `<TreeInput>` component allows to select one or several nodes from a tree. It expects a `treeData` prop in the format returned by `getTree`.\n *\n * @example\n * ```tsx\n * import { TreeInput } from '@react-admin/ra-tree';\n * import { SimpleForm } from 'react-admin';\n * import treeData from './treeData';\n *\n * export const SimpleTreeForm = () => (\n *     <SimpleForm>\n *         <TreeInput source=\"category\" treeData={treeData} />\n *     </SimpleForm>\n * );\n * ```\n */\nexport var TreeInput = function (props) {\n    var label = props.label, multiple = props.multiple, sx = props.sx, className = props.className, helperText = props.helperText, fullWidth = props.fullWidth, rest = __rest(props, [\"label\", \"multiple\", \"sx\", \"className\", \"helperText\", \"fullWidth\"]);\n    var _a = useTreeInputController(props), resource = _a.resource, source = _a.source, tree = _a.tree, fetchError = _a.fetchError, isLoading = _a.isLoading, isRequired = _a.isRequired, field = _a.field, fieldState = _a.fieldState, formState = _a.formState, defaultValue = _a.defaultValue;\n    var isTouched = fieldState.isTouched, invalid = fieldState.invalid, error = fieldState.error;\n    var isSubmitted = formState.isSubmitted;\n    var translate = useTranslate();\n    if (fetchError) {\n        return (React.createElement(Root, { className: className, sx: sx, \"data-testid\": \"error\" },\n            React.createElement(Labeled, { label: label, source: source, resource: resource, fullWidth: fullWidth },\n                React.createElement(Typography, { color: \"error.main\" }, translate('ra-tree.treeSelectInput.fetchError', {\n                    _: 'Error fetching tree data',\n                })))));\n    }\n    if (isLoading || !tree) {\n        return (React.createElement(Root, { className: className, sx: sx, \"data-testid\": \"loading\" },\n            React.createElement(Labeled, { label: label, source: source, resource: resource, fullWidth: fullWidth },\n                React.createElement(LinearProgress, null))));\n    }\n    return (React.createElement(Root, { className: className, sx: sx },\n        React.createElement(Labeled, { htmlFor: source, className: TreeInputClasses.label, color: (isTouched || isSubmitted) && invalid ? 'error' : undefined, label: label, source: source, resource: resource, isRequired: isRequired, fullWidth: fullWidth },\n            React.createElement(TreeInputTree, __assign({ source: source, multiple: multiple, className: TreeInputClasses.tree, field: field, defaultValue: defaultValue, fullWidth: fullWidth }, rest, { treeData: tree }))),\n        !!((isTouched || isSubmitted) && !!error) || helperText ? (React.createElement(FormHelperText, { error: (isTouched || isSubmitted) && !!error },\n            React.createElement(InputHelperText, { touched: isTouched || isSubmitted, error: error === null || error === void 0 ? void 0 : error.message, helperText: helperText }))) : null));\n};\nvar PREFIX = 'RaTreeInput';\nexport var TreeInputClasses = {\n    label: \"\".concat(PREFIX, \"-label\"),\n    tree: \"\".concat(PREFIX, \"-tree\"),\n};\nvar Root = styled(Box, {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function () { return ({}); });\nexport var TreeInputTree = function (props) {\n    var multiple = props.multiple, treeData = props.treeData, field = props.field, _a = props.checkStrictly, checkStrictly = _a === void 0 ? true : _a, _b = props.expandAction, expandAction = _b === void 0 ? false : _b, rawDefaultValue = props.defaultValue, rest = __rest(props, [\"multiple\", \"treeData\", \"field\", \"checkStrictly\", \"expandAction\", \"defaultValue\"]);\n    var onBlur = field.onBlur, onChange = field.onChange, rawValue = field.value;\n    var value = rawValue || (multiple ? [] : '');\n    var defaultValue = rawDefaultValue || (multiple ? [] : '');\n    var handleCheck = function (keys, info) {\n        var selectedNodes = info.checkedNodes.filter(function (node) {\n            return checkStrictly\n                ? keys.checked.includes(node.key)\n                : keys.includes(node.key);\n        });\n        var value = selectedNodes.map(function (node) { return node.id; });\n        onChange(value);\n    };\n    var handleSelect = function (keys, info) {\n        var value = keys && keys.length > 0\n            ? info.node.id\n            : '';\n        onChange(value);\n    };\n    return (React.createElement(Tree, __assign({}, rest, { checkStrictly: checkStrictly, expandAction: expandAction, checkable: multiple, selectable: !multiple, checkedKeys: multiple ? value.map(String) : [], selectedKeys: multiple ? [] : [String(value)], defaultCheckedKeys: multiple ? defaultValue.map(String) : undefined, defaultSelectedKeys: multiple ? undefined : [String(defaultValue)], defaultExpandedKeys: multiple ? defaultValue.map(String) : [String(defaultValue)], onCheck: handleCheck, onSelect: handleSelect, treeData: treeData, onBlur: onBlur })));\n};\n","import { useGetTree } from '../dataProvider';\nexport var useReferenceNodeInputController = function (props) {\n    var resource = props.reference, source = props.source, meta = props.meta;\n    var _a = useGetTree(resource, {\n        meta: meta,\n    }), data = _a.data, error = _a.error, isLoading = _a.isLoading, isFetching = _a.isFetching;\n    return {\n        source: source,\n        resource: resource,\n        treeData: data,\n        error: error,\n        isLoading: isLoading,\n        isFetching: isFetching,\n    };\n};\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { ResourceContextProvider } from 'react-admin';\nimport { TreeChoicesContextProvider } from '.';\nimport { TreeInput } from '../TreeInput';\nimport { useReferenceNodeInputController, } from './useReferenceNodeInputController';\n/**\n * Use the `<ReferenceNodeInput>` component to select one or several nodes from a tree of a reference resource.\n *\n * @example\n * ```tsx\n * import { ReferenceNodeInput } from '@react-admin/ra-tree';\n * import { Edit, SimpleForm, TextInput } from 'react-admin';\n *\n * const ProductEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <TextInput source=\"name\" />\n *             <ReferenceNodeInput\n *                 source=\"category_id\"\n *                 reference=\"categories\"\n *             />\n *         </SimpleForm>\n *     </Edit>\n * );\n * ```\n */\nexport var ReferenceNodeInput = function (props) {\n    var _a = props.children, children = _a === void 0 ? React.createElement(TreeInput, null) : _a;\n    var _b = useReferenceNodeInputController(props), resource = _b.resource, rest = __rest(_b, [\"resource\"]);\n    return (React.createElement(ResourceContextProvider, { value: resource },\n        React.createElement(TreeChoicesContextProvider, { value: rest }, children)));\n};\n","import * as React from 'react';\nimport { TreeChoicesContext, } from './TreeChoicesContext';\nexport var TreeChoicesContextProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(TreeChoicesContext.Provider, { value: value }, children));\n};\n","import { useContext } from 'react';\nimport { TreeChoicesContext, } from './TreeChoicesContext';\nexport var useTreeChoicesContext = function () {\n    return (useContext(TreeChoicesContext) || {});\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useInput, useRecordContext, useResourceContext, } from 'react-admin';\nimport get from 'lodash/get';\nimport { useMemo } from 'react';\nimport { getRCTree } from '../util';\nimport { useTreeChoicesContext } from '../reference';\nexport var useTreeInputController = function (props) {\n    var sourceProp = props.source, treeDataProp = props.treeData, hideRootNodes = props.hideRootNodes, _a = props.titleField, titleField = _a === void 0 ? 'title' : _a, rest = __rest(props, [\"source\", \"treeData\", \"hideRootNodes\", \"titleField\"]);\n    var resource = useResourceContext(props);\n    var record = useRecordContext(props);\n    var _b = useTreeChoicesContext(), sourceFromContext = _b.source, treeDataFromContext = _b.treeData, isLoading = _b.isLoading, isFetching = _b.isFetching, error = _b.error;\n    var treeData = treeDataProp !== null && treeDataProp !== void 0 ? treeDataProp : treeDataFromContext;\n    var source = sourceProp !== null && sourceProp !== void 0 ? sourceProp : sourceFromContext;\n    // prepare data structure for rc-tree\n    // add key and title, and turn to recursive DataNode[] format\n    var tree = useMemo(function () {\n        return treeData\n            ? getRCTree(treeData, titleField, undefined, hideRootNodes)\n            : null;\n    }, [treeData, hideRootNodes, titleField]);\n    var _c = useInput(__assign(__assign({}, rest), { resource: resource, source: source, type: 'text' })), isRequired = _c.isRequired, field = _c.field, fieldState = _c.fieldState, formState = _c.formState;\n    var defaultValue = get(record, source, props.defaultValue);\n    return {\n        resource: resource,\n        source: source,\n        tree: tree,\n        fetchError: error,\n        isLoading: isLoading,\n        isFetching: isFetching,\n        isRequired: isRequired,\n        field: field,\n        fieldState: fieldState,\n        formState: formState,\n        defaultValue: defaultValue,\n    };\n};\n","import * as React from 'react';\nimport { TreeContext } from './TreeContext';\nexport var TreeContextProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(TreeContext.Provider, { value: value }, children));\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { CreateView, CreateContextProvider } from 'react-admin';\nimport { useCreateNodeController } from './controllers';\n/**\n * Alternative to <Create> for tree nodes.\n *\n * Upon creation, calls the dataProvider.addRootNode() or dataProvider.addChildNode()\n * (depending on the presence of a parentId in the location state) instead of\n * dataProvider.create().\n */\nvar CreateNode = function (props) {\n    var controllerProps = useCreateNodeController(props);\n    return (React.createElement(CreateContextProvider, { value: controllerProps },\n        React.createElement(CreateView, __assign({}, props, controllerProps))));\n};\nexport default CreateNode;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport { useShowController, ShowView, ShowContextProvider, } from 'react-admin';\nimport { useParams } from 'react-router-dom';\nimport { useExpandedKeys } from './util';\n/**\n * Alternative to <Show> for tree nodes.\n *\n * Adds a button to add a child node in view actions.\n */\nvar ShowNode = function (props) {\n    var idProp = props.id;\n    var routeId = useParams().id;\n    var id = idProp || decodeURIComponent(routeId);\n    var _a = useExpandedKeys(), setExpandedKeys = _a[1];\n    // Automatically expand the node on mount\n    useEffect(function () {\n        setExpandedKeys(function (expandedKeys) {\n            var key = id.toString();\n            if (Array.isArray(expandedKeys)) {\n                if (!expandedKeys.includes(key)) {\n                    return __spreadArray(__spreadArray([], expandedKeys, true), [key], false);\n                }\n                return expandedKeys;\n            }\n            else {\n                return [key];\n            }\n        });\n    }, [props.resource, id, setExpandedKeys]);\n    var controllerProps = useShowController(props);\n    return (React.createElement(ShowContextProvider, { value: controllerProps },\n        React.createElement(ShowView, __assign({}, props))));\n};\nexport default ShowNode;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2\"\n}), 'MoreVert');","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { MenuItem } from '@mui/material';\nimport inflection from 'inflection';\nimport { useTranslate, Confirm, useRecordContext, useResourceContext, } from 'react-admin';\nimport { useDeleteBranchWithConfirmController } from './controllers';\nexport var DeleteMenuItemWithConfirmation = function (props) {\n    var className = props.className, _a = props.confirmTitle, confirmTitle = _a === void 0 ? 'ra.message.delete_title' : _a, _b = props.confirmContent, confirmContent = _b === void 0 ? 'ra.message.delete_content' : _b, _c = props.label, label = _c === void 0 ? 'ra.action.delete' : _c, mutationMode = props.mutationMode, onClick = props.onClick, recordProp = props.record, resourceProp = props.resource, ref = props.ref, _d = props.redirect, redirectTo = _d === void 0 ? 'list' : _d, rest = __rest(props, [\"className\", \"confirmTitle\", \"confirmContent\", \"label\", \"mutationMode\", \"onClick\", \"record\", \"resource\", \"ref\", \"redirect\"]);\n    var resource = useResourceContext(props);\n    var record = useRecordContext(props);\n    var _e = useDeleteBranchWithConfirmController({\n        mutationMode: mutationMode,\n        record: record,\n        resource: resource,\n        redirect: redirectTo,\n    }), handleDelete = _e.handleDelete, handleDialogClose = _e.handleDialogClose, handleDialogOpen = _e.handleDialogOpen, isLoading = _e.isLoading, open = _e.open;\n    var translate = useTranslate();\n    var handleClick = function (event) {\n        event.stopPropagation();\n        if (onClick) {\n            onClick(event);\n        }\n        if (!event.isDefaultPrevented()) {\n            handleDialogOpen(event);\n        }\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(MenuItem, __assign({ className: className, onClick: handleClick, ref: ref }, rest), translate(label, { _: label })),\n        React.createElement(Confirm, { isOpen: open, loading: isLoading, title: confirmTitle, content: confirmContent, translateOptions: {\n                name: inflection.humanize(translate(\"resources.\".concat(resource, \".name\"), {\n                    smart_count: 1,\n                    _: inflection.singularize(resource),\n                }), true),\n                id: record.id,\n            }, onConfirm: handleDelete, onClose: handleDialogClose })));\n};\nDeleteMenuItemWithConfirmation.propTypes = {\n    className: PropTypes.string,\n    confirmTitle: PropTypes.string,\n    confirmContent: PropTypes.string,\n    label: PropTypes.string,\n    mutationMode: PropTypes.oneOf(['pessimistic', 'optimistic', 'undoable']),\n    record: PropTypes.any,\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { MenuItem } from '@mui/material';\nimport { useTranslate, useResourceContext, useRecordContext, } from 'react-admin';\nimport { useDeleteBranchWithUndoController } from './controllers';\nexport var DeleteMenuItemWithUndo = function (props) {\n    var className = props.className, _a = props.label, label = _a === void 0 ? 'ra.action.delete' : _a, mutationMode = props.mutationMode, onClick = props.onClick, recordProp = props.record, ref = props.ref, resourceProp = props.resource, _b = props.redirect, redirectTo = _b === void 0 ? 'list' : _b, rest = __rest(props, [\"className\", \"label\", \"mutationMode\", \"onClick\", \"record\", \"ref\", \"resource\", \"redirect\"]);\n    var resource = useResourceContext(props);\n    var record = useRecordContext(props);\n    var _c = useDeleteBranchWithUndoController({\n        record: record,\n        resource: resource,\n        redirect: redirectTo,\n    }), handleDelete = _c.handleDelete, isLoading = _c.isLoading;\n    var translate = useTranslate();\n    var handleClick = function (event) {\n        event.stopPropagation();\n        if (onClick) {\n            onClick(event);\n        }\n        if (!event.isDefaultPrevented()) {\n            handleDelete(event);\n        }\n    };\n    return (React.createElement(MenuItem, __assign({ className: className, disabled: isLoading, onClick: handleClick, ref: ref }, rest), translate(label, { _: label })));\n};\nDeleteMenuItemWithUndo.propTypes = {\n    className: PropTypes.string,\n    label: PropTypes.string,\n    record: PropTypes.any,\n    // @ts-ignore\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { DeleteMenuItemWithConfirmation } from './DeleteMenuItemWithConfirmation';\nimport { DeleteMenuItemWithUndo } from './DeleteMenuItemWithUndo';\n/**\n * MenuItem used to delete a branch. Added by default by the <NodeActions> of the TreeWithDetails component.\n *\n * @typedef {Object} Props The props you can use (other props are injected if you used it in the <NodeActions>)\n * @param {Prop} props\n * @prop {string} mutationMode Either 'undoable', 'optimistic' or 'pessimistic'. When using 'optimistic' or 'pessimistic', a confirmation dialog is displayed before the deletion. When using 'undoable', a notification is displayed and users have the possibility to undo the deletion.\n * @prop {string} className\n * @prop {string} label MenuItem label. Defaults to 'ra.action.delete, translated.\n *\n * @example\n * import { NodeActions, DeleteMenuItem, TreeWithDetails } from '@react-admin/ra-tree';\n *\n * const MyCustomActionMenuItem = ({ record, resource, parentId }) => {\n *     const handleClick = () => {\n *         // Do something with dataProvider ?\n *     }\n *     return (\n *         <MenuItem onClick={handleClick}>\n *             Do something\n *         </MenuItem>\n *     );\n * };\n *\n * const MyActions = (props) => (\n *     <NodeActions {...props}>\n *         <MyCustomActionMenuItem />\n *         <DeleteMenuItem />\n *     </NodeActions>\n * );\n *\n * const CategoriesList: FC<Props> = props => (\n *     <TreeWithDetails\n *         titleField=\"name\"\n *         edit={CategoriesEdit}\n *         draggable\n *         showLine\n *         nodeActions={<MyActions />}\n *         {...props}\n *     />\n * );\n */\nexport var DeleteMenuItem = function (props) {\n    var _a = props.mutationMode, mutationMode = _a === void 0 ? 'undoable' : _a, rest = __rest(props, [\"mutationMode\"]);\n    return mutationMode === 'undoable' ? (React.createElement(DeleteMenuItemWithUndo, __assign({}, rest, { mutationMode: mutationMode }))) : (React.createElement(DeleteMenuItemWithConfirmation, __assign({}, rest, { mutationMode: mutationMode })));\n};\nDeleteMenuItem.displayName = 'DeleteMenuItem';\nDeleteMenuItem.propTypes = {\n    className: PropTypes.string,\n    confirmTitle: PropTypes.string,\n    confirmContent: PropTypes.string,\n    label: PropTypes.string,\n    mutationMode: PropTypes.oneOf(['pessimistic', 'optimistic', 'undoable']),\n    record: PropTypes.any,\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n};\n","import * as React from 'react';\nimport { Children, cloneElement, isValidElement, useState, } from 'react';\nimport { Menu, styled } from '@mui/material';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport { DeleteMenuItem } from './DeleteMenuItem';\n/**\n * Provides a dropdown menu for each node.\n * It accepts children which must return a MaterialUI MenuItem component\n *\n * @example\n * import { NodeActions, DeleteMenuItem, TreeWithDetails } from '@react-admin/ra-tree';\n *\n * const MyCustomActionMenuItem = ({ record, resource, parentId }) => {\n *     const handleClick = () => {\n *         // Do something with dataProvider ?\n *     }\n *     return (\n *         <MenuItem onClick={handleClick}>\n *             Do something\n *         </MenuItem>\n *     );\n * };\n *\n * const MyActions = (props) => (\n *     <NodeActions {...props}>\n *         <MyCustomActionMenuItem />\n *         <DeleteMenuItem />\n *     </NodeActions>\n * );\n *\n * const CategoriesList: FC<Props> = props => (\n *     <TreeWithDetails\n *         titleField=\"name\"\n *         edit={CategoriesEdit}\n *         draggable\n *         showLine\n *         nodeActions={<MyActions />}\n *         {...props}\n *     />\n * );\n */\nvar NodeActions = function (props) {\n    var _a = props.children, children = _a === void 0 ? React.createElement(DeleteMenuItem, null) : _a, className = props.className;\n    var _b = useState(null), anchorEl = _b[0], setAnchorEl = _b[1];\n    var handleClick = function (event) {\n        event.stopPropagation();\n        setAnchorEl(event.currentTarget);\n    };\n    var handleClose = function (event) {\n        event.stopPropagation();\n        setAnchorEl(null);\n    };\n    return (React.createElement(Root, { className: className },\n        React.createElement(\"button\", { className: RaNodeActionsClasses.menuButton, onClick: handleClick },\n            React.createElement(MoreVertIcon, null)),\n        React.createElement(Menu, { anchorEl: anchorEl, open: !!anchorEl, onClose: handleClose }, Children.map(children, function (child) {\n            return isValidElement(child)\n                ? cloneElement(child, {\n                    onClose: handleClose,\n                })\n                : child;\n        }))));\n};\nexport default NodeActions;\nvar PREFIX = 'RaNodeActions';\nexport var RaNodeActionsClasses = {\n    menuButton: \"\".concat(PREFIX, \"-menuButton\"),\n};\nvar Root = styled('div', {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function () { return ({}); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { alpha, styled } from '@mui/material';\nimport ActionDelete from '@mui/icons-material/Delete';\nimport clsx from 'clsx';\nimport { Button, useRecordContext, useResourceContext, } from 'react-admin';\nimport { useDeleteBranchWithUndoController } from './controllers';\nexport var DeleteBranchWithUndoButton = function (props) {\n    var _a = props.label, label = _a === void 0 ? 'ra.action.delete' : _a, className = props.className, _b = props.icon, icon = _b === void 0 ? defaultIcon : _b, onClick = props.onClick, resourceProp = props.resource, recordProp = props.record, _c = props.redirect, redirect = _c === void 0 ? 'list' : _c, rest = __rest(props, [\"label\", \"className\", \"icon\", \"onClick\", \"resource\", \"record\", \"redirect\"]);\n    var resource = useResourceContext(props);\n    var record = useRecordContext(props);\n    var _d = useDeleteBranchWithUndoController({\n        resource: resource,\n        record: record,\n        redirect: redirect,\n    }), handleDelete = _d.handleDelete, isLoading = _d.isLoading;\n    var handleClick = function (event) {\n        if (onClick) {\n            onClick(event);\n        }\n        if (!event.isDefaultPrevented()) {\n            handleDelete(event);\n        }\n    };\n    return (React.createElement(Root, __assign({ onClick: handleClick, disabled: isLoading, label: label, className: clsx('ra-delete-button', className), key: \"button\" }, rest), icon));\n};\nvar Root = styled(Button, {\n    name: 'RaDeleteBranchWithUndoButton',\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function (_a) {\n    var theme = _a.theme;\n    return ({\n        color: theme.palette.error.main,\n        '&:hover': {\n            backgroundColor: alpha(theme.palette.error.main, 0.12),\n            // Reset on mouse devices\n            '@media (hover: none)': {\n                backgroundColor: 'transparent',\n            },\n        },\n    });\n});\nvar defaultIcon = React.createElement(ActionDelete, null);\nDeleteBranchWithUndoButton.propTypes = {\n    className: PropTypes.string,\n    label: PropTypes.string,\n    record: PropTypes.any,\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n    icon: PropTypes.element,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { alpha, styled } from '@mui/material';\nimport ActionDelete from '@mui/icons-material/Delete';\nimport clsx from 'clsx';\nimport inflection from 'inflection';\nimport { useTranslate, Button, Confirm, useResourceContext, useRecordContext, } from 'react-admin';\nimport { useDeleteBranchWithConfirmController } from './controllers';\nexport var DeleteBranchWithConfirmButton = function (props) {\n    var className = props.className, _a = props.confirmTitle, confirmTitle = _a === void 0 ? 'ra.message.delete_title' : _a, _b = props.confirmContent, confirmContent = _b === void 0 ? 'ra.message.delete_content' : _b, _c = props.icon, icon = _c === void 0 ? defaultIcon : _c, _d = props.label, label = _d === void 0 ? 'ra.action.delete' : _d, mutationMode = props.mutationMode, onClick = props.onClick, recordProp = props.record, resourceProp = props.resource, _e = props.redirect, redirect = _e === void 0 ? 'list' : _e, rest = __rest(props, [\"className\", \"confirmTitle\", \"confirmContent\", \"icon\", \"label\", \"mutationMode\", \"onClick\", \"record\", \"resource\", \"redirect\"]);\n    var translate = useTranslate();\n    var resource = useResourceContext(props);\n    var record = useRecordContext(props);\n    var _f = useDeleteBranchWithConfirmController({\n        mutationMode: mutationMode,\n        resource: resource,\n        record: record,\n        redirect: redirect,\n    }), handleDelete = _f.handleDelete, handleDialogClose = _f.handleDialogClose, handleDialogOpen = _f.handleDialogOpen, isLoading = _f.isLoading, open = _f.open;\n    var handleClick = function (event) {\n        if (onClick) {\n            onClick(event);\n        }\n        if (!event.isDefaultPrevented()) {\n            handleDialogOpen(event);\n        }\n    };\n    return (React.createElement(Root, { className: className },\n        React.createElement(Button, __assign({ onClick: handleClick, label: label, className: clsx('ra-delete-button', DeleteWithConfirmButtonClasses.deleteButton), key: \"button\" }, rest), icon),\n        React.createElement(Confirm, { isOpen: open, loading: isLoading, title: confirmTitle, content: confirmContent, translateOptions: {\n                name: translate(\"resources.\".concat(resource, \".forcedCaseName\"), {\n                    smart_count: 1,\n                    _: inflection.humanize(translate(\"resources.\".concat(resource, \".name\"), {\n                        smart_count: 1,\n                        _: inflection.singularize(resource),\n                    }), true),\n                }),\n                id: record.id,\n            }, onConfirm: handleDelete, onClose: handleDialogClose })));\n};\nvar defaultIcon = React.createElement(ActionDelete, null);\nvar PREFIX = 'RaDeleteBranchWithConfirmButton';\nexport var DeleteWithConfirmButtonClasses = {\n    deleteButton: \"\".concat(PREFIX, \"-deleteButton\"),\n};\nvar Root = styled('div', { name: PREFIX })(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {},\n        _b[\"& .\".concat(DeleteWithConfirmButtonClasses.deleteButton)] = {\n            color: theme.palette.error.main,\n            '&:hover': {\n                backgroundColor: alpha(theme.palette.error.main, 0.12),\n                // Reset on mouse devices\n                '@media (hover: none)': {\n                    backgroundColor: 'transparent',\n                },\n            },\n        },\n        _b);\n});\nDeleteBranchWithConfirmButton.propTypes = {\n    className: PropTypes.string,\n    confirmTitle: PropTypes.string,\n    confirmContent: PropTypes.string,\n    label: PropTypes.string,\n    record: PropTypes.any,\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n    icon: PropTypes.element,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { useRecordContext, useSaveContext, } from 'react-admin';\nimport { DeleteBranchWithUndoButton } from './DeleteBranchWithUndoButton';\nimport { DeleteBranchWithConfirmButton } from './DeleteBranchWithConfirmButton';\n/**\n * Button used to delete a single branch. Added by default by the <Toolbar> of edit and show views.\n *\n * @typedef {Object} Props The props you can use (other props are injected if you used it in the <Toolbar>)\n * @param {Prop} props\n * @prop {string} mutationMode Either 'undoable', 'optimistic' or 'pessimistic'. When using 'optimistic' or 'pessimistic', a confirmation dialog is displayed before the deletion. When using 'undoable', a notification is displayed and users have the possibility to undo the deletion.\n * @prop {string} className\n * @prop {string} label Button label. Defaults to 'ra.action.delete, translated.\n * @prop {boolean} disabled Disable the button.\n * @prop {string} variant MUI variant for the button. Defaults to 'contained'.\n * @prop {ReactElement} icon Override the icon. Defaults to the Delete icon from MUI.\n *\n * @example Usage in the <TopToolbar> of an <Edit> form\n *\n * import * as React from 'react';\n * import { Edit } from 'react-admin';\n * import { DeleteButton, TopToolbar } from '@react-admin/ra-tree';\n *\n * const EditActions = props => {\n *     const { basePath, data, resource } = props;\n *     return (\n *         <TopToolbar>\n *             <DeleteButton\n *                 basePath={basePath}\n *                 record={data}\n *                 resource={resource}\n *                 undoable={false} // Renders the <DeleteWithConfirmButton>\n *             />\n *         </TopToolbar>\n *     );\n * };\n *\n * const Edit = props => {\n *     return <Edit actions={<EditActions />} {...props} />;\n * };\n */\nexport var DeleteBranchButton = function (props) {\n    var _a = props.mutationMode, mutationMode = _a === void 0 ? 'undoable' : _a, recordProp = props.record, rest = __rest(props, [\"mutationMode\", \"record\"]);\n    var record = useRecordContext(props);\n    var saveContext = useSaveContext(props);\n    if (!record || record.id == null) {\n        return null;\n    }\n    var finalMutationMode = mutationMode\n        ? mutationMode\n        : (saveContext === null || saveContext === void 0 ? void 0 : saveContext.mutationMode)\n            ? saveContext.mutationMode\n            : 'undoable';\n    return finalMutationMode === 'undoable' ? (\n    // @ts-ignore\n    React.createElement(DeleteBranchWithUndoButton, __assign({ record: record }, rest))) : (React.createElement(DeleteBranchWithConfirmButton, __assign({ \n        // @ts-ignore\n        mutationMode: finalMutationMode, \n        // @ts-ignore\n        record: record }, rest)));\n};\nDeleteBranchButton.propTypes = {\n    basePath: PropTypes.string,\n    label: PropTypes.string,\n    mutationMode: PropTypes.oneOf(['pessimistic', 'optimistic', 'undoable']),\n    record: PropTypes.any,\n    // @ts-ignore\n    redirect: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.bool,\n        PropTypes.func,\n    ]),\n    resource: PropTypes.string,\n    icon: PropTypes.element,\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar _a;\nimport * as React from 'react';\nimport { isValidElement, useCallback, useMemo, } from 'react';\nimport PropTypes from 'prop-types';\nimport { CreateButton, ComponentPropType, Title, useCreatePath, useResourceContext, } from 'react-admin';\nimport { Route, Routes, useMatch, useNavigate } from 'react-router-dom';\nimport { Card, CardContent, styled } from '@mui/material';\nimport { Tree } from './Tree';\nimport { UNSAVED_NEW_NODE } from './constants';\nimport { TreeContextProvider, useTreeController } from './controllers';\nimport DefaultNodeActions from './NodeActions';\n/**\n * Main Tree component, to be used instead of List in a Resource.\n *\n * You MUST include the tree reducer in the Admin for this component to work. Also,\n * the dataProvider must support tree methods, e.g. getTree, moveAsNthSiblingOf, etc.\n *\n * @example\n *\n * import React, { ComponentProps, FC } from 'react';\n * import { Admin, Resource, List, ListGuesser } from 'react-admin';\n * import { reducer as tree, TreeWithDetails } from '@react-admin/ra-tree';\n *\n * // tree-augmented dataProvider\n * import dataProvider from './dataProvider';\n * import i18nProvider from './i18nProvider';\n *\n * const CategoriesEdit: FC = props => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <TextInput source=\"name\" />\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * const CategoriesList: FC<Props> = props => (\n *     <TreeWithDetails\n *         titleField=\"name\"\n *         edit={CategoriesEdit}\n *         draggable\n *         showLine\n *         {...props}\n *     />\n * );\n *\n * type Props = ComponentProps<typeof List>;\n *\n * export const App: FC = () => (\n *     <Admin\n *         dataProvider={dataProvider}\n *         i18nProvider={i18nProvider}\n *         customReducers={{ tree }}\n *     >\n *         <Resource name=\"categories\" list={CategoriesList} />\n *         <Resource name=\"products\" list={ListGuesser} />\n *     </Admin>\n * );\n */\nexport var TreeWithDetails = function (_a) {\n    var _b = _a.allowMultipleRoots, allowMultipleRoots = _b === void 0 ? false : _b, className = _a.className, Create = _a.create, Edit = _a.edit, hideRootNodes = _a.hideRootNodes, _c = _a.lazy, lazy = _c === void 0 ? false : _c, _d = _a.linkTo, linkTo = _d === void 0 ? 'edit' : _d, _e = _a.nodeActions, nodeActions = _e === void 0 ? React.createElement(DefaultNodeActions, null) : _e, Show = _a.show, showLine = _a.showLine, sx = _a.sx, title = _a.title, _f = _a.titleField, titleField = _f === void 0 ? 'title' : _f, _g = _a.addRootButton, addRootButton = _g === void 0 ? (React.createElement(CreateButton, { label: \"ra-tree.action.add_root\", sx: { marginTop: '.75rem' } })) : _g, meta = _a.meta, props = __rest(_a, [\"allowMultipleRoots\", \"className\", \"create\", \"edit\", \"hideRootNodes\", \"lazy\", \"linkTo\", \"nodeActions\", \"show\", \"showLine\", \"sx\", \"title\", \"titleField\", \"addRootButton\", \"meta\"]);\n    var resource = useResourceContext();\n    var navigate = useNavigate();\n    var createPath = useCreatePath();\n    // find id in location to set it as selected\n    // location can be /posts, /posts/123, or /posts/123/show, or /posts/create\n    var matchCreate = useMatch(\"/\".concat(resource, \"/create\"));\n    var matchEdit = useMatch(\"/\".concat(resource, \"/:id\"));\n    var matchShow = useMatch(\"/\".concat(resource, \"/:id/show\"));\n    var defaultSelectedKeys = useMemo(function () {\n        if (matchCreate) {\n            return [UNSAVED_NEW_NODE];\n        }\n        if (matchEdit) {\n            return [matchEdit.params.id];\n        }\n        if (matchShow) {\n            return [matchShow.params.id];\n        }\n    }, [matchCreate, matchEdit, matchShow]);\n    var controllerProps = useTreeController({\n        hideRootNodes: hideRootNodes,\n        lazy: lazy,\n        resource: resource,\n        titleField: titleField,\n        meta: meta,\n    });\n    var defaultTitle = controllerProps.defaultTitle, expandedKeys = controllerProps.expandedKeys, handleExpand = controllerProps.handleExpand, isLoading = controllerProps.isLoading, loadChildNodes = controllerProps.loadChildNodes, tree = controllerProps.tree, handleDrop = controllerProps.handleDrop;\n    var handleClick = useCallback(function (event, treeNode) {\n        navigate(createPath({ resource: resource, id: treeNode.id, type: linkTo }));\n    }, [createPath, linkTo, navigate, resource]);\n    var handleLoadData = useCallback(function (node) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (lazy) {\n                return [2 /*return*/, loadChildNodes(node.id)];\n            }\n            return [2 /*return*/, Promise.resolve()];\n        });\n    }); }, [lazy, loadChildNodes]);\n    if (isLoading) {\n        return null;\n    }\n    var canCreateNode = !tree || tree.length === 0 || allowMultipleRoots;\n    return (React.createElement(TreeContextProvider, { value: controllerProps },\n        React.createElement(Root, { className: className, sx: sx },\n            React.createElement(\"div\", { className: TreeWithDetailsClasses.cardTree },\n                React.createElement(Card, null,\n                    React.createElement(CardContent, { className: TreeWithDetailsClasses.cardContentTree },\n                        React.createElement(Tree, __assign({ treeData: tree, onDrop: handleDrop, onExpand: handleExpand, onClick: handleClick, expandedKeys: tree && Array.isArray(expandedKeys)\n                                ? expandedKeys\n                                : [], selectedKeys: defaultSelectedKeys, showLine: showLine, nodeActions: nodeActions, loadData: lazy ? handleLoadData : undefined, \n                            // Do not remove the following prop!\n                            // This prop is actually required for lazily reloading the nodes\n                            loadedKeys: undefined, \n                            // To avoid triggering close on node selection\n                            expandAction: false }, sanitizeRestProps(props))),\n                        canCreateNode && addRootButton))),\n            React.createElement(\"div\", { className: TreeWithDetailsClasses.actionCard },\n                React.createElement(Routes, null,\n                    Create ? (React.createElement(Route, { path: \"create/*\", element: isValidElement(Create) ? Create : React.createElement(Create, null) })) : null,\n                    Show ? (React.createElement(Route, { path: \":id/show/*\", element: isValidElement(Show) ? Show : React.createElement(Show, null) })) : null,\n                    Edit ? (React.createElement(Route, { path: \":id/*\", element: isValidElement(Edit) ? Edit : React.createElement(Edit, null) })) : null,\n                    title !== false ? (React.createElement(Route, { path: \"*\", element: React.createElement(Title, { title: title, defaultTitle: defaultTitle }) })) : null)))));\n};\nvar sanitizeRestProps = function (_a) {\n    var basePath = _a.basePath, history = _a.history, location = _a.location, match = _a.match, options = _a.options, hasList = _a.hasList, hasEdit = _a.hasEdit, hasShow = _a.hasShow, hasCreate = _a.hasCreate, syncWithLocation = _a.syncWithLocation, rest = __rest(_a, [\"basePath\", \"history\", \"location\", \"match\", \"options\", \"hasList\", \"hasEdit\", \"hasShow\", \"hasCreate\", \"syncWithLocation\"]);\n    return rest;\n};\nTreeWithDetails.propTypes = {\n    edit: ComponentPropType,\n    create: ComponentPropType,\n    resource: PropTypes.string,\n};\nvar PREFIX = 'RaTreeWithDetails';\nexport var TreeWithDetailsClasses = {\n    container: \"\".concat(PREFIX, \"-container\"),\n    cardTree: \"\".concat(PREFIX, \"-cardTree\"),\n    cardContentTree: \"\".concat(PREFIX, \"-cardContentTree\"),\n    actionCard: \"\".concat(PREFIX, \"-actionCard\"),\n};\nvar Root = styled('div', {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})((_a = {\n        display: 'flex'\n    },\n    _a[\"& .\".concat(TreeWithDetailsClasses.actionCard)] = {\n        width: '100%',\n    },\n    _a[\"& .\".concat(TreeWithDetailsClasses.cardTree)] = {\n        minWidth: '300px',\n        marginTop: '1em',\n        marginRight: '1em',\n    },\n    _a[\"& .\".concat(TreeWithDetailsClasses.cardContentTree)] = {},\n    _a[\"& .\".concat(TreeWithDetailsClasses.container)] = {\n        display: 'flex',\n    },\n    _a));\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { Children } from 'react';\nimport PropTypes from 'prop-types';\nimport { Toolbar as MuiToolbar, useMediaQuery } from '@mui/material';\nimport clsx from 'clsx';\nimport { styled } from '@mui/material/styles';\nimport { SaveButton } from 'react-admin';\nimport { DeleteBranchButton } from './DeleteBranchButton';\n/**\n * Override for react-admin's Toolbar that uses ra-tree's <DeleteBranchButton>\n */\nexport var EditNodeToolbar = function (props) {\n    var _a;\n    var children = props.children, className = props.className, resource = props.resource, rest = __rest(props, [\"children\", \"className\", \"resource\"]);\n    var isXs = useMediaQuery(function (theme) { return theme.breakpoints.down('sm'); });\n    return (React.createElement(StyledToolbar, __assign({ className: clsx((_a = {},\n            _a[ToolbarClasses.mobileToolbar] = isXs,\n            _a[ToolbarClasses.desktopToolbar] = !isXs,\n            _a), className), role: \"toolbar\" }, rest), Children.count(children) === 0 ? (React.createElement(\"div\", { className: ToolbarClasses.defaultToolbar },\n        React.createElement(SaveButton, null),\n        React.createElement(DeleteBranchButton, { resource: resource }))) : (children)));\n};\nEditNodeToolbar.propTypes = {\n    children: PropTypes.node,\n    className: PropTypes.string,\n    resource: PropTypes.string,\n};\nvar PREFIX = 'RaEditNodeToolbar';\nexport var ToolbarClasses = {\n    desktopToolbar: \"\".concat(PREFIX, \"-desktopToolbar\"),\n    mobileToolbar: \"\".concat(PREFIX, \"-mobileToolbar\"),\n    defaultToolbar: \"\".concat(PREFIX, \"-defaultToolbar\"),\n};\nvar StyledToolbar = styled(MuiToolbar, {\n    name: PREFIX,\n    overridesResolver: function (props, styles) { return styles.root; },\n})(function (_a) {\n    var _b;\n    var theme = _a.theme;\n    return (_b = {\n            backgroundColor: theme.palette.mode === 'light'\n                ? theme.palette.grey[100]\n                : theme.palette.grey[900]\n        },\n        _b[\"&.\".concat(ToolbarClasses.desktopToolbar)] = {},\n        _b[\"&.\".concat(ToolbarClasses.mobileToolbar)] = {\n            position: 'fixed',\n            bottom: 0,\n            left: 0,\n            right: 0,\n            padding: '16px',\n            width: '100%',\n            boxSizing: 'border-box',\n            flexShrink: 0,\n            zIndex: 2,\n        },\n        _b[\"& .\".concat(ToolbarClasses.defaultToolbar)] = {\n            flex: 1,\n            display: 'flex',\n            justifyContent: 'space-between',\n        },\n        _b);\n});\n"],"names":["__assign","this","t","s","i","p","__rest","e","useShowController","__name","props","disableAuthentication","propsId","_a","queryOptions","useAuthenticated","resource","useResourceContext","getRecordRepresentation","useGetRecordRepresentation","translate","useTranslate","notify","useNotify","redirect","useRedirect","refresh","useRefresh","routeId","useParams","id","meta","otherQueryOptions","_b","useGetOne","record","error","isLoading","isFetching","refetch","getResourceLabel","useGetResourceLabel","recordRepresentation","defaultTitle","ShowContext","createContext","ShowContextProvider","children","value","React.createElement","RecordContextProvider","useShowContext","context","useContext","useMemo","defaults","extractShowContextProps","data","defaultActions","ShowActions","ShowView","actions","aside","className","Content","Card","_c","emptyWhileLoading","title","rest","_d","hasEdit","useResourceDefinition","finalActions","Root","clsx","sanitizeRestProps","Title","ShowClasses","PropTypes","PREFIX","styled","styles","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","rejected","result","__generator","body","_","f","y","g","verb","n","v","op","addTreeMethodsBasedOnParentAndPosition","dataProvider","parentIdField","positionField","apiSupportBranchDeletion","deleteBranch","deleteBranchByDeletingNode","deleteBranchByDeletingAllChildren","treeDataProvider","params","treeRecords","r","a","b","child","childId","tree","parent","node","parentId","source","destination","position","destinationSiblings","sourceSiblings","_e","item","destinationSiblingsToUpdateFilter","sourceSiblingsToUpdateFilters","_f","_g","_h","_j","roots","rootPosition","newRoot","acc","curr","siblings","childPosition","previousData","useAddRootNode","options","useDataProvider","queryClient","useQueryClient","paramsRef","useRef","mutation","useMutation","callTimeResource","callTimeData","callTimeMeta","variables","addRootNode","callTimeParams","callTimeOptions","returnPromise","otherOptions","__spreadArray","to","from","pack","l","ar","useDeleteBranch","mutationMode","reactMutationOptions","mode","snapshot","updateCache","now","updatedAt","removeRecord","old","index","newRecords","_i","children_1","updateCollection","res","newCollection","recordWasFound","callTimeId","callTimePreviousData","userContext","key","mutate","onSuccess","onSettled","onError","queryKeys","prev","undoableEventEmitter","isUndo","useGetChildNodesCallback","callback","useCallback","removeChildren","removeChildren$1","useGetTreeCallback","updateQueryCacheFromGetTree","useMoveAsNthChildOf","cloneDeep","oldParent","newParent","callTimePosition","callTimeSource","callTimeDestination","useMoveAsNthSiblingOf","finalPosition","fixFakeRestDataProvider","total","filteredNodes","filteredRoots","useDeleteBranchWithConfirmController","mutationOptions","redirectTo","useState","open","setOpen","handleDelete","event","handleDialogOpen","handleDialogClose","useDeleteBranchWithUndoController","useCreateNodeController","transform","location","useLocation","useTreeContext","lazy","setFinalData","handleAddNode","expandedKeys","handleExpand","isChild","recordToUse","otherMutationOptions","hasShow","finalRedirectTo","getDefaultRedirectRoute","createRoot","createRootState","useAddChildNode","createChild","createChildState","handleAddNodeEvent","useEvent","useEffect","save","onSuccessFromSave","onErrorFromSave","transformFromSave","defaultOnSuccess","newNode","UNSAVED_NEW_NODE","defaultOnError","resourceName","getNodeKeysRecursively","nodeKey","allNodes","useTreeController","hideRootNodes","titleField","treeState","useGetTree","rootNodesState","useGetRootNodes","innerLoadChildNodes","lazyDataWithoutChildren","finalData","loadChildNodes","records","previous","recordsWithoutChildren","childrenAreLoaded","updated","updatedAsMap","setNewNode","nodeToCreate","newNodes","parentNode","newNodes_1","getRCTree","useExpandedKeys","setExpandedKeys","previousValue","newValue","closedNodes","allClosedNodes","moveAsNthChildOf","moveAsNthSiblingOf","refreshTree","handleDrop","info","dropKey","dragKey","dropPos","dropPosition","dataById","dragObject","targetObject","successSideEffect","targetPosition_1","loop_1","nodes","TreeChoicesContext","TreeInput","label","multiple","sx","helperText","fullWidth","useTreeInputController","fetchError","isRequired","field","fieldState","formState","defaultValue","isTouched","invalid","isSubmitted","Labeled","Typography","LinearProgress","TreeInputClasses","TreeInputTree","FormHelperText","InputHelperText","Box","treeData","checkStrictly","expandAction","rawDefaultValue","onBlur","onChange","rawValue","handleCheck","keys","selectedNodes","handleSelect","Tree","useReferenceNodeInputController","ReferenceNodeInput","React","ResourceContextProvider","TreeChoicesContextProvider","useTreeChoicesContext","sourceProp","treeDataProp","useRecordContext","sourceFromContext","treeDataFromContext","useInput","get","TreeContextProvider","TreeContext","CreateNode","controllerProps","CreateContextProvider","CreateView","CreateNode$1","ShowNode","idProp","ShowNode$1","_interopRequireDefault","require$$0","MoreVert","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","DeleteMenuItemWithConfirmation","confirmTitle","confirmContent","onClick","ref","handleClick","React.Fragment","MenuItem","Confirm","inflection","DeleteMenuItemWithUndo","DeleteMenuItem","NodeActions","anchorEl","setAnchorEl","handleClose","RaNodeActionsClasses","MoreVertIcon","Menu","Children","isValidElement","cloneElement","DefaultNodeActions","DeleteBranchWithUndoButton","icon","defaultIcon","Button","theme","alpha","ActionDelete","DeleteBranchWithConfirmButton","DeleteWithConfirmButtonClasses","DeleteBranchButton","saveContext","useSaveContext","finalMutationMode","TreeWithDetails","allowMultipleRoots","Create","Edit","linkTo","nodeActions","Show","showLine","addRootButton","CreateButton","navigate","useNavigate","createPath","useCreatePath","matchCreate","useMatch","matchEdit","matchShow","defaultSelectedKeys","treeNode","handleLoadData","canCreateNode","TreeWithDetailsClasses","CardContent","Routes","Route","ComponentPropType","EditNodeToolbar","isXs","useMediaQuery","StyledToolbar","ToolbarClasses","SaveButton","MuiToolbar"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38]}