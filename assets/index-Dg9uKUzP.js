var vn=Object.defineProperty;var d=(t,n)=>vn(t,"name",{value:n,configurable:!0});import{aj as re,ak as $t,al as hn,am as qt,u as be,M as qe,an as He,m as Bt,ac as yn,ao as mt,r as D,ap as gn,aq as bt,i as mn,ar as bn,A as we,D as $e,as as Kt,C as It,at as wn,au as _n,av as pn,aw as Ne,ax as De,ay as Ae,az as wt,aA as te,aB as On,aC as We,O as xn,a7 as _e,aD as _t,aE as Cn,aF as Sn,aG as jn,aH as Lt,aI as En,aJ as he,aK as Wt,j as E,aL as Je,F as Ke,aM as Qt,aN as zt,aO as Ut,ai as xt,I as Ct,aP as Pn,a4 as Nn,aQ as Dn,aR as An,aS as Rn,aT as Gt,aU as kn,f as Mn,aV as Tn,ae as $n,aW as qn,y as Bn,aX as Kn,aY as In,aZ as Ln,a_ as Xt,a$ as Ht,b0 as Qe,b1 as Wn,b2 as Qn,k as Jt,b3 as Vt,b4 as Yt,b5 as zn,b6 as Un,b7 as Gn,b8 as Xn,Q as Hn,S as Jn,d as Vn,b9 as Yn,ba as Be,a8 as Zn,bb as Fn,bc as er}from"./index-DdTpy-4-.js";import{bf as Na,bd as Da,be as Aa,bi as Ra,bl as ka,bk as Ma,bj as Ta,bm as $a,bo as qa,bn as Ba,bg as Ka,bh as Ia}from"./index-DdTpy-4-.js";var nt=function(){return nt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nt.apply(this,arguments)},tr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},nr=d(function(t){t===void 0&&(t={});var n=t.disableAuthentication,e=n===void 0?!1:n,a=t.id,r=t.queryOptions,i=r===void 0?{}:r,c=t.redirectOnError,s=c===void 0?rr:c,l=re(t);if(!l)throw new Error("useShowController requires a non-empty resource prop or context");var o=$t({enabled:!e}).isPending,u=hn({action:"show",resource:l,enabled:!e&&!o}).isPending,f=qt(l),m=be(),g=qe(),j=He(),S=Bt().id;if(!S&&!a)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var _=a??S,w=i.meta,y=tr(i,["meta"]),v=yn(l,{id:_,meta:w},nt({enabled:!o&&!u||e,onError:d(function(){g("ra.notification.item_doesnt_exist",{type:"error"}),j(s,l,_)},"onError"),retry:!1},y)),h=v.data,p=v.error,x=v.isLoading,O=v.isFetching,C=v.isPaused,b=v.isPending,P=v.isPlaceholderData,N=v.refetch;if(h&&h.id&&h.id!=_)throw new Error("useShowController: Fetched record's id attribute (".concat(h.id,") must match the requested 'id' (").concat(_,")"));var R=mt(),A=f(h),k=m("resources.".concat(l,".page.show"),{id:_,record:h,recordRepresentation:typeof A=="string"?A:"",_:m("ra.page.show",{name:R(l,1),id:_,record:h,recordRepresentation:typeof A=="string"?A:""})});return{defaultTitle:k,error:p,isLoading:x,isFetching:O,isPaused:C,isPending:b,isPlaceholderData:P,record:h,redirectOnError:s,refetch:N,resource:l}},"useShowController"),rr="list",pt=D.createContext(null);pt.displayName="ShowContext";var ar=d(function(t){var n=t.children,e=t.value;return D.createElement(pt.Provider,{value:e},D.createElement(gn,{value:e&&e.record},n))},"ShowContextProvider"),ir=d(function(){var t=D.useContext(pt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),rt=function(){return rt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rt.apply(this,arguments)},or=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ur=d(function(t){var n=bt(t).hasEdit;return D.createElement(mn,rt({},cr(t)),n&&D.createElement(bn,null))},"ShowActions"),cr=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var n=or(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return n},"sanitizeRestProps$1"),at=function(){return at=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)},dr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Me,lr=D.createElement(ur,null),sr=D.createElement(wn,null),fr=d(function(t){var n,e=t.actions,a=t.aside,r=t.children,i=t.render,c=t.className,s=t.component,l=s===void 0?It:s,o=t.emptyWhileLoading,u=o===void 0?!1:o,f=t.offline,m=f===void 0?sr:f,g=t.error,j=t.title,S=dr(t,["actions","aside","children","render","className","component","emptyWhileLoading","offline","error","title"]),_=ir(),w=_.resource,y=_.defaultTitle,v=_.isPaused,h=_.isPending,p=_.record,x=_.error,O=bt().hasEdit,C=typeof e>"u"&&O?lr:e,b=v&&h&&m!==void 0&&m!==!1,P=x&&g!==!1&&g!==void 0;return!p&&h&&u&&!b&&!P?null:D.createElement(vr,at({className:$e("show-page",c)},S),j!==!1&&D.createElement(Kt,{title:j,defaultTitle:y,preferenceKey:"".concat(w,".show.title")}),C!==!1&&C,D.createElement("div",{className:$e(je.main,(n={},n[je.noActions]=!C,n))},D.createElement(l,{className:je.card},b?m:P?g:i?i(_):r),a))},"ShowView"),Ie="RaShow",je={main:"".concat(Ie,"-main"),noActions:"".concat(Ie,"-noActions"),card:"".concat(Ie,"-card")},vr=we("div",{name:Ie,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((Me={},Me["& .".concat(je.main)]={display:"flex"},Me["& .".concat(je.noActions)]={marginTop:"1em"},Me["& .".concat(je.card)]={flex:"1 1 auto"},Me)),H=function(){return H=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)},ue=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},ce=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},wa=d(function(t,n,e,a){n===void 0&&(n="parent_id"),e===void 0&&(e="position"),a===void 0&&(a=!1);var r=a?_n:pn,i=H(H({},t),{getTree:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,o;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:s==null?void 0:s.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=u.sent().data,o=l.map(function(f){return H(H({},f),{children:l.filter(function(m){return m[n]==f.id}).sort(function(m,g){return m[e]-g[e]}).map(function(m){return m.id})})}),[2,{data:o}]}})})},"getTree"),getRootNodes:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,o,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:H(H({},s==null?void 0:s.filter),(u={},u[n]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta})];case 1:return l=f.sent().data,[4,Promise.all(l.map(function(m){var g;return t.getList(c,{filter:(g={},g[n]=m.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:s==null?void 0:s.meta}).then(function(j){var S=j.data;return H(H({},m),{children:S.map(function(_){var w=_.id;return w})})})}))];case 2:return o=f.sent(),[2,{data:o}]}})})},"getRootNodes"),getParentNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g=o.childId,j=o.meta;return ce(this,function(S){switch(S.label){case 0:return[4,i.getTree(l,{meta:j})];case 1:return u=S.sent().data,f=u.find(function(_){return _.id===g}),f?(m=u.find(function(_){return _.id===f[n]}),[2,{data:m}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g=o.parentId,j=o.meta;return ce(this,function(S){switch(S.label){case 0:return[4,t.getList(l,{filter:(m={},m[n]=g,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 1:return u=S.sent().data,[4,Promise.all(u.map(function(_){var w;return t.getList(l,{filter:(w={},w[n]=_.id,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j}).then(function(y){var v=y.data;return H(H({},_),{children:v.map(function(h){var p=h.id;return p})})})}))];case 2:return f=S.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g,j,S,_=o.source,w=o.destination,y=o.position,v=o.meta;return ce(this,function(h){switch(h.label){case 0:return[4,t.getList(l,{filter:(g={},g[n]=w.id,g["".concat(e,"_gte")]=y,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=h.sent().data,u.length>0?[4,Promise.all(u.map(function(p){var x;return t.update(l,{id:p.id,data:(x={},x[e]=p[e]+1,x),previousData:p,meta:v})}))]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,t.getList(l,{filter:(j={},j[n]=_[n],j["".concat(e,"_gt")]=_[e],j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=h.sent().data,f.length>0?[4,Promise.all(f.map(function(p){var x;return t.update(l,{id:p.id,data:(x={},x[e]=p[e]-1,x),previousData:p,meta:v})}))]:[3,6];case 5:h.sent(),h.label=6;case 6:return[4,t.update(l,{id:_.id,data:(S={},S[n]=w.id,S[e]=y,S),previousData:_,meta:v})];case 7:return m=h.sent().data,[2,{data:m}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g,j,S,_,w,y,v,h,p,x,O,C=o.source,b=o.destination,P=o.position,N=o.meta;return ce(this,function(R){switch(R.label){case 0:return(P===0||P===-1)&&(u=(S={},S[n]=b[n],S)),C[e]>b[e]&&C[n]===b[n]&&(P===-1?u=(_={},_[n]=b[n],_["".concat(e,"_gte")]=b[e],_):u=(w={},w[n]=b[n],w["".concat(e,"_gt")]=b[e],w)),C[n]!==b[n]&&P>0&&(u=(y={},y[n]=b[n],y["".concat(e,"_gt")]=b[e],y)),u?[4,t.getList(l,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})]:[3,3];case 1:return f=R.sent().data,f.length>0?[4,Promise.all(f.map(function(A){var k;return A.id===C.id?Promise.resolve(void 0):t.update(l,{id:A.id,data:(k={},k[e]=A[e]+1,k),previousData:A,meta:N})}))]:[3,3];case 2:R.sent(),R.label=3;case 3:return C[n]===b[n]?C[e]>b[e]?m=(v={},v[n]=C[n],v["".concat(e,"_gt")]=C[e],v):m=(h={},h[n]=C[n],h["".concat(e,"_gt")]=C[e],h["".concat(e,"_lte")]=b[e],h):m=(p={},p[n]=C[n],p["".concat(e,"_gt")]=C[e],p),[4,t.getList(l,{filter:m,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:N})];case 4:return g=R.sent().data,g.length>0?[4,Promise.all(g.map(function(A){var k;return A.id===C.id?Promise.resolve(void 0):t.update(l,{id:A.id,data:(k={},k[e]=A[e]-1,k),previousData:A,meta:N})}))]:[3,6];case 5:R.sent(),R.label=6;case 6:return j=C[n]===b[n]?C[e]>b[e]?b[e]+1:b[e]:P<0?0:P,P===-1&&(j=0),[4,t.update(l,{id:C.id,data:(x={},x[n]=(O=b[n])!==null&&O!==void 0?O:null,x[e]=j,x),previousData:C,meta:N})];case 7:return R.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g,j,S=o.data,_=o.meta;return ce(this,function(w){switch(w.label){case 0:return[4,t.getList(l,{filter:(g={},g[n]=null,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:_})];case 1:return u=w.sent().data,f=u.length>0?u.reduce(function(y,v){return v[e]>y?v[e]:y},-1/0)+1:0,[4,t.create(l,{data:H(H({},S),(j={},j[n]=null,j[e]=f,j)),meta:_})];case 2:return m=w.sent().data,[2,{data:H(H({},m),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,s){return ue(void 0,[c,s],void 0,function(l,o){var u,f,m,g,j,S,_=o.parentId,w=o.data,y=o.meta,v=o.position;return ce(this,function(h){switch(h.label){case 0:return[4,t.getList(l,{filter:(j={},j[n]=_,j),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:y})];case 1:return u=h.sent().data,f=u.length>0?u.reduce(function(p,x){return x[e]>p?x[e]:p},-1/0)+1:0,m=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(l,{data:H(H({},w),(S={},S[n]=_,S[e]=m,S)),meta:y})];case 2:return g=h.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(p){var x;p[e]>=v&&t.update(l,{id:p.id,data:H(H({},p),(x={},x[e]=p[e]+1,x)),previousData:p,meta:y})}),[2,{data:H(H({},g),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,s){return ue(void 0,void 0,void 0,function(){var l,o,u,f;return ce(this,function(m){switch(m.label){case 0:return l=s.id,o=s.previousData,u=s.meta,[4,r(i,c,s)];case 1:return m.sent(),[4,i.getChildNodes(c,{parentId:o[n],meta:u})];case 2:return f=m.sent().data,[4,Promise.all(f.filter(function(g){return g[e]>o[e]&&g.id!==l}).map(function(g){var j;return t.update(c,{id:g.id,data:H(H({},g),(j={},j[e]=g[e]-1,j)),previousData:g,meta:u})}))];case 3:return m.sent(),[2,{data:o}]}})})},"deleteBranch")});return i},"addTreeMethodsBasedOnParentAndPosition"),Ce=function(){return Ce=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ce.apply(this,arguments)},hr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},yr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},gr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},mr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},br=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Ne(),r=De(),i=D.useRef(n),c=Ae(Ce(Ce({mutationFn:d(function(l){var o=l===void 0?{}:l,u=o.resource,f=u===void 0?t:u,m=o.data,g=m===void 0?i.current.data:m,j=o.meta,S=j===void 0?i.current.meta:j;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(g==null)throw new Error("useAddRootNode mutation requires non-empty data");return a.addRootNode(f,{data:g,meta:S}).then(function(_){var w=_.data;return w})},"mutationFn")},e),{onSuccess:d(function(l,o,u){o===void 0&&(o={});var f=o.resource,m=f===void 0?t:f;r.setQueryData([m,"getOne",{id:String(l.id)}],l),e.onSuccess&&e.onSuccess(l,o,u)},"onSuccess")})),s=d(function(){for(var l=[],o=0;o<arguments.length;o++)l[o]=arguments[o];return hr(void 0,mr([],l,!0),void 0,function(u,f,m){var g,j;return u===void 0&&(u=t),f===void 0&&(f={}),m===void 0&&(m={}),yr(this,function(S){return g=m.returnPromise,j=gr(m,["returnPromise"]),g?[2,c.mutateAsync(Ce({resource:u},f),m)]:(c.mutate(Ce({resource:u},f),j),[2])})})},"addRootNode");return[s,c]},"useAddRootNode"),ne=function(){return ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ne.apply(this,arguments)},St=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},jt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},wr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Zt=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Ne(),r=De(),i=n.id,c=n.previousData,s=e.mutationMode,l=s===void 0?"pessimistic":s,o=wr(e,["mutationMode"]),u=D.useRef(l),f=D.useRef(n),m=D.useRef([]),g=d(function(_){var w=_.resource,y=_.id,v=Date.now(),h=u.current==="undoable"?v+5*1e3:v,p=d(function(O,C){var b=O.findIndex(function(T){return T.id==C});if(b===-1)return O;for(var P=O[b],N=Ve(Ve([],O.slice(0,b),!0),O.slice(b+1),!0),R=P.children||[],A=0,k=R;A<k.length;A++){var M=k[A];N=p(N,M)}return N},"removeRecord"),x=d(function(O){var C=p(O,y);return C.map(function(b){return ne(ne({},b),{children:b.children?b.children.filter(function(P){return P!==y}):b.children})})},"updateCollection");r.setQueriesData({queryKey:[w,"getTree"]},function(O){if(!O)return O;var C=x(O),b=C.length<O.length;return b?C:O},{updatedAt:h}),r.setQueriesData({queryKey:[w,"getRootNodes"]},function(O){return O&&O.length>0?x(O):O},{updatedAt:h}),r.setQueriesData({queryKey:[w,"getChildNodes"]},function(O){if(!O)return O;var C=x(O),b=C.length<O.length;return b?C:O},{updatedAt:h})},"updateCache"),j=Ae(ne(ne({mutationFn:d(function(_){var w=_===void 0?{}:_,y=w.resource,v=y===void 0?t:y,h=w.id,p=h===void 0?f.current.id:h,x=w.previousData,O=x===void 0?f.current.previousData:x,C=w.meta,b=C===void 0?f.current.meta:C;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(p==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(O==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return a.deleteBranch(v,{id:p,previousData:O,meta:b}).then(function(P){var N=P.data;return N})},"mutationFn")},o),{onMutate:d(function(_){return St(void 0,void 0,void 0,function(){var w;return jt(this,function(y){switch(y.label){case 0:return o.onMutate?[4,o.onMutate(_)]:[3,2];case 1:return w=y.sent()||{},[2,ne({snapshot:m.current},w)];case 2:return[2,{snapshot:m.current}]}})})},"onMutate"),onError:d(function(_,w,y){if((u.current==="optimistic"||u.current==="undoable")&&y.snapshot.forEach(function(v){var h=v[0],p=v[1];r.setQueryData(h,p)}),o.onError)return o.onError(_,w,y)},"onError"),onSuccess:d(function(_,w,y){if(w===void 0&&(w={}),u.current==="pessimistic"){var v=w.resource,h=v===void 0?t:v,p=w.id,x=p===void 0?i:p;g({resource:h,id:x}),o.onSuccess&&o.onSuccess(_,w,y)}},"onSuccess"),onSettled:d(function(_,w,y,v){if(y===void 0&&(y={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0];r.invalidateQueries({queryKey:p})}),o.onSettled)return o.onSettled(_,w,y,v)},"onSettled")})),S=d(function(){for(var _=[],w=0;w<arguments.length;w++)_[w]=arguments[w];return St(void 0,Ve([],_,!0),void 0,function(y,v,h){var p,x,O,C,b,P,N,R,A;return y===void 0&&(y=t),v===void 0&&(v={}),h===void 0&&(h={}),jt(this,function(k){switch(k.label){case 0:return p=h.mutationMode,x=h.onSuccess,O=h.onSettled,C=h.onError,f.current=n,p&&(u.current=p),u.current==="pessimistic"?[2,j.mutate(ne({resource:y},v),{onSuccess:x,onSettled:O,onError:C})]:(b=v.id,P=b===void 0?i:b,N=v.previousData,R=N===void 0?c:N,A=[[y,"getTree"],[y,"getRootNodes"],[y,"getChildNodes"]],m.current=A.reduce(function(M,T){return M.concat(r.getQueriesData({queryKey:T}))},[]),[4,Promise.all(m.current.map(function(M){var T=M[0];return r.cancelQueries({queryKey:T})}))]);case 1:return k.sent(),g({resource:y,id:P}),x&&setTimeout(function(){return x(R,ne({resource:y},v),{snapshot:m.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(R,ne({resource:y},v),{snapshot:m.current})},0),u.current==="optimistic"?[2,j.mutate(ne({resource:y},v),{onSettled:O,onError:C})]:(wt.once("end",function(M){var T=M.isUndo;T?m.current.forEach(function(B){var q=B[0],I=B[1];r.setQueryData(q,I)}):j.mutate(ne({resource:y},v),{onSettled:O,onError:C})}),[2])}})})},"mutate");return[S,j]},"useDeleteBranch"),ye=function(){return ye=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ye.apply(this,arguments)},_r=d(function(t,n,e){var a=Ne(),r=Ae(ye({mutationKey:[t,"getChildNodes",n],mutationFn:d(function(c){return a.getChildNodes(t,ye(ye({},n),c)).then(function(s){var l=s.data;return l})},"mutationFn")},e)),i=te(function(c){return r.mutateAsync(ye(ye({},n),{parentId:c}))});return i},"useGetChildNodesCallback"),ze=function(){return ze=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)},_a=d(function(t){return ze(ze({},t),{children:t.children.map(function(n){return n.id})})},"removeChildren"),it=function(){return it=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it.apply(this,arguments)},pr=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Ne(),r=De(),i=Ae(it({mutationKey:[t,"getTree",n],mutationFn:d(function(){return a.getTree(t,n).then(function(s){var l=s.data;return l})},"mutationFn"),onSuccess:d(function(s){On(r,t,s,n)},"onSuccess")},e)),c=D.useCallback(function(){return i.mutateAsync(n)},[i,n]);return c},"useGetTreeCallback"),ie=function(){return ie=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ie.apply(this,arguments)},Et=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Pt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Or=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},se=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},xr=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Ne(),r=De(),i=n.source,c=n.destination,s=n.position,l=e.mutationMode,o=l===void 0?"undoable":l,u=Or(e,["mutationMode"]),f=D.useRef(o),m=D.useRef(n),g=D.useRef([]),j=d(function(w){var y=w.resource,v=w.position,h=w.source,p=w.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,C=d(function(b){var P,N,R,A,k,M=We(b),T=M.find(function(q){var I;return(I=q.children)===null||I===void 0?void 0:I.includes(h.id)});T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function(q){return q!==h.id}):M=M.filter(function(q){return q.id!==h.id});var B=M.find(function(q){return q.id===p.id});return B?B.children=se(se(se([],(R=(N=B.children)===null||N===void 0?void 0:N.slice(0,v))!==null&&R!==void 0?R:[],!0),[h.id],!1),(k=(A=B.children)===null||A===void 0?void 0:A.slice(v))!==null&&k!==void 0?k:[],!0):(M=M.filter(function(q){return q.id!==h.id}),M=se(se(se([],M.slice(0,v),!0),[h],!1),M.slice(v),!0)),M},"updateCollection");r.setQueriesData({queryKey:[y,"getTree"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[y,"getRootNodes"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[y,"getChildNodes"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O})},"updateCache"),S=Ae(ie(ie({mutationFn:d(function(w){var y=w===void 0?{}:w,v=y.resource,h=v===void 0?t:v,p=y.position,x=p===void 0?m.current.position:p,O=y.source,C=O===void 0?m.current.source:O,b=y.destination,P=b===void 0?m.current.destination:b,N=y.meta,R=N===void 0?m.current.meta:N;if(h==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(C==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return a.moveAsNthChildOf(h,{position:x,source:C,destination:P,meta:R}).then(function(A){var k=A.data;return k})},"mutationFn")},u),{onMutate:d(function(w){return Et(void 0,void 0,void 0,function(){var y;return Pt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(w)]:[3,2];case 1:return y=v.sent()||{},[2,ie({snapshot:g.current},y)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(w,y,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0],x=h[1];r.setQueryData(p,x)}),u.onError)return u.onError(w,y,v)},"onError"),onSettled:d(function(w,y,v,h){v===void 0&&(v={});var p=v.resource,x=p===void 0?t:p;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(w,y,v,h)},"onSettled")})),_=d(function(){for(var w=[],y=0;y<arguments.length;y++)w[y]=arguments[y];return Et(void 0,se([],w,!0),void 0,function(v,h,p){var x,O,C,b,P,N,R,A,k,M,T;return v===void 0&&(v=t),h===void 0&&(h={}),p===void 0&&(p={}),Pt(this,function(B){switch(B.label){case 0:if(x=p.mutationMode,O=p.onSuccess,C=p.onSettled,b=p.onError,m.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,S.mutate(ie({resource:v},h),{onSuccess:O,onSettled:C,onError:b})];if(P=h.position,N=P===void 0?s:P,R=h.source,A=R===void 0?i:R,k=h.destination,M=k===void 0?c:k,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(A==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(M==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:N,source:A,destination:M}),O&&setTimeout(function(){return O(void 0,ie({resource:v},h),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ie({resource:v},h),{snapshot:g.current})},0),f.current==="optimistic"?[2,S.mutate(ie({resource:v},h),{onSettled:C,onError:b})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):S.mutate(ie({resource:v},h),{onSettled:C,onError:b})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oe.apply(this,arguments)},Nt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Dt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Cr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},fe=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Sr=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Ne(),r=De(),i=n.source,c=n.destination,s=n.position,l=e.mutationMode,o=l===void 0?"undoable":l,u=Cr(e,["mutationMode"]),f=D.useRef(o),m=D.useRef(n),g=D.useRef([]),j=d(function(w){var y=w.resource,v=w.position,h=w.source,p=w.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,C=d(function(b){var P,N,R,A,k,M=We(b),T=M.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(h.id)}),B=M.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(p.id)}),q=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(L){return L===h.id})<T.children.findIndex(function(L){return L===p.id})&&(q=v-1);var I=q<0?0:q;return T?T.children=(P=T.children)===null||P===void 0?void 0:P.filter(function(L){return L!==h.id}):M=M.filter(function(L){return L.id!==h.id}),B?B.children=fe(fe(fe([],(R=(N=B.children)===null||N===void 0?void 0:N.slice(0,I))!==null&&R!==void 0?R:[],!0),[h.id],!1),(k=(A=B.children)===null||A===void 0?void 0:A.slice(I))!==null&&k!==void 0?k:[],!0):(M=M.filter(function(L){return L.id!==h.id}),M=fe(fe(fe([],M.slice(0,I),!0),[h],!1),M.slice(I),!0)),M},"updateCollection");r.setQueriesData({queryKey:[y,"getTree"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[y,"getRootNodes"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[y,"getChildNodes"]},function(b){return b&&b.length>0?C(b):b},{updatedAt:O})},"updateCache"),S=Ae(oe(oe({mutationFn:d(function(w){var y=w===void 0?{}:w,v=y.resource,h=v===void 0?t:v,p=y.position,x=p===void 0?m.current.position:p,O=y.source,C=O===void 0?m.current.source:O,b=y.destination,P=b===void 0?m.current.destination:b,N=y.meta,R=N===void 0?m.current.meta:N;if(h==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(C==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return a.moveAsNthSiblingOf(h,{position:x,source:C,destination:P,meta:R}).then(function(A){var k=A.data;return k})},"mutationFn")},u),{onMutate:d(function(w){return Nt(void 0,void 0,void 0,function(){var y;return Dt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(w)]:[3,2];case 1:return y=v.sent()||{},[2,oe({snapshot:g.current},y)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(w,y,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(h){var p=h[0],x=h[1];r.setQueryData(p,x)}),u.onError)return u.onError(w,y,v)},"onError"),onSettled:d(function(w,y,v,h){v===void 0&&(v={});var p=v.resource,x=p===void 0?t:p;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(w,y,v,h)},"onSettled")})),_=d(function(){for(var w=[],y=0;y<arguments.length;y++)w[y]=arguments[y];return Nt(void 0,fe([],w,!0),void 0,function(v,h,p){var x,O,C,b,P,N,R,A,k,M,T;return v===void 0&&(v=t),h===void 0&&(h={}),p===void 0&&(p={}),Dt(this,function(B){switch(B.label){case 0:if(x=p.mutationMode,O=p.onSuccess,C=p.onSettled,b=p.onError,m.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,S.mutate(oe({resource:v},h),{onSuccess:O,onSettled:C,onError:b})];if(P=h.position,N=P===void 0?s:P,R=h.source,A=R===void 0?i:R,k=h.destination,M=k===void 0?c:k,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(A==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(M==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),j({resource:v,position:N,source:A,destination:M}),O&&setTimeout(function(){return O(void 0,oe({resource:v},h),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},h),{snapshot:g.current})},0),f.current==="optimistic"?[2,S.mutate(oe({resource:v},h),{onSettled:C,onError:b})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):S.mutate(oe({resource:v},h),{onSettled:C,onError:b})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthSiblingOf"),de=function(){return de=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)},At=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Rt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},pa=d(function(t){return de(de({},t),{getRootNodes:d(function(n,e){return At(void 0,void 0,void 0,function(){var a,r;return Rt(this,function(i){switch(i.label){case 0:return[4,t.getRootNodes(n,e)];case 1:return a=i.sent().data,r=a.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(n,e){return At(void 0,[n,e],void 0,function(a,r){var i,c,s,l,o=r.data,u=r.meta;return Rt(this,function(f){switch(f.label){case 0:return[4,t.getList(a,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return i=f.sent().data,c=i.filter(function(m){return typeof m.parent_id>"u"}),s=c.length>0?c.reduce(function(m,g){return g.position>m?g.position:m},-1/0)+1:0,[4,t.create(a,{data:de(de({},o),{parent_id:null,position:s}),meta:u})];case 2:return l=f.sent().data,[2,{data:de(de({},l),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),kt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Ft=d(function(t,n){var e,a=t.filter(function(c){return c.id!==n.id}),r=a.find(function(c){var s;return(s=c.children)===null||s===void 0?void 0:s.includes(n.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==n.id})),!n.children||n.children.length===0)return a;var i=en(a,n);return a=a.filter(function(c){return!i.includes(c)}),a},"removeNode"),en=d(function(t,n){return n?!n.children||n.children.length===0?[]:kt(kt([],n.children,!0),n.children.flatMap(function(e){var a=t.find(function(r){return r.id===e});return a?en(t,a):[]}),!0):[]},"getNodeChildrenRecursive"),ot=function(){return ot=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)},tn=d(function(t){var n=t.mutationMode,e=t.mutationOptions,a=t.redirect,r=a===void 0?"list":a,i=qe(),c=He(),s=xn(),l=re(t);if(l==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=_e(t);if(o==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Zt(),f=u[0],m=u[1].isPending,g=D.useState(!1),j=g[0],S=g[1],_=_t().setFinalData,w=D.useCallback(function(h){h.stopPropagation(),f(l,{id:o.id,previousData:o},ot({mutationMode:n,onSuccess:d(function(){i("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,l),n==="pessimistic"?s():_&&_(function(p){return Ft(p,o)})},"onSuccess"),onError:d(function(p){i(typeof p=="string"?p:p.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,n,e,i,o,c,r,s,l,_]),y=d(function(h){h.stopPropagation(),S(!0)},"handleDialogOpen"),v=d(function(h){h.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:w,handleDialogOpen:y,handleDialogClose:v,isPending:m,open:j}},"useDeleteBranchWithConfirmController"),ut=function(){return ut=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(this,arguments)},nn=d(function(t){var n=t.mutationOptions,e=t.redirect,a=e===void 0?"list":e,r=qe(),i=He(),c=_t().setFinalData,s=re(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var l=_e(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var o=Zt(),u=o[0],f=o[1].isPending,m=D.useCallback(function(g){g.stopPropagation(),u(s,{id:l.id,previousData:l},ut({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(j){return Ft(j,l)}),i(a,s)},"onSuccess"),onError:d(function(j){return r(typeof j=="string"?j:j.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},n))},[u,n,r,l,i,a,s,c]);return{handleDelete:m,isPending:f}},"useDeleteBranchWithUndoController"),Se=function(){return Se=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Se.apply(this,arguments)},jr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Er=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Pr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Nr=d(function(t){var n=t.disableAuthentication,e=t.record,a=e===void 0?{}:e,r=t.redirect,i=t.mutationOptions,c=i===void 0?{}:i,s=t.transform;$t({enabled:!n});var l=re(t);if(l==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=mt(),u=De(),f=Cn(),m=_t().handleAddNode,g=f.state&&f.state.parentId,j=f.state&&f.state.insertAsFirstChild,S=typeof g<"u"&&g!==null,_=f.state&&f.state.record||a,w=c.onSuccess,y=c.onError,v=Pr(c,["onSuccess","onError"]),h=bt(t),p=h.hasEdit,x=h.hasShow,O=r||Dr(x,p),C=br(l,void 0,v),b=C[0],P=C[1],N=Sn(l,void 0,v),R=N[0],A=N[1],k=te(m??Ar);D.useEffect(function(){return k({record:{},parentId:g,insertAsFirstChild:j}),function(){k(void 0)}},[k,g,j]);var M=be(),T=qe(),B=He(),q=D.useCallback(function(W,V){var Q=V===void 0?{}:V,G=Q.onSuccess,z=Q.onError,K=Q.transform,$=d(function(U){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(O,l,U.id,U),u.refetchQueries({queryKey:[l,"getTree"],type:"active"}),u.refetchQueries({queryKey:[l,"getRootNodes"],type:"active"})},"defaultOnSuccess"),X=d(function(U){T(typeof U=="string"?U:U.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(K?K(W):s?s(W):W).then(function(U){return jr(void 0,void 0,void 0,function(){var ee,Y,Z;return Er(this,function(ae){switch(ae.label){case 0:ee={onSuccess:d(function(le,pe,J){k(void 0),G?G(le,pe,J):w?w(le,pe,J):$(le)},"onSuccess"),onError:z||y||X},ae.label=1;case 1:return ae.trys.push([1,6,,7]),S?[4,R(l,{data:U,parentId:g,meta:v.meta,position:j?0:void 0},Se(Se({},ee),{returnPromise:!0}))]:[3,3];case 2:return ae.sent(),[3,5];case 3:return[4,b(l,{data:U,meta:v.meta},Se(Se({},ee),{returnPromise:!0}))];case 4:ae.sent(),ae.label=5;case 5:return[3,7];case 6:return Y=ae.sent(),(Y instanceof jn||typeof Y=="object"&&Y!==null&&Y.hasOwnProperty("body"))&&((Z=Y.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,Y.body.errors]:[3,7];case 7:return[2]}})})})},[R,b,k,S,T,y,w,g,u,B,l,s,v.meta,O,j]),I=o(l,1),L=M("ra.page.create",{name:"".concat(I)});return{isLoading:!1,isFetching:!1,defaultTitle:L,save:q,saving:P.isPending||A.isPending,isPending:P.isPending||A.isPending,resource:l,record:_,redirect:O}},"useCreateNodeController"),Dr=d(function(t,n){return n?"edit":t?"show":"list"},"getDefaultRedirectRoute"),Ar=d(function(){},"noop"),Rr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},rn=d(function(t,n){var e=n.find(function(a){return a.id==t});return e?Rr([e.id.toString()],(e.children||[]).flatMap(function(a){return rn(a,n)}),!0):[]},"getNodeKeysRecursively"),ge=function(){return ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ge.apply(this,arguments)},Ye=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Ze=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Fe=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},kr=d(function(t){var n=be(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var a=mt(),r=t.lazy,i=r===void 0?!1:r,c=t.filter,s=c===void 0?{}:c,l=t.mutationMode,o=l===void 0?"undoable":l,u=t.meta,f=Lt(e,{filter:s,meta:u},{enabled:!i}),m=En(e,{filter:s,meta:u},{enabled:i,gcTime:0}),g=_r(e,{meta:u}),j=D.useMemo(function(){var Q;return(Q=m.data)===null||Q===void 0?void 0:Q.map(function(G){var z=G.children,K=Fe(G,["children"]);return z!=null&&z.length?K:G})},[m.data,m.isFetching]),S=i?ge(ge({},m),{data:j}):f,_=S.data,w=S.error,y=S.isLoading,v=S.isPending,h=S.isFetching,p=D.useState(_),x=p[0],O=p[1],C=te(function(Q){return Ye(void 0,void 0,void 0,function(){var G;return Ze(this,function(z){switch(z.label){case 0:return[4,g(Q)];case 1:return G=z.sent(),O(function(K){var $,X=G.map(function(Y){var Z=Y.children,ae=Fe(Y,["children"]),le=K==null?void 0:K.some(function(pe){var J;return(J=Y.children)===null||J===void 0?void 0:J.includes(pe.id)});return Z!=null&&Z.length&&!le?ae:Y}),U=ve(ve([],($=K==null?void 0:K.map(function(Y){return Y.id===Q?ge(ge({},Y),{children:X.map(function(Z){return Z.id})}):Y}))!==null&&$!==void 0?$:[],!0),X,!0),ee=U.reduce(function(Y,Z){return Y[Z.id]=Z,Y},{});return Object.values(ee)}),[2]}})})});D.useEffect(function(){O(_)},[_]);var b=D.useState(),P=b[0],N=b[1],R=te(function(Q){var G,z=We(x);if(Q){if(N(Q),Q.parentId!=null){var K=z==null?void 0:z.find(function(X){return X.id===Q.parentId});K&&(K.children=K.children||[],K.children=Q.insertAsFirstChild?ve([he],K.children,!0):ve(ve([],K.children,!0),[he],!1))}O(ve(ve([],z??[],!0),[ge({id:he,children:[]},Q.record)],!1))}else{if(!P)return;var $=We(x);if(P.parentId!=null){var K=$==null?void 0:$.find(function(U){return U.id===P.parentId});K&&(K.children=(G=K.children)===null||G===void 0?void 0:G.filter(function(U){return U!=he}))}N(void 0),O($==null?void 0:$.filter(function(X){return X.id!==he}))}}),A=Wt(void 0,t.expandedKeys),k=A[0],M=A[1],T=te(function(Q){M(function(G){var z,K,$=typeof Q=="function"?Q(G??[]):Q,X=(z=G==null?void 0:G.filter(function(ee){return!$.includes(ee)}))!==null&&z!==void 0?z:[],U=(K=X==null?void 0:X.flatMap(function(ee){return rn(ee,x??[])},[]))!==null&&K!==void 0?K:[];return $.filter(function(ee){return!U.includes(ee)})})}),B=xr(e,{meta:u})[0],q=Sr(e,{meta:u})[0],I=pr(e),L=qe(),W=te(function(Q){var G=Q.type,z=Fe(Q,["type"]),K=d(function(){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(X){switch(X.label){case 0:return[4,I()];case 1:return X.sent(),L("ra-tree.item_moved",{undoable:o==="undoable"}),[2]}})})},"successSideEffect"),$=d(function(X){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(U){return L(X.message,{type:"error"}),[2]})})},"errorSideEffect");G==="child"?B(e,z,{onSuccess:K,onError:$,mutationMode:o}):q(e,z,{onSuccess:K,onError:$,mutationMode:o})}),V=n("ra.page.list",{name:a(e,2)});return{data:x,defaultTitle:V,error:w,expandedKeys:k,handleAddNode:R,handleDrop:W,handleExpand:T,isLoading:y,isFetching:h,isPending:v,loadChildNodes:C,newNode:P,lazy:i,setFinalData:O}},"useTreeController"),an=D.createContext(void 0),Pe=function(){return Pe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pe.apply(this,arguments)},Ot=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Mr=d(function(t){var n=t.id,e=t.label,a=t.multiple,r=t.sx,i=t.className,c=t.helperText,s=t.fullWidth,l=t.margin,o=l===void 0?"dense":l,u=t.variant,f=u===void 0?"filled":u,m=t.size,g=m===void 0?"small":m,j=Ot(t,["id","label","multiple","sx","className","helperText","fullWidth","margin","variant","size"]),S=Wr(t),_=S.data,w=S.resource,y=S.source,v=S.fetchError,h=S.isLoading,p=S.isRequired,x=S.field,O=S.fieldState,C=S.formState,b=be(),P=O.isTouched,N=O.invalid,R=O.error,A=C.isSubmitted,k=D.useMemo(function(){return(x==null?void 0:x.value)||(a?[]:"")},[x,a]),M=D.useMemo(function(){return _.filter(function(B){return a?k.includes(B.id):k===B.id})},[k,_,a]),T={standard:Ut,outlined:zt,filled:Qt}[f];return v?E.jsxs(et,{className:i,sx:r,"data-testid":"error",variant:f,size:g,margin:o,error:!0,children:[E.jsx(Je,{error:!0,margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:w,label:e,isRequired:p,source:y})}),E.jsx(T,{inputComponent:ct}),E.jsx(xt,{error:!0,children:E.jsx(Ct,{error:b("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"}),helperText:c})})]}):h||!_?E.jsxs(et,{className:i,sx:r,"data-testid":"loading",variant:f,size:g,margin:o,children:[E.jsx(Je,{margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:w,label:e,isRequired:p,source:y})}),E.jsx(T,{inputComponent:ct,endAdornment:E.jsx(Pn,{color:"inherit",size:"30px"})})]}):E.jsxs(et,{className:i,sx:r,variant:f,size:g,margin:o,children:[E.jsx(Je,{htmlFor:n??y,error:N,margin:o==="dense"?o:void 0,shrink:M.length>0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:w,label:e,isRequired:p,source:y})}),E.jsx($r,Pe({source:y,multiple:a,className:Tr.tree,field:x,fullWidth:s},j,{data:_,variant:f,size:g,margin:o,id:n??y})),(P||A)&&R||c?E.jsx(xt,{error:(P||A)&&!!R,children:E.jsx(Ct,{error:R==null?void 0:R.message,helperText:c})}):null]})},"TreeInput"),on="RaTreeInput",Tr={tree:"".concat(on,"-tree")},et=we(kn,{name:on,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{"& .MuiInputBase-input":{height:"auto",minHeight:"1.4375em"},"& .MuiChip-root":{marginTop:n.spacing(.5),marginRight:n.spacing(.5)}}}),$r=d(function(t){var n,e=t.className,a=t.data,r=t.multiple,i=t.field,c=t.checkStrictly,s=c===void 0?!0:c,l=t.expandAction,o=l===void 0?!1:l,u=t.titleField,f=t.margin,m=f===void 0?"dense":f,g=t.variant,j=g===void 0?"filled":g,S=t.size,_=S===void 0?"small":S,w=t.label,y=t.isRequired,v=t.source,h=t.id,p=t.sx,x=Ot(t,["className","data","multiple","field","checkStrictly","expandAction","titleField","margin","variant","size","label","isRequired","source","id","sx"]),O=D.useMemo(function(){return(i==null?void 0:i.value)||(r?[]:"")},[i,r]),C=D.useMemo(function(){return a.filter(function($){return r?O.includes($.id):O===$.id})},[O,a,r]),b=D.useState(0),P=b[0],N=b[1],R=D.useRef(!0);D.useEffect(function(){R.current&&N(function($){return $+1}),R.current=!0},[O]);var A=te(function($,X){R.current=!1,i==null||i.onChange(X.map(function(U){return U.id}))}),k=te(function($,X){var U;R.current=!1,i==null||i.onChange((U=X==null?void 0:X.id)!==null&&U!==void 0?U:null),W()}),M=D.useState(!1),T=M[0],B=M[1],q=te(function($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),B(!0))}),I=D.useRef(null),L=d(function(){B(!0)},"handleClick"),W=d(function(){B(!1)},"handleClose"),V=D.useRef(null),Q=d(function(){var $;($=V.current)===null||$===void 0||$.updatePosition()},"handleExpand"),G=re(t),z=qt(G),K={standard:Ut,outlined:zt,filled:Qt}[j];return E.jsxs(E.Fragment,{children:[E.jsx(K,{id:h,ref:I,onClick:L,endAdornment:E.jsx(An,{}),size:_,margin:m,inputComponent:ct,className:e,onKeyDown:q,label:E.jsx(Ke,{resource:G,label:w,isRequired:y,source:v}),notched:j==="outlined"?C.length>0:void 0,inputProps:{children:C.length===0?null:E.jsx(Nn,{direction:"row",flexWrap:"wrap",children:r?C.map(function($){return E.jsx(Dn,{size:_,onDelete:d(function(X){A(X,C.filter(function(U){return U.id!==$.id}),$,!1)},"onDelete"),label:E.jsx(Mt,{record:$,titleField:u||z})},$.id)}):E.jsx(Mt,{record:C[0],titleField:u||z})})}}),E.jsx(Rn,{action:V,open:T,anchorEl:I.current,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{minWidth:I?(n=I.current)===null||n===void 0?void 0:n.clientWidth:"auto"}}},children:D.createElement(Gt,Pe({},x,{key:P,checkStrictly:s,expandAction:o,checkable:r,selectable:!r,checkedKeys:r?O:[],selectedKeys:r?[]:[O],defaultCheckedKeys:r?O:void 0,defaultSelectedKeys:r?void 0:[O],defaultExpandedKeys:r?O:[O],onCheck:A,onSelect:k,onExpand:Q,data:a,onBlur:i==null?void 0:i.onBlur,sx:Pe({padding:1},p)}))})]})},"TreeInputTree"),ct=D.forwardRef(d(function(n,e){var a=n.className,r=n.children,i=Ot(n,["className","children"]);return E.jsxs(Mn,{className:a,children:[E.jsx("input",Pe({ref:e},i,{style:Tn})),r]})},"TreeInputInput")),Mt=d(function(t){var n=t.titleField,e=t.record;return e?typeof n=="function"?n(e):$n(e,n):null},"ChoiceLabel"),qr=d(function(t){var n=t.reference,e=t.source,a=t.meta,r=Lt(n,{meta:a}),i=r.data,c=r.error,s=r.isLoading,l=r.isFetching;return{source:e,resource:n,data:i,error:c??void 0,isLoading:s,isFetching:l}},"useReferenceNodeInputController"),Br=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Oa=d(function(t){var n=t.children,e=n===void 0?E.jsx(Mr,{}):n,a=qr(t),r=a.resource,i=Br(a,["resource"]);return E.jsx(qn,{value:r,children:E.jsx(Kr,{value:i,children:e})})},"ReferenceNodeInput"),Kr=d(function(t){var n=t.children,e=t.value;return E.jsx(an.Provider,{value:e,children:n})},"TreeChoicesContextProvider"),Ir=d(function(){return D.useContext(an)||{}},"useTreeChoicesContext"),Ue=function(){return Ue=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)},Lr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Wr=d(function(t){var n=t.source,e=t.data;t.hideRootNodes;var a=Lr(t,["source","data","hideRootNodes"]),r=re(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=Ir(),c=i.source,s=i.data,l=i.isLoading,o=i.isFetching,u=i.error,f=e??s,m=n??c;if(m==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var g=Bn(Ue(Ue({},a),{resource:r,source:m,type:"text"})),j=g.isRequired,S=g.field,_=g.fieldState,w=g.formState;return{resource:r,source:m,data:f??[],fetchError:u,isLoading:l,isFetching:o,isRequired:j,field:S,fieldState:_,formState:w}},"useTreeInputController"),Qr=d(function(t){var n=t.children,e=t.value;return E.jsx(Kn.Provider,{value:e,children:n})},"TreeContextProvider"),dt=function(){return dt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)},xa=d(function(t){var n=Nr(t);return E.jsx(In,{value:n,children:E.jsx(Ln,dt({},t,n))})},"CreateNode"),lt=function(){return lt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(this,arguments)},Tt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Ca=d(function(t){var n=t.id,e=Bt().id;if(!e&&!n)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var a=n??e,r=Wt(),i=r[1];D.useEffect(function(){i(function(s){var l=a.toString();return Array.isArray(s)?s.includes(l)?s:Tt(Tt([],s,!0),[l],!1):[l]})},[t.resource,a,i]);var c=nr(t);return E.jsx(ar,{value:c,children:E.jsx(fr,lt({},t))})},"ShowNode"),st=function(){return st=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)},zr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ur=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.label,s=c===void 0?"ra.action.delete":c,l=t.mutationMode,o=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,m=f===void 0?"list":f,g=zr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),j=re(t);if(!j)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var S=_e(t);if(!S)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var _=tn({mutationMode:l,record:S,resource:j,redirect:m}),w=_.handleDelete,y=_.handleDialogClose,v=_.handleDialogOpen,h=_.isPending,p=_.open,x=be(),O=d(function(C){C.stopPropagation(),o&&o(C),C.isDefaultPrevented()||v(C)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Xt,st({className:n,onClick:O,ref:u},g,{children:x(s,{_:s})})),E.jsx(Ht,{isOpen:p,loading:h,title:a,content:i,translateOptions:{name:Qe.humanize(x("resources.".concat(j,".name"),{smart_count:1,_:Qe.singularize(j)}),!0),id:S.id},onConfirm:w,onClose:y})]})},"DeleteMenuItemWithConfirmation"),ft=function(){return ft=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)},Gr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Xr=d(function(t){var n=t.className,e=t.label,a=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var i=t.ref;t.resource;var c=t.redirect,s=c===void 0?"list":c,l=Gr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),o=re(t);if(!o)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=_e(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=nn({record:u,resource:o,redirect:s}),m=f.handleDelete,g=f.isPending,j=be(),S=d(function(_){_.stopPropagation(),r&&r(_),_.isDefaultPrevented()||m(_)},"handleClick");return E.jsx(Xt,ft({className:n,disabled:g,onClick:S,ref:i},l,{children:j(a,{_:a})}))},"DeleteMenuItemWithUndo"),Ge=function(){return Ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ge.apply(this,arguments)},Hr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},un=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n,a=Hr(t,["mutationMode"]);return e==="undoable"?E.jsx(Xr,Ge({},a,{mutationMode:e})):E.jsx(Ur,Ge({},a,{mutationMode:e}))},"DeleteMenuItem");un.displayName="DeleteMenuItem";var Jr=D.createContext(null),Vr=Jr.Provider,Yr=d(function(t){var n=t.children,e=n===void 0?E.jsx(un,{}):n,a=t.className,r=D.useState(null),i=r[0],c=r[1],s=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),l=D.useCallback(function(u){u.stopPropagation(),c(null)},[]),o=D.useMemo(function(){return{close:l}},[l]);return E.jsxs(Fr,{className:a,children:[E.jsx("button",{className:Zr.menuButton,onClick:s,children:E.jsx(Wn,{})}),E.jsx(Qn,{anchorEl:i,open:!!i,onClose:l,children:E.jsx(Vr,{value:o,children:e})})]})},"NodeActions"),cn="RaNodeActions",Zr={menuButton:"".concat(cn,"-menuButton")},Fr=we("div",{name:cn,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(){return{}}),vt=function(){return vt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(this,arguments)},ea=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ta=d(function(t){var n=t.label,e=n===void 0?"ra.action.delete":n,a=t.className,r=t.icon,i=r===void 0?ra:r,c=t.onClick;t.resource,t.record;var s=t.redirect,l=s===void 0?"list":s,o=ea(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=_e(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var m=nn({resource:u,record:f,redirect:l}),g=m.handleDelete,j=m.isPending,S=d(function(_){c&&c(_),_.isDefaultPrevented()||g(_)},"handleClick");return E.jsx(na,vt({onClick:S,disabled:j,label:e,className:$e("ra-delete-button",a)},o,{children:i}),"button")},"DeleteBranchWithUndoButton"),na=we(Jt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{color:n.palette.error.main,"&:hover":{backgroundColor:Vt(n.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),ra=E.jsx(Yt,{}),ht=function(){return ht=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)},aa=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ia=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.icon,s=c===void 0?oa:c,l=t.label,o=l===void 0?"ra.action.delete":l,u=t.mutationMode,f=t.onClick;t.record,t.resource;var m=t.redirect,g=m===void 0?"list":m,j=aa(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),S=be(),_=re(t);if(!_)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var w=_e(t);if(!w)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var y=tn({mutationMode:u,resource:_,record:w,redirect:g}),v=y.handleDelete,h=y.handleDialogClose,p=y.handleDialogOpen,x=y.isPending,O=y.open,C=d(function(b){f&&f(b),b.isDefaultPrevented()||p(b)},"handleClick");return E.jsxs(ua,{className:n,children:[E.jsx(Jt,ht({onClick:C,label:o,className:$e("ra-delete-button",ln.deleteButton)},j,{children:s}),"button"),E.jsx(Ht,{isOpen:O,loading:x,title:a,content:i,translateOptions:{name:S("resources.".concat(_,".forcedCaseName"),{smart_count:1,_:Qe.humanize(S("resources.".concat(_,".name"),{smart_count:1,_:Qe.singularize(_)}),!0)}),id:w.id},onConfirm:v,onClose:h})]})},"DeleteBranchWithConfirmButton"),oa=E.jsx(Yt,{}),dn="RaDeleteBranchWithConfirmButton",ln={deleteButton:"".concat(dn,"-deleteButton")},ua=we("div",{name:dn})(function(t){var n,e=t.theme;return n={},n["& .".concat(ln.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Vt(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},n}),Xe=function(){return Xe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xe.apply(this,arguments)},ca=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},da=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n;t.record;var a=ca(t,["mutationMode","record"]),r=_e(t),i=zn();if(!r||r.id==null)return null;var c=e||(i!=null&&i.mutationMode?i.mutationMode:"undoable");return c==="undoable"?E.jsx(ta,Xe({record:r},a)):E.jsx(ia,Xe({mutationMode:c,record:r},a))},"DeleteBranchButton");function tt(t){var n=Un();return Gn((n??"")+t)}d(tt,"useMatchWithBasename");var yt=function(){return yt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)},la=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function s(u){try{o(a.next(u))}catch(f){c(f)}}d(s,"fulfilled");function l(u){try{o(a.throw(u))}catch(f){c(f)}}d(l,"rejected");function o(u){u.done?i(u.value):r(u.value).then(s,l)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},sa=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(o){return function(u){return l([o,u])}}function l(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},sn=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},xe,Sa=d(function(t){var n=t.allowMultipleRoots,e=n===void 0?!1:n,a=t.className,r=t.create,i=t.defaultExpandedKeys,c=t.edit,s=t.filter,l=t.hideRootNodes,o=t.lazy,u=o===void 0?!1:o;t.linkTo;var f=t.nodeActions,m=f===void 0?E.jsx(Yr,{}):f,g=t.show,j=t.showLine,S=t.sx,_=t.title,w=t.titleField,y=t.addRootButton,v=y===void 0?E.jsx(Xn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):y,h=t.meta,p=t.mutationMode,x=t.expandedKeys,O=t.onExpand,C=t.onClick,b=t.onDrop,P=sn(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),N=re(t);if(N==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var R=Hn(),A=Jn(),k=tt("/".concat(N,"/create/*")),M=tt("/".concat(N,"/:id/*")),T=tt("/".concat(N,"/:id/show/*")),B=ha(t),q=D.useState(function(){if(k)return[he];if(M)return[M.params.id];if(T)return[T.params.id]}),I=q[0],L=q[1];D.useEffect(function(){if(k){L([he]);return}if(M){L([M.params.id]);return}if(T){L([T.params.id]);return}},[k,M,T]);var W=kr({lazy:u,resource:N,filter:s,meta:h,mutationMode:p,expandedKeys:x??i}),V=W.data,Q=W.defaultTitle,G=W.handleExpand,z=W.isPending,K=W.loadChildNodes,$=W.handleDrop,X=W.expandedKeys,U=te(function(J,F){if(C&&C(J,F),!J.defaultPrevented&&B)return R(A({resource:N,id:F.id,type:B}))}),ee=te(function(J,F,Oe,Re){O&&O(J,F,Oe,Re),J.defaultPrevented||G(F.map(function(ke){var fn=ke.id;return fn}))}),Y=te(function(J,F){b&&b(J,F),$(F)}),Z=D.useCallback(function(J){return la(void 0,void 0,void 0,function(){return sa(this,function(F){return u?[2,K(J.record.id)]:[2,Promise.resolve()]})})},[u,K]),ae=D.useMemo(function(){var J;return(J=V==null?void 0:V.reduce(function(F,Oe){return V.some(function(Re){var ke;return(ke=Re.children)===null||ke===void 0?void 0:ke.includes(Oe.id)})||F.push(Oe.id),F},[]))!==null&&J!==void 0?J:[]},[V]),le=te(function(J){var F=J.destination,Oe=J.position;if(V==null)return!1;if(e)return!0;var Re=ae.includes(F.id);return!(Re&&Oe===-1)});if(z||V==null)return null;var pe=!V||V.length===0||e;return E.jsx(Qr,{value:W,children:E.jsxs(va,{className:a,sx:S,children:[E.jsx("div",{className:me.cardTree,children:E.jsx(It,{children:E.jsxs(Vn,{className:me.cardContentTree,children:[E.jsx(Gt,yt({allowDrop:le,data:V,hideRootNodes:l,titleField:w,onDrop:Y,onExpand:ee,onClick:U,selectedKeys:I,showLine:j,nodeActions:m,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:X},fa(P))),pe?v:null]})})}),E.jsx("div",{className:me.actionCard,children:E.jsxs(Yn,{children:[r?E.jsx(Be,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,g?E.jsx(Be,{path:":id/show/*",element:typeof g=="function"?E.jsx(g,{}):g}):null,c?E.jsx(Be,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,_!==!1?E.jsx(Be,{path:"*",element:E.jsx(Kt,{title:_,defaultTitle:Q})}):null]})})]})})},"TreeWithDetails"),fa=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var n=sn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return n},"sanitizeRestProps"),Te="RaTreeWithDetails",me={container:"".concat(Te,"-container"),cardTree:"".concat(Te,"-cardTree"),cardContentTree:"".concat(Te,"-cardContentTree"),actionCard:"".concat(Te,"-actionCard")},va=we("div",{name:Te,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((xe={display:"flex"},xe["& .".concat(me.actionCard)]={width:"100%"},xe["& .".concat(me.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},xe["& .".concat(me.cardContentTree)]={},xe["& .".concat(me.container)]={display:"flex"},xe)),ha=d(function(t){var n=t.linkTo,e=t.show,a=t.edit;return n||(e?"show":a?"edit":!1)},"getLinkTo"),gt=function(){return gt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt.apply(this,arguments)},ya=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ja=d(function(t){var n,e=t.children,a=t.className,r=t.resource,i=ya(t,["children","className","resource"]),c=Zn(function(s){return s.breakpoints.down("sm")});return E.jsx(ga,gt({className:$e((n={},n[Ee.mobileToolbar]=c,n[Ee.desktopToolbar]=!c,n),a),role:"toolbar"},i,{children:D.Children.count(e)===0?E.jsxs("div",{className:Ee.defaultToolbar,children:[E.jsx(Fn,{}),E.jsx(da,{resource:r})]}):e}))},"EditNodeToolbar"),Le="RaEditNodeToolbar",Ee={desktopToolbar:"".concat(Le,"-desktopToolbar"),mobileToolbar:"".concat(Le,"-mobileToolbar"),defaultToolbar:"".concat(Le,"-defaultToolbar")},ga=we(er,{name:Le,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n,e=t.theme;return n={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},n["&.".concat(Ee.desktopToolbar)]={},n["&.".concat(Ee.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},n["& .".concat(Ee.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},n});export{Na as AddChildButton,xa as CreateNode,da as DeleteBranchButton,ia as DeleteBranchWithConfirmButton,ta as DeleteBranchWithUndoButton,un as DeleteMenuItem,Ur as DeleteMenuItemWithConfirmation,Xr as DeleteMenuItemWithUndo,ln as DeleteWithConfirmButtonClasses,Da as EditNode,ja as EditNodeToolbar,Ee as EditNodeToolbarClasses,Yr as NodeActions,Aa as NodeEditActions,Oa as ReferenceNodeInput,Ca as ShowNode,Gt as Tree,an as TreeChoicesContext,Kr as TreeChoicesContextProvider,Kn as TreeContext,Qr as TreeContextProvider,Mr as TreeInput,Tr as TreeInputClasses,$r as TreeInputTree,Sa as TreeWithDetails,me as TreeWithDetailsClasses,he as UNSAVED_NEW_NODE,Ra as addTreeMethodsBasedOnChildren,wa as addTreeMethodsBasedOnParentAndPosition,pn as deleteBranchByDeletingAllChildren,_n as deleteBranchByDeletingNode,pa as fixFakeRestDataProvider,ka as getRCTree,Ma as getRCTreeDatum,Ta as getRecordTree,$a as getRootAndChildNodes,qa as raTreeLanguageEnglish,Ba as raTreeLanguageFrench,_a as removeChildren,Ka as renderSwitcherIcon,On as updateQueryCacheFromGetTree,Sn as useAddChildNode,br as useAddRootNode,Nr as useCreateNodeController,Zt as useDeleteBranch,tn as useDeleteBranchWithConfirmController,nn as useDeleteBranchWithUndoController,Ia as useEditNodeController,Wt as useExpandedKeys,_r as useGetChildNodesCallback,En as useGetRootNodes,Lt as useGetTree,pr as useGetTreeCallback,xr as useMoveAsNthChildOf,Sr as useMoveAsNthSiblingOf,qr as useReferenceNodeInputController,Ir as useTreeChoicesContext,_t as useTreeContext,kr as useTreeController,Wr as useTreeInputController};
//# sourceMappingURL=index-Dg9uKUzP.js.map
