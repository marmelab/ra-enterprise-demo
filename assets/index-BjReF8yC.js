var vn=Object.defineProperty;var d=(t,n)=>vn(t,"name",{value:n,configurable:!0});import{aj as re,ak as $t,al as hn,am as qt,u as be,M as qe,an as He,m as Bt,ac as yn,ao as mt,r as P,ap as gn,aq as bt,i as mn,ar as bn,A as we,D as $e,as as Kt,C as It,at as wn,au as _n,av as Pe,aw as De,ax as Ae,ay as wt,az as te,aA as pn,aB as We,O as On,a7 as _e,aC as _t,aD as xn,aE as Cn,aF as jn,aG as Lt,aH as Sn,aI as he,aJ as Wt,j as E,aK as Je,F as Ke,aL as Qt,aM as zt,aN as Ut,ai as xt,I as Ct,aO as En,a4 as Nn,aP as Pn,aQ as Dn,aR as An,aS as Gt,aT as Rn,f as kn,aU as Mn,ae as Tn,aV as $n,y as qn,aW as Bn,aX as Kn,aY as In,aZ as Xt,a_ as Ht,a$ as Qe,b0 as Ln,b1 as Wn,k as Jt,b2 as Vt,b3 as Yt,b4 as Qn,b5 as zn,b6 as Un,b7 as Gn,Q as Xn,S as Hn,d as Jn,b8 as Vn,b9 as Be,a8 as Yn,ba as Zn,bb as Fn}from"./index-Y7-0Si5J.js";import{be as Sa,bc as Ea,bd as Na,bh as Pa,bk as Da,bj as Aa,bi as Ra,bl as ka,bn as Ma,bm as Ta,bf as $a,bg as qa}from"./index-Y7-0Si5J.js";var nt=function(){return nt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nt.apply(this,arguments)},er=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},tr=d(function(t){t===void 0&&(t={});var n=t.disableAuthentication,e=n===void 0?!1:n,a=t.id,r=t.queryOptions,i=r===void 0?{}:r,c=re(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var l=$t({enabled:!e}).isPending,s=hn({action:"show",resource:c,enabled:!e&&!l}).isPending,o=qt(c),u=be(),f=qe(),w=He(),g=Bt().id;if(!g&&!a)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var C=a??g,S=i.meta,p=er(i,["meta"]),m=yn(c,{id:C,meta:S},nt({enabled:!l&&!s||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),w("list",c)},"onError"),retry:!1},p)),h=m.data,v=m.error,y=m.isLoading,_=m.isFetching,x=m.isPending,O=m.refetch;if(h&&h.id&&h.id!=C)throw new Error("useShowController: Fetched record's id attribute (".concat(h.id,") must match the requested 'id' (").concat(C,")"));var j=mt(),b=o(h),N=u("resources.".concat(c,".page.show"),{id:C,record:h,recordRepresentation:typeof b=="string"?b:"",_:u("ra.page.show",{name:j(c,1),id:C,record:h,recordRepresentation:typeof b=="string"?b:""})});return{defaultTitle:N,error:v,isLoading:y,isFetching:_,isPending:x,record:h,refetch:O,resource:c}},"useShowController"),pt=P.createContext(null);pt.displayName="ShowContext";var nr=d(function(t){var n=t.children,e=t.value;return P.createElement(pt.Provider,{value:e},P.createElement(gn,{value:e&&e.record},n))},"ShowContextProvider"),rr=d(function(){var t=P.useContext(pt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),rt=function(){return rt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rt.apply(this,arguments)},ar=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ir=d(function(t){var n=bt(t).hasEdit;return P.createElement(mn,rt({},or(t)),n&&P.createElement(bn,null))},"ShowActions"),or=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var n=ar(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return n},"sanitizeRestProps$1"),at=function(){return at=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)},ur=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Me,cr=P.createElement(ir,null),dr=d(function(t){var n,e=t.actions,a=t.aside,r=t.children,i=t.render,c=t.className,l=t.component,s=l===void 0?It:l,o=t.emptyWhileLoading,u=o===void 0?!1:o,f=t.title,w=ur(t,["actions","aside","children","render","className","component","emptyWhileLoading","title"]),g=rr(),C=g.resource,S=g.defaultTitle,p=g.record,m=bt().hasEdit,h=typeof e>"u"&&m?cr:e;return!p&&u?null:P.createElement(lr,at({className:$e("show-page",c)},w),f!==!1&&P.createElement(Kt,{title:f,defaultTitle:S,preferenceKey:"".concat(C,".show.title")}),h!==!1&&h,P.createElement("div",{className:$e(Se.main,(n={},n[Se.noActions]=!h,n))},P.createElement(s,{className:Se.card},i?i(g):r),a))},"ShowView"),Ie="RaShow",Se={main:"".concat(Ie,"-main"),noActions:"".concat(Ie,"-noActions"),card:"".concat(Ie,"-card")},lr=we("div",{name:Ie,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((Me={},Me["& .".concat(Se.main)]={display:"flex"},Me["& .".concat(Se.noActions)]={marginTop:"1em"},Me["& .".concat(Se.card)]={flex:"1 1 auto"},Me)),H=function(){return H=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)},ue=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},ce=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ga=d(function(t,n,e,a){n===void 0&&(n="parent_id"),e===void 0&&(e="position"),a===void 0&&(a=!1);var r=a?wn:_n,i=H(H({},t),{getTree:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o;return ce(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:l==null?void 0:l.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=u.sent().data,o=s.map(function(f){return H(H({},f),{children:s.filter(function(w){return w[n]==f.id}).sort(function(w,g){return w[e]-g[e]}).map(function(w){return w.id})})}),[2,{data:o}]}})})},"getTree"),getRootNodes:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u;return ce(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:H(H({},l==null?void 0:l.filter),(u={},u[n]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=f.sent().data,[4,Promise.all(s.map(function(w){var g;return t.getList(c,{filter:(g={},g[n]=w.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta}).then(function(C){var S=C.data;return H(H({},w),{children:S.map(function(p){var m=p.id;return m})})})}))];case 2:return o=f.sent(),[2,{data:o}]}})})},"getRootNodes"),getParentNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g=o.childId,C=o.meta;return ce(this,function(S){switch(S.label){case 0:return[4,i.getTree(s,{meta:C})];case 1:return u=S.sent().data,f=u.find(function(p){return p.id===g}),f?(w=u.find(function(p){return p.id===f[n]}),[2,{data:w}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g=o.parentId,C=o.meta;return ce(this,function(S){switch(S.label){case 0:return[4,t.getList(s,{filter:(w={},w[n]=g,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:C})];case 1:return u=S.sent().data,[4,Promise.all(u.map(function(p){var m;return t.getList(s,{filter:(m={},m[n]=p.id,m),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:C}).then(function(h){var v=h.data;return H(H({},p),{children:v.map(function(y){var _=y.id;return _})})})}))];case 2:return f=S.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g,C,S,p=o.source,m=o.destination,h=o.position,v=o.meta;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(g={},g[n]=m.id,g["".concat(e,"_gte")]=h,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 1:return u=y.sent().data,u.length>0?[4,Promise.all(u.map(function(_){var x;return t.update(s,{id:_.id,data:(x={},x[e]=_[e]+1,x),previousData:_,meta:v})}))]:[3,3];case 2:y.sent(),y.label=3;case 3:return[4,t.getList(s,{filter:(C={},C[n]=p[n],C["".concat(e,"_gt")]=p[e],C),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:v})];case 4:return f=y.sent().data,f.length>0?[4,Promise.all(f.map(function(_){var x;return t.update(s,{id:_.id,data:(x={},x[e]=_[e]-1,x),previousData:_,meta:v})}))]:[3,6];case 5:y.sent(),y.label=6;case 6:return[4,t.update(s,{id:p.id,data:(S={},S[n]=m.id,S[e]=h,S),previousData:p,meta:v})];case 7:return w=y.sent().data,[2,{data:w}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g,C,S,p,m,h,v,y,_,x,O,j=o.source,b=o.destination,N=o.position,D=o.meta;return ce(this,function(A){switch(A.label){case 0:return(N===0||N===-1)&&(u=(S={},S[n]=b[n],S)),j[e]>b[e]&&j[n]===b[n]&&(N===-1?u=(p={},p[n]=b[n],p["".concat(e,"_gte")]=b[e],p):u=(m={},m[n]=b[n],m["".concat(e,"_gt")]=b[e],m)),j[n]!==b[n]&&N>0&&(u=(h={},h[n]=b[n],h["".concat(e,"_gt")]=b[e],h)),u?[4,t.getList(s,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:D})]:[3,3];case 1:return f=A.sent().data,f.length>0?[4,Promise.all(f.map(function(M){var k;return M.id===j.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]+1,k),previousData:M,meta:D})}))]:[3,3];case 2:A.sent(),A.label=3;case 3:return j[n]===b[n]?j[e]>b[e]?w=(v={},v[n]=j[n],v["".concat(e,"_gt")]=j[e],v):w=(y={},y[n]=j[n],y["".concat(e,"_gt")]=j[e],y["".concat(e,"_lte")]=b[e],y):w=(_={},_[n]=j[n],_["".concat(e,"_gt")]=j[e],_),[4,t.getList(s,{filter:w,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:D})];case 4:return g=A.sent().data,g.length>0?[4,Promise.all(g.map(function(M){var k;return M.id===j.id?Promise.resolve(void 0):t.update(s,{id:M.id,data:(k={},k[e]=M[e]-1,k),previousData:M,meta:D})}))]:[3,6];case 5:A.sent(),A.label=6;case 6:return C=j[n]===b[n]?j[e]>b[e]?b[e]+1:b[e]:N<0?0:N,N===-1&&(C=0),[4,t.update(s,{id:j.id,data:(x={},x[n]=(O=b[n])!==null&&O!==void 0?O:null,x[e]=C,x),previousData:j,meta:D})];case 7:return A.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g,C,S=o.data,p=o.meta;return ce(this,function(m){switch(m.label){case 0:return[4,t.getList(s,{filter:(g={},g[n]=null,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:p})];case 1:return u=m.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(s,{data:H(H({},S),(C={},C[n]=null,C[e]=f,C)),meta:p})];case 2:return w=m.sent().data,[2,{data:H(H({},w),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,l){return ue(void 0,[c,l],void 0,function(s,o){var u,f,w,g,C,S,p=o.parentId,m=o.data,h=o.meta,v=o.position;return ce(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(C={},C[n]=p,C),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(_,x){return x[e]>_?x[e]:_},-1/0)+1:0,w=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(s,{data:H(H({},m),(S={},S[n]=p,S[e]=w,S)),meta:h})];case 2:return g=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(_){var x;_[e]>=v&&t.update(s,{id:_.id,data:H(H({},_),(x={},x[e]=_[e]+1,x)),previousData:_,meta:h})}),[2,{data:H(H({},g),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,l){return ue(void 0,void 0,void 0,function(){var s,o,u,f;return ce(this,function(w){switch(w.label){case 0:return s=l.id,o=l.previousData,u=l.meta,[4,r(i,c,l)];case 1:return w.sent(),[4,i.getChildNodes(c,{parentId:o[n],meta:u})];case 2:return f=w.sent().data,[4,Promise.all(f.filter(function(g){return g[e]>o[e]&&g.id!==s}).map(function(g){var C;return t.update(c,{id:g.id,data:H(H({},g),(C={},C[e]=g[e]-1,C)),previousData:g,meta:u})}))];case 3:return w.sent(),[2,{data:o}]}})})},"deleteBranch")});return i},"addTreeMethodsBasedOnParentAndPosition"),Ce=function(){return Ce=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ce.apply(this,arguments)},sr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},fr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},vr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},hr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},yr=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=P.useRef(n),c=Ae(Ce(Ce({mutationFn:d(function(s){var o=s===void 0?{}:s,u=o.resource,f=u===void 0?t:u,w=o.data,g=w===void 0?i.current.data:w,C=o.meta,S=C===void 0?i.current.meta:C;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(g==null)throw new Error("useAddRootNode mutation requires non-empty data");return a.addRootNode(f,{data:g,meta:S}).then(function(p){var m=p.data;return m})},"mutationFn")},e),{onSuccess:d(function(s,o,u){o===void 0&&(o={});var f=o.resource,w=f===void 0?t:f;r.setQueryData([w,"getOne",{id:String(s.id)}],s),e.onSuccess&&e.onSuccess(s,o,u)},"onSuccess")})),l=d(function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return sr(void 0,hr([],s,!0),void 0,function(u,f,w){var g,C;return u===void 0&&(u=t),f===void 0&&(f={}),w===void 0&&(w={}),fr(this,function(S){return g=w.returnPromise,C=vr(w,["returnPromise"]),g?[2,c.mutateAsync(Ce({resource:u},f),w)]:(c.mutate(Ce({resource:u},f),C),[2])})})},"addRootNode");return[l,c]},"useAddRootNode"),ne=function(){return ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ne.apply(this,arguments)},jt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},St=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},gr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Zt=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.id,c=n.previousData,l=e.mutationMode,s=l===void 0?"pessimistic":l,o=gr(e,["mutationMode"]),u=P.useRef(s),f=P.useRef(n),w=P.useRef([]),g=d(function(p){var m=p.resource,h=p.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,_=d(function(O,j){var b=O.findIndex(function(T){return T.id==j});if(b===-1)return O;for(var N=O[b],D=Ve(Ve([],O.slice(0,b),!0),O.slice(b+1),!0),A=N.children||[],M=0,k=A;M<k.length;M++){var R=k[M];D=_(D,R)}return D},"removeRecord"),x=d(function(O){var j=_(O,h);return j.map(function(b){return ne(ne({},b),{children:b.children?b.children.filter(function(N){return N!==h}):b.children})})},"updateCollection");r.setQueriesData({queryKey:[m,"getTree"]},function(O){if(!O)return O;var j=x(O),b=j.length<O.length;return b?j:O},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getRootNodes"]},function(O){return O&&O.length>0?x(O):O},{updatedAt:y}),r.setQueriesData({queryKey:[m,"getChildNodes"]},function(O){if(!O)return O;var j=x(O),b=j.length<O.length;return b?j:O},{updatedAt:y})},"updateCache"),C=Ae(ne(ne({mutationFn:d(function(p){var m=p===void 0?{}:p,h=m.resource,v=h===void 0?t:h,y=m.id,_=y===void 0?f.current.id:y,x=m.previousData,O=x===void 0?f.current.previousData:x,j=m.meta,b=j===void 0?f.current.meta:j;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(_==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(O==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return a.deleteBranch(v,{id:_,previousData:O,meta:b}).then(function(N){var D=N.data;return D})},"mutationFn")},o),{onMutate:d(function(p){return jt(void 0,void 0,void 0,function(){var m;return St(this,function(h){switch(h.label){case 0:return o.onMutate?[4,o.onMutate(p)]:[3,2];case 1:return m=h.sent()||{},[2,ne({snapshot:w.current},m)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:d(function(p,m,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],_=v[1];r.setQueryData(y,_)}),o.onError)return o.onError(p,m,h)},"onError"),onSuccess:d(function(p,m,h){if(m===void 0&&(m={}),u.current==="pessimistic"){var v=m.resource,y=v===void 0?t:v,_=m.id,x=_===void 0?i:_;g({resource:y,id:x}),o.onSuccess&&o.onSuccess(p,m,h)}},"onSuccess"),onSettled:d(function(p,m,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0];r.invalidateQueries({queryKey:_})}),o.onSettled)return o.onSettled(p,m,h,v)},"onSettled")})),S=d(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return jt(void 0,Ve([],p,!0),void 0,function(h,v,y){var _,x,O,j,b,N,D,A,M;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),St(this,function(k){switch(k.label){case 0:return _=y.mutationMode,x=y.onSuccess,O=y.onSettled,j=y.onError,f.current=n,_&&(u.current=_),u.current==="pessimistic"?[2,C.mutate(ne({resource:h},v),{onSuccess:x,onSettled:O,onError:j})]:(b=v.id,N=b===void 0?i:b,D=v.previousData,A=D===void 0?c:D,M=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],w.current=M.reduce(function(R,T){return R.concat(r.getQueriesData({queryKey:T}))},[]),[4,Promise.all(w.current.map(function(R){var T=R[0];return r.cancelQueries({queryKey:T})}))]);case 1:return k.sent(),g({resource:h,id:N}),x&&setTimeout(function(){return x(A,ne({resource:h},v),{snapshot:w.current})},0),o.onSuccess&&setTimeout(function(){o.onSuccess&&o.onSuccess(A,ne({resource:h},v),{snapshot:w.current})},0),u.current==="optimistic"?[2,C.mutate(ne({resource:h},v),{onSettled:O,onError:j})]:(wt.once("end",function(R){var T=R.isUndo;T?w.current.forEach(function(B){var q=B[0],I=B[1];r.setQueryData(q,I)}):C.mutate(ne({resource:h},v),{onSettled:O,onError:j})}),[2])}})})},"mutate");return[S,C]},"useDeleteBranch"),ye=function(){return ye=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ye.apply(this,arguments)},mr=d(function(t,n,e){var a=Pe(),r=Ae(ye({mutationKey:[t,"getChildNodes",n],mutationFn:d(function(c){return a.getChildNodes(t,ye(ye({},n),c)).then(function(l){var s=l.data;return s})},"mutationFn")},e)),i=te(function(c){return r.mutateAsync(ye(ye({},n),{parentId:c}))});return i},"useGetChildNodesCallback"),ze=function(){return ze=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)},ma=d(function(t){return ze(ze({},t),{children:t.children.map(function(n){return n.id})})},"removeChildren"),it=function(){return it=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it.apply(this,arguments)},br=d(function(t,n,e){n===void 0&&(n={}),e===void 0&&(e={});var a=Pe(),r=De(),i=Ae(it({mutationKey:[t,"getTree",n],mutationFn:d(function(){return a.getTree(t,n).then(function(l){var s=l.data;return s})},"mutationFn"),onSuccess:d(function(l){pn(r,t,l,n)},"onSuccess")},e)),c=P.useCallback(function(){return i.mutateAsync(n)},[i,n]);return c},"useGetTreeCallback"),ie=function(){return ie=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ie.apply(this,arguments)},Et=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Nt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},wr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},se=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},_r=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=wr(e,["mutationMode"]),f=P.useRef(o),w=P.useRef(n),g=P.useRef([]),C=d(function(m){var h=m.resource,v=m.position,y=m.source,_=m.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,j=d(function(b){var N,D,A,M,k,R=We(b),T=R.find(function(q){var I;return(I=q.children)===null||I===void 0?void 0:I.includes(y.id)});T?T.children=(N=T.children)===null||N===void 0?void 0:N.filter(function(q){return q!==y.id}):R=R.filter(function(q){return q.id!==y.id});var B=R.find(function(q){return q.id===_.id});return B?B.children=se(se(se([],(A=(D=B.children)===null||D===void 0?void 0:D.slice(0,v))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(v))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(q){return q.id!==y.id}),R=se(se(se([],R.slice(0,v),!0),[y],!1),R.slice(v),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O})},"updateCache"),S=Ae(ie(ie({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,_=h.position,x=_===void 0?w.current.position:_,O=h.source,j=O===void 0?w.current.source:O,b=h.destination,N=b===void 0?w.current.destination:b,D=h.meta,A=D===void 0?w.current.meta:D;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return a.moveAsNthChildOf(y,{position:x,source:j,destination:N,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(m){return Et(void 0,void 0,void 0,function(){var h;return Nt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,ie({snapshot:g.current},h)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],x=y[1];r.setQueryData(_,x)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var _=v.resource,x=_===void 0?t:_;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return Et(void 0,se([],m,!0),void 0,function(v,y,_){var x,O,j,b,N,D,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),Nt(this,function(B){switch(B.label){case 0:if(x=_.mutationMode,O=_.onSuccess,j=_.onSettled,b=_.onError,w.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,S.mutate(ie({resource:v},y),{onSuccess:O,onSettled:j,onError:b})];if(N=y.position,D=N===void 0?l:N,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(D==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),C({resource:v,position:D,source:M,destination:R}),O&&setTimeout(function(){return O(void 0,ie({resource:v},y),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ie({resource:v},y),{snapshot:g.current})},0),f.current==="optimistic"?[2,S.mutate(ie({resource:v},y),{onSettled:j,onError:b})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):S.mutate(ie({resource:v},y),{onSettled:j,onError:b})}),[2])}})})},"mutate");return[p,S]},"useMoveAsNthChildOf"),oe=function(){return oe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oe.apply(this,arguments)},Pt=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Dt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},pr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},fe=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Or=d(function(t,n,e){n===void 0&&(n={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var a=Pe(),r=De(),i=n.source,c=n.destination,l=n.position,s=e.mutationMode,o=s===void 0?"undoable":s,u=pr(e,["mutationMode"]),f=P.useRef(o),w=P.useRef(n),g=P.useRef([]),C=d(function(m){var h=m.resource,v=m.position,y=m.source,_=m.destination,x=Date.now(),O=f.current==="undoable"?x+5*1e3:x,j=d(function(b){var N,D,A,M,k,R=We(b),T=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(y.id)}),B=R.find(function(L){var W;return(W=L.children)===null||W===void 0?void 0:W.includes(_.id)}),q=v;T&&B&&T.id===B.id&&T.children&&T.children.findIndex(function(L){return L===y.id})<T.children.findIndex(function(L){return L===_.id})&&(q=v-1);var I=q<0?0:q;return T?T.children=(N=T.children)===null||N===void 0?void 0:N.filter(function(L){return L!==y.id}):R=R.filter(function(L){return L.id!==y.id}),B?B.children=fe(fe(fe([],(A=(D=B.children)===null||D===void 0?void 0:D.slice(0,I))!==null&&A!==void 0?A:[],!0),[y.id],!1),(k=(M=B.children)===null||M===void 0?void 0:M.slice(I))!==null&&k!==void 0?k:[],!0):(R=R.filter(function(L){return L.id!==y.id}),R=fe(fe(fe([],R.slice(0,I),!0),[y],!1),R.slice(I),!0)),R},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(b){return b&&b.length>0?j(b):b},{updatedAt:O})},"updateCache"),S=Ae(oe(oe({mutationFn:d(function(m){var h=m===void 0?{}:m,v=h.resource,y=v===void 0?t:v,_=h.position,x=_===void 0?w.current.position:_,O=h.source,j=O===void 0?w.current.source:O,b=h.destination,N=b===void 0?w.current.destination:b,D=h.meta,A=D===void 0?w.current.meta:D;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(x==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return a.moveAsNthSiblingOf(y,{position:x,source:j,destination:N,meta:A}).then(function(M){var k=M.data;return k})},"mutationFn")},u),{onMutate:d(function(m){return Pt(void 0,void 0,void 0,function(){var h;return Dt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(m)]:[3,2];case 1:return h=v.sent()||{},[2,oe({snapshot:g.current},h)];case 2:return[2,{snapshot:g.current}]}})})},"onMutate"),onError:d(function(m,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var _=y[0],x=y[1];r.setQueryData(_,x)}),u.onError)return u.onError(m,h,v)},"onError"),onSettled:d(function(m,h,v,y){v===void 0&&(v={});var _=v.resource,x=_===void 0?t:_;if(r.invalidateQueries({queryKey:[x,"getTree"]}),r.invalidateQueries({queryKey:[x,"getRootNodes"]}),r.invalidateQueries({queryKey:[x,"getChildNodes"]}),u.onSettled)return u.onSettled(m,h,v,y)},"onSettled")})),p=d(function(){for(var m=[],h=0;h<arguments.length;h++)m[h]=arguments[h];return Pt(void 0,fe([],m,!0),void 0,function(v,y,_){var x,O,j,b,N,D,A,M,k,R,T;return v===void 0&&(v=t),y===void 0&&(y={}),_===void 0&&(_={}),Dt(this,function(B){switch(B.label){case 0:if(x=_.mutationMode,O=_.onSuccess,j=_.onSettled,b=_.onError,w.current=n,x&&(f.current=x),f.current==="pessimistic")return[2,S.mutate(oe({resource:v},y),{onSuccess:O,onSettled:j,onError:b})];if(N=y.position,D=N===void 0?l:N,A=y.source,M=A===void 0?i:A,k=y.destination,R=k===void 0?c:k,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(D==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(M==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return T=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],g.current=T.reduce(function(q,I){return q.concat(r.getQueriesData({queryKey:I}))},[]),[4,Promise.all(g.current.map(function(q){var I=q[0];return r.cancelQueries({queryKey:I})}))];case 1:return B.sent(),C({resource:v,position:D,source:M,destination:R}),O&&setTimeout(function(){return O(void 0,oe({resource:v},y),{snapshot:g.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,oe({resource:v},y),{snapshot:g.current})},0),f.current==="optimistic"?[2,S.mutate(oe({resource:v},y),{onSettled:j,onError:b})]:(wt.once("end",function(q){var I=q.isUndo;I?g.current.forEach(function(L){var W=L[0],V=L[1];r.setQueryData(W,V)}):S.mutate(oe({resource:v},y),{onSettled:j,onError:b})}),[2])}})})},"mutate");return[p,S]},"useMoveAsNthSiblingOf"),de=function(){return de=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)},At=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Rt=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ba=d(function(t){return de(de({},t),{getRootNodes:d(function(n,e){return At(void 0,void 0,void 0,function(){var a,r;return Rt(this,function(i){switch(i.label){case 0:return[4,t.getRootNodes(n,e)];case 1:return a=i.sent().data,r=a.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(n,e){return At(void 0,[n,e],void 0,function(a,r){var i,c,l,s,o=r.data,u=r.meta;return Rt(this,function(f){switch(f.label){case 0:return[4,t.getList(a,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return i=f.sent().data,c=i.filter(function(w){return typeof w.parent_id>"u"}),l=c.length>0?c.reduce(function(w,g){return g.position>w?g.position:w},-1/0)+1:0,[4,t.create(a,{data:de(de({},o),{parent_id:null,position:l}),meta:u})];case 2:return s=f.sent().data,[2,{data:de(de({},s),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),kt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Ft=d(function(t,n){var e,a=t.filter(function(c){return c.id!==n.id}),r=a.find(function(c){var l;return(l=c.children)===null||l===void 0?void 0:l.includes(n.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==n.id})),!n.children||n.children.length===0)return a;var i=en(a,n);return a=a.filter(function(c){return!i.includes(c)}),a},"removeNode"),en=d(function(t,n){return n?!n.children||n.children.length===0?[]:kt(kt([],n.children,!0),n.children.flatMap(function(e){var a=t.find(function(r){return r.id===e});return a?en(t,a):[]}),!0):[]},"getNodeChildrenRecursive"),ot=function(){return ot=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)},tn=d(function(t){var n=t.mutationMode,e=t.mutationOptions,a=t.redirect,r=a===void 0?"list":a,i=qe(),c=He(),l=On(),s=re(t);if(s==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=_e(t);if(o==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Zt(),f=u[0],w=u[1].isPending,g=P.useState(!1),C=g[0],S=g[1],p=_t().setFinalData,m=P.useCallback(function(y){y.stopPropagation(),f(s,{id:o.id,previousData:o},ot({mutationMode:n,onSuccess:d(function(){i("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,s),n==="pessimistic"?l():p&&p(function(_){return Ft(_,o)})},"onSuccess"),onError:d(function(_){i(typeof _=="string"?_:_.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,n,e,i,o,c,r,l,s,p]),h=d(function(y){y.stopPropagation(),S(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:m,handleDialogOpen:h,handleDialogClose:v,isPending:w,open:C}},"useDeleteBranchWithConfirmController"),ut=function(){return ut=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ut.apply(this,arguments)},nn=d(function(t){var n=t.mutationOptions,e=t.redirect,a=e===void 0?"list":e,r=qe(),i=He(),c=_t().setFinalData,l=re(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var s=_e(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var o=Zt(),u=o[0],f=o[1].isPending,w=P.useCallback(function(g){g.stopPropagation(),u(l,{id:s.id,previousData:s},ut({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(C){return Ft(C,s)}),i(a,l)},"onSuccess"),onError:d(function(C){return r(typeof C=="string"?C:C.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},n))},[u,n,r,s,i,a,l,c]);return{handleDelete:w,isPending:f}},"useDeleteBranchWithUndoController"),je=function(){return je=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},je.apply(this,arguments)},xr=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Cr=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},jr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Sr=d(function(t){var n=t.disableAuthentication,e=t.record,a=e===void 0?{}:e,r=t.redirect,i=t.mutationOptions,c=i===void 0?{}:i,l=t.transform;$t({enabled:!n});var s=re(t);if(s==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=mt(),u=De(),f=xn(),w=_t().handleAddNode,g=f.state&&f.state.parentId,C=f.state&&f.state.insertAsFirstChild,S=typeof g<"u"&&g!==null,p=f.state&&f.state.record||a,m=c.onSuccess,h=c.onError,v=jr(c,["onSuccess","onError"]),y=bt(t),_=y.hasEdit,x=y.hasShow,O=r||Er(x,_),j=yr(s,void 0,v),b=j[0],N=j[1],D=Cn(s,void 0,v),A=D[0],M=D[1],k=te(w??Nr);P.useEffect(function(){return k({record:{},parentId:g,insertAsFirstChild:C}),function(){k(void 0)}},[k,g,C]);var R=be(),T=qe(),B=He(),q=P.useCallback(function(W,V){var Q=V===void 0?{}:V,G=Q.onSuccess,z=Q.onError,K=Q.transform,$=d(function(U){T("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),B(O,s,U.id,U),u.refetchQueries({queryKey:[s,"getTree"],type:"active"}),u.refetchQueries({queryKey:[s,"getRootNodes"],type:"active"})},"defaultOnSuccess"),X=d(function(U){T(typeof U=="string"?U:U.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(K?K(W):l?l(W):W).then(function(U){return xr(void 0,void 0,void 0,function(){var ee,Y,Z;return Cr(this,function(ae){switch(ae.label){case 0:ee={onSuccess:d(function(le,pe,J){k(void 0),G?G(le,pe,J):m?m(le,pe,J):$(le)},"onSuccess"),onError:z||h||X},ae.label=1;case 1:return ae.trys.push([1,6,,7]),S?[4,A(s,{data:U,parentId:g,meta:v.meta,position:C?0:void 0},je(je({},ee),{returnPromise:!0}))]:[3,3];case 2:return ae.sent(),[3,5];case 3:return[4,b(s,{data:U,meta:v.meta},je(je({},ee),{returnPromise:!0}))];case 4:ae.sent(),ae.label=5;case 5:return[3,7];case 6:return Y=ae.sent(),(Y instanceof jn||typeof Y=="object"&&Y!==null&&Y.hasOwnProperty("body"))&&((Z=Y.body)===null||Z===void 0?void 0:Z.errors)!=null?[2,Y.body.errors]:[3,7];case 7:return[2]}})})})},[A,b,k,S,T,h,m,g,u,B,s,l,v.meta,O,C]),I=o(s,1),L=R("ra.page.create",{name:"".concat(I)});return{isLoading:!1,isFetching:!1,defaultTitle:L,save:q,saving:N.isPending||M.isPending,isPending:N.isPending||M.isPending,resource:s,record:p,redirect:O}},"useCreateNodeController"),Er=d(function(t,n){return n?"edit":t?"show":"list"},"getDefaultRedirectRoute"),Nr=d(function(){},"noop"),Pr=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},rn=d(function(t,n){var e=n.find(function(a){return a.id==t});return e?Pr([e.id.toString()],(e.children||[]).flatMap(function(a){return rn(a,n)}),!0):[]},"getNodeKeysRecursively"),ge=function(){return ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ge.apply(this,arguments)},Ye=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},Ze=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Fe=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},ve=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},Dr=d(function(t){var n=be(),e=re(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var a=mt(),r=t.lazy,i=r===void 0?!1:r,c=t.filter,l=c===void 0?{}:c,s=t.mutationMode,o=s===void 0?"undoable":s,u=t.meta,f=Lt(e,{filter:l,meta:u},{enabled:!i}),w=Sn(e,{filter:l,meta:u},{enabled:i,gcTime:0}),g=mr(e,{meta:u}),C=P.useMemo(function(){var Q;return(Q=w.data)===null||Q===void 0?void 0:Q.map(function(G){var z=G.children,K=Fe(G,["children"]);return z!=null&&z.length?K:G})},[w.data,w.isFetching]),S=i?ge(ge({},w),{data:C}):f,p=S.data,m=S.error,h=S.isLoading,v=S.isPending,y=S.isFetching,_=P.useState(p),x=_[0],O=_[1],j=te(function(Q){return Ye(void 0,void 0,void 0,function(){var G;return Ze(this,function(z){switch(z.label){case 0:return[4,g(Q)];case 1:return G=z.sent(),O(function(K){var $,X=G.map(function(Y){var Z=Y.children,ae=Fe(Y,["children"]),le=K==null?void 0:K.some(function(pe){var J;return(J=Y.children)===null||J===void 0?void 0:J.includes(pe.id)});return Z!=null&&Z.length&&!le?ae:Y}),U=ve(ve([],($=K==null?void 0:K.map(function(Y){return Y.id===Q?ge(ge({},Y),{children:X.map(function(Z){return Z.id})}):Y}))!==null&&$!==void 0?$:[],!0),X,!0),ee=U.reduce(function(Y,Z){return Y[Z.id]=Z,Y},{});return Object.values(ee)}),[2]}})})});P.useEffect(function(){O(p)},[p]);var b=P.useState(),N=b[0],D=b[1],A=te(function(Q){var G,z=We(x);if(Q){if(D(Q),Q.parentId!=null){var K=z==null?void 0:z.find(function(X){return X.id===Q.parentId});K&&(K.children=K.children||[],K.children=Q.insertAsFirstChild?ve([he],K.children,!0):ve(ve([],K.children,!0),[he],!1))}O(ve(ve([],z??[],!0),[ge({id:he,children:[]},Q.record)],!1))}else{if(!N)return;var $=We(x);if(N.parentId!=null){var K=$==null?void 0:$.find(function(U){return U.id===N.parentId});K&&(K.children=(G=K.children)===null||G===void 0?void 0:G.filter(function(U){return U!=he}))}D(void 0),O($==null?void 0:$.filter(function(X){return X.id!==he}))}}),M=Wt(void 0,t.expandedKeys),k=M[0],R=M[1],T=te(function(Q){R(function(G){var z,K,$=typeof Q=="function"?Q(G??[]):Q,X=(z=G==null?void 0:G.filter(function(ee){return!$.includes(ee)}))!==null&&z!==void 0?z:[],U=(K=X==null?void 0:X.flatMap(function(ee){return rn(ee,x??[])},[]))!==null&&K!==void 0?K:[];return $.filter(function(ee){return!U.includes(ee)})})}),B=_r(e,{meta:u})[0],q=Or(e,{meta:u})[0],I=br(e),L=qe(),W=te(function(Q){var G=Q.type,z=Fe(Q,["type"]),K=d(function(){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(X){switch(X.label){case 0:return[4,I()];case 1:return X.sent(),L("ra-tree.item_moved",{undoable:o==="undoable"}),[2]}})})},"successSideEffect"),$=d(function(X){return Ye(void 0,void 0,void 0,function(){return Ze(this,function(U){return L(X.message,{type:"error"}),[2]})})},"errorSideEffect");G==="child"?B(e,z,{onSuccess:K,onError:$,mutationMode:o}):q(e,z,{onSuccess:K,onError:$,mutationMode:o})}),V=n("ra.page.list",{name:a(e,2)});return{data:x,defaultTitle:V,error:m,expandedKeys:k,handleAddNode:A,handleDrop:W,handleExpand:T,isLoading:h,isFetching:y,isPending:v,loadChildNodes:j,newNode:N,lazy:i,setFinalData:O}},"useTreeController"),an=P.createContext(void 0),Ne=function(){return Ne=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ne.apply(this,arguments)},Ot=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Ar=d(function(t){var n=t.id,e=t.label,a=t.multiple,r=t.sx,i=t.className,c=t.helperText,l=t.fullWidth,s=t.margin,o=s===void 0?"dense":s,u=t.variant,f=u===void 0?"filled":u,w=t.size,g=w===void 0?"small":w,C=Ot(t,["id","label","multiple","sx","className","helperText","fullWidth","margin","variant","size"]),S=Kr(t),p=S.data,m=S.resource,h=S.source,v=S.fetchError,y=S.isLoading,_=S.isRequired,x=S.field,O=S.fieldState,j=S.formState,b=be(),N=O.isTouched,D=O.invalid,A=O.error,M=j.isSubmitted,k=P.useMemo(function(){return(x==null?void 0:x.value)||(a?[]:"")},[x,a]),R=P.useMemo(function(){return p.filter(function(B){return a?k.includes(B.id):k===B.id})},[k,p,a]),T={standard:Ut,outlined:zt,filled:Qt}[f];return v?E.jsxs(et,{className:i,sx:r,"data-testid":"error",variant:f,size:g,margin:o,error:!0,children:[E.jsx(Je,{error:!0,margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct}),E.jsx(xt,{error:!0,children:E.jsx(Ct,{error:b("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"}),helperText:c})})]}):y||!p?E.jsxs(et,{className:i,sx:r,"data-testid":"loading",variant:f,size:g,margin:o,children:[E.jsx(Je,{margin:o==="dense"?o:void 0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(T,{inputComponent:ct,endAdornment:E.jsx(En,{color:"inherit",size:"30px"})})]}):E.jsxs(et,{className:i,sx:r,variant:f,size:g,margin:o,children:[E.jsx(Je,{htmlFor:n??h,error:D,margin:o==="dense"?o:void 0,shrink:R.length>0,size:g==="medium"?"normal":g,variant:f,children:E.jsx(Ke,{resource:m,label:e,isRequired:_,source:h})}),E.jsx(kr,Ne({source:h,multiple:a,className:Rr.tree,field:x,fullWidth:l},C,{data:p,variant:f,size:g,margin:o,id:n??h})),(N||M)&&A||c?E.jsx(xt,{error:(N||M)&&!!A,children:E.jsx(Ct,{error:A==null?void 0:A.message,helperText:c})}):null]})},"TreeInput"),on="RaTreeInput",Rr={tree:"".concat(on,"-tree")},et=we(Rn,{name:on,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{"& .MuiInputBase-input":{height:"auto",minHeight:"1.4375em"},"& .MuiChip-root":{marginTop:n.spacing(.5),marginRight:n.spacing(.5)}}}),kr=d(function(t){var n,e=t.className,a=t.data,r=t.multiple,i=t.field,c=t.checkStrictly,l=c===void 0?!0:c,s=t.expandAction,o=s===void 0?!1:s,u=t.titleField,f=t.margin,w=f===void 0?"dense":f,g=t.variant,C=g===void 0?"filled":g,S=t.size,p=S===void 0?"small":S,m=t.label,h=t.isRequired,v=t.source,y=t.id,_=t.sx,x=Ot(t,["className","data","multiple","field","checkStrictly","expandAction","titleField","margin","variant","size","label","isRequired","source","id","sx"]),O=P.useMemo(function(){return(i==null?void 0:i.value)||(r?[]:"")},[i,r]),j=P.useMemo(function(){return a.filter(function($){return r?O.includes($.id):O===$.id})},[O,a,r]),b=P.useState(0),N=b[0],D=b[1],A=P.useRef(!0);P.useEffect(function(){A.current&&D(function($){return $+1}),A.current=!0},[O]);var M=te(function($,X){A.current=!1,i==null||i.onChange(X.map(function(U){return U.id}))}),k=te(function($,X){var U;A.current=!1,i==null||i.onChange((U=X==null?void 0:X.id)!==null&&U!==void 0?U:null),W()}),R=P.useState(!1),T=R[0],B=R[1],q=te(function($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),B(!0))}),I=P.useRef(null),L=d(function(){B(!0)},"handleClick"),W=d(function(){B(!1)},"handleClose"),V=P.useRef(null),Q=d(function(){var $;($=V.current)===null||$===void 0||$.updatePosition()},"handleExpand"),G=re(t),z=qt(G),K={standard:Ut,outlined:zt,filled:Qt}[C];return E.jsxs(E.Fragment,{children:[E.jsx(K,{id:y,ref:I,onClick:L,endAdornment:E.jsx(Dn,{}),size:p,margin:w,inputComponent:ct,className:e,onKeyDown:q,label:E.jsx(Ke,{resource:G,label:m,isRequired:h,source:v}),notched:C==="outlined"?j.length>0:void 0,inputProps:{children:j.length===0?null:E.jsx(Nn,{direction:"row",flexWrap:"wrap",children:r?j.map(function($){return E.jsx(Pn,{size:p,onDelete:d(function(X){M(X,j.filter(function(U){return U.id!==$.id}),$,!1)},"onDelete"),label:E.jsx(Mt,{record:$,titleField:u||z})},$.id)}):E.jsx(Mt,{record:j[0],titleField:u||z})})}}),E.jsx(An,{action:V,open:T,anchorEl:I.current,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{minWidth:I?(n=I.current)===null||n===void 0?void 0:n.clientWidth:"auto"}}},children:P.createElement(Gt,Ne({},x,{key:N,checkStrictly:l,expandAction:o,checkable:r,selectable:!r,checkedKeys:r?O:[],selectedKeys:r?[]:[O],defaultCheckedKeys:r?O:void 0,defaultSelectedKeys:r?void 0:[O],defaultExpandedKeys:r?O:[O],onCheck:M,onSelect:k,onExpand:Q,data:a,onBlur:i==null?void 0:i.onBlur,sx:Ne({padding:1},_)}))})]})},"TreeInputTree"),ct=P.forwardRef(d(function(n,e){var a=n.className,r=n.children,i=Ot(n,["className","children"]);return E.jsxs(kn,{className:a,children:[E.jsx("input",Ne({ref:e},i,{style:Mn})),r]})},"TreeInputInput")),Mt=d(function(t){var n=t.titleField,e=t.record;return e?typeof n=="function"?n(e):Tn(e,n):null},"ChoiceLabel"),Mr=d(function(t){var n=t.reference,e=t.source,a=t.meta,r=Lt(n,{meta:a}),i=r.data,c=r.error,l=r.isLoading,s=r.isFetching;return{source:e,resource:n,data:i,error:c??void 0,isLoading:l,isFetching:s}},"useReferenceNodeInputController"),Tr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},wa=d(function(t){var n=t.children,e=n===void 0?E.jsx(Ar,{}):n,a=Mr(t),r=a.resource,i=Tr(a,["resource"]);return E.jsx($n,{value:r,children:E.jsx($r,{value:i,children:e})})},"ReferenceNodeInput"),$r=d(function(t){var n=t.children,e=t.value;return E.jsx(an.Provider,{value:e,children:n})},"TreeChoicesContextProvider"),qr=d(function(){return P.useContext(an)||{}},"useTreeChoicesContext"),Ue=function(){return Ue=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)},Br=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Kr=d(function(t){var n=t.source,e=t.data;t.hideRootNodes;var a=Br(t,["source","data","hideRootNodes"]),r=re(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=qr(),c=i.source,l=i.data,s=i.isLoading,o=i.isFetching,u=i.error,f=e??l,w=n??c;if(w==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var g=qn(Ue(Ue({},a),{resource:r,source:w,type:"text"})),C=g.isRequired,S=g.field,p=g.fieldState,m=g.formState;return{resource:r,source:w,data:f??[],fetchError:u,isLoading:s,isFetching:o,isRequired:C,field:S,fieldState:p,formState:m}},"useTreeInputController"),Ir=d(function(t){var n=t.children,e=t.value;return E.jsx(Bn.Provider,{value:e,children:n})},"TreeContextProvider"),dt=function(){return dt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)},_a=d(function(t){var n=Sr(t);return E.jsx(Kn,{value:n,children:E.jsx(In,dt({},t,n))})},"CreateNode"),lt=function(){return lt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(this,arguments)},Tt=function(t,n,e){if(e||arguments.length===2)for(var a=0,r=n.length,i;a<r;a++)(i||!(a in n))&&(i||(i=Array.prototype.slice.call(n,0,a)),i[a]=n[a]);return t.concat(i||Array.prototype.slice.call(n))},pa=d(function(t){var n=t.id,e=Bt().id;if(!e&&!n)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var a=n??e,r=Wt(),i=r[1];P.useEffect(function(){i(function(l){var s=a.toString();return Array.isArray(l)?l.includes(s)?l:Tt(Tt([],l,!0),[s],!1):[s]})},[t.resource,a,i]);var c=tr(t);return E.jsx(nr,{value:c,children:E.jsx(dr,lt({},t))})},"ShowNode"),st=function(){return st=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)},Lr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Wr=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.label,l=c===void 0?"ra.action.delete":c,s=t.mutationMode,o=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,w=f===void 0?"list":f,g=Lr(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),C=re(t);if(!C)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var S=_e(t);if(!S)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var p=tn({mutationMode:s,record:S,resource:C,redirect:w}),m=p.handleDelete,h=p.handleDialogClose,v=p.handleDialogOpen,y=p.isPending,_=p.open,x=be(),O=d(function(j){j.stopPropagation(),o&&o(j),j.isDefaultPrevented()||v(j)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Xt,st({className:n,onClick:O,ref:u},g,{children:x(l,{_:l})})),E.jsx(Ht,{isOpen:_,loading:y,title:a,content:i,translateOptions:{name:Qe.humanize(x("resources.".concat(C,".name"),{smart_count:1,_:Qe.singularize(C)}),!0),id:S.id},onConfirm:m,onClose:h})]})},"DeleteMenuItemWithConfirmation"),ft=function(){return ft=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ft.apply(this,arguments)},Qr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},zr=d(function(t){var n=t.className,e=t.label,a=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var i=t.ref;t.resource;var c=t.redirect,l=c===void 0?"list":c,s=Qr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),o=re(t);if(!o)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=_e(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=nn({record:u,resource:o,redirect:l}),w=f.handleDelete,g=f.isPending,C=be(),S=d(function(p){p.stopPropagation(),r&&r(p),p.isDefaultPrevented()||w(p)},"handleClick");return E.jsx(Xt,ft({className:n,disabled:g,onClick:S,ref:i},s,{children:C(a,{_:a})}))},"DeleteMenuItemWithUndo"),Ge=function(){return Ge=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ge.apply(this,arguments)},Ur=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},un=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n,a=Ur(t,["mutationMode"]);return e==="undoable"?E.jsx(zr,Ge({},a,{mutationMode:e})):E.jsx(Wr,Ge({},a,{mutationMode:e}))},"DeleteMenuItem");un.displayName="DeleteMenuItem";var Gr=P.createContext(null),Xr=Gr.Provider,Hr=d(function(t){var n=t.children,e=n===void 0?E.jsx(un,{}):n,a=t.className,r=P.useState(null),i=r[0],c=r[1],l=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),s=P.useCallback(function(u){u.stopPropagation(),c(null)},[]),o=P.useMemo(function(){return{close:s}},[s]);return E.jsxs(Vr,{className:a,children:[E.jsx("button",{className:Jr.menuButton,onClick:l,children:E.jsx(Ln,{})}),E.jsx(Wn,{anchorEl:i,open:!!i,onClose:s,children:E.jsx(Xr,{value:o,children:e})})]})},"NodeActions"),cn="RaNodeActions",Jr={menuButton:"".concat(cn,"-menuButton")},Vr=we("div",{name:cn,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(){return{}}),vt=function(){return vt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(this,arguments)},Yr=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},Zr=d(function(t){var n=t.label,e=n===void 0?"ra.action.delete":n,a=t.className,r=t.icon,i=r===void 0?ea:r,c=t.onClick;t.resource,t.record;var l=t.redirect,s=l===void 0?"list":l,o=Yr(t,["label","className","icon","onClick","resource","record","redirect"]),u=re(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=_e(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var w=nn({resource:u,record:f,redirect:s}),g=w.handleDelete,C=w.isPending,S=d(function(p){c&&c(p),p.isDefaultPrevented()||g(p)},"handleClick");return E.jsx(Fr,vt({onClick:S,disabled:C,label:e,className:$e("ra-delete-button",a)},o,{children:i}),"button")},"DeleteBranchWithUndoButton"),Fr=we(Jt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n=t.theme;return{color:n.palette.error.main,"&:hover":{backgroundColor:Vt(n.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),ea=E.jsx(Yt,{}),ht=function(){return ht=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)},ta=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},na=d(function(t){var n=t.className,e=t.confirmTitle,a=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,i=r===void 0?"ra.message.delete_content":r,c=t.icon,l=c===void 0?ra:c,s=t.label,o=s===void 0?"ra.action.delete":s,u=t.mutationMode,f=t.onClick;t.record,t.resource;var w=t.redirect,g=w===void 0?"list":w,C=ta(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),S=be(),p=re(t);if(!p)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var m=_e(t);if(!m)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=tn({mutationMode:u,resource:p,record:m,redirect:g}),v=h.handleDelete,y=h.handleDialogClose,_=h.handleDialogOpen,x=h.isPending,O=h.open,j=d(function(b){f&&f(b),b.isDefaultPrevented()||_(b)},"handleClick");return E.jsxs(aa,{className:n,children:[E.jsx(Jt,ht({onClick:j,label:o,className:$e("ra-delete-button",ln.deleteButton)},C,{children:l}),"button"),E.jsx(Ht,{isOpen:O,loading:x,title:a,content:i,translateOptions:{name:S("resources.".concat(p,".forcedCaseName"),{smart_count:1,_:Qe.humanize(S("resources.".concat(p,".name"),{smart_count:1,_:Qe.singularize(p)}),!0)}),id:m.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),ra=E.jsx(Yt,{}),dn="RaDeleteBranchWithConfirmButton",ln={deleteButton:"".concat(dn,"-deleteButton")},aa=we("div",{name:dn})(function(t){var n,e=t.theme;return n={},n["& .".concat(ln.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:Vt(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},n}),Xe=function(){return Xe=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xe.apply(this,arguments)},ia=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},oa=d(function(t){var n=t.mutationMode,e=n===void 0?"undoable":n;t.record;var a=ia(t,["mutationMode","record"]),r=_e(t),i=Qn();if(!r||r.id==null)return null;var c=e||(i!=null&&i.mutationMode?i.mutationMode:"undoable");return c==="undoable"?E.jsx(Zr,Xe({record:r},a)):E.jsx(na,Xe({mutationMode:c,record:r},a))},"DeleteBranchButton");function tt(t){var n=zn();return Un((n??"")+t)}d(tt,"useMatchWithBasename");var yt=function(){return yt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yt.apply(this,arguments)},ua=function(t,n,e,a){function r(i){return i instanceof e?i:new e(function(c){c(i)})}return d(r,"adopt"),new(e||(e=Promise))(function(i,c){function l(u){try{o(a.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{o(a.throw(u))}catch(f){c(f)}}d(s,"rejected");function o(u){u.done?i(u.value):r(u.value).then(l,s)}d(o,"step"),o((a=a.apply(t,n||[])).next())})},ca=function(t,n){var e={label:0,sent:d(function(){if(i[0]&1)throw i[1];return i[1]},"sent"),trys:[],ops:[]},a,r,i,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(a)throw new TypeError("Generator is already executing.");for(;c&&(c=0,o[0]&&(e=0)),e;)try{if(a=1,r&&(i=o[0]&2?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,r=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(u){o=[6,u],r=0}finally{a=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},sn=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},xe,Oa=d(function(t){var n=t.allowMultipleRoots,e=n===void 0?!1:n,a=t.className,r=t.create,i=t.defaultExpandedKeys,c=t.edit,l=t.filter,s=t.hideRootNodes,o=t.lazy,u=o===void 0?!1:o;t.linkTo;var f=t.nodeActions,w=f===void 0?E.jsx(Hr,{}):f,g=t.show,C=t.showLine,S=t.sx,p=t.title,m=t.titleField,h=t.addRootButton,v=h===void 0?E.jsx(Gn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):h,y=t.meta,_=t.mutationMode,x=t.expandedKeys,O=t.onExpand,j=t.onClick,b=t.onDrop,N=sn(t,["allowMultipleRoots","className","create","defaultExpandedKeys","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","mutationMode","expandedKeys","onExpand","onClick","onDrop"]),D=re(t);if(D==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var A=Xn(),M=Hn(),k=tt("/".concat(D,"/create/*")),R=tt("/".concat(D,"/:id/*")),T=tt("/".concat(D,"/:id/show/*")),B=sa(t),q=P.useState(function(){if(k)return[he];if(R)return[R.params.id];if(T)return[T.params.id]}),I=q[0],L=q[1];P.useEffect(function(){if(k){L([he]);return}if(R){L([R.params.id]);return}if(T){L([T.params.id]);return}},[k,R,T]);var W=Dr({lazy:u,resource:D,filter:l,meta:y,mutationMode:_,expandedKeys:x??i}),V=W.data,Q=W.defaultTitle,G=W.handleExpand,z=W.isPending,K=W.loadChildNodes,$=W.handleDrop,X=W.expandedKeys,U=te(function(J,F){if(j&&j(J,F),!J.defaultPrevented&&B)return A(M({resource:D,id:F.id,type:B}))}),ee=te(function(J,F,Oe,Re){O&&O(J,F,Oe,Re),J.defaultPrevented||G(F.map(function(ke){var fn=ke.id;return fn}))}),Y=te(function(J,F){b&&b(J,F),$(F)}),Z=P.useCallback(function(J){return ua(void 0,void 0,void 0,function(){return ca(this,function(F){return u?[2,K(J.record.id)]:[2,Promise.resolve()]})})},[u,K]),ae=P.useMemo(function(){var J;return(J=V==null?void 0:V.reduce(function(F,Oe){return V.some(function(Re){var ke;return(ke=Re.children)===null||ke===void 0?void 0:ke.includes(Oe.id)})||F.push(Oe.id),F},[]))!==null&&J!==void 0?J:[]},[V]),le=te(function(J){var F=J.destination,Oe=J.position;if(V==null)return!1;if(e)return!0;var Re=ae.includes(F.id);return!(Re&&Oe===-1)});if(z||V==null)return null;var pe=!V||V.length===0||e;return E.jsx(Ir,{value:W,children:E.jsxs(la,{className:a,sx:S,children:[E.jsx("div",{className:me.cardTree,children:E.jsx(It,{children:E.jsxs(Jn,{className:me.cardContentTree,children:[E.jsx(Gt,yt({allowDrop:le,data:V,hideRootNodes:s,titleField:m,onDrop:Y,onExpand:ee,onClick:U,selectedKeys:I,showLine:C,nodeActions:w,loadData:u?Z:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:X},da(N))),pe?v:null]})})}),E.jsx("div",{className:me.actionCard,children:E.jsxs(Vn,{children:[r?E.jsx(Be,{path:"create/*",element:typeof r=="function"?E.jsx(r,{}):r}):null,g?E.jsx(Be,{path:":id/show/*",element:typeof g=="function"?E.jsx(g,{}):g}):null,c?E.jsx(Be,{path:":id/*",element:typeof c=="function"?E.jsx(c,{}):c}):null,p!==!1?E.jsx(Be,{path:"*",element:E.jsx(Kt,{title:p,defaultTitle:Q})}):null]})})]})})},"TreeWithDetails"),da=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var n=sn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return n},"sanitizeRestProps"),Te="RaTreeWithDetails",me={container:"".concat(Te,"-container"),cardTree:"".concat(Te,"-cardTree"),cardContentTree:"".concat(Te,"-cardContentTree"),actionCard:"".concat(Te,"-actionCard")},la=we("div",{name:Te,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})((xe={display:"flex"},xe["& .".concat(me.actionCard)]={width:"100%"},xe["& .".concat(me.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},xe["& .".concat(me.cardContentTree)]={},xe["& .".concat(me.container)]={display:"flex"},xe)),sa=d(function(t){var n=t.linkTo,e=t.show,a=t.edit;return n||(e?"show":a?"edit":!1)},"getLinkTo"),gt=function(){return gt=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt.apply(this,arguments)},fa=function(t,n){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(e[a[r]]=t[a[r]]);return e},xa=d(function(t){var n,e=t.children,a=t.className,r=t.resource,i=fa(t,["children","className","resource"]),c=Yn(function(l){return l.breakpoints.down("sm")});return E.jsx(va,gt({className:$e((n={},n[Ee.mobileToolbar]=c,n[Ee.desktopToolbar]=!c,n),a),role:"toolbar"},i,{children:P.Children.count(e)===0?E.jsxs("div",{className:Ee.defaultToolbar,children:[E.jsx(Zn,{}),E.jsx(oa,{resource:r})]}):e}))},"EditNodeToolbar"),Le="RaEditNodeToolbar",Ee={desktopToolbar:"".concat(Le,"-desktopToolbar"),mobileToolbar:"".concat(Le,"-mobileToolbar"),defaultToolbar:"".concat(Le,"-defaultToolbar")},va=we(Fn,{name:Le,overridesResolver:d(function(t,n){return n.root},"overridesResolver")})(function(t){var n,e=t.theme;return n={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},n["&.".concat(Ee.desktopToolbar)]={},n["&.".concat(Ee.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},n["& .".concat(Ee.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},n});export{Sa as AddChildButton,_a as CreateNode,oa as DeleteBranchButton,na as DeleteBranchWithConfirmButton,Zr as DeleteBranchWithUndoButton,un as DeleteMenuItem,Wr as DeleteMenuItemWithConfirmation,zr as DeleteMenuItemWithUndo,ln as DeleteWithConfirmButtonClasses,Ea as EditNode,xa as EditNodeToolbar,Ee as EditNodeToolbarClasses,Hr as NodeActions,Na as NodeEditActions,wa as ReferenceNodeInput,pa as ShowNode,Gt as Tree,an as TreeChoicesContext,$r as TreeChoicesContextProvider,Bn as TreeContext,Ir as TreeContextProvider,Ar as TreeInput,Rr as TreeInputClasses,kr as TreeInputTree,Oa as TreeWithDetails,me as TreeWithDetailsClasses,he as UNSAVED_NEW_NODE,Pa as addTreeMethodsBasedOnChildren,ga as addTreeMethodsBasedOnParentAndPosition,_n as deleteBranchByDeletingAllChildren,wn as deleteBranchByDeletingNode,ba as fixFakeRestDataProvider,Da as getRCTree,Aa as getRCTreeDatum,Ra as getRecordTree,ka as getRootAndChildNodes,Ma as raTreeLanguageEnglish,Ta as raTreeLanguageFrench,ma as removeChildren,$a as renderSwitcherIcon,pn as updateQueryCacheFromGetTree,Cn as useAddChildNode,yr as useAddRootNode,Sr as useCreateNodeController,Zt as useDeleteBranch,tn as useDeleteBranchWithConfirmController,nn as useDeleteBranchWithUndoController,qa as useEditNodeController,Wt as useExpandedKeys,mr as useGetChildNodesCallback,Sn as useGetRootNodes,Lt as useGetTree,br as useGetTreeCallback,_r as useMoveAsNthChildOf,Or as useMoveAsNthSiblingOf,Mr as useReferenceNodeInputController,qr as useTreeChoicesContext,_t as useTreeContext,Dr as useTreeController,Kr as useTreeInputController};
//# sourceMappingURL=index-BjReF8yC.js.map
