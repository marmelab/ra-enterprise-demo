var nn=Object.defineProperty;var d=(t,a)=>nn(t,"name",{value:a,configurable:!0});import{ah as ee,ai as Et,aj as rn,ak as an,u as ye,K as Ae,al as Ke,L as Nt,m as Pt,a9 as on,am as ut,n as D,an as un,ao as ct,k as cn,ap as dn,z as Pe,aq as At,J as ge,C as Dt,ar as sn,as as ln,at as Ce,au as Se,av as je,aw as dt,ax as fn,ay as Te,a3 as ce,az as st,aA as vn,aB as hn,aC as yn,aD as gn,aE as kt,aF as mn,aG as we,aH as Rt,j as E,ad as We,T as bn,aI as wn,ag as pn,I as _n,f as On,aJ as Mt,aK as xn,x as Cn,ac as Sn,aL as jn,aM as En,aN as Nn,r as Pn,i as An,aO as Tt,aP as $t,aQ as qt,aR as Bt,aS as Dn,l as Lt,aT as It,aU as Kt,aV as kn,aW as Rn,M as Mn,O as Tn,aX as Qe,d as $n,aY as qn,aZ as ke,a5 as Bn,a_ as Ln,a$ as In}from"./index-CemqIuf8.js";import{b2 as ha,b0 as ya,b1 as ga,b5 as ma,b8 as ba,b7 as wa,b6 as pa,b9 as _a,bb as Oa,ba as xa,b3 as Ca,b4 as Sa}from"./index-CemqIuf8.js";var ze=function(){return ze=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ze.apply(this,arguments)},Kn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Wn=d(function(t){t===void 0&&(t={});var a=t.disableAuthentication,e=a===void 0?!1:a,n=t.id,r=t.queryOptions,o=r===void 0?{}:r,c=ee(t);if(!c)throw new Error("useShowController requires a non-empty resource prop or context");var l=Et({enabled:!e}).isPending,s=rn({action:"show",resource:c,enabled:!l}).isPending,i=an(c),u=ye(),f=Ae(),b=Ke(),w=Nt(),x=Pt().id;if(!x&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var S=n??x,_=o.meta,g=Kn(o,["meta"]),h=on(c,{id:S,meta:_},ze({enabled:!l&&!s||e,onError:d(function(){f("ra.notification.item_doesnt_exist",{type:"error"}),b("list",c),w()},"onError"),retry:!1},g)),v=h.data,y=h.error,m=h.isLoading,O=h.isFetching,C=h.isPending,j=h.refetch;if(v&&v.id&&v.id!=S)throw new Error("useShowController: Fetched record's id attribute (".concat(v.id,") must match the requested 'id' (").concat(S,")"));var p=ut(),N=i(v),P=u("ra.page.show",{name:p(c,1),id:S,record:v,recordRepresentation:typeof N=="string"?N:""});return{defaultTitle:P,error:y,isLoading:m,isFetching:O,isPending:C,record:v,refetch:j,resource:c}},"useShowController"),lt=D.createContext(null);lt.displayName="ShowContext";var Qn=d(function(t){var a=t.children,e=t.value;return D.createElement(lt.Provider,{value:e},D.createElement(un,{value:e&&e.record},a))},"ShowContextProvider"),Un=d(function(){var t=D.useContext(lt);if(!t)throw new Error("useShowContext must be used inside a ShowContextProvider");return t},"useShowContext"),Ve=function(){return Ve=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ve.apply(this,arguments)},Gn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},zn=d(function(t){var a=ct(t).hasEdit;return D.createElement(cn,Ve({},Vn(t)),a&&D.createElement(dn,null))},"ShowActions"),Vn=d(function(t){t.hasCreate,t.hasEdit,t.hasShow,t.hasList,t.resource;var a=Gn(t,["hasCreate","hasEdit","hasShow","hasList","resource"]);return a},"sanitizeRestProps$1"),Xe=function(){return Xe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Xe.apply(this,arguments)},Xn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ee,Hn=D.createElement(zn,null),Jn=d(function(t){var a,e=t.actions,n=t.aside,r=t.children,o=t.className,c=t.component,l=c===void 0?Dt:c,s=t.emptyWhileLoading,i=s===void 0?!1:s,u=t.title,f=Xn(t,["actions","aside","children","className","component","emptyWhileLoading","title"]),b=Un(),w=b.resource,x=b.defaultTitle,S=b.record,_=ct().hasEdit,g=typeof e>"u"&&_?Hn:e;return!r||!S&&i?null:D.createElement(Yn,Xe({className:Pe("show-page",o)},f),u!==!1&&D.createElement(At,{title:u,defaultTitle:x,preferenceKey:"".concat(w,".show.title")}),g!==!1&&g,D.createElement("div",{className:Pe(Oe.main,(a={},a[Oe.noActions]=!g,a))},D.createElement(l,{className:Oe.card},r),n))},"ShowView"),Re="RaShow",Oe={main:"".concat(Re,"-main"),noActions:"".concat(Re,"-noActions"),card:"".concat(Re,"-card")},Yn=ge("div",{name:Re,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((Ee={},Ee["& .".concat(Oe.main)]={display:"flex"},Ee["& .".concat(Oe.noActions)]={marginTop:"1em"},Ee["& .".concat(Oe.card)]={flex:"1 1 auto"},Ee)),U=function(){return U=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},U.apply(this,arguments)},ae=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},oe=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},aa=d(function(t,a,e,n){a===void 0&&(a="parent_id"),e===void 0&&(e="position"),n===void 0&&(n=!1);var r=n?sn:ln,o=U(U({},t),{getTree:d(function(c,l){return ae(void 0,void 0,void 0,function(){var s,i;return oe(this,function(u){switch(u.label){case 0:return[4,t.getList(c,{filter:l==null?void 0:l.filter,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=u.sent().data,i=s.map(function(f){return U(U({},f),{children:s.filter(function(b){return b[a]==f.id}).sort(function(b,w){return b[e]-w[e]}).map(function(b){return b.id})})}),[2,{data:i}]}})})},"getTree"),getRootNodes:d(function(c,l){return ae(void 0,void 0,void 0,function(){var s,i,u;return oe(this,function(f){switch(f.label){case 0:return[4,t.getList(c,{filter:U(U({},l==null?void 0:l.filter),(u={},u[a]=null,u)),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta})];case 1:return s=f.sent().data,[4,Promise.all(s.map(function(b){var w;return t.getList(c,{filter:(w={},w[a]=b.id,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:l==null?void 0:l.meta}).then(function(x){var S=x.data;return U(U({},b),{children:S.map(function(_){var g=_.id;return g})})})}))];case 2:return i=f.sent(),[2,{data:i}]}})})},"getRootNodes"),getParentNode:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w=i.childId,x=i.meta;return oe(this,function(S){switch(S.label){case 0:return[4,o.getTree(s,{meta:x})];case 1:return u=S.sent().data,f=u.find(function(_){return _.id===w}),f?(b=u.find(function(_){return _.id===f[a]}),[2,{data:b}]):[2,{data:void 0}]}})})},"getParentNode"),getChildNodes:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w=i.parentId,x=i.meta;return oe(this,function(S){switch(S.label){case 0:return[4,t.getList(s,{filter:(b={},b[a]=w,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x})];case 1:return u=S.sent().data,[4,Promise.all(u.map(function(_){var g;return t.getList(s,{filter:(g={},g[a]=_.id,g),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:x}).then(function(h){var v=h.data;return U(U({},_),{children:v.map(function(y){var m=y.id;return m})})})}))];case 2:return f=S.sent(),[2,{data:f}]}})})},"getChildNodes"),moveAsNthChildOf:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w,x,S=i.source,_=i.destination,g=i.position,h=i.meta;return oe(this,function(v){switch(v.label){case 0:return[4,t.getList(s,{filter:(b={},b[a]=_.id,b["".concat(e,"_gte")]=g,b),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=v.sent().data,u.length>0?[4,Promise.all(u.map(function(y){var m;return t.update(s,{id:y.id,data:(m={},m[e]=y[e]+1,m),previousData:y,meta:h})}))]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,t.getList(s,{filter:(w={},w[a]=S[a],w["".concat(e,"_gt")]=S[e],w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 4:return f=v.sent().data,f.length>0?[4,Promise.all(f.map(function(y){var m;return t.update(s,{id:y.id,data:(m={},m[e]=y[e]-1,m),previousData:y,meta:h})}))]:[3,6];case 5:v.sent(),v.label=6;case 6:return[4,t.update(s,{id:S.id,data:(x={},x[a]=_.id,x[e]=g,x),previousData:S,meta:h})];case 7:return v.sent(),[2,{data:void 0}]}})})},"moveAsNthChildOf"),moveAsNthSiblingOf:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w,x,S,_,g,h,v,y,m=i.source,O=i.destination,C=i.position,j=i.meta;return oe(this,function(p){switch(p.label){case 0:return C===0&&(u=(x={},x[a]=O[a],x)),m[e]>O[e]&&m[a]===O[a]&&(u=(S={},S[a]=O[a],S["".concat(e,"_gt")]=O[e],S)),m[a]!==O[a]&&C>0&&(u=(_={},_[a]=O[a],_["".concat(e,"_gt")]=O[e],_)),u?[4,t.getList(s,{filter:u,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})]:[3,3];case 1:return f=p.sent().data,f.length>0?[4,Promise.all(f.map(function(N){var P;return N.id===m.id?Promise.resolve(void 0):t.update(s,{id:N.id,data:(P={},P[e]=N[e]+1,P),previousData:N,meta:j})}))]:[3,3];case 2:p.sent(),p.label=3;case 3:return m[a]===O[a]?m[e]>O[e]?b=(g={},g[a]=m[a],g["".concat(e,"_gt")]=m[e],g):b=(h={},h[a]=m[a],h["".concat(e,"_gt")]=m[e],h["".concat(e,"_lte")]=O[e],h):b=(v={},v[a]=m[a],v["".concat(e,"_gt")]=m[e],v),[4,t.getList(s,{filter:b,sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:j})];case 4:return w=p.sent().data,w.length>0?[4,Promise.all(w.map(function(N){var P;return N.id===m.id?Promise.resolve(void 0):t.update(s,{id:N.id,data:(P={},P[e]=N[e]-1,P),previousData:N,meta:j})}))]:[3,6];case 5:p.sent(),p.label=6;case 6:return[4,t.update(s,{id:m.id,data:(y={},y[a]=O[a],y[e]=m[a]===O[a]?m[e]>O[e]?O[e]+1:O[e]:C,y),previousData:m,meta:j})];case 7:return p.sent(),[2,{data:void 0}]}})})},"moveAsNthSiblingOf"),addRootNode:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w,x,S=i.data,_=i.meta;return oe(this,function(g){switch(g.label){case 0:return[4,t.getList(s,{filter:(w={},w[a]=null,w),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:_})];case 1:return u=g.sent().data,f=u.length>0?u.reduce(function(h,v){return v[e]>h?v[e]:h},-1/0)+1:0,[4,t.create(s,{data:U(U({},S),(x={},x[a]=null,x[e]=f,x)),meta:_})];case 2:return b=g.sent().data,[2,{data:U(U({},b),{children:[]})}]}})})},"addRootNode"),addChildNode:d(function(c,l){return ae(void 0,[c,l],void 0,function(s,i){var u,f,b,w,x,S,_=i.parentId,g=i.data,h=i.meta,v=i.position;return oe(this,function(y){switch(y.label){case 0:return[4,t.getList(s,{filter:(x={},x[a]=_,x),sort:{field:e,order:"ASC"},pagination:{page:1,perPage:1e3},meta:h})];case 1:return u=y.sent().data,f=u.length>0?u.reduce(function(m,O){return O[e]>m?O[e]:m},-1/0)+1:0,b=v!==void 0&&v>=0&&v<=f?v:f,[4,t.create(s,{data:U(U({},g),(S={},S[a]=_,S[e]=b,S)),meta:h})];case 2:return w=y.sent().data,v!==void 0&&v>=0&&v<=f&&u.forEach(function(m){var O;m[e]>=v&&t.update(s,{id:m.id,data:U(U({},m),(O={},O[e]=m[e]+1,O)),previousData:m,meta:h})}),[2,{data:U(U({},w),{children:[]})}]}})})},"addChildNode"),deleteBranch:d(function(c,l){return ae(void 0,void 0,void 0,function(){var s,i,u,f;return oe(this,function(b){switch(b.label){case 0:return s=l.id,i=l.previousData,u=l.meta,[4,r(o,c,l)];case 1:return b.sent(),[4,o.getChildNodes(c,{parentId:i[a],meta:u})];case 2:return f=b.sent().data,[4,Promise.all(f.filter(function(w){return w[e]>i[e]&&w.id!==s}).map(function(w){var x;return t.update(c,{id:w.id,data:U(U({},w),(x={},x[e]=w[e]-1,x)),previousData:w,meta:u})}))];case 3:return b.sent(),[2,{data:i}]}})})},"deleteBranch")});return o},"addTreeMethodsBasedOnParentAndPosition"),pe=function(){return pe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pe.apply(this,arguments)},Zn=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Fn=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},er=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},tr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},nr=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=D.useRef(a),c=je(pe(pe({mutationFn:d(function(s){var i=s===void 0?{}:s,u=i.resource,f=u===void 0?t:u,b=i.data,w=b===void 0?o.current.data:b,x=i.meta,S=x===void 0?o.current.meta:x;if(!f)throw new Error("useAddRootNode mutation requires a non-empty resource");if(w==null)throw new Error("useAddRootNode mutation requires non-empty data");return n.addRootNode(f,{data:w,meta:S}).then(function(_){var g=_.data;return g})},"mutationFn")},e),{onSuccess:d(function(s,i,u){i===void 0&&(i={});var f=i.resource,b=f===void 0?t:f;r.setQueryData([b,"getOne",{id:String(s.id)}],s),e.onSuccess&&e.onSuccess(s,i,u)},"onSuccess")})),l=d(function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return Zn(void 0,tr([],s,!0),void 0,function(u,f,b){var w,x;return u===void 0&&(u=t),f===void 0&&(f={}),b===void 0&&(b={}),Fn(this,function(S){return w=b.returnPromise,x=er(b,["returnPromise"]),w?[2,c.mutateAsync(pe({resource:u},f),b)]:(c.mutate(pe({resource:u},f),x),[2])})})},"addRootNode");return[l,c]},"useAddRootNode"),Z=function(){return Z=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Z.apply(this,arguments)},vt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},ht=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},rr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Ue=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Wt=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.id,c=a.previousData,l=e.mutationMode,s=l===void 0?"pessimistic":l,i=rr(e,["mutationMode"]),u=D.useRef(s),f=D.useRef(a),b=D.useRef([]),w=d(function(_){var g=_.resource,h=_.id,v=Date.now(),y=u.current==="undoable"?v+5*1e3:v,m=d(function(C,j){var p=C.findIndex(function(M){return M.id==j});if(p===-1)return C;for(var N=C[p],P=Ue(Ue([],C.slice(0,p),!0),C.slice(p+1),!0),$=N.children||[],R=0,T=$;R<T.length;R++){var A=T[R];P=m(P,A)}return P},"removeRecord"),O=d(function(C){var j=m(C,h);return j.map(function(p){return Z(Z({},p),{children:p.children?p.children.filter(function(N){return N!==h}):p.children})})},"updateCollection");r.setQueriesData({queryKey:[g,"getTree"]},function(C){if(!C)return C;var j=O(C),p=j.length<C.length;return p?j:C},{updatedAt:y}),r.setQueriesData({queryKey:[g,"getRootNodes"]},function(C){return C&&C.length>0?O(C):C},{updatedAt:y}),r.setQueriesData({queryKey:[g,"getChildNodes"]},function(C){if(!C)return C;var j=O(C),p=j.length<C.length;return p?j:C},{updatedAt:y})},"updateCache"),x=je(Z(Z({mutationFn:d(function(_){var g=_===void 0?{}:_,h=g.resource,v=h===void 0?t:h,y=g.id,m=y===void 0?f.current.id:y,O=g.previousData,C=O===void 0?f.current.previousData:O,j=g.meta,p=j===void 0?f.current.meta:j;if(!v)throw new Error("useDeleteBranch mutation requires a non-empty resource");if(m==null)throw new Error("useDeleteBranch mutation requires non-empty id");if(C==null)throw new Error("useDeleteBranch mutation requires non-empty previousData");return n.deleteBranch(v,{id:m,previousData:C,meta:p}).then(function(N){var P=N.data;return P})},"mutationFn")},i),{onMutate:d(function(_){return vt(void 0,void 0,void 0,function(){var g;return ht(this,function(h){switch(h.label){case 0:return i.onMutate?[4,i.onMutate(_)]:[3,2];case 1:return g=h.sent()||{},[2,Z({snapshot:b.current},g)];case 2:return[2,{snapshot:b.current}]}})})},"onMutate"),onError:d(function(_,g,h){if((u.current==="optimistic"||u.current==="undoable")&&h.snapshot.forEach(function(v){var y=v[0],m=v[1];r.setQueryData(y,m)}),i.onError)return i.onError(_,g,h)},"onError"),onSuccess:d(function(_,g,h){if(g===void 0&&(g={}),u.current==="pessimistic"){var v=g.resource,y=v===void 0?t:v,m=g.id,O=m===void 0?o:m;w({resource:y,id:O}),i.onSuccess&&i.onSuccess(_,g,h)}},"onSuccess"),onSettled:d(function(_,g,h,v){if(h===void 0&&(h={}),(u.current==="optimistic"||u.current==="undoable")&&v.snapshot.forEach(function(y){var m=y[0];r.invalidateQueries({queryKey:m})}),i.onSettled)return i.onSettled(_,g,h,v)},"onSettled")})),S=d(function(){for(var _=[],g=0;g<arguments.length;g++)_[g]=arguments[g];return vt(void 0,Ue([],_,!0),void 0,function(h,v,y){var m,O,C,j,p,N,P,$,R;return h===void 0&&(h=t),v===void 0&&(v={}),y===void 0&&(y={}),ht(this,function(T){switch(T.label){case 0:return m=y.mutationMode,O=y.onSuccess,C=y.onSettled,j=y.onError,f.current=a,m&&(u.current=m),u.current==="pessimistic"?[2,x.mutate(Z({resource:h},v),{onSuccess:O,onSettled:C,onError:j})]:(p=v.id,N=p===void 0?o:p,P=v.previousData,$=P===void 0?c:P,R=[[h,"getTree"],[h,"getRootNodes"],[h,"getChildNodes"]],b.current=R.reduce(function(A,M){return A.concat(r.getQueriesData({queryKey:M}))},[]),[4,Promise.all(b.current.map(function(A){var M=A[0];return r.cancelQueries({queryKey:M})}))]);case 1:return T.sent(),w({resource:h,id:N}),O&&setTimeout(function(){return O($,Z({resource:h},v),{snapshot:b.current})},0),i.onSuccess&&setTimeout(function(){i.onSuccess&&i.onSuccess($,Z({resource:h},v),{snapshot:b.current})},0),u.current==="optimistic"?[2,x.mutate(Z({resource:h},v),{onSettled:C,onError:j})]:(dt.once("end",function(A){var M=A.isUndo;M?b.current.forEach(function(I){var q=I[0],k=I[1];r.setQueryData(q,k)}):x.mutate(Z({resource:h},v),{onSettled:C,onError:j})}),[2])}})})},"mutate");return[S,x]},"useDeleteBranch"),fe=function(){return fe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fe.apply(this,arguments)},ar=d(function(t,a,e){var n=Ce(),r=je(fe({mutationKey:[t,"getChildNodes",a],mutationFn:d(function(c){return n.getChildNodes(t,fe(fe({},a),c)).then(function(l){var s=l.data;return s})},"mutationFn")},e)),o=D.useCallback(function(c){return r.mutateAsync(fe(fe({},a),{parentId:c}))},[r,a]);return o},"useGetChildNodesCallback"),$e=function(){return $e=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$e.apply(this,arguments)},oa=d(function(t){return $e($e({},t),{children:t.children.map(function(a){return a.id})})},"removeChildren"),He=function(){return He=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},He.apply(this,arguments)},or=d(function(t,a,e){a===void 0&&(a={}),e===void 0&&(e={});var n=Ce(),r=Se(),o=je(He({mutationKey:[t,"getTree",a],mutationFn:d(function(){return n.getTree(t,a).then(function(l){var s=l.data;return s})},"mutationFn"),onSuccess:d(function(l){fn(r,t,l,a)},"onSuccess")},e)),c=D.useCallback(function(){return o.mutateAsync(a)},[o,a]);return c},"useGetTreeCallback"),ne=function(){return ne=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ne.apply(this,arguments)},yt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},gt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ir=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},de=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},ur=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.source,c=a.destination,l=a.position,s=e.mutationMode,i=s===void 0?"undoable":s,u=ir(e,["mutationMode"]),f=D.useRef(i),b=D.useRef(a),w=D.useRef([]),x=d(function(g){var h=g.resource,v=g.position,y=g.source,m=g.destination,O=Date.now(),C=f.current==="undoable"?O+5*1e3:O,j=d(function(p){var N,P,$,R,T,A=Te(p),M=A.find(function(q){var k;return(k=q.children)===null||k===void 0?void 0:k.includes(y.id)});M?M.children=(N=M.children)===null||N===void 0?void 0:N.filter(function(q){return q!==y.id}):A=A.filter(function(q){return q.id!==y.id});var I=A.find(function(q){return q.id===m.id});return I?I.children=de(de(de([],($=(P=I.children)===null||P===void 0?void 0:P.slice(0,v))!==null&&$!==void 0?$:[],!0),[y.id],!1),(T=(R=I.children)===null||R===void 0?void 0:R.slice(v))!==null&&T!==void 0?T:[],!0):(A=A.filter(function(q){return q.id!==y.id}),A=de(de(de([],A.slice(0,v),!0),[y],!1),A.slice(v),!0)),A},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C})},"updateCache"),S=je(ne(ne({mutationFn:d(function(g){var h=g===void 0?{}:g,v=h.resource,y=v===void 0?t:v,m=h.position,O=m===void 0?b.current.position:m,C=h.source,j=C===void 0?b.current.source:C,p=h.destination,N=p===void 0?b.current.destination:p,P=h.meta,$=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return n.moveAsNthChildOf(y,{position:O,source:j,destination:N,meta:$}).then(function(R){var T=R.data;return T})},"mutationFn")},u),{onMutate:d(function(g){return yt(void 0,void 0,void 0,function(){var h;return gt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return h=v.sent()||{},[2,ne({snapshot:w.current},h)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:d(function(g,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var m=y[0],O=y[1];r.setQueryData(m,O)}),u.onError)return u.onError(g,h,v)},"onError"),onSuccess:d(function(g,h,v){if(h===void 0&&(h={}),f.current==="pessimistic"){var y=h.resource,m=y===void 0?t:y,O=h.position,C=O===void 0?l:O,j=h.source,p=j===void 0?o:j,N=h.destination,P=N===void 0?c:N;x({resource:m,position:C,source:p,destination:P}),u.onSuccess&&u.onSuccess(g,h,v)}},"onSuccess"),onSettled:d(function(g,h,v,y){if(v===void 0&&(v={}),(f.current==="optimistic"||f.current==="undoable")&&y.snapshot.forEach(function(m){var O=m[0];r.invalidateQueries({queryKey:O})}),u.onSettled)return u.onSettled(g,h,v,y)},"onSettled")})),_=d(function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];return yt(void 0,de([],g,!0),void 0,function(v,y,m){var O,C,j,p,N,P,$,R,T,A,M;return v===void 0&&(v=t),y===void 0&&(y={}),m===void 0&&(m={}),gt(this,function(I){switch(I.label){case 0:if(O=m.mutationMode,C=m.onSuccess,j=m.onSettled,p=m.onError,b.current=a,O&&(f.current=O),f.current==="pessimistic")return[2,S.mutate(ne({resource:v},y),{onSuccess:C,onSettled:j,onError:p})];if(N=y.position,P=N===void 0?l:N,$=y.source,R=$===void 0?o:$,T=y.destination,A=T===void 0?c:T,v==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty source");if(A==null)throw new Error("useMoveAsNthChildOf mutation requires a non-empty destination");return M=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],w.current=M.reduce(function(q,k){return q.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function(q){var k=q[0];return r.cancelQueries({queryKey:k})}))];case 1:return I.sent(),x({resource:v,position:P,source:R,destination:A}),C&&setTimeout(function(){return C(void 0,ne({resource:v},y),{snapshot:w.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,ne({resource:v},y),{snapshot:w.current})},0),f.current==="optimistic"?[2,S.mutate(ne({resource:v},y),{onSettled:j,onError:p})]:(dt.once("end",function(q){var k=q.isUndo;k?w.current.forEach(function(G){var F=G[0],te=G[1];r.setQueryData(F,te)}):S.mutate(ne({resource:v},y),{onSettled:j,onError:p})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthChildOf"),re=function(){return re=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},re.apply(this,arguments)},mt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},bt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},cr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},se=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},dr=d(function(t,a,e){a===void 0&&(a={source:void 0,destination:void 0,position:void 0,meta:void 0}),e===void 0&&(e={});var n=Ce(),r=Se(),o=a.source,c=a.destination,l=a.position,s=e.mutationMode,i=s===void 0?"undoable":s,u=cr(e,["mutationMode"]),f=D.useRef(i),b=D.useRef(a),w=D.useRef([]),x=d(function(g){var h=g.resource,v=g.position,y=g.source,m=g.destination,O=Date.now(),C=f.current==="undoable"?O+5*1e3:O,j=d(function(p){var N,P,$,R,T,A=Te(p),M=A.find(function(k){var G;return(G=k.children)===null||G===void 0?void 0:G.includes(y.id)}),I=A.find(function(k){var G;return(G=k.children)===null||G===void 0?void 0:G.includes(m.id)}),q=v;return M&&I&&M.id===I.id&&M.children&&M.children.findIndex(function(k){return k===y.id})<M.children.findIndex(function(k){return k===m.id})&&(q=v-1),M?M.children=(N=M.children)===null||N===void 0?void 0:N.filter(function(k){return k!==y.id}):A=A.filter(function(k){return k.id!==y.id}),I?I.children=se(se(se([],($=(P=I.children)===null||P===void 0?void 0:P.slice(0,q))!==null&&$!==void 0?$:[],!0),[y.id],!1),(T=(R=I.children)===null||R===void 0?void 0:R.slice(q))!==null&&T!==void 0?T:[],!0):(A=A.filter(function(k){return k.id!==y.id}),A=se(se(se([],A.slice(0,v),!0),[y],!1),A.slice(v),!0)),A},"updateCollection");r.setQueriesData({queryKey:[h,"getTree"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[h,"getRootNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C}),r.setQueriesData({queryKey:[h,"getChildNodes"]},function(p){return p&&p.length>0?j(p):p},{updatedAt:C})},"updateCache"),S=je(re(re({mutationFn:d(function(g){var h=g===void 0?{}:g,v=h.resource,y=v===void 0?t:v,m=h.position,O=m===void 0?b.current.position:m,C=h.source,j=C===void 0?b.current.source:C,p=h.destination,N=p===void 0?b.current.destination:p,P=h.meta,$=P===void 0?b.current.meta:P;if(y==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(O==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(j==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(N==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return n.moveAsNthSiblingOf(y,{position:O,source:j,destination:N,meta:$}).then(function(R){var T=R.data;return T})},"mutationFn")},u),{onMutate:d(function(g){return mt(void 0,void 0,void 0,function(){var h;return bt(this,function(v){switch(v.label){case 0:return u.onMutate?[4,u.onMutate(g)]:[3,2];case 1:return h=v.sent()||{},[2,re({snapshot:w.current},h)];case 2:return[2,{snapshot:w.current}]}})})},"onMutate"),onError:d(function(g,h,v){if((f.current==="optimistic"||f.current==="undoable")&&v.snapshot.forEach(function(y){var m=y[0],O=y[1];r.setQueryData(m,O)}),u.onError)return u.onError(g,h,v)},"onError"),onSuccess:d(function(g,h,v){if(h===void 0&&(h={}),f.current==="pessimistic"){var y=h.resource,m=y===void 0?t:y,O=h.position,C=O===void 0?l:O,j=h.source,p=j===void 0?o:j,N=h.destination,P=N===void 0?c:N;x({resource:m,position:C,source:p,destination:P}),u.onSuccess&&u.onSuccess(g,h,v)}},"onSuccess"),onSettled:d(function(g,h,v,y){if(v===void 0&&(v={}),(f.current==="optimistic"||f.current==="undoable")&&y.snapshot.forEach(function(m){var O=m[0];r.invalidateQueries({queryKey:O})}),u.onSettled)return u.onSettled(g,h,v,y)},"onSettled")})),_=d(function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];return mt(void 0,se([],g,!0),void 0,function(v,y,m){var O,C,j,p,N,P,$,R,T,A,M;return v===void 0&&(v=t),y===void 0&&(y={}),m===void 0&&(m={}),bt(this,function(I){switch(I.label){case 0:if(O=m.mutationMode,C=m.onSuccess,j=m.onSettled,p=m.onError,b.current=a,O&&(f.current=O),f.current==="pessimistic")return[2,S.mutate(re({resource:v},y),{onSuccess:C,onSettled:j,onError:p})];if(N=y.position,P=N===void 0?l:N,$=y.source,R=$===void 0?o:$,T=y.destination,A=T===void 0?c:T,v==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty resource");if(P==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty position");if(R==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty source");if(A==null)throw new Error("useMoveAsNthSiblingOf mutation requires a non-empty destination");return M=[[v,"getTree"],[v,"getRootNodes"],[v,"getChildNodes"]],w.current=M.reduce(function(q,k){return q.concat(r.getQueriesData({queryKey:k}))},[]),[4,Promise.all(w.current.map(function(q){var k=q[0];return r.cancelQueries({queryKey:k})}))];case 1:return I.sent(),x({resource:v,position:P,source:R,destination:A}),C&&setTimeout(function(){return C(void 0,re({resource:v},y),{snapshot:w.current})},0),u.onSuccess&&setTimeout(function(){u.onSuccess&&u.onSuccess(void 0,re({resource:v},y),{snapshot:w.current})},0),f.current==="optimistic"?[2,S.mutate(re({resource:v},y),{onSettled:j,onError:p})]:(dt.once("end",function(q){var k=q.isUndo;k?w.current.forEach(function(G){var F=G[0],te=G[1];r.setQueryData(F,te)}):S.mutate(re({resource:v},y),{onSettled:j,onError:p})}),[2])}})})},"mutate");return[_,S]},"useMoveAsNthSiblingOf"),ue=function(){return ue=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ue.apply(this,arguments)},wt=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},pt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ia=d(function(t){return ue(ue({},t),{getRootNodes:d(function(a,e){return wt(void 0,void 0,void 0,function(){var n,r;return pt(this,function(o){switch(o.label){case 0:return[4,t.getRootNodes(a,e)];case 1:return n=o.sent().data,r=n.filter(function(c){return c.parent_id==null}),[2,{data:r,total:r.length}]}})})},"getRootNodes"),addRootNode:d(function(a,e){return wt(void 0,[a,e],void 0,function(n,r){var o,c,l,s,i=r.data,u=r.meta;return pt(this,function(f){switch(f.label){case 0:return[4,t.getList(n,{filter:{parent_id:null},sort:{field:"position",order:"ASC"},pagination:{page:1,perPage:1e3},meta:u})];case 1:return o=f.sent().data,c=o.filter(function(b){return typeof b.parent_id>"u"}),l=c.length>0?c.reduce(function(b,w){return w.position>b?w.position:b},-1/0)+1:0,[4,t.create(n,{data:ue(ue({},i),{parent_id:null,position:l}),meta:u})];case 2:return s=f.sent().data,[2,{data:ue(ue({},s),{children:[]})}]}})})},"addRootNode")})},"fixFakeRestDataProvider"),_t=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Qt=d(function(t,a){var e,n=t.filter(function(c){return c.id!==a.id}),r=n.find(function(c){var l;return(l=c.children)===null||l===void 0?void 0:l.includes(a.id)});if(r&&(r.children=(e=r.children)===null||e===void 0?void 0:e.filter(function(c){return c!==a.id})),!a.children||a.children.length===0)return n;var o=Ut(n,a);return n=n.filter(function(c){return!o.includes(c)}),n},"removeNode"),Ut=d(function(t,a){return a?!a.children||a.children.length===0?[]:_t(_t([],a.children,!0),a.children.flatMap(function(e){var n=t.find(function(r){return r.id===e});return n?Ut(t,n):[]}),!0):[]},"getNodeChildrenRecursive"),Je=function(){return Je=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Je.apply(this,arguments)},Gt=d(function(t){var a=t.mutationMode,e=t.mutationOptions,n=t.redirect,r=n===void 0?"list":n,o=Ae(),c=Ke(),l=Nt(),s=ee(t);if(s==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=ce(t);if(i==null)throw new Error("The useDeleteBranchWithConfirmController hook must be used inside a RecordContext or must be passed a record prop.");var u=Wt(),f=u[0],b=u[1].isPending,w=D.useState(!1),x=w[0],S=w[1],_=st().setFinalData,g=D.useCallback(function(y){y.stopPropagation(),f(s,{id:i.id,previousData:i},Je({mutationMode:a,onSuccess:d(function(){o("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1}}),c(r,s),a==="pessimistic"?l():_&&_(function(m){return Qt(m,i)})},"onSuccess"),onError:d(function(m){o(typeof m=="string"?m:m.message||"ra.notification.http_error",{type:"warning"})},"onError")},e))},[f,a,e,o,i,c,r,l,s,_]),h=d(function(y){y.stopPropagation(),S(!0)},"handleDialogOpen"),v=d(function(y){y.stopPropagation(),S(!1)},"handleDialogClose");return{handleDelete:g,handleDialogOpen:h,handleDialogClose:v,isPending:b,open:x}},"useDeleteBranchWithConfirmController"),Ye=function(){return Ye=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ye.apply(this,arguments)},zt=d(function(t){var a=t.mutationOptions,e=t.redirect,n=e===void 0?"list":e,r=Ae(),o=Ke(),c=st().setFinalData,l=ee(t);if(l==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a ResourceContext or must be passed a resource prop.");var s=ce(t);if(s==null)throw new Error("The useDeleteBranchWithUndoController hook must be used inside a RecordContext or must be passed a record prop.");var i=Wt(),u=i[0],f=i[1].isPending,b=D.useCallback(function(w){w.stopPropagation(),u(l,{id:s.id,previousData:s},Ye({onSuccess:d(function(){r("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),c&&c(function(x){return Qt(x,s)}),o(n,l)},"onSuccess"),onError:d(function(x){return r(typeof x=="string"?x:x.message||"ra.notification.http_error",{type:"warning"})},"onError"),mutationMode:"undoable"},a))},[u,a,r,s,o,n,l,c]);return{handleDelete:b,isPending:f}},"useDeleteBranchWithUndoController"),_e=function(){return _e=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_e.apply(this,arguments)},sr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},lr=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},fr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},vr=d(function(t){var a=t.disableAuthentication,e=t.record,n=e===void 0?{}:e,r=t.redirect,o=t.mutationOptions,c=o===void 0?{}:o,l=t.transform;Et({enabled:!a});var s=ee(t);if(s==null)throw new Error("The useCreateNodeController hook must be used inside a ResourceContext or must be passed a resource prop.");var i=ut(),u=Se(),f=vn(),b=st().handleAddNode,w=f.state&&f.state.parentId,x=f.state&&f.state.insertAsFirstChild,S=typeof w<"u"&&w!==null,_=f.state&&f.state.record||n,g=c.onSuccess,h=c.onError,v=fr(c,["onSuccess","onError"]),y=ct(t),m=y.hasEdit,O=y.hasShow,C=r||hr(O,m),j=nr(s,void 0,v),p=j[0],N=j[1],P=hn(s,void 0,v),$=P[0],R=P[1],T=yn(b??yr);D.useEffect(function(){return T({record:{},parentId:w,insertAsFirstChild:x}),function(){T(void 0)}},[T,w,x]);var A=ye(),M=Ae(),I=Ke(),q=D.useCallback(function(F,te){var B=te===void 0?{}:te,K=B.onSuccess,W=B.onError,L=B.transform,z=d(function(V){M("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),I(C,s,V.id,V),u.refetchQueries({queryKey:[s,"getTree"],type:"active"}),u.refetchQueries({queryKey:[s,"getRootNodes"],type:"active"})},"defaultOnSuccess"),Y=d(function(V){M(typeof V=="string"?V:V.message||"ra.notification.http_error",{type:"error"})},"defaultOnError");return Promise.resolve(L?L(F):l?l(F):F).then(function(V){return sr(void 0,void 0,void 0,function(){var H,Q,X;return lr(this,function(J){switch(J.label){case 0:H={onSuccess:d(function(ie,De,me){T(void 0),K?K(ie,De,me):g?g(ie,De,me):z(ie)},"onSuccess"),onError:W||h||Y},J.label=1;case 1:return J.trys.push([1,6,,7]),S?[4,$(s,{data:V,parentId:w,meta:v.meta,position:x?0:void 0},_e(_e({},H),{returnPromise:!0}))]:[3,3];case 2:return J.sent(),[3,5];case 3:return[4,p(s,{data:V,meta:v.meta},_e(_e({},H),{returnPromise:!0}))];case 4:J.sent(),J.label=5;case 5:return[3,7];case 6:return Q=J.sent(),(Q instanceof gn||typeof Q=="object"&&Q!==null&&Q.hasOwnProperty("body"))&&((X=Q.body)===null||X===void 0?void 0:X.errors)!=null?[2,Q.body.errors]:[3,7];case 7:return[2]}})})})},[$,p,T,S,M,h,g,w,u,I,s,l,v.meta,C,x]),k=i(s,1),G=A("ra.page.create",{name:"".concat(k)});return{isLoading:!1,isFetching:!1,defaultTitle:G,save:q,saving:N.isPending||R.isPending,isPending:N.isPending||R.isPending,resource:s,record:_,redirect:C}},"useCreateNodeController"),hr=d(function(t,a){return a?"edit":t?"show":"list"},"getDefaultRedirectRoute"),yr=d(function(){},"noop"),gr=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},Vt=d(function(t,a){var e=a.find(function(n){return n.id==t});return e?gr([e.id.toString()],(e.children||[]).flatMap(function(n){return Vt(n,a)}),!0):[]},"getNodeKeysRecursively"),ve=function(){return ve=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ve.apply(this,arguments)},Ot=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},xt=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ct=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},le=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},mr=d(function(t){var a=ye(),e=ee(t);if(e==null)throw new Error("The useTreeController hook must be used inside a ResourceContext or must be passed a resource prop.");var n=ut(),r=t.lazy,o=r===void 0?!1:r,c=t.filter,l=c===void 0?{}:c,s=t.mutationMode,i=s===void 0?"undoable":s,u=t.meta,f=kt(e,{filter:l,meta:u},{enabled:!o}),b=mn(e,{filter:l,meta:u},{enabled:o,gcTime:0}),w=ar(e,{meta:u}),x=D.useMemo(function(){var B;return(B=b.data)===null||B===void 0?void 0:B.map(function(K){var W=K.children,L=Ct(K,["children"]);return W!=null&&W.length?L:K})},[b.data,b.isFetching]),S=o?ve(ve({},b),{data:x}):f,_=S.data,g=S.error,h=S.isLoading,v=S.isPending,y=S.isFetching,m=D.useState(_),O=m[0],C=m[1],j=D.useCallback(function(B){return Ot(void 0,void 0,void 0,function(){var K;return xt(this,function(W){switch(W.label){case 0:return[4,w(B)];case 1:return K=W.sent(),C(function(L){var z,Y=K.map(function(Q){var X=Q.children,J=Ct(Q,["children"]),ie=L==null?void 0:L.some(function(De){var me;return(me=Q.children)===null||me===void 0?void 0:me.includes(De.id)});return X!=null&&X.length&&!ie?J:Q}),V=le(le([],(z=L==null?void 0:L.map(function(Q){return Q.id===B?ve(ve({},Q),{children:Y.map(function(X){return X.id})}):Q}))!==null&&z!==void 0?z:[],!0),Y,!0),H=V.reduce(function(Q,X){return Q[X.id]=X,Q},{});return Object.values(H)}),[2]}})})},[w]);D.useEffect(function(){C(_)},[_]);var p=D.useState(),N=p[0],P=p[1],$=D.useCallback(function(B){var K,W=Te(O);if(B){if(P(B),B.parentId!=null){var L=W==null?void 0:W.find(function(Y){return Y.id===B.parentId});L&&(L.children=L.children||[],L.children=B.insertAsFirstChild?le([we],L.children,!0):le(le([],L.children,!0),[we],!1))}C(le(le([],W??[],!0),[ve({id:we,children:[]},B.record)],!1))}else{if(!N)return;var z=Te(O);if(N.parentId!=null){var L=z==null?void 0:z.find(function(V){return V.id===N.parentId});L&&(L.children=(K=L.children)===null||K===void 0?void 0:K.filter(function(V){return V!=we}))}P(void 0),C(z==null?void 0:z.filter(function(Y){return Y.id!==we}))}},[O,N]),R=Rt(),T=R[0],A=R[1],M=D.useCallback(function(B){A(function(K){var W,L,z=typeof B=="function"?B(K??[]):B,Y=(W=K==null?void 0:K.filter(function(H){return!z.includes(H)}))!==null&&W!==void 0?W:[],V=(L=Y==null?void 0:Y.flatMap(function(H){return Vt(H,O??[])},[]))!==null&&L!==void 0?L:[];return z.filter(function(H){return!V.includes(H)})})},[O,A]),I=ur(e,{meta:u})[0],q=dr(e,{meta:u})[0],k=or(e),G=Ae(),F=D.useCallback(function(B){var K,W=B.node.key,L=B.dragNode.key,z=B.node.pos.split("-"),Y=B.dropPosition-Number(z[z.length-1]),V=(K=_==null?void 0:_.reduce(function(J,ie){return J[ie.id]=ie,J},{}))!==null&&K!==void 0?K:{},H=V[L],Q=V[W],X=d(function(){return Ot(void 0,void 0,void 0,function(){return xt(this,function(J){switch(J.label){case 0:return[4,k()];case 1:return J.sent(),G("ra-tree.item_moved",{undoable:i==="undoable"}),[2]}})})},"successSideEffect");B.dropToGap?(B.node.children||[]).length>0&&B.node.expanded&&Y===1?I(e,{source:H,destination:Q,position:Q.children.length},{onSuccess:X,mutationMode:i}):q(e,{source:H,destination:Q,position:B.dropPosition},{onSuccess:X,mutationMode:i}):I(e,{source:H,destination:Q,position:0},{onSuccess:X,mutationMode:i})},[_,I,q,i,G,k,e]),te=a("ra.page.list",{name:n(e,2)});return{data:O,defaultTitle:te,error:g,expandedKeys:T,handleAddNode:$,handleDrop:F,handleExpand:M,isLoading:h,isFetching:y,isPending:v,loadChildNodes:j,newNode:N,lazy:o,setFinalData:C}},"useTreeController"),Xt=D.createContext(void 0),qe=function(){return qe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qe.apply(this,arguments)},Ht=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},br=d(function(t){var a=t.label,e=t.multiple,n=t.sx,r=t.className,o=t.helperText,c=t.fullWidth,l=Ht(t,["label","multiple","sx","className","helperText","fullWidth"]),s=Sr(t),i=s.data,u=s.resource,f=s.source,b=s.fetchError,w=s.isLoading,x=s.isRequired,S=s.field,_=s.fieldState,g=s.formState,h=s.defaultValue,v=_.isTouched,y=_.invalid,m=_.error,O=g.isSubmitted,C=ye();return b?E.jsx(Ge,{className:r,sx:n,"data-testid":"error",children:E.jsx(We,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(bn,{color:"error.main",children:C("ra-tree.treeSelectInput.fetchError",{_:"Error fetching tree data"})})})}):w||!i?E.jsx(Ge,{className:r,sx:n,"data-testid":"loading",children:E.jsx(We,{label:a,source:f,resource:u,fullWidth:c,children:E.jsx(wn,{})})}):E.jsxs(Ge,{className:r,sx:n,children:[E.jsx(We,{htmlFor:f,className:St.label,color:(v||O)&&y?"error":void 0,label:a,source:f,resource:u,isRequired:x,fullWidth:c,children:E.jsx(wr,qe({source:f,multiple:e,className:St.tree,field:S,defaultValue:h,fullWidth:c},l,{data:i}))}),(v||O)&&m||o?E.jsx(pn,{error:(v||O)&&!!m,children:E.jsx(_n,{error:m==null?void 0:m.message,helperText:o})}):null]})},"TreeInput"),Ze="RaTreeInput",St={label:"".concat(Ze,"-label"),tree:"".concat(Ze,"-tree")},Ge=ge(On,{name:Ze,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),wr=d(function(t){var a=t.data,e=t.multiple,n=t.field,r=t.checkStrictly,o=r===void 0?!0:r,c=t.expandAction,l=c===void 0?!1:c,s=t.defaultValue,i=Ht(t,["data","multiple","field","checkStrictly","expandAction","defaultValue"]),u=(n==null?void 0:n.value)||(e?[]:""),f=s||(e?[]:""),b=d(function(x,S){var _=S.checkedNodes.filter(function(h){return o?x.checked.includes(h.key):x.includes(h.key)}),g=_.map(function(h){return h.id});n==null||n.onChange(g)},"handleCheck"),w=d(function(x,S){var _=x&&x.length>0?S.node.id:"";n==null||n.onChange(_)},"handleSelect");return E.jsx(Mt,qe({},i,{checkStrictly:o,expandAction:l,checkable:e,selectable:!e,checkedKeys:e?u.map(String):[],selectedKeys:e?[]:[String(u)],defaultCheckedKeys:e?f.map(String):void 0,defaultSelectedKeys:e?void 0:[String(f)],defaultExpandedKeys:e?f.map(String):[String(f)],onCheck:b,onSelect:w,data:a,onBlur:n==null?void 0:n.onBlur}))},"TreeInputTree"),pr=d(function(t){var a=t.reference,e=t.source,n=t.meta,r=kt(a,{meta:n}),o=r.data,c=r.error,l=r.isLoading,s=r.isFetching;return{source:e,resource:a,data:o,error:c??void 0,isLoading:l,isFetching:s}},"useReferenceNodeInputController"),_r=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},ua=d(function(t){var a=t.children,e=a===void 0?E.jsx(br,{}):a,n=pr(t),r=n.resource,o=_r(n,["resource"]);return E.jsx(xn,{value:r,children:E.jsx(Or,{value:o,children:e})})},"ReferenceNodeInput"),Or=d(function(t){var a=t.children,e=t.value;return E.jsx(Xt.Provider,{value:e,children:a})},"TreeChoicesContextProvider"),xr=d(function(){return D.useContext(Xt)||{}},"useTreeChoicesContext"),Be=function(){return Be=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Be.apply(this,arguments)},Cr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Sr=d(function(t){var a=t.source,e=t.data;t.hideRootNodes;var n=Cr(t,["source","data","hideRootNodes"]),r=ee(t);if(r==null)throw new Error("The useTreeInputController hook must be used inside a ResourceContext or must be passed a resource prop.");var o=ce(t),c=xr(),l=c.source,s=c.data,i=c.isLoading,u=c.isFetching,f=c.error,b=e??s,w=a??l;if(w==null)throw new Error("The useTreeInputController hook must be used inside a ReferenceNodeInput or have a source prop");var x=Cn(Be(Be({},n),{resource:r,source:w,type:"text"})),S=x.isRequired,_=x.field,g=x.fieldState,h=x.formState,v=Sn(o,w,t.defaultValue);return{resource:r,source:w,data:b??[],fetchError:f,isLoading:i,isFetching:u,isRequired:S,field:_,fieldState:g,formState:h,defaultValue:v}},"useTreeInputController"),jr=d(function(t){var a=t.children,e=t.value;return E.jsx(jn.Provider,{value:e,children:a})},"TreeContextProvider"),Fe=function(){return Fe=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Fe.apply(this,arguments)},ca=d(function(t){var a=vr(t);return E.jsx(En,{value:a,children:E.jsx(Nn,Fe({},t,a))})},"CreateNode"),et=function(){return et=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},et.apply(this,arguments)},jt=function(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))},da=d(function(t){var a=t.id,e=Pt().id;if(!e&&!a)throw new Error("ShowNode requires an id prop or a route with an /:id? parameter.");var n=a||decodeURIComponent(e),r=Rt(),o=r[1];D.useEffect(function(){o(function(l){var s=n.toString();return Array.isArray(l)?l.includes(s)?l:jt(jt([],l,!0),[s],!1):[s]})},[t.resource,n,o]);var c=Wn(t);return E.jsx(Qn,{value:c,children:E.jsx(Jn,et({},t))})},"ShowNode"),ft={},Er=An;Object.defineProperty(ft,"__esModule",{value:!0});var Jt=ft.default=void 0,Nr=Er(Pn()),Pr=E;Jt=ft.default=(0,Nr.default)((0,Pr.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var tt=function(){return tt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tt.apply(this,arguments)},Ar=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Dr=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.label,l=c===void 0?"ra.action.delete":c,s=t.mutationMode,i=t.onClick;t.record,t.resource;var u=t.ref,f=t.redirect,b=f===void 0?"list":f,w=Ar(t,["className","confirmTitle","confirmContent","label","mutationMode","onClick","record","resource","ref","redirect"]),x=ee(t);if(!x)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a ResourceContext or must be passed a resource prop.");var S=ce(t);if(!S)throw new Error("The DeleteMenuItemWithConfirmation component must be used inside a RecordContext or must be passed a record prop.");var _=Gt({mutationMode:s,record:S,resource:x,redirect:b}),g=_.handleDelete,h=_.handleDialogClose,v=_.handleDialogOpen,y=_.isPending,m=_.open,O=ye(),C=d(function(j){j.stopPropagation(),i&&i(j),j.isDefaultPrevented()||v(j)},"handleClick");return E.jsxs(E.Fragment,{children:[E.jsx(Tt,tt({className:a,onClick:C,ref:u},w,{children:O(l,{_:l})})),E.jsx($t,{isOpen:m,loading:y,title:n,content:o,translateOptions:{name:qt(O("resources.".concat(x,".name"),{smart_count:1,_:Bt(x)}),!0),id:S.id},onConfirm:g,onClose:h})]})},"DeleteMenuItemWithConfirmation"),nt=function(){return nt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},nt.apply(this,arguments)},kr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Rr=d(function(t){var a=t.className,e=t.label,n=e===void 0?"ra.action.delete":e;t.mutationMode;var r=t.onClick;t.record;var o=t.ref;t.resource;var c=t.redirect,l=c===void 0?"list":c,s=kr(t,["className","label","mutationMode","onClick","record","ref","resource","redirect"]),i=ee(t);if(!i)throw new Error("The DeleteMenuItemWithUndo component must be used inside a ResourceContext or must be passed a resource prop.");var u=ce(t);if(!u)throw new Error("The DeleteMenuItemWithUndo component must be used inside a RecordContext or must be passed a record prop.");var f=zt({record:u,resource:i,redirect:l}),b=f.handleDelete,w=f.isPending,x=ye(),S=d(function(_){_.stopPropagation(),r&&r(_),_.isDefaultPrevented()||b(_)},"handleClick");return E.jsx(Tt,nt({className:a,disabled:w,onClick:S,ref:o},s,{children:x(n,{_:n})}))},"DeleteMenuItemWithUndo"),Le=function(){return Le=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Le.apply(this,arguments)},Mr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Yt=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a,n=Mr(t,["mutationMode"]);return e==="undoable"?E.jsx(Rr,Le({},n,{mutationMode:e})):E.jsx(Dr,Le({},n,{mutationMode:e}))},"DeleteMenuItem");Yt.displayName="DeleteMenuItem";var Tr=D.createContext(null),$r=Tr.Provider,qr=d(function(t){var a=t.children,e=a===void 0?E.jsx(Yt,{}):a,n=t.className,r=D.useState(null),o=r[0],c=r[1],l=d(function(u){u.stopPropagation(),c(u.currentTarget)},"handleClick"),s=D.useCallback(function(u){u.stopPropagation(),c(null)},[]),i=D.useMemo(function(){return{close:s}},[s]);return E.jsxs(Lr,{className:n,children:[E.jsx("button",{className:Br.menuButton,onClick:l,children:E.jsx(Jt,{})}),E.jsx(Dn,{anchorEl:o,open:!!o,onClose:s,children:E.jsx($r,{value:i,children:e})})]})},"NodeActions"),Zt="RaNodeActions",Br={menuButton:"".concat(Zt,"-menuButton")},Lr=ge("div",{name:Zt,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(){return{}}),rt=function(){return rt=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},rt.apply(this,arguments)},Ir=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Kr=d(function(t){var a=t.label,e=a===void 0?"ra.action.delete":a,n=t.className,r=t.icon,o=r===void 0?Qr:r,c=t.onClick;t.resource,t.record;var l=t.redirect,s=l===void 0?"list":l,i=Ir(t,["label","className","icon","onClick","resource","record","redirect"]),u=ee(t);if(!u)throw new Error("The DeleteBranchWithUndoButton component must be used inside a ResourceContext or must be passed a resource prop.");var f=ce(t);if(!f)throw new Error("The DeleteBranchWithUndoButton component must be used inside a RecordContext or must be passed a record prop.");var b=zt({resource:u,record:f,redirect:s}),w=b.handleDelete,x=b.isPending,S=d(function(_){c&&c(_),_.isDefaultPrevented()||w(_)},"handleClick");return E.jsx(Wr,rt({onClick:S,disabled:x,label:e,className:Pe("ra-delete-button",n)},i,{children:o}),"button")},"DeleteBranchWithUndoButton"),Wr=ge(Lt,{name:"RaDeleteBranchWithUndoButton",overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a=t.theme;return{color:a.palette.error.main,"&:hover":{backgroundColor:It(a.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}),Qr=E.jsx(Kt,{}),at=function(){return at=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},at.apply(this,arguments)},Ur=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Gr=d(function(t){var a=t.className,e=t.confirmTitle,n=e===void 0?"ra.message.delete_title":e,r=t.confirmContent,o=r===void 0?"ra.message.delete_content":r,c=t.icon,l=c===void 0?zr:c,s=t.label,i=s===void 0?"ra.action.delete":s,u=t.mutationMode,f=t.onClick;t.record,t.resource;var b=t.redirect,w=b===void 0?"list":b,x=Ur(t,["className","confirmTitle","confirmContent","icon","label","mutationMode","onClick","record","resource","redirect"]),S=ye(),_=ee(t);if(!_)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a ResourceContext or must be passed a resource prop.");var g=ce(t);if(!g)throw new Error("The DeleteBranchWithConfirmButton component must be used inside a RecordContext or must be passed a record prop.");var h=Gt({mutationMode:u,resource:_,record:g,redirect:w}),v=h.handleDelete,y=h.handleDialogClose,m=h.handleDialogOpen,O=h.isPending,C=h.open,j=d(function(p){f&&f(p),p.isDefaultPrevented()||m(p)},"handleClick");return E.jsxs(Vr,{className:a,children:[E.jsx(Lt,at({onClick:j,label:i,className:Pe("ra-delete-button",en.deleteButton)},x,{children:l}),"button"),E.jsx($t,{isOpen:C,loading:O,title:n,content:o,translateOptions:{name:S("resources.".concat(_,".forcedCaseName"),{smart_count:1,_:qt(S("resources.".concat(_,".name"),{smart_count:1,_:Bt(_)}),!0)}),id:g.id},onConfirm:v,onClose:y})]})},"DeleteBranchWithConfirmButton"),zr=E.jsx(Kt,{}),Ft="RaDeleteBranchWithConfirmButton",en={deleteButton:"".concat(Ft,"-deleteButton")},Vr=ge("div",{name:Ft})(function(t){var a,e=t.theme;return a={},a["& .".concat(en.deleteButton)]={color:e.palette.error.main,"&:hover":{backgroundColor:It(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},a}),Ie=function(){return Ie=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ie.apply(this,arguments)},Xr=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},Hr=d(function(t){var a=t.mutationMode,e=a===void 0?"undoable":a;t.record;var n=Xr(t,["mutationMode","record"]),r=ce(t),o=kn();if(!r||r.id==null)return null;var c=e||(o!=null&&o.mutationMode?o.mutationMode:"undoable");return c==="undoable"?E.jsx(Kr,Ie({record:r},n)):E.jsx(Gr,Ie({mutationMode:c,record:r},n))},"DeleteBranchButton"),ot=function(){return ot=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ot.apply(this,arguments)},Jr=function(t,a,e,n){function r(o){return o instanceof e?o:new e(function(c){c(o)})}return d(r,"adopt"),new(e||(e=Promise))(function(o,c){function l(u){try{i(n.next(u))}catch(f){c(f)}}d(l,"fulfilled");function s(u){try{i(n.throw(u))}catch(f){c(f)}}d(s,"rejected");function i(u){u.done?o(u.value):r(u.value).then(l,s)}d(i,"step"),i((n=n.apply(t,a||[])).next())})},Yr=function(t,a){var e={label:0,sent:d(function(){if(o[0]&1)throw o[1];return o[1]},"sent"),trys:[],ops:[]},n,r,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(i){return function(u){return s([i,u])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(e=0)),e;)try{if(n=1,r&&(o=i[0]&2?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,r=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=a.call(t,e)}catch(u){i=[6,u],r=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},tn=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},be,sa=d(function(t){var a=t.allowMultipleRoots,e=a===void 0?!1:a,n=t.className,r=t.create,o=t.edit,c=t.filter,l=t.hideRootNodes,s=t.lazy,i=s===void 0?!1:s,u=t.linkTo,f=u===void 0?"edit":u,b=t.nodeActions,w=b===void 0?E.jsx(qr,{}):b,x=t.show,S=t.showLine,_=t.sx,g=t.title,h=t.titleField,v=h===void 0?"title":h,y=t.addRootButton,m=y===void 0?E.jsx(Rn,{label:"ra-tree.action.add_root",sx:{marginTop:".75rem"}}):y,O=t.meta;t.expandedKeys;var C=tn(t,["allowMultipleRoots","className","create","edit","filter","hideRootNodes","lazy","linkTo","nodeActions","show","showLine","sx","title","titleField","addRootButton","meta","expandedKeys"]),j=ee(C);if(j==null)throw new Error("The TreeWithDetails hook must be used inside a ResourceContext or must be passed a resource prop.");var p=Mn(),N=Tn(),P=Qe("/".concat(j,"/create")),$=Qe("/".concat(j,"/:id")),R=Qe("/".concat(j,"/:id/show")),T=D.useMemo(function(){if(P)return[we];if($)return[$.params.id];if(R)return[R.params.id]},[P,$,R]),A=mr({lazy:i,resource:j,filter:c,meta:O}),M=A.data,I=A.defaultTitle,q=A.handleExpand,k=A.isPending,G=A.loadChildNodes,F=A.handleDrop,te=A.expandedKeys,B=D.useCallback(function(L,z){p(N({resource:j,id:z.id,type:f}))},[N,f,p,j]),K=D.useCallback(function(L){return Jr(void 0,void 0,void 0,function(){return Yr(this,function(z){return i?[2,G(L.record.id)]:[2,Promise.resolve()]})})},[i,G]);if(k)return null;var W=!M||M.length===0||e;return E.jsx(jr,{value:A,children:E.jsxs(Fr,{className:n,sx:_,children:[E.jsx("div",{className:he.cardTree,children:E.jsx(Dt,{children:E.jsxs($n,{className:he.cardContentTree,children:[E.jsx(Mt,ot({data:M,hideRootNodes:l,titleField:v,onDrop:F,onExpand:q,onClick:B,selectedKeys:T,showLine:S,nodeActions:w,loadData:i?K:void 0,loadedKeys:void 0,expandAction:!1,expandedKeys:te},Zr(C))),W?m:null]})})}),E.jsx("div",{className:he.actionCard,children:E.jsxs(qn,{children:[r?E.jsx(ke,{path:"create/*",element:D.isValidElement(r)?r:E.jsx(r,{})}):null,x?E.jsx(ke,{path:":id/show/*",element:D.isValidElement(x)?x:E.jsx(x,{})}):null,o?E.jsx(ke,{path:":id/*",element:D.isValidElement(o)?o:E.jsx(o,{})}):null,g!==!1?E.jsx(ke,{path:"*",element:E.jsx(At,{title:g,defaultTitle:I})}):null]})})]})})},"TreeWithDetails"),Zr=d(function(t){t.basePath,t.history,t.location,t.match,t.options,t.hasList,t.hasEdit,t.hasShow,t.hasCreate,t.syncWithLocation;var a=tn(t,["basePath","history","location","match","options","hasList","hasEdit","hasShow","hasCreate","syncWithLocation"]);return a},"sanitizeRestProps"),Ne="RaTreeWithDetails",he={container:"".concat(Ne,"-container"),cardTree:"".concat(Ne,"-cardTree"),cardContentTree:"".concat(Ne,"-cardContentTree"),actionCard:"".concat(Ne,"-actionCard")},Fr=ge("div",{name:Ne,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})((be={display:"flex"},be["& .".concat(he.actionCard)]={width:"100%"},be["& .".concat(he.cardTree)]={minWidth:"300px",marginTop:"1em",marginRight:"1em"},be["& .".concat(he.cardContentTree)]={},be["& .".concat(he.container)]={display:"flex"},be)),it=function(){return it=Object.assign||function(t){for(var a,e=1,n=arguments.length;e<n;e++){a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},it.apply(this,arguments)},ea=function(t,a){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(e[n[r]]=t[n[r]]);return e},la=d(function(t){var a,e=t.children,n=t.className,r=t.resource,o=ea(t,["children","className","resource"]),c=Bn(function(l){return l.breakpoints.down("sm")});return E.jsx(ta,it({className:Pe((a={},a[xe.mobileToolbar]=c,a[xe.desktopToolbar]=!c,a),n),role:"toolbar"},o,{children:D.Children.count(e)===0?E.jsxs("div",{className:xe.defaultToolbar,children:[E.jsx(Ln,{}),E.jsx(Hr,{resource:r})]}):e}))},"EditNodeToolbar"),Me="RaEditNodeToolbar",xe={desktopToolbar:"".concat(Me,"-desktopToolbar"),mobileToolbar:"".concat(Me,"-mobileToolbar"),defaultToolbar:"".concat(Me,"-defaultToolbar")},ta=ge(In,{name:Me,overridesResolver:d(function(t,a){return a.root},"overridesResolver")})(function(t){var a,e=t.theme;return a={backgroundColor:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900]},a["&.".concat(xe.desktopToolbar)]={},a["&.".concat(xe.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},a["& .".concat(xe.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},a});export{ha as AddChildButton,ca as CreateNode,Hr as DeleteBranchButton,Gr as DeleteBranchWithConfirmButton,Kr as DeleteBranchWithUndoButton,Yt as DeleteMenuItem,Dr as DeleteMenuItemWithConfirmation,Rr as DeleteMenuItemWithUndo,en as DeleteWithConfirmButtonClasses,ya as EditNode,la as EditNodeToolbar,xe as EditNodeToolbarClasses,qr as NodeActions,ga as NodeEditActions,ua as ReferenceNodeInput,da as ShowNode,Mt as Tree,Xt as TreeChoicesContext,Or as TreeChoicesContextProvider,jn as TreeContext,jr as TreeContextProvider,br as TreeInput,St as TreeInputClasses,wr as TreeInputTree,sa as TreeWithDetails,he as TreeWithDetailsClasses,we as UNSAVED_NEW_NODE,ma as addTreeMethodsBasedOnChildren,aa as addTreeMethodsBasedOnParentAndPosition,ln as deleteBranchByDeletingAllChildren,sn as deleteBranchByDeletingNode,ia as fixFakeRestDataProvider,ba as getRCTree,wa as getRCTreeDatum,pa as getRecordTree,_a as getRootAndChildNodes,Oa as raTreeLanguageEnglish,xa as raTreeLanguageFrench,oa as removeChildren,Ca as renderSwitcherIcon,fn as updateQueryCacheFromGetTree,hn as useAddChildNode,nr as useAddRootNode,vr as useCreateNodeController,Wt as useDeleteBranch,Gt as useDeleteBranchWithConfirmController,zt as useDeleteBranchWithUndoController,Sa as useEditNodeController,Rt as useExpandedKeys,ar as useGetChildNodesCallback,mn as useGetRootNodes,kt as useGetTree,or as useGetTreeCallback,ur as useMoveAsNthChildOf,dr as useMoveAsNthSiblingOf,pr as useReferenceNodeInputController,xr as useTreeChoicesContext,st as useTreeContext,mr as useTreeController,Sr as useTreeInputController};
//# sourceMappingURL=index-88bfCSnO.js.map
